window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},function(){function a(a,b){this.start(a,b)}function b(){function b(){var a;f.length>0&&(a=f.shift(),a.context.animateSlider(a.target,a.callback))}var c=a,d="prototype",e=!1,f=[],g=lpTag.taglets.utils;"undefined"!=typeof lpTag.taglets.baseUIOffer&&c[d].extended!==!0&&(c[d]=lpTag.taglets.baseUIOffer.createInstance(),c[d].extended=!0,c[d].constructor=c,c[d].start=function(a,b){this.init(a,b),this.setConfig(b),this.run()},c[d].SLIDER_DISPLAY_STATE={MINIMIZED:0,OPEN:1},c[d].setConfig=function(a,b){this.debugLog("in _setConfig.."),this.setEngagementConf(a),this.validateConf(a,["position","effects"]),this.conf.displayStartState=a.effects&&a.effects.displayStartState||this.SLIDER_DISPLAY_STATE.MINIMIZED},c[d].createOffer=function(){try{this.totalDimensions=this.calcTotalDimensions(),this.initAnimationData(),this.getOfferHTML(this.setupOffer)}catch(a){this.errorLog("Error creating slider ["+a+"]")}},c[d].setupOffer=function(a){this.containerId=a,this.attachEvents(),this.showOffer(),this.debugLog("new slider rendered at:"+(new Date).getTime()+"(number of milliseconds since 1970/01/01)")},c[d].calcTotalDimensions=function(){var a=parseInt(this.activeState.size.height,10)+2*this.activeState.border.width,b=parseInt(this.activeState.size.width,10)+2*this.activeState.border.width,c={height:a,width:b};return c},c[d].initAnimationData=function(){var a=this.location.horizontal,b="width";this.animation={prop:a,openVal:0,minimizedVal:-parseInt(this.totalDimensions[b],10),state:this.conf.displayStartState,fn:lpTag.taglets.lpAnimate}},c[d].getOfferHTML=function(a){var b=this.getContainerDom();if(b){var c=this.createSubContainer();this.subContainerDom=c,this.subContainerId=c.id,this.slideOutPinAlt=this.activeState.elements.slideOutPins[0].alt,this.appendSlidePinTopLayer(b),this.appendChildElements(c),b.appendChild(c),this.disableSubContainerNavigation(!0),this.setAriaExpanded("false"),this.appendToPage(a,b)}else this.errorLog("Error creating offer container")},c[d].getContainerDom=function(){var a=this.getContainerConf();return a.engagementType="LPM"+this.getEngagementTypeName(this.conf.type),this.convertJsonToDom({containers:a})[0]},c[d].disableSubContainerNavigation=function(a){this.subContainerDom.setAttribute("tabindex",a?"-1":"0"),this.subContainerDom.setAttribute("aria-hidden",a);for(var b=this.subContainerDom.children,c=0;c<b.length;c++)b[c].className.indexOf("LPMslideOutPin")>-1||(b[c].style.visibility=a?"hidden":"visible");a?(this.subContainerDom.removeAttribute("role"),this.subContainerDom.removeAttribute("aria-label")):(this.subContainerDom.setAttribute("role","button"),this.subContainerDom.setAttribute("aria-label",this.activeState.alt))},c[d].appendSlidePinTopLayer=function(a){var b,c;c=this.createSlidePinTopLayer(),c.isSubContainer=!0,c.isClickable=!0,b=this.convertJsonToDom({containers:c})[0],b.setAttribute("role","button"),b.setAttribute("tabindex","0"),this.slideOutPinAlt&&b.setAttribute("aria-label",this.slideOutPinAlt),this.slidePinTopLayer=b,a.appendChild(b)},c[d].appendChildElements=function(a){this.addElements(a,this.activeState.elements)},c[d].createSubContainer=function(){return this.convertJsonToDom({containers:{css:{width:"100%",height:"100%"},isSubContainer:!0,isClickable:!0}})[0]},c[d].createSlidePinTopLayer=function(){var a={css:{},events:{}},b=this.activeState.elements.slideOutPins[0];for(var c in b.css)a.css[c]=b.css[c];for(c in b.events)a.events[c]=b.events[c];return a.css.backgroundImage="",a.css.borderColor="transparent",a.css.position="absolute",a.css.cursor="pointer",a.css.zIndex=99999,a},c[d].getContainerConf=function(){var a={position:"fixed",display:"none",zIndex:this.conf.zIndex};return a=this.extractCssProps(this.activeState,["background","border"],a),a=this.extendObj(a,this.getCoordinates()),{css:a}},c[d].getCoordinates=function(){var a,b=this.totalDimensions,c=lpTag.taglets.utils.getPageDimensions(),d=10,e=150,f=-b.width-e,g={"top left":{left:f,top:d},"top right":{right:f,top:d},"middle left":{left:f,top:(c.windowHeight-b.height)/2},"middle right":{right:f,top:(c.windowHeight-b.height)/2},"bottom left":{left:f,bottom:d},"bottom right":{right:f,bottom:d}},h=(this.location.vertical+" "+this.location.horizontal).toLowerCase();return a=g[h]||{}},c[d].attachEvents=function(){this.setEngagementClickEvent(this.getObj(this.subContainerId),this.offerClick,this),this.setClickEvent(this.slidePinTopLayer,this.sliderClicked,this)},c[d].sliderClicked=function(){this.animation.state==this.SLIDER_DISPLAY_STATE.MINIMIZED?(this.onExpanded({expanded:!0,userInit:!0}),this.disableSubContainerNavigation(!1),this.animateOpen()):(this.onExpanded({expanded:!1,userInit:!0}),this.animateMinimize())},c[d].showOffer=function(){this.show(),this.animateStart(),this.onImpression()},c[d].animateStart=function(){this.animation.state==this.SLIDER_DISPLAY_STATE.OPEN?this.animateOpen("easeInQuart"):this.animateMinimize("easeInQuart")},c[d].animateOpen=function(a){this.animateSlider(this.animation.openVal,this.OnAnimateOpenEnd)},c[d].animateMinimize=function(){this.animateSlider(this.animation.minimizedVal,this.OnAnimateMinimizeEnd)},c[d].OnAnimateOpenEnd=function(){this.animation.state=this.SLIDER_DISPLAY_STATE.OPEN,this.setAriaExpanded("true")},c[d].OnAnimateMinimizeEnd=function(){this.animation.state=this.SLIDER_DISPLAY_STATE.MINIMIZED,this.disableSubContainerNavigation(!0),this.setAriaExpanded("false"),this.startOfferTimeout()},c[d].animateSlider=function(a,c){if(e)f.push({context:this,target:a,callback:c});else{var d=this.getObj(this.containerId);if(!d)return;var g={name:this.animation.prop,targetVal:a};this.animation.fn.stop(d),e=!0,this.animation.fn.animate(d,g,{easing:"easeOutBack",duration:700,callback:function(){e=!1,"function"==typeof c&&c.call(this),b.call(this)}.bind(this),context:this})}},c[d].animateClose=function(a){var b=this;this.animateSlider(this.animation.minimizedVal-200,function(){b.animation.state=b.SLIDER_DISPLAY_STATE.MINIMIZED,a.call(b)})},c[d].setAriaExpanded=function(a){this.slidePinTopLayer.setAttribute("aria-expanded",a)},c[d].cleanupOffer=function(a){g.clearTimeout(this.offerTimeoutId),this.animateClose(this.remove.bind(this,a))},c[d].offerClick=function(){this.click(),this.animateMinimize()},c[d].startOfferTimeout=function(){this.infoLog("start offer time out"),this.setTimeout(this.offerTimeout)},c[d].offerTimeout=function(){this.onTimeout(this.offerId),this.cleanupOffer()},c[d].resetOfferTimeout=function(){this.infoLog("reset offer time out"),g.clearTimeout(this.offerTimeoutId)})}lpTag.taglets.slider=function(){function c(){}function d(c,d){return d.accessible=!0,b(),new a(c,d)}var e="0.1",f="slider";return{v:e,name:f,init:c,createInstance:d}}()}();