//tealium universal tag - utag.328 ut4.0.201901220853, Copyright 2019 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};window.duetto={appId:"ca363",tld:"nh-hotels.com",properties:[['h',pageData.hotelId]],search:{sel:function(){return window.location.pathname.indexOf("booking/step1-rates")>0&&$("#alert2:hidden").length>0;},waitFor:function(){return $('#total-price').text()!="";},fn:function(){var msg={};msg["cc"]=CurrencyData.currency==undefined?'EUR':CurrencyData.currency;return msg;}},noneAvailable:{sel:function(){return'.panel-group.collapsable-near-hotel .no-scroll.link.track-nearby-hotels';},waitFor:function(){return $("#alert2:visible").length>0;},},multiQuote:{sel:function(){return window.location.pathname.indexOf("booking/step1-rates")>0&&$("#alert2:hidden").length>0;},waitFor:function(){return $('#total-price').text()!="";},quotesSel:'.container .tab-pane.active.in .grid-rates.grid-rates-classic.lazy-room-grid',scrapeRoomFn:function(n,e){var msg=[];var r='';var roomType='';var rateCode='';var currenyCode='';var $n=jQuery(n).find('.row.margin-b-40.lazy-rate-condition');var len=$n.length;if(len>20){return null;}
for(var i=0;i<len;i++){r=$($n[i]).find('.price:first .js-preciototal').text();rateCode=$($n[i]).find("[name='ratePriceCode']").val();roomType=$($n[i]).find("[name='roomCategoryCode']").val();currenyCode=$($n[i]).find("[name='divisa']").val();msg.push({'r':r,'rc':rateCode,'rt':roomType,'cc':currenyCode});}
return msg;}},booking:{sel:function(){return window.location.pathname.indexOf("booking/confirmation")>0},scrapeBookFn:function(){var b=utag_data.id;var r=(Number(utag_data.revenue)+Number(utag_data.tax))/utag_data.resNoches;var adults=utag_data.booking.adults;var children=utag_data.booking.childrenNumber;var rt=utag_data.booking.roomType;var rc=utag_data.booking.rate;var currency=utag_data.valueCurrency;var hotelId=utag_data.idHotel;return{'b':b,'rt':rt,'rc':rc,'r':r,'na':adults,'nc':children,'cc':currency,'h':hotelId};}},dateScrapeFn:function(pageType){var sd=null;var ed=null;var td=null;if(pageType=='s'||pageType=='q'){td=utag_data.search.date.split('-')[0].trim();sd=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];td=utag_data.search.date.split('-')[1].trim();ed=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];}else if(pageType=='b'){td=utag_data.booking.checkIn;sd=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];td=utag_data.booking.checkOut;ed=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];}else if(pageType=='d'){td=$('.js-check-in').text().trim();sd=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];td=$('.js-check-out').text().trim();ed=td.split('/')[2]+'/'+td.split('/')[1]+'/'+td.split('/')[0];}
return{'sd':sd,'ed':ed};}};(function(){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src=('https:'==document.location.protocol?'https://':'http://')+'capture.duettoresearch.com/assets/js/duetto/duetto.js';var n=document.getElementsByTagName('script')[0];n.parentNode.insertBefore(s,n);})();}};utag.o[loader].loader.LOAD(id);})("328","nh-hoteles.es-main-2014");}catch(error){utag.DB(error);}
