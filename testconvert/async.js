!function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.moment = t();
}(this, function() {
    "use strict";
    var e, i;
    function c() {
        return e.apply(null, arguments);
    }
    function o(e) {
        return e instanceof Array || "[object Array]" === Object.prototype.toString.call(e);
    }
    function u(e) {
        return null != e && "[object Object]" === Object.prototype.toString.call(e);
    }
    function l(e) {
        return void 0 === e;
    }
    function h(e) {
        return "number" == typeof e || "[object Number]" === Object.prototype.toString.call(e);
    }
    function d(e) {
        return e instanceof Date || "[object Date]" === Object.prototype.toString.call(e);
    }
    function f(e, t) {
        var n, s = [];
        for (n = 0; n < e.length; ++n) s.push(t(e[n], n));
        return s;
    }
    function m(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
    }
    function _(e, t) {
        for (var n in t) m(t, n) && (e[n] = t[n]);
        return m(t, "toString") && (e.toString = t.toString), m(t, "valueOf") && (e.valueOf = t.valueOf), 
        e;
    }
    function y(e, t, n, s) {
        return Tt(e, t, n, s, !0).utc();
    }
    function g(e) {
        return null == e._pf && (e._pf = {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1,
            parsedDateParts: [],
            meridiem: null,
            rfc2822: !1,
            weekdayMismatch: !1
        }), e._pf;
    }
    function v(e) {
        if (null == e._isValid) {
            var t = g(e), n = i.call(t.parsedDateParts, function(e) {
                return null != e;
            }), s = !isNaN(e._d.getTime()) && t.overflow < 0 && !t.empty && !t.invalidMonth && !t.invalidWeekday && !t.weekdayMismatch && !t.nullInput && !t.invalidFormat && !t.userInvalidated && (!t.meridiem || t.meridiem && n);
            if (e._strict && (s = s && 0 === t.charsLeftOver && 0 === t.unusedTokens.length && void 0 === t.bigHour), 
            null != Object.isFrozen && Object.isFrozen(e)) return s;
            e._isValid = s;
        }
        return e._isValid;
    }
    function p(e) {
        var t = y(NaN);
        return null != e ? _(g(t), e) : g(t).userInvalidated = !0, t;
    }
    i = Array.prototype.some ? Array.prototype.some : function(e) {
        for (var t = Object(this), n = t.length >>> 0, s = 0; s < n; s++) if (s in t && e.call(this, t[s], s, t)) return !0;
        return !1;
    };
    var r = c.momentProperties = [];
    function w(e, t) {
        var n, s, i;
        if (l(t._isAMomentObject) || (e._isAMomentObject = t._isAMomentObject), l(t._i) || (e._i = t._i), 
        l(t._f) || (e._f = t._f), l(t._l) || (e._l = t._l), l(t._strict) || (e._strict = t._strict), 
        l(t._tzm) || (e._tzm = t._tzm), l(t._isUTC) || (e._isUTC = t._isUTC), l(t._offset) || (e._offset = t._offset), 
        l(t._pf) || (e._pf = g(t)), l(t._locale) || (e._locale = t._locale), 0 < r.length) for (n = 0; n < r.length; n++) l(i = t[s = r[n]]) || (e[s] = i);
        return e;
    }
    var t = !1;
    function M(e) {
        w(this, e), this._d = new Date(null != e._d ? e._d.getTime() : NaN), this.isValid() || (this._d = new Date(NaN)), 
        !1 === t && (t = !0, c.updateOffset(this), t = !1);
    }
    function k(e) {
        return e instanceof M || null != e && null != e._isAMomentObject;
    }
    function S(e) {
        return e < 0 ? Math.ceil(e) || 0 : Math.floor(e);
    }
    function D(e) {
        var t = +e, n = 0;
        return 0 !== t && isFinite(t) && (n = S(t)), n;
    }
    function a(e, t, n) {
        var s, i = Math.min(e.length, t.length), r = Math.abs(e.length - t.length), a = 0;
        for (s = 0; s < i; s++) (n && e[s] !== t[s] || !n && D(e[s]) !== D(t[s])) && a++;
        return a + r;
    }
    function Y(e) {
        !1 === c.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + e);
    }
    function n(i, r) {
        var a = !0;
        return _(function() {
            if (null != c.deprecationHandler && c.deprecationHandler(null, i), a) {
                for (var e, t = [], n = 0; n < arguments.length; n++) {
                    if (e = "", "object" == typeof arguments[n]) {
                        for (var s in e += "\n[" + n + "] ", arguments[0]) e += s + ": " + arguments[0][s] + ", ";
                        e = e.slice(0, -2);
                    } else e = arguments[n];
                    t.push(e);
                }
                Y(i + "\nArguments: " + Array.prototype.slice.call(t).join("") + "\n" + new Error().stack), 
                a = !1;
            }
            return r.apply(this, arguments);
        }, r);
    }
    var s, O = {};
    function T(e, t) {
        null != c.deprecationHandler && c.deprecationHandler(e, t), O[e] || (Y(t), O[e] = !0);
    }
    function b(e) {
        return e instanceof Function || "[object Function]" === Object.prototype.toString.call(e);
    }
    function x(e, t) {
        var n, s = _({}, e);
        for (n in t) m(t, n) && (u(e[n]) && u(t[n]) ? (s[n] = {}, _(s[n], e[n]), _(s[n], t[n])) : null != t[n] ? s[n] = t[n] : delete s[n]);
        for (n in e) m(e, n) && !m(t, n) && u(e[n]) && (s[n] = _({}, s[n]));
        return s;
    }
    function P(e) {
        null != e && this.set(e);
    }
    c.suppressDeprecationWarnings = !1, c.deprecationHandler = null, s = Object.keys ? Object.keys : function(e) {
        var t, n = [];
        for (t in e) m(e, t) && n.push(t);
        return n;
    };
    var W = {};
    function C(e, t) {
        var n = e.toLowerCase();
        W[n] = W[n + "s"] = W[t] = e;
    }
    function H(e) {
        return "string" == typeof e ? W[e] || W[e.toLowerCase()] : void 0;
    }
    function R(e) {
        var t, n, s = {};
        for (n in e) m(e, n) && (t = H(n)) && (s[t] = e[n]);
        return s;
    }
    var U = {};
    function F(e, t) {
        U[e] = t;
    }
    function L(e, t, n) {
        var s = "" + Math.abs(e), i = t - s.length;
        return (0 <= e ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, i)).toString().substr(1) + s;
    }
    var N = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, G = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, V = {}, E = {};
    function I(e, t, n, s) {
        var i = s;
        "string" == typeof s && (i = function() {
            return this[s]();
        }), e && (E[e] = i), t && (E[t[0]] = function() {
            return L(i.apply(this, arguments), t[1], t[2]);
        }), n && (E[n] = function() {
            return this.localeData().ordinal(i.apply(this, arguments), e);
        });
    }
    function A(e, t) {
        return e.isValid() ? (t = j(t, e.localeData()), V[t] = V[t] || function(s) {
            var e, i, t, r = s.match(N);
            for (e = 0, i = r.length; e < i; e++) E[r[e]] ? r[e] = E[r[e]] : r[e] = (t = r[e]).match(/\[[\s\S]/) ? t.replace(/^\[|\]$/g, "") : t.replace(/\\/g, "");
            return function(e) {
                var t, n = "";
                for (t = 0; t < i; t++) n += b(r[t]) ? r[t].call(e, s) : r[t];
                return n;
            };
        }(t), V[t](e)) : e.localeData().invalidDate();
    }
    function j(e, t) {
        var n = 5;
        function s(e) {
            return t.longDateFormat(e) || e;
        }
        for (G.lastIndex = 0; 0 <= n && G.test(e); ) e = e.replace(G, s), G.lastIndex = 0, 
        n -= 1;
        return e;
    }
    var Z = /\d/, z = /\d\d/, $ = /\d{3}/, q = /\d{4}/, J = /[+-]?\d{6}/, B = /\d\d?/, Q = /\d\d\d\d?/, X = /\d\d\d\d\d\d?/, K = /\d{1,3}/, ee = /\d{1,4}/, te = /[+-]?\d{1,6}/, ne = /\d+/, se = /[+-]?\d+/, ie = /Z|[+-]\d\d:?\d\d/gi, re = /Z|[+-]\d\d(?::?\d\d)?/gi, ae = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i, oe = {};
    function ue(e, n, s) {
        oe[e] = b(n) ? n : function(e, t) {
            return e && s ? s : n;
        };
    }
    function le(e, t) {
        return m(oe, e) ? oe[e](t._strict, t._locale) : new RegExp(he(e.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(e, t, n, s, i) {
            return t || n || s || i;
        })));
    }
    function he(e) {
        return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
    }
    var de = {};
    function ce(e, n) {
        var t, s = n;
        for ("string" == typeof e && (e = [ e ]), h(n) && (s = function(e, t) {
            t[n] = D(e);
        }), t = 0; t < e.length; t++) de[e[t]] = s;
    }
    function fe(e, i) {
        ce(e, function(e, t, n, s) {
            n._w = n._w || {}, i(e, n._w, n, s);
        });
    }
    var me = 0, _e = 1, ye = 2, ge = 3, ve = 4, pe = 5, we = 6, Me = 7, ke = 8;
    function Se(e) {
        return De(e) ? 366 : 365;
    }
    function De(e) {
        return e % 4 == 0 && e % 100 != 0 || e % 400 == 0;
    }
    I("Y", 0, 0, function() {
        var e = this.year();
        return e <= 9999 ? "" + e : "+" + e;
    }), I(0, [ "YY", 2 ], 0, function() {
        return this.year() % 100;
    }), I(0, [ "YYYY", 4 ], 0, "year"), I(0, [ "YYYYY", 5 ], 0, "year"), I(0, [ "YYYYYY", 6, !0 ], 0, "year"), 
    C("year", "y"), F("year", 1), ue("Y", se), ue("YY", B, z), ue("YYYY", ee, q), ue("YYYYY", te, J), 
    ue("YYYYYY", te, J), ce([ "YYYYY", "YYYYYY" ], me), ce("YYYY", function(e, t) {
        t[me] = 2 === e.length ? c.parseTwoDigitYear(e) : D(e);
    }), ce("YY", function(e, t) {
        t[me] = c.parseTwoDigitYear(e);
    }), ce("Y", function(e, t) {
        t[me] = parseInt(e, 10);
    }), c.parseTwoDigitYear = function(e) {
        return D(e) + (68 < D(e) ? 1900 : 2e3);
    };
    var Ye, Oe = Te("FullYear", !0);
    function Te(t, n) {
        return function(e) {
            return null != e ? (xe(this, t, e), c.updateOffset(this, n), this) : be(this, t);
        };
    }
    function be(e, t) {
        return e.isValid() ? e._d["get" + (e._isUTC ? "UTC" : "") + t]() : NaN;
    }
    function xe(e, t, n) {
        e.isValid() && !isNaN(n) && ("FullYear" === t && De(e.year()) && 1 === e.month() && 29 === e.date() ? e._d["set" + (e._isUTC ? "UTC" : "") + t](n, e.month(), Pe(n, e.month())) : e._d["set" + (e._isUTC ? "UTC" : "") + t](n));
    }
    function Pe(e, t) {
        if (isNaN(e) || isNaN(t)) return NaN;
        var n, s = (t % (n = 12) + n) % n;
        return e += (t - s) / 12, 1 === s ? De(e) ? 29 : 28 : 31 - s % 7 % 2;
    }
    Ye = Array.prototype.indexOf ? Array.prototype.indexOf : function(e) {
        var t;
        for (t = 0; t < this.length; ++t) if (this[t] === e) return t;
        return -1;
    }, I("M", [ "MM", 2 ], "Mo", function() {
        return this.month() + 1;
    }), I("MMM", 0, 0, function(e) {
        return this.localeData().monthsShort(this, e);
    }), I("MMMM", 0, 0, function(e) {
        return this.localeData().months(this, e);
    }), C("month", "M"), F("month", 8), ue("M", B), ue("MM", B, z), ue("MMM", function(e, t) {
        return t.monthsShortRegex(e);
    }), ue("MMMM", function(e, t) {
        return t.monthsRegex(e);
    }), ce([ "M", "MM" ], function(e, t) {
        t[_e] = D(e) - 1;
    }), ce([ "MMM", "MMMM" ], function(e, t, n, s) {
        var i = n._locale.monthsParse(e, s, n._strict);
        null != i ? t[_e] = i : g(n).invalidMonth = e;
    });
    var We = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/, Ce = "January_February_March_April_May_June_July_August_September_October_November_December".split("_");
    var He = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");
    function Re(e, t) {
        var n;
        if (!e.isValid()) return e;
        if ("string" == typeof t) if (/^\d+$/.test(t)) t = D(t); else if (!h(t = e.localeData().monthsParse(t))) return e;
        return n = Math.min(e.date(), Pe(e.year(), t)), e._d["set" + (e._isUTC ? "UTC" : "") + "Month"](t, n), 
        e;
    }
    function Ue(e) {
        return null != e ? (Re(this, e), c.updateOffset(this, !0), this) : be(this, "Month");
    }
    var Fe = ae;
    var Le = ae;
    function Ne() {
        function e(e, t) {
            return t.length - e.length;
        }
        var t, n, s = [], i = [], r = [];
        for (t = 0; t < 12; t++) n = y([ 2e3, t ]), s.push(this.monthsShort(n, "")), i.push(this.months(n, "")), 
        r.push(this.months(n, "")), r.push(this.monthsShort(n, ""));
        for (s.sort(e), i.sort(e), r.sort(e), t = 0; t < 12; t++) s[t] = he(s[t]), i[t] = he(i[t]);
        for (t = 0; t < 24; t++) r[t] = he(r[t]);
        this._monthsRegex = new RegExp("^(" + r.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, 
        this._monthsStrictRegex = new RegExp("^(" + i.join("|") + ")", "i"), this._monthsShortStrictRegex = new RegExp("^(" + s.join("|") + ")", "i");
    }
    function Ge(e) {
        var t;
        if (e < 100 && 0 <= e) {
            var n = Array.prototype.slice.call(arguments);
            n[0] = e + 400, t = new Date(Date.UTC.apply(null, n)), isFinite(t.getUTCFullYear()) && t.setUTCFullYear(e);
        } else t = new Date(Date.UTC.apply(null, arguments));
        return t;
    }
    function Ve(e, t, n) {
        var s = 7 + t - n;
        return -((7 + Ge(e, 0, s).getUTCDay() - t) % 7) + s - 1;
    }
    function Ee(e, t, n, s, i) {
        var r, a, o = 1 + 7 * (t - 1) + (7 + n - s) % 7 + Ve(e, s, i);
        return a = o <= 0 ? Se(r = e - 1) + o : o > Se(e) ? (r = e + 1, o - Se(e)) : (r = e, 
        o), {
            year: r,
            dayOfYear: a
        };
    }
    function Ie(e, t, n) {
        var s, i, r = Ve(e.year(), t, n), a = Math.floor((e.dayOfYear() - r - 1) / 7) + 1;
        return a < 1 ? s = a + Ae(i = e.year() - 1, t, n) : a > Ae(e.year(), t, n) ? (s = a - Ae(e.year(), t, n), 
        i = e.year() + 1) : (i = e.year(), s = a), {
            week: s,
            year: i
        };
    }
    function Ae(e, t, n) {
        var s = Ve(e, t, n), i = Ve(e + 1, t, n);
        return (Se(e) - s + i) / 7;
    }
    I("w", [ "ww", 2 ], "wo", "week"), I("W", [ "WW", 2 ], "Wo", "isoWeek"), C("week", "w"), 
    C("isoWeek", "W"), F("week", 5), F("isoWeek", 5), ue("w", B), ue("ww", B, z), ue("W", B), 
    ue("WW", B, z), fe([ "w", "ww", "W", "WW" ], function(e, t, n, s) {
        t[s.substr(0, 1)] = D(e);
    });
    function je(e, t) {
        return e.slice(t, 7).concat(e.slice(0, t));
    }
    I("d", 0, "do", "day"), I("dd", 0, 0, function(e) {
        return this.localeData().weekdaysMin(this, e);
    }), I("ddd", 0, 0, function(e) {
        return this.localeData().weekdaysShort(this, e);
    }), I("dddd", 0, 0, function(e) {
        return this.localeData().weekdays(this, e);
    }), I("e", 0, 0, "weekday"), I("E", 0, 0, "isoWeekday"), C("day", "d"), C("weekday", "e"), 
    C("isoWeekday", "E"), F("day", 11), F("weekday", 11), F("isoWeekday", 11), ue("d", B), 
    ue("e", B), ue("E", B), ue("dd", function(e, t) {
        return t.weekdaysMinRegex(e);
    }), ue("ddd", function(e, t) {
        return t.weekdaysShortRegex(e);
    }), ue("dddd", function(e, t) {
        return t.weekdaysRegex(e);
    }), fe([ "dd", "ddd", "dddd" ], function(e, t, n, s) {
        var i = n._locale.weekdaysParse(e, s, n._strict);
        null != i ? t.d = i : g(n).invalidWeekday = e;
    }), fe([ "d", "e", "E" ], function(e, t, n, s) {
        t[s] = D(e);
    });
    var Ze = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");
    var ze = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");
    var $e = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
    var qe = ae;
    var Je = ae;
    var Be = ae;
    function Qe() {
        function e(e, t) {
            return t.length - e.length;
        }
        var t, n, s, i, r, a = [], o = [], u = [], l = [];
        for (t = 0; t < 7; t++) n = y([ 2e3, 1 ]).day(t), s = this.weekdaysMin(n, ""), i = this.weekdaysShort(n, ""), 
        r = this.weekdays(n, ""), a.push(s), o.push(i), u.push(r), l.push(s), l.push(i), 
        l.push(r);
        for (a.sort(e), o.sort(e), u.sort(e), l.sort(e), t = 0; t < 7; t++) o[t] = he(o[t]), 
        u[t] = he(u[t]), l[t] = he(l[t]);
        this._weekdaysRegex = new RegExp("^(" + l.join("|") + ")", "i"), this._weekdaysShortRegex = this._weekdaysRegex, 
        this._weekdaysMinRegex = this._weekdaysRegex, this._weekdaysStrictRegex = new RegExp("^(" + u.join("|") + ")", "i"), 
        this._weekdaysShortStrictRegex = new RegExp("^(" + o.join("|") + ")", "i"), this._weekdaysMinStrictRegex = new RegExp("^(" + a.join("|") + ")", "i");
    }
    function Xe() {
        return this.hours() % 12 || 12;
    }
    function Ke(e, t) {
        I(e, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), t);
        });
    }
    function et(e, t) {
        return t._meridiemParse;
    }
    I("H", [ "HH", 2 ], 0, "hour"), I("h", [ "hh", 2 ], 0, Xe), I("k", [ "kk", 2 ], 0, function() {
        return this.hours() || 24;
    }), I("hmm", 0, 0, function() {
        return "" + Xe.apply(this) + L(this.minutes(), 2);
    }), I("hmmss", 0, 0, function() {
        return "" + Xe.apply(this) + L(this.minutes(), 2) + L(this.seconds(), 2);
    }), I("Hmm", 0, 0, function() {
        return "" + this.hours() + L(this.minutes(), 2);
    }), I("Hmmss", 0, 0, function() {
        return "" + this.hours() + L(this.minutes(), 2) + L(this.seconds(), 2);
    }), Ke("a", !0), Ke("A", !1), C("hour", "h"), F("hour", 13), ue("a", et), ue("A", et), 
    ue("H", B), ue("h", B), ue("k", B), ue("HH", B, z), ue("hh", B, z), ue("kk", B, z), 
    ue("hmm", Q), ue("hmmss", X), ue("Hmm", Q), ue("Hmmss", X), ce([ "H", "HH" ], ge), 
    ce([ "k", "kk" ], function(e, t, n) {
        var s = D(e);
        t[ge] = 24 === s ? 0 : s;
    }), ce([ "a", "A" ], function(e, t, n) {
        n._isPm = n._locale.isPM(e), n._meridiem = e;
    }), ce([ "h", "hh" ], function(e, t, n) {
        t[ge] = D(e), g(n).bigHour = !0;
    }), ce("hmm", function(e, t, n) {
        var s = e.length - 2;
        t[ge] = D(e.substr(0, s)), t[ve] = D(e.substr(s)), g(n).bigHour = !0;
    }), ce("hmmss", function(e, t, n) {
        var s = e.length - 4, i = e.length - 2;
        t[ge] = D(e.substr(0, s)), t[ve] = D(e.substr(s, 2)), t[pe] = D(e.substr(i)), g(n).bigHour = !0;
    }), ce("Hmm", function(e, t, n) {
        var s = e.length - 2;
        t[ge] = D(e.substr(0, s)), t[ve] = D(e.substr(s));
    }), ce("Hmmss", function(e, t, n) {
        var s = e.length - 4, i = e.length - 2;
        t[ge] = D(e.substr(0, s)), t[ve] = D(e.substr(s, 2)), t[pe] = D(e.substr(i));
    });
    var tt, nt = Te("Hours", !0), st = {
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        longDateFormat: {
            LTS: "h:mm:ss A",
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY h:mm A",
            LLLL: "dddd, MMMM D, YYYY h:mm A"
        },
        invalidDate: "Invalid date",
        ordinal: "%d",
        dayOfMonthOrdinalParse: /\d{1,2}/,
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            ss: "%d seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        months: Ce,
        monthsShort: He,
        week: {
            dow: 0,
            doy: 6
        },
        weekdays: Ze,
        weekdaysMin: $e,
        weekdaysShort: ze,
        meridiemParse: /[ap]\.?m?\.?/i
    }, it = {}, rt = {};
    function at(e) {
        return e ? e.toLowerCase().replace("_", "-") : e;
    }
    function ot(e) {
        var t = null;
        if (!it[e] && "undefined" != typeof module && module && module.exports) try {
            t = tt._abbr, require("./locale/" + e), ut(t);
        } catch (e) {}
        return it[e];
    }
    function ut(e, t) {
        var n;
        return e && ((n = l(t) ? ht(e) : lt(e, t)) ? tt = n : "undefined" != typeof console && console.warn && console.warn("Locale " + e + " not found. Did you forget to load it?")), 
        tt._abbr;
    }
    function lt(e, t) {
        if (null === t) return delete it[e], null;
        var n, s = st;
        if (t.abbr = e, null != it[e]) T("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."), 
        s = it[e]._config; else if (null != t.parentLocale) if (null != it[t.parentLocale]) s = it[t.parentLocale]._config; else {
            if (null == (n = ot(t.parentLocale))) return rt[t.parentLocale] || (rt[t.parentLocale] = []), 
            rt[t.parentLocale].push({
                name: e,
                config: t
            }), null;
            s = n._config;
        }
        return it[e] = new P(x(s, t)), rt[e] && rt[e].forEach(function(e) {
            lt(e.name, e.config);
        }), ut(e), it[e];
    }
    function ht(e) {
        var t;
        if (e && e._locale && e._locale._abbr && (e = e._locale._abbr), !e) return tt;
        if (!o(e)) {
            if (t = ot(e)) return t;
            e = [ e ];
        }
        return function(e) {
            for (var t, n, s, i, r = 0; r < e.length; ) {
                for (t = (i = at(e[r]).split("-")).length, n = (n = at(e[r + 1])) ? n.split("-") : null; 0 < t; ) {
                    if (s = ot(i.slice(0, t).join("-"))) return s;
                    if (n && n.length >= t && a(i, n, !0) >= t - 1) break;
                    t--;
                }
                r++;
            }
            return tt;
        }(e);
    }
    function dt(e) {
        var t, n = e._a;
        return n && -2 === g(e).overflow && (t = n[_e] < 0 || 11 < n[_e] ? _e : n[ye] < 1 || n[ye] > Pe(n[me], n[_e]) ? ye : n[ge] < 0 || 24 < n[ge] || 24 === n[ge] && (0 !== n[ve] || 0 !== n[pe] || 0 !== n[we]) ? ge : n[ve] < 0 || 59 < n[ve] ? ve : n[pe] < 0 || 59 < n[pe] ? pe : n[we] < 0 || 999 < n[we] ? we : -1, 
        g(e)._overflowDayOfYear && (t < me || ye < t) && (t = ye), g(e)._overflowWeeks && -1 === t && (t = Me), 
        g(e)._overflowWeekday && -1 === t && (t = ke), g(e).overflow = t), e;
    }
    function ct(e, t, n) {
        return null != e ? e : null != t ? t : n;
    }
    function ft(e) {
        var t, n, s, i, r, a = [];
        if (!e._d) {
            var o, u;
            for (o = e, u = new Date(c.now()), s = o._useUTC ? [ u.getUTCFullYear(), u.getUTCMonth(), u.getUTCDate() ] : [ u.getFullYear(), u.getMonth(), u.getDate() ], 
            e._w && null == e._a[ye] && null == e._a[_e] && function(e) {
                var t, n, s, i, r, a, o, u;
                if (null != (t = e._w).GG || null != t.W || null != t.E) r = 1, a = 4, n = ct(t.GG, e._a[me], Ie(bt(), 1, 4).year), 
                s = ct(t.W, 1), ((i = ct(t.E, 1)) < 1 || 7 < i) && (u = !0); else {
                    r = e._locale._week.dow, a = e._locale._week.doy;
                    var l = Ie(bt(), r, a);
                    n = ct(t.gg, e._a[me], l.year), s = ct(t.w, l.week), null != t.d ? ((i = t.d) < 0 || 6 < i) && (u = !0) : null != t.e ? (i = t.e + r, 
                    (t.e < 0 || 6 < t.e) && (u = !0)) : i = r;
                }
                s < 1 || s > Ae(n, r, a) ? g(e)._overflowWeeks = !0 : null != u ? g(e)._overflowWeekday = !0 : (o = Ee(n, s, i, r, a), 
                e._a[me] = o.year, e._dayOfYear = o.dayOfYear);
            }(e), null != e._dayOfYear && (r = ct(e._a[me], s[me]), (e._dayOfYear > Se(r) || 0 === e._dayOfYear) && (g(e)._overflowDayOfYear = !0), 
            n = Ge(r, 0, e._dayOfYear), e._a[_e] = n.getUTCMonth(), e._a[ye] = n.getUTCDate()), 
            t = 0; t < 3 && null == e._a[t]; ++t) e._a[t] = a[t] = s[t];
            for (;t < 7; t++) e._a[t] = a[t] = null == e._a[t] ? 2 === t ? 1 : 0 : e._a[t];
            24 === e._a[ge] && 0 === e._a[ve] && 0 === e._a[pe] && 0 === e._a[we] && (e._nextDay = !0, 
            e._a[ge] = 0), e._d = (e._useUTC ? Ge : function(e, t, n, s, i, r, a) {
                var o;
                return e < 100 && 0 <= e ? (o = new Date(e + 400, t, n, s, i, r, a), isFinite(o.getFullYear()) && o.setFullYear(e)) : o = new Date(e, t, n, s, i, r, a), 
                o;
            }).apply(null, a), i = e._useUTC ? e._d.getUTCDay() : e._d.getDay(), null != e._tzm && e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm), 
            e._nextDay && (e._a[ge] = 24), e._w && void 0 !== e._w.d && e._w.d !== i && (g(e).weekdayMismatch = !0);
        }
    }
    var mt = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, _t = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, yt = /Z|[+-]\d\d(?::?\d\d)?/, gt = [ [ "YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/ ], [ "YYYY-MM-DD", /\d{4}-\d\d-\d\d/ ], [ "GGGG-[W]WW-E", /\d{4}-W\d\d-\d/ ], [ "GGGG-[W]WW", /\d{4}-W\d\d/, !1 ], [ "YYYY-DDD", /\d{4}-\d{3}/ ], [ "YYYY-MM", /\d{4}-\d\d/, !1 ], [ "YYYYYYMMDD", /[+-]\d{10}/ ], [ "YYYYMMDD", /\d{8}/ ], [ "GGGG[W]WWE", /\d{4}W\d{3}/ ], [ "GGGG[W]WW", /\d{4}W\d{2}/, !1 ], [ "YYYYDDD", /\d{7}/ ] ], vt = [ [ "HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/ ], [ "HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/ ], [ "HH:mm:ss", /\d\d:\d\d:\d\d/ ], [ "HH:mm", /\d\d:\d\d/ ], [ "HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/ ], [ "HHmmss,SSSS", /\d\d\d\d\d\d,\d+/ ], [ "HHmmss", /\d\d\d\d\d\d/ ], [ "HHmm", /\d\d\d\d/ ], [ "HH", /\d\d/ ] ], pt = /^\/?Date\((\-?\d+)/i;
    function wt(e) {
        var t, n, s, i, r, a, o = e._i, u = mt.exec(o) || _t.exec(o);
        if (u) {
            for (g(e).iso = !0, t = 0, n = gt.length; t < n; t++) if (gt[t][1].exec(u[1])) {
                i = gt[t][0], s = !1 !== gt[t][2];
                break;
            }
            if (null == i) return void (e._isValid = !1);
            if (u[3]) {
                for (t = 0, n = vt.length; t < n; t++) if (vt[t][1].exec(u[3])) {
                    r = (u[2] || " ") + vt[t][0];
                    break;
                }
                if (null == r) return void (e._isValid = !1);
            }
            if (!s && null != r) return void (e._isValid = !1);
            if (u[4]) {
                if (!yt.exec(u[4])) return void (e._isValid = !1);
                a = "Z";
            }
            e._f = i + (r || "") + (a || ""), Yt(e);
        } else e._isValid = !1;
    }
    var Mt = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;
    function kt(e, t, n, s, i, r) {
        var a = [ function(e) {
            var t = parseInt(e, 10);
            {
                if (t <= 49) return 2e3 + t;
                if (t <= 999) return 1900 + t;
            }
            return t;
        }(e), He.indexOf(t), parseInt(n, 10), parseInt(s, 10), parseInt(i, 10) ];
        return r && a.push(parseInt(r, 10)), a;
    }
    var St = {
        UT: 0,
        GMT: 0,
        EDT: -240,
        EST: -300,
        CDT: -300,
        CST: -360,
        MDT: -360,
        MST: -420,
        PDT: -420,
        PST: -480
    };
    function Dt(e) {
        var t, n, s, i = Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, ""));
        if (i) {
            var r = kt(i[4], i[3], i[2], i[5], i[6], i[7]);
            if (t = i[1], n = r, s = e, t && ze.indexOf(t) !== new Date(n[0], n[1], n[2]).getDay() && (g(s).weekdayMismatch = !0, 
            !(s._isValid = !1))) return;
            e._a = r, e._tzm = function(e, t, n) {
                if (e) return St[e];
                if (t) return 0;
                var s = parseInt(n, 10), i = s % 100;
                return (s - i) / 100 * 60 + i;
            }(i[8], i[9], i[10]), e._d = Ge.apply(null, e._a), e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm), 
            g(e).rfc2822 = !0;
        } else e._isValid = !1;
    }
    function Yt(e) {
        if (e._f !== c.ISO_8601) if (e._f !== c.RFC_2822) {
            e._a = [], g(e).empty = !0;
            var t, n, s, i, r, a, o, u, l = "" + e._i, h = l.length, d = 0;
            for (s = j(e._f, e._locale).match(N) || [], t = 0; t < s.length; t++) i = s[t], 
            (n = (l.match(le(i, e)) || [])[0]) && (0 < (r = l.substr(0, l.indexOf(n))).length && g(e).unusedInput.push(r), 
            l = l.slice(l.indexOf(n) + n.length), d += n.length), E[i] ? (n ? g(e).empty = !1 : g(e).unusedTokens.push(i), 
            a = i, u = e, null != (o = n) && m(de, a) && de[a](o, u._a, u, a)) : e._strict && !n && g(e).unusedTokens.push(i);
            g(e).charsLeftOver = h - d, 0 < l.length && g(e).unusedInput.push(l), e._a[ge] <= 12 && !0 === g(e).bigHour && 0 < e._a[ge] && (g(e).bigHour = void 0), 
            g(e).parsedDateParts = e._a.slice(0), g(e).meridiem = e._meridiem, e._a[ge] = function(e, t, n) {
                var s;
                if (null == n) return t;
                return null != e.meridiemHour ? e.meridiemHour(t, n) : (null != e.isPM && ((s = e.isPM(n)) && t < 12 && (t += 12), 
                s || 12 !== t || (t = 0)), t);
            }(e._locale, e._a[ge], e._meridiem), ft(e), dt(e);
        } else Dt(e); else wt(e);
    }
    function Ot(e) {
        var t, n, s, i, r = e._i, a = e._f;
        return e._locale = e._locale || ht(e._l), null === r || void 0 === a && "" === r ? p({
            nullInput: !0
        }) : ("string" == typeof r && (e._i = r = e._locale.preparse(r)), k(r) ? new M(dt(r)) : (d(r) ? e._d = r : o(a) ? function(e) {
            var t, n, s, i, r;
            if (0 === e._f.length) return g(e).invalidFormat = !0, e._d = new Date(NaN);
            for (i = 0; i < e._f.length; i++) r = 0, t = w({}, e), null != e._useUTC && (t._useUTC = e._useUTC), 
            t._f = e._f[i], Yt(t), v(t) && (r += g(t).charsLeftOver, r += 10 * g(t).unusedTokens.length, 
            g(t).score = r, (null == s || r < s) && (s = r, n = t));
            _(e, n || t);
        }(e) : a ? Yt(e) : l(n = (t = e)._i) ? t._d = new Date(c.now()) : d(n) ? t._d = new Date(n.valueOf()) : "string" == typeof n ? (s = t, 
        null === (i = pt.exec(s._i)) ? (wt(s), !1 === s._isValid && (delete s._isValid, 
        Dt(s), !1 === s._isValid && (delete s._isValid, c.createFromInputFallback(s)))) : s._d = new Date(+i[1])) : o(n) ? (t._a = f(n.slice(0), function(e) {
            return parseInt(e, 10);
        }), ft(t)) : u(n) ? function(e) {
            if (!e._d) {
                var t = R(e._i);
                e._a = f([ t.year, t.month, t.day || t.date, t.hour, t.minute, t.second, t.millisecond ], function(e) {
                    return e && parseInt(e, 10);
                }), ft(e);
            }
        }(t) : h(n) ? t._d = new Date(n) : c.createFromInputFallback(t), v(e) || (e._d = null), 
        e));
    }
    function Tt(e, t, n, s, i) {
        var r, a = {};
        return !0 !== n && !1 !== n || (s = n, n = void 0), (u(e) && function(e) {
            if (Object.getOwnPropertyNames) return 0 === Object.getOwnPropertyNames(e).length;
            var t;
            for (t in e) if (e.hasOwnProperty(t)) return !1;
            return !0;
        }(e) || o(e) && 0 === e.length) && (e = void 0), a._isAMomentObject = !0, a._useUTC = a._isUTC = i, 
        a._l = n, a._i = e, a._f = t, a._strict = s, (r = new M(dt(Ot(a))))._nextDay && (r.add(1, "d"), 
        r._nextDay = void 0), r;
    }
    function bt(e, t, n, s) {
        return Tt(e, t, n, s, !1);
    }
    c.createFromInputFallback = n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function(e) {
        e._d = new Date(e._i + (e._useUTC ? " UTC" : ""));
    }), c.ISO_8601 = function() {}, c.RFC_2822 = function() {};
    var xt = n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
        var e = bt.apply(null, arguments);
        return this.isValid() && e.isValid() ? e < this ? this : e : p();
    }), Pt = n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
        var e = bt.apply(null, arguments);
        return this.isValid() && e.isValid() ? this < e ? this : e : p();
    });
    function Wt(e, t) {
        var n, s;
        if (1 === t.length && o(t[0]) && (t = t[0]), !t.length) return bt();
        for (n = t[0], s = 1; s < t.length; ++s) t[s].isValid() && !t[s][e](n) || (n = t[s]);
        return n;
    }
    var Ct = [ "year", "quarter", "month", "week", "day", "hour", "minute", "second", "millisecond" ];
    function Ht(e) {
        var t = R(e), n = t.year || 0, s = t.quarter || 0, i = t.month || 0, r = t.week || t.isoWeek || 0, a = t.day || 0, o = t.hour || 0, u = t.minute || 0, l = t.second || 0, h = t.millisecond || 0;
        this._isValid = function(e) {
            for (var t in e) if (-1 === Ye.call(Ct, t) || null != e[t] && isNaN(e[t])) return !1;
            for (var n = !1, s = 0; s < Ct.length; ++s) if (e[Ct[s]]) {
                if (n) return !1;
                parseFloat(e[Ct[s]]) !== D(e[Ct[s]]) && (n = !0);
            }
            return !0;
        }(t), this._milliseconds = +h + 1e3 * l + 6e4 * u + 1e3 * o * 60 * 60, this._days = +a + 7 * r, 
        this._months = +i + 3 * s + 12 * n, this._data = {}, this._locale = ht(), this._bubble();
    }
    function Rt(e) {
        return e instanceof Ht;
    }
    function Ut(e) {
        return e < 0 ? -1 * Math.round(-1 * e) : Math.round(e);
    }
    function Ft(e, n) {
        I(e, 0, 0, function() {
            var e = this.utcOffset(), t = "+";
            return e < 0 && (e = -e, t = "-"), t + L(~~(e / 60), 2) + n + L(~~e % 60, 2);
        });
    }
    Ft("Z", ":"), Ft("ZZ", ""), ue("Z", re), ue("ZZ", re), ce([ "Z", "ZZ" ], function(e, t, n) {
        n._useUTC = !0, n._tzm = Nt(re, e);
    });
    var Lt = /([\+\-]|\d\d)/gi;
    function Nt(e, t) {
        var n = (t || "").match(e);
        if (null === n) return null;
        var s = ((n[n.length - 1] || []) + "").match(Lt) || [ "-", 0, 0 ], i = 60 * s[1] + D(s[2]);
        return 0 === i ? 0 : "+" === s[0] ? i : -i;
    }
    function Gt(e, t) {
        var n, s;
        return t._isUTC ? (n = t.clone(), s = (k(e) || d(e) ? e.valueOf() : bt(e).valueOf()) - n.valueOf(), 
        n._d.setTime(n._d.valueOf() + s), c.updateOffset(n, !1), n) : bt(e).local();
    }
    function Vt(e) {
        return 15 * -Math.round(e._d.getTimezoneOffset() / 15);
    }
    function Et() {
        return !!this.isValid() && (this._isUTC && 0 === this._offset);
    }
    c.updateOffset = function() {};
    var It = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/, At = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;
    function jt(e, t) {
        var n, s, i, r = e, a = null;
        return Rt(e) ? r = {
            ms: e._milliseconds,
            d: e._days,
            M: e._months
        } : h(e) ? (r = {}, t ? r[t] = e : r.milliseconds = e) : (a = It.exec(e)) ? (n = "-" === a[1] ? -1 : 1, 
        r = {
            y: 0,
            d: D(a[ye]) * n,
            h: D(a[ge]) * n,
            m: D(a[ve]) * n,
            s: D(a[pe]) * n,
            ms: D(Ut(1e3 * a[we])) * n
        }) : (a = At.exec(e)) ? (n = "-" === a[1] ? -1 : 1, r = {
            y: Zt(a[2], n),
            M: Zt(a[3], n),
            w: Zt(a[4], n),
            d: Zt(a[5], n),
            h: Zt(a[6], n),
            m: Zt(a[7], n),
            s: Zt(a[8], n)
        }) : null == r ? r = {} : "object" == typeof r && ("from" in r || "to" in r) && (i = function(e, t) {
            var n;
            if (!e.isValid() || !t.isValid()) return {
                milliseconds: 0,
                months: 0
            };
            t = Gt(t, e), e.isBefore(t) ? n = zt(e, t) : ((n = zt(t, e)).milliseconds = -n.milliseconds, 
            n.months = -n.months);
            return n;
        }(bt(r.from), bt(r.to)), (r = {}).ms = i.milliseconds, r.M = i.months), s = new Ht(r), 
        Rt(e) && m(e, "_locale") && (s._locale = e._locale), s;
    }
    function Zt(e, t) {
        var n = e && parseFloat(e.replace(",", "."));
        return (isNaN(n) ? 0 : n) * t;
    }
    function zt(e, t) {
        var n = {};
        return n.months = t.month() - e.month() + 12 * (t.year() - e.year()), e.clone().add(n.months, "M").isAfter(t) && --n.months, 
        n.milliseconds = +t - +e.clone().add(n.months, "M"), n;
    }
    function $t(s, i) {
        return function(e, t) {
            var n;
            return null === t || isNaN(+t) || (T(i, "moment()." + i + "(period, number) is deprecated. Please use moment()." + i + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), 
            n = e, e = t, t = n), qt(this, jt(e = "string" == typeof e ? +e : e, t), s), this;
        };
    }
    function qt(e, t, n, s) {
        var i = t._milliseconds, r = Ut(t._days), a = Ut(t._months);
        e.isValid() && (s = null == s || s, a && Re(e, be(e, "Month") + a * n), r && xe(e, "Date", be(e, "Date") + r * n), 
        i && e._d.setTime(e._d.valueOf() + i * n), s && c.updateOffset(e, r || a));
    }
    jt.fn = Ht.prototype, jt.invalid = function() {
        return jt(NaN);
    };
    var Jt = $t(1, "add"), Bt = $t(-1, "subtract");
    function Qt(e, t) {
        var n = 12 * (t.year() - e.year()) + (t.month() - e.month()), s = e.clone().add(n, "months");
        return -(n + (t - s < 0 ? (t - s) / (s - e.clone().add(n - 1, "months")) : (t - s) / (e.clone().add(n + 1, "months") - s))) || 0;
    }
    function Xt(e) {
        var t;
        return void 0 === e ? this._locale._abbr : (null != (t = ht(e)) && (this._locale = t), 
        this);
    }
    c.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ", c.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
    var Kt = n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(e) {
        return void 0 === e ? this.localeData() : this.locale(e);
    });
    function en() {
        return this._locale;
    }
    var tn = 126227808e5;
    function nn(e, t) {
        return (e % t + t) % t;
    }
    function sn(e, t, n) {
        return e < 100 && 0 <= e ? new Date(e + 400, t, n) - tn : new Date(e, t, n).valueOf();
    }
    function rn(e, t, n) {
        return e < 100 && 0 <= e ? Date.UTC(e + 400, t, n) - tn : Date.UTC(e, t, n);
    }
    function an(e, t) {
        I(0, [ e, e.length ], 0, t);
    }
    function on(e, t, n, s, i) {
        var r;
        return null == e ? Ie(this, s, i).year : ((r = Ae(e, s, i)) < t && (t = r), function(e, t, n, s, i) {
            var r = Ee(e, t, n, s, i), a = Ge(r.year, 0, r.dayOfYear);
            return this.year(a.getUTCFullYear()), this.month(a.getUTCMonth()), this.date(a.getUTCDate()), 
            this;
        }.call(this, e, t, n, s, i));
    }
    I(0, [ "gg", 2 ], 0, function() {
        return this.weekYear() % 100;
    }), I(0, [ "GG", 2 ], 0, function() {
        return this.isoWeekYear() % 100;
    }), an("gggg", "weekYear"), an("ggggg", "weekYear"), an("GGGG", "isoWeekYear"), 
    an("GGGGG", "isoWeekYear"), C("weekYear", "gg"), C("isoWeekYear", "GG"), F("weekYear", 1), 
    F("isoWeekYear", 1), ue("G", se), ue("g", se), ue("GG", B, z), ue("gg", B, z), ue("GGGG", ee, q), 
    ue("gggg", ee, q), ue("GGGGG", te, J), ue("ggggg", te, J), fe([ "gggg", "ggggg", "GGGG", "GGGGG" ], function(e, t, n, s) {
        t[s.substr(0, 2)] = D(e);
    }), fe([ "gg", "GG" ], function(e, t, n, s) {
        t[s] = c.parseTwoDigitYear(e);
    }), I("Q", 0, "Qo", "quarter"), C("quarter", "Q"), F("quarter", 7), ue("Q", Z), 
    ce("Q", function(e, t) {
        t[_e] = 3 * (D(e) - 1);
    }), I("D", [ "DD", 2 ], "Do", "date"), C("date", "D"), F("date", 9), ue("D", B), 
    ue("DD", B, z), ue("Do", function(e, t) {
        return e ? t._dayOfMonthOrdinalParse || t._ordinalParse : t._dayOfMonthOrdinalParseLenient;
    }), ce([ "D", "DD" ], ye), ce("Do", function(e, t) {
        t[ye] = D(e.match(B)[0]);
    });
    var un = Te("Date", !0);
    I("DDD", [ "DDDD", 3 ], "DDDo", "dayOfYear"), C("dayOfYear", "DDD"), F("dayOfYear", 4), 
    ue("DDD", K), ue("DDDD", $), ce([ "DDD", "DDDD" ], function(e, t, n) {
        n._dayOfYear = D(e);
    }), I("m", [ "mm", 2 ], 0, "minute"), C("minute", "m"), F("minute", 14), ue("m", B), 
    ue("mm", B, z), ce([ "m", "mm" ], ve);
    var ln = Te("Minutes", !1);
    I("s", [ "ss", 2 ], 0, "second"), C("second", "s"), F("second", 15), ue("s", B), 
    ue("ss", B, z), ce([ "s", "ss" ], pe);
    var hn, dn = Te("Seconds", !1);
    for (I("S", 0, 0, function() {
        return ~~(this.millisecond() / 100);
    }), I(0, [ "SS", 2 ], 0, function() {
        return ~~(this.millisecond() / 10);
    }), I(0, [ "SSS", 3 ], 0, "millisecond"), I(0, [ "SSSS", 4 ], 0, function() {
        return 10 * this.millisecond();
    }), I(0, [ "SSSSS", 5 ], 0, function() {
        return 100 * this.millisecond();
    }), I(0, [ "SSSSSS", 6 ], 0, function() {
        return 1e3 * this.millisecond();
    }), I(0, [ "SSSSSSS", 7 ], 0, function() {
        return 1e4 * this.millisecond();
    }), I(0, [ "SSSSSSSS", 8 ], 0, function() {
        return 1e5 * this.millisecond();
    }), I(0, [ "SSSSSSSSS", 9 ], 0, function() {
        return 1e6 * this.millisecond();
    }), C("millisecond", "ms"), F("millisecond", 16), ue("S", K, Z), ue("SS", K, z), 
    ue("SSS", K, $), hn = "SSSS"; hn.length <= 9; hn += "S") ue(hn, ne);
    function cn(e, t) {
        t[we] = D(1e3 * ("0." + e));
    }
    for (hn = "S"; hn.length <= 9; hn += "S") ce(hn, cn);
    var fn = Te("Milliseconds", !1);
    I("z", 0, 0, "zoneAbbr"), I("zz", 0, 0, "zoneName");
    var mn = M.prototype;
    function _n(e) {
        return e;
    }
    mn.add = Jt, mn.calendar = function(e, t) {
        var n = e || bt(), s = Gt(n, this).startOf("day"), i = c.calendarFormat(this, s) || "sameElse", r = t && (b(t[i]) ? t[i].call(this, n) : t[i]);
        return this.format(r || this.localeData().calendar(i, this, bt(n)));
    }, mn.clone = function() {
        return new M(this);
    }, mn.diff = function(e, t, n) {
        var s, i, r;
        if (!this.isValid()) return NaN;
        if (!(s = Gt(e, this)).isValid()) return NaN;
        switch (i = 6e4 * (s.utcOffset() - this.utcOffset()), t = H(t)) {
          case "year":
            r = Qt(this, s) / 12;
            break;

          case "month":
            r = Qt(this, s);
            break;

          case "quarter":
            r = Qt(this, s) / 3;
            break;

          case "second":
            r = (this - s) / 1e3;
            break;

          case "minute":
            r = (this - s) / 6e4;
            break;

          case "hour":
            r = (this - s) / 36e5;
            break;

          case "day":
            r = (this - s - i) / 864e5;
            break;

          case "week":
            r = (this - s - i) / 6048e5;
            break;

          default:
            r = this - s;
        }
        return n ? r : S(r);
    }, mn.endOf = function(e) {
        var t;
        if (void 0 === (e = H(e)) || "millisecond" === e || !this.isValid()) return this;
        var n = this._isUTC ? rn : sn;
        switch (e) {
          case "year":
            t = n(this.year() + 1, 0, 1) - 1;
            break;

          case "quarter":
            t = n(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
            break;

          case "month":
            t = n(this.year(), this.month() + 1, 1) - 1;
            break;

          case "week":
            t = n(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
            break;

          case "isoWeek":
            t = n(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
            break;

          case "day":
          case "date":
            t = n(this.year(), this.month(), this.date() + 1) - 1;
            break;

          case "hour":
            t = this._d.valueOf(), t += 36e5 - nn(t + (this._isUTC ? 0 : 6e4 * this.utcOffset()), 36e5) - 1;
            break;

          case "minute":
            t = this._d.valueOf(), t += 6e4 - nn(t, 6e4) - 1;
            break;

          case "second":
            t = this._d.valueOf(), t += 1e3 - nn(t, 1e3) - 1;
            break;
        }
        return this._d.setTime(t), c.updateOffset(this, !0), this;
    }, mn.format = function(e) {
        e || (e = this.isUtc() ? c.defaultFormatUtc : c.defaultFormat);
        var t = A(this, e);
        return this.localeData().postformat(t);
    }, mn.from = function(e, t) {
        return this.isValid() && (k(e) && e.isValid() || bt(e).isValid()) ? jt({
            to: this,
            from: e
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate();
    }, mn.fromNow = function(e) {
        return this.from(bt(), e);
    }, mn.to = function(e, t) {
        return this.isValid() && (k(e) && e.isValid() || bt(e).isValid()) ? jt({
            from: this,
            to: e
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate();
    }, mn.toNow = function(e) {
        return this.to(bt(), e);
    }, mn.get = function(e) {
        return b(this[e = H(e)]) ? this[e]() : this;
    }, mn.invalidAt = function() {
        return g(this).overflow;
    }, mn.isAfter = function(e, t) {
        var n = k(e) ? e : bt(e);
        return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() > n.valueOf() : n.valueOf() < this.clone().startOf(t).valueOf());
    }, mn.isBefore = function(e, t) {
        var n = k(e) ? e : bt(e);
        return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() < n.valueOf() : this.clone().endOf(t).valueOf() < n.valueOf());
    }, mn.isBetween = function(e, t, n, s) {
        var i = k(e) ? e : bt(e), r = k(t) ? t : bt(t);
        return !!(this.isValid() && i.isValid() && r.isValid()) && ("(" === (s = s || "()")[0] ? this.isAfter(i, n) : !this.isBefore(i, n)) && (")" === s[1] ? this.isBefore(r, n) : !this.isAfter(r, n));
    }, mn.isSame = function(e, t) {
        var n, s = k(e) ? e : bt(e);
        return !(!this.isValid() || !s.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() === s.valueOf() : (n = s.valueOf(), 
        this.clone().startOf(t).valueOf() <= n && n <= this.clone().endOf(t).valueOf()));
    }, mn.isSameOrAfter = function(e, t) {
        return this.isSame(e, t) || this.isAfter(e, t);
    }, mn.isSameOrBefore = function(e, t) {
        return this.isSame(e, t) || this.isBefore(e, t);
    }, mn.isValid = function() {
        return v(this);
    }, mn.lang = Kt, mn.locale = Xt, mn.localeData = en, mn.max = Pt, mn.min = xt, mn.parsingFlags = function() {
        return _({}, g(this));
    }, mn.set = function(e, t) {
        if ("object" == typeof e) for (var n = function(e) {
            var t = [];
            for (var n in e) t.push({
                unit: n,
                priority: U[n]
            });
            return t.sort(function(e, t) {
                return e.priority - t.priority;
            }), t;
        }(e = R(e)), s = 0; s < n.length; s++) this[n[s].unit](e[n[s].unit]); else if (b(this[e = H(e)])) return this[e](t);
        return this;
    }, mn.startOf = function(e) {
        var t;
        if (void 0 === (e = H(e)) || "millisecond" === e || !this.isValid()) return this;
        var n = this._isUTC ? rn : sn;
        switch (e) {
          case "year":
            t = n(this.year(), 0, 1);
            break;

          case "quarter":
            t = n(this.year(), this.month() - this.month() % 3, 1);
            break;

          case "month":
            t = n(this.year(), this.month(), 1);
            break;

          case "week":
            t = n(this.year(), this.month(), this.date() - this.weekday());
            break;

          case "isoWeek":
            t = n(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
            break;

          case "day":
          case "date":
            t = n(this.year(), this.month(), this.date());
            break;

          case "hour":
            t = this._d.valueOf(), t -= nn(t + (this._isUTC ? 0 : 6e4 * this.utcOffset()), 36e5);
            break;

          case "minute":
            t = this._d.valueOf(), t -= nn(t, 6e4);
            break;

          case "second":
            t = this._d.valueOf(), t -= nn(t, 1e3);
            break;
        }
        return this._d.setTime(t), c.updateOffset(this, !0), this;
    }, mn.subtract = Bt, mn.toArray = function() {
        var e = this;
        return [ e.year(), e.month(), e.date(), e.hour(), e.minute(), e.second(), e.millisecond() ];
    }, mn.toObject = function() {
        var e = this;
        return {
            years: e.year(),
            months: e.month(),
            date: e.date(),
            hours: e.hours(),
            minutes: e.minutes(),
            seconds: e.seconds(),
            milliseconds: e.milliseconds()
        };
    }, mn.toDate = function() {
        return new Date(this.valueOf());
    }, mn.toISOString = function(e) {
        if (!this.isValid()) return null;
        var t = !0 !== e, n = t ? this.clone().utc() : this;
        return n.year() < 0 || 9999 < n.year() ? A(n, t ? "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYYYY-MM-DD[T]HH:mm:ss.SSSZ") : b(Date.prototype.toISOString) ? t ? this.toDate().toISOString() : new Date(this.valueOf() + 60 * this.utcOffset() * 1e3).toISOString().replace("Z", A(n, "Z")) : A(n, t ? "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYY-MM-DD[T]HH:mm:ss.SSSZ");
    }, mn.inspect = function() {
        if (!this.isValid()) return "moment.invalid(/* " + this._i + " */)";
        var e = "moment", t = "";
        this.isLocal() || (e = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", 
        t = "Z");
        var n = "[" + e + '("]', s = 0 <= this.year() && this.year() <= 9999 ? "YYYY" : "YYYYYY", i = t + '[")]';
        return this.format(n + s + "-MM-DD[T]HH:mm:ss.SSS" + i);
    }, mn.toJSON = function() {
        return this.isValid() ? this.toISOString() : null;
    }, mn.toString = function() {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
    }, mn.unix = function() {
        return Math.floor(this.valueOf() / 1e3);
    }, mn.valueOf = function() {
        return this._d.valueOf() - 6e4 * (this._offset || 0);
    }, mn.creationData = function() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }, mn.year = Oe, mn.isLeapYear = function() {
        return De(this.year());
    }, mn.weekYear = function(e) {
        return on.call(this, e, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy);
    }, mn.isoWeekYear = function(e) {
        return on.call(this, e, this.isoWeek(), this.isoWeekday(), 1, 4);
    }, mn.quarter = mn.quarters = function(e) {
        return null == e ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (e - 1) + this.month() % 3);
    }, mn.month = Ue, mn.daysInMonth = function() {
        return Pe(this.year(), this.month());
    }, mn.week = mn.weeks = function(e) {
        var t = this.localeData().week(this);
        return null == e ? t : this.add(7 * (e - t), "d");
    }, mn.isoWeek = mn.isoWeeks = function(e) {
        var t = Ie(this, 1, 4).week;
        return null == e ? t : this.add(7 * (e - t), "d");
    }, mn.weeksInYear = function() {
        var e = this.localeData()._week;
        return Ae(this.year(), e.dow, e.doy);
    }, mn.isoWeeksInYear = function() {
        return Ae(this.year(), 1, 4);
    }, mn.date = un, mn.day = mn.days = function(e) {
        if (!this.isValid()) return null != e ? this : NaN;
        var t, n, s = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        return null != e ? (t = e, n = this.localeData(), e = "string" != typeof t ? t : isNaN(t) ? "number" == typeof (t = n.weekdaysParse(t)) ? t : null : parseInt(t, 10), 
        this.add(e - s, "d")) : s;
    }, mn.weekday = function(e) {
        if (!this.isValid()) return null != e ? this : NaN;
        var t = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == e ? t : this.add(e - t, "d");
    }, mn.isoWeekday = function(e) {
        if (!this.isValid()) return null != e ? this : NaN;
        if (null == e) return this.day() || 7;
        var t, n, s = (t = e, n = this.localeData(), "string" == typeof t ? n.weekdaysParse(t) % 7 || 7 : isNaN(t) ? null : t);
        return this.day(this.day() % 7 ? s : s - 7);
    }, mn.dayOfYear = function(e) {
        var t = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
        return null == e ? t : this.add(e - t, "d");
    }, mn.hour = mn.hours = nt, mn.minute = mn.minutes = ln, mn.second = mn.seconds = dn, 
    mn.millisecond = mn.milliseconds = fn, mn.utcOffset = function(e, t, n) {
        var s, i = this._offset || 0;
        if (!this.isValid()) return null != e ? this : NaN;
        if (null == e) return this._isUTC ? i : Vt(this);
        if ("string" == typeof e) {
            if (null === (e = Nt(re, e))) return this;
        } else Math.abs(e) < 16 && !n && (e *= 60);
        return !this._isUTC && t && (s = Vt(this)), this._offset = e, this._isUTC = !0, 
        null != s && this.add(s, "m"), i !== e && (!t || this._changeInProgress ? qt(this, jt(e - i, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, 
        c.updateOffset(this, !0), this._changeInProgress = null)), this;
    }, mn.utc = function(e) {
        return this.utcOffset(0, e);
    }, mn.local = function(e) {
        return this._isUTC && (this.utcOffset(0, e), this._isUTC = !1, e && this.subtract(Vt(this), "m")), 
        this;
    }, mn.parseZone = function() {
        if (null != this._tzm) this.utcOffset(this._tzm, !1, !0); else if ("string" == typeof this._i) {
            var e = Nt(ie, this._i);
            null != e ? this.utcOffset(e) : this.utcOffset(0, !0);
        }
        return this;
    }, mn.hasAlignedHourOffset = function(e) {
        return !!this.isValid() && (e = e ? bt(e).utcOffset() : 0, (this.utcOffset() - e) % 60 == 0);
    }, mn.isDST = function() {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
    }, mn.isLocal = function() {
        return !!this.isValid() && !this._isUTC;
    }, mn.isUtcOffset = function() {
        return !!this.isValid() && this._isUTC;
    }, mn.isUtc = Et, mn.isUTC = Et, mn.zoneAbbr = function() {
        return this._isUTC ? "UTC" : "";
    }, mn.zoneName = function() {
        return this._isUTC ? "Coordinated Universal Time" : "";
    }, mn.dates = n("dates accessor is deprecated. Use date instead.", un), mn.months = n("months accessor is deprecated. Use month instead", Ue), 
    mn.years = n("years accessor is deprecated. Use year instead", Oe), mn.zone = n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function(e, t) {
        return null != e ? ("string" != typeof e && (e = -e), this.utcOffset(e, t), this) : -this.utcOffset();
    }), mn.isDSTShifted = n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function() {
        if (!l(this._isDSTShifted)) return this._isDSTShifted;
        var e = {};
        if (w(e, this), (e = Ot(e))._a) {
            var t = e._isUTC ? y(e._a) : bt(e._a);
            this._isDSTShifted = this.isValid() && 0 < a(e._a, t.toArray());
        } else this._isDSTShifted = !1;
        return this._isDSTShifted;
    });
    var yn = P.prototype;
    function gn(e, t, n, s) {
        var i = ht(), r = y().set(s, t);
        return i[n](r, e);
    }
    function vn(e, t, n) {
        if (h(e) && (t = e, e = void 0), e = e || "", null != t) return gn(e, t, n, "month");
        var s, i = [];
        for (s = 0; s < 12; s++) i[s] = gn(e, s, n, "month");
        return i;
    }
    function pn(e, t, n, s) {
        t = ("boolean" == typeof e ? h(t) && (n = t, t = void 0) : (t = e, e = !1, h(n = t) && (n = t, 
        t = void 0)), t || "");
        var i, r = ht(), a = e ? r._week.dow : 0;
        if (null != n) return gn(t, (n + a) % 7, s, "day");
        var o = [];
        for (i = 0; i < 7; i++) o[i] = gn(t, (i + a) % 7, s, "day");
        return o;
    }
    yn.calendar = function(e, t, n) {
        var s = this._calendar[e] || this._calendar.sameElse;
        return b(s) ? s.call(t, n) : s;
    }, yn.longDateFormat = function(e) {
        var t = this._longDateFormat[e], n = this._longDateFormat[e.toUpperCase()];
        return t || !n ? t : (this._longDateFormat[e] = n.replace(/MMMM|MM|DD|dddd/g, function(e) {
            return e.slice(1);
        }), this._longDateFormat[e]);
    }, yn.invalidDate = function() {
        return this._invalidDate;
    }, yn.ordinal = function(e) {
        return this._ordinal.replace("%d", e);
    }, yn.preparse = _n, yn.postformat = _n, yn.relativeTime = function(e, t, n, s) {
        var i = this._relativeTime[n];
        return b(i) ? i(e, t, n, s) : i.replace(/%d/i, e);
    }, yn.pastFuture = function(e, t) {
        var n = this._relativeTime[0 < e ? "future" : "past"];
        return b(n) ? n(t) : n.replace(/%s/i, t);
    }, yn.set = function(e) {
        var t, n;
        for (n in e) b(t = e[n]) ? this[n] = t : this["_" + n] = t;
        this._config = e, this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source);
    }, yn.months = function(e, t) {
        return e ? o(this._months) ? this._months[e.month()] : this._months[(this._months.isFormat || We).test(t) ? "format" : "standalone"][e.month()] : o(this._months) ? this._months : this._months.standalone;
    }, yn.monthsShort = function(e, t) {
        return e ? o(this._monthsShort) ? this._monthsShort[e.month()] : this._monthsShort[We.test(t) ? "format" : "standalone"][e.month()] : o(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone;
    }, yn.monthsParse = function(e, t, n) {
        var s, i, r;
        if (this._monthsParseExact) return function(e, t, n) {
            var s, i, r, a = e.toLocaleLowerCase();
            if (!this._monthsParse) for (this._monthsParse = [], this._longMonthsParse = [], 
            this._shortMonthsParse = [], s = 0; s < 12; ++s) r = y([ 2e3, s ]), this._shortMonthsParse[s] = this.monthsShort(r, "").toLocaleLowerCase(), 
            this._longMonthsParse[s] = this.months(r, "").toLocaleLowerCase();
            return n ? "MMM" === t ? -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : null : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : null : "MMM" === t ? -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : null : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : null;
        }.call(this, e, t, n);
        for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), 
        s = 0; s < 12; s++) {
            if (i = y([ 2e3, s ]), n && !this._longMonthsParse[s] && (this._longMonthsParse[s] = new RegExp("^" + this.months(i, "").replace(".", "") + "$", "i"), 
            this._shortMonthsParse[s] = new RegExp("^" + this.monthsShort(i, "").replace(".", "") + "$", "i")), 
            n || this._monthsParse[s] || (r = "^" + this.months(i, "") + "|^" + this.monthsShort(i, ""), 
            this._monthsParse[s] = new RegExp(r.replace(".", ""), "i")), n && "MMMM" === t && this._longMonthsParse[s].test(e)) return s;
            if (n && "MMM" === t && this._shortMonthsParse[s].test(e)) return s;
            if (!n && this._monthsParse[s].test(e)) return s;
        }
    }, yn.monthsRegex = function(e) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || Ne.call(this), e ? this._monthsStrictRegex : this._monthsRegex) : (m(this, "_monthsRegex") || (this._monthsRegex = Le), 
        this._monthsStrictRegex && e ? this._monthsStrictRegex : this._monthsRegex);
    }, yn.monthsShortRegex = function(e) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || Ne.call(this), e ? this._monthsShortStrictRegex : this._monthsShortRegex) : (m(this, "_monthsShortRegex") || (this._monthsShortRegex = Fe), 
        this._monthsShortStrictRegex && e ? this._monthsShortStrictRegex : this._monthsShortRegex);
    }, yn.week = function(e) {
        return Ie(e, this._week.dow, this._week.doy).week;
    }, yn.firstDayOfYear = function() {
        return this._week.doy;
    }, yn.firstDayOfWeek = function() {
        return this._week.dow;
    }, yn.weekdays = function(e, t) {
        var n = o(this._weekdays) ? this._weekdays : this._weekdays[e && !0 !== e && this._weekdays.isFormat.test(t) ? "format" : "standalone"];
        return !0 === e ? je(n, this._week.dow) : e ? n[e.day()] : n;
    }, yn.weekdaysMin = function(e) {
        return !0 === e ? je(this._weekdaysMin, this._week.dow) : e ? this._weekdaysMin[e.day()] : this._weekdaysMin;
    }, yn.weekdaysShort = function(e) {
        return !0 === e ? je(this._weekdaysShort, this._week.dow) : e ? this._weekdaysShort[e.day()] : this._weekdaysShort;
    }, yn.weekdaysParse = function(e, t, n) {
        var s, i, r;
        if (this._weekdaysParseExact) return function(e, t, n) {
            var s, i, r, a = e.toLocaleLowerCase();
            if (!this._weekdaysParse) for (this._weekdaysParse = [], this._shortWeekdaysParse = [], 
            this._minWeekdaysParse = [], s = 0; s < 7; ++s) r = y([ 2e3, 1 ]).day(s), this._minWeekdaysParse[s] = this.weekdaysMin(r, "").toLocaleLowerCase(), 
            this._shortWeekdaysParse[s] = this.weekdaysShort(r, "").toLocaleLowerCase(), this._weekdaysParse[s] = this.weekdays(r, "").toLocaleLowerCase();
            return n ? "dddd" === t ? -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : null : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : "dddd" === t ? -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : null;
        }.call(this, e, t, n);
        for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], 
        this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), s = 0; s < 7; s++) {
            if (i = y([ 2e3, 1 ]).day(s), n && !this._fullWeekdaysParse[s] && (this._fullWeekdaysParse[s] = new RegExp("^" + this.weekdays(i, "").replace(".", "\\.?") + "$", "i"), 
            this._shortWeekdaysParse[s] = new RegExp("^" + this.weekdaysShort(i, "").replace(".", "\\.?") + "$", "i"), 
            this._minWeekdaysParse[s] = new RegExp("^" + this.weekdaysMin(i, "").replace(".", "\\.?") + "$", "i")), 
            this._weekdaysParse[s] || (r = "^" + this.weekdays(i, "") + "|^" + this.weekdaysShort(i, "") + "|^" + this.weekdaysMin(i, ""), 
            this._weekdaysParse[s] = new RegExp(r.replace(".", ""), "i")), n && "dddd" === t && this._fullWeekdaysParse[s].test(e)) return s;
            if (n && "ddd" === t && this._shortWeekdaysParse[s].test(e)) return s;
            if (n && "dd" === t && this._minWeekdaysParse[s].test(e)) return s;
            if (!n && this._weekdaysParse[s].test(e)) return s;
        }
    }, yn.weekdaysRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysStrictRegex : this._weekdaysRegex) : (m(this, "_weekdaysRegex") || (this._weekdaysRegex = qe), 
        this._weekdaysStrictRegex && e ? this._weekdaysStrictRegex : this._weekdaysRegex);
    }, yn.weekdaysShortRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (m(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = Je), 
        this._weekdaysShortStrictRegex && e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex);
    }, yn.weekdaysMinRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (m(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = Be), 
        this._weekdaysMinStrictRegex && e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex);
    }, yn.isPM = function(e) {
        return "p" === (e + "").toLowerCase().charAt(0);
    }, yn.meridiem = function(e, t, n) {
        return 11 < e ? n ? "pm" : "PM" : n ? "am" : "AM";
    }, ut("en", {
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(e) {
            var t = e % 10;
            return e + (1 === D(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th");
        }
    }), c.lang = n("moment.lang is deprecated. Use moment.locale instead.", ut), c.langData = n("moment.langData is deprecated. Use moment.localeData instead.", ht);
    var wn = Math.abs;
    function Mn(e, t, n, s) {
        var i = jt(t, n);
        return e._milliseconds += s * i._milliseconds, e._days += s * i._days, e._months += s * i._months, 
        e._bubble();
    }
    function kn(e) {
        return e < 0 ? Math.floor(e) : Math.ceil(e);
    }
    function Sn(e) {
        return 4800 * e / 146097;
    }
    function Dn(e) {
        return 146097 * e / 4800;
    }
    function Yn(e) {
        return function() {
            return this.as(e);
        };
    }
    var On = Yn("ms"), Tn = Yn("s"), bn = Yn("m"), xn = Yn("h"), Pn = Yn("d"), Wn = Yn("w"), Cn = Yn("M"), Hn = Yn("Q"), Rn = Yn("y");
    function Un(e) {
        return function() {
            return this.isValid() ? this._data[e] : NaN;
        };
    }
    var Fn = Un("milliseconds"), Ln = Un("seconds"), Nn = Un("minutes"), Gn = Un("hours"), Vn = Un("days"), En = Un("months"), In = Un("years");
    var An = Math.round, jn = {
        ss: 44,
        s: 45,
        m: 45,
        h: 22,
        d: 26,
        M: 11
    };
    var Zn = Math.abs;
    function zn(e) {
        return (0 < e) - (e < 0) || +e;
    }
    function $n() {
        if (!this.isValid()) return this.localeData().invalidDate();
        var e, t, n = Zn(this._milliseconds) / 1e3, s = Zn(this._days), i = Zn(this._months);
        t = S((e = S(n / 60)) / 60), n %= 60, e %= 60;
        var r = S(i / 12), a = i %= 12, o = s, u = t, l = e, h = n ? n.toFixed(3).replace(/\.?0+$/, "") : "", d = this.asSeconds();
        if (!d) return "P0D";
        var c = d < 0 ? "-" : "", f = zn(this._months) !== zn(d) ? "-" : "", m = zn(this._days) !== zn(d) ? "-" : "", _ = zn(this._milliseconds) !== zn(d) ? "-" : "";
        return c + "P" + (r ? f + r + "Y" : "") + (a ? f + a + "M" : "") + (o ? m + o + "D" : "") + (u || l || h ? "T" : "") + (u ? _ + u + "H" : "") + (l ? _ + l + "M" : "") + (h ? _ + h + "S" : "");
    }
    var qn = Ht.prototype;
    return qn.isValid = function() {
        return this._isValid;
    }, qn.abs = function() {
        var e = this._data;
        return this._milliseconds = wn(this._milliseconds), this._days = wn(this._days), 
        this._months = wn(this._months), e.milliseconds = wn(e.milliseconds), e.seconds = wn(e.seconds), 
        e.minutes = wn(e.minutes), e.hours = wn(e.hours), e.months = wn(e.months), e.years = wn(e.years), 
        this;
    }, qn.add = function(e, t) {
        return Mn(this, e, t, 1);
    }, qn.subtract = function(e, t) {
        return Mn(this, e, t, -1);
    }, qn.as = function(e) {
        if (!this.isValid()) return NaN;
        var t, n, s = this._milliseconds;
        if ("month" === (e = H(e)) || "quarter" === e || "year" === e) switch (t = this._days + s / 864e5, 
        n = this._months + Sn(t), e) {
          case "month":
            return n;

          case "quarter":
            return n / 3;

          case "year":
            return n / 12;
        } else switch (t = this._days + Math.round(Dn(this._months)), e) {
          case "week":
            return t / 7 + s / 6048e5;

          case "day":
            return t + s / 864e5;

          case "hour":
            return 24 * t + s / 36e5;

          case "minute":
            return 1440 * t + s / 6e4;

          case "second":
            return 86400 * t + s / 1e3;

          case "millisecond":
            return Math.floor(864e5 * t) + s;

          default:
            throw new Error("Unknown unit " + e);
        }
    }, qn.asMilliseconds = On, qn.asSeconds = Tn, qn.asMinutes = bn, qn.asHours = xn, 
    qn.asDays = Pn, qn.asWeeks = Wn, qn.asMonths = Cn, qn.asQuarters = Hn, qn.asYears = Rn, 
    qn.valueOf = function() {
        return this.isValid() ? this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * D(this._months / 12) : NaN;
    }, qn._bubble = function() {
        var e, t, n, s, i, r = this._milliseconds, a = this._days, o = this._months, u = this._data;
        return 0 <= r && 0 <= a && 0 <= o || r <= 0 && a <= 0 && o <= 0 || (r += 864e5 * kn(Dn(o) + a), 
        o = a = 0), u.milliseconds = r % 1e3, e = S(r / 1e3), u.seconds = e % 60, t = S(e / 60), 
        u.minutes = t % 60, n = S(t / 60), u.hours = n % 24, o += i = S(Sn(a += S(n / 24))), 
        a -= kn(Dn(i)), s = S(o / 12), o %= 12, u.days = a, u.months = o, u.years = s, this;
    }, qn.clone = function() {
        return jt(this);
    }, qn.get = function(e) {
        return e = H(e), this.isValid() ? this[e + "s"]() : NaN;
    }, qn.milliseconds = Fn, qn.seconds = Ln, qn.minutes = Nn, qn.hours = Gn, qn.days = Vn, 
    qn.weeks = function() {
        return S(this.days() / 7);
    }, qn.months = En, qn.years = In, qn.humanize = function(e) {
        if (!this.isValid()) return this.localeData().invalidDate();
        var t, n, s, i, r, a, o, u, l, h, d, c = this.localeData(), f = (n = !e, s = c, 
        i = jt(t = this).abs(), r = An(i.as("s")), a = An(i.as("m")), o = An(i.as("h")), 
        u = An(i.as("d")), l = An(i.as("M")), h = An(i.as("y")), (d = r <= jn.ss && [ "s", r ] || r < jn.s && [ "ss", r ] || a <= 1 && [ "m" ] || a < jn.m && [ "mm", a ] || o <= 1 && [ "h" ] || o < jn.h && [ "hh", o ] || u <= 1 && [ "d" ] || u < jn.d && [ "dd", u ] || l <= 1 && [ "M" ] || l < jn.M && [ "MM", l ] || h <= 1 && [ "y" ] || [ "yy", h ])[2] = n, 
        d[3] = 0 < +t, d[4] = s, function(e, t, n, s, i) {
            return i.relativeTime(t || 1, !!n, e, s);
        }.apply(null, d));
        return e && (f = c.pastFuture(+this, f)), c.postformat(f);
    }, qn.toISOString = $n, qn.toString = $n, qn.toJSON = $n, qn.locale = Xt, qn.localeData = en, 
    qn.toIsoString = n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", $n), 
    qn.lang = Kt, I("X", 0, 0, "unix"), I("x", 0, 0, "valueOf"), ue("x", se), ue("X", /[+-]?\d+(\.\d{1,3})?/), 
    ce("X", function(e, t, n) {
        n._d = new Date(1e3 * parseFloat(e, 10));
    }), ce("x", function(e, t, n) {
        n._d = new Date(D(e));
    }), c.version = "2.24.0", e = bt, c.fn = mn, c.min = function() {
        return Wt("isBefore", [].slice.call(arguments, 0));
    }, c.max = function() {
        return Wt("isAfter", [].slice.call(arguments, 0));
    }, c.now = function() {
        return Date.now ? Date.now() : +new Date();
    }, c.utc = y, c.unix = function(e) {
        return bt(1e3 * e);
    }, c.months = function(e, t) {
        return vn(e, t, "months");
    }, c.isDate = d, c.locale = ut, c.invalid = p, c.duration = jt, c.isMoment = k, 
    c.weekdays = function(e, t, n) {
        return pn(e, t, n, "weekdays");
    }, c.parseZone = function() {
        return bt.apply(null, arguments).parseZone();
    }, c.localeData = ht, c.isDuration = Rt, c.monthsShort = function(e, t) {
        return vn(e, t, "monthsShort");
    }, c.weekdaysMin = function(e, t, n) {
        return pn(e, t, n, "weekdaysMin");
    }, c.defineLocale = lt, c.updateLocale = function(e, t) {
        if (null != t) {
            var n, s, i = st;
            null != (s = ot(e)) && (i = s._config), (n = new P(t = x(i, t))).parentLocale = it[e], 
            it[e] = n, ut(e);
        } else null != it[e] && (null != it[e].parentLocale ? it[e] = it[e].parentLocale : null != it[e] && delete it[e]);
        return it[e];
    }, c.locales = function() {
        return s(it);
    }, c.weekdaysShort = function(e, t, n) {
        return pn(e, t, n, "weekdaysShort");
    }, c.normalizeUnits = H, c.relativeTimeRounding = function(e) {
        return void 0 === e ? An : "function" == typeof e && (An = e, !0);
    }, c.relativeTimeThreshold = function(e, t) {
        return void 0 !== jn[e] && (void 0 === t ? jn[e] : (jn[e] = t, "s" === e && (jn.ss = t - 1), 
        !0));
    }, c.calendarFormat = function(e, t) {
        var n = e.diff(t, "days", !0);
        return n < -6 ? "sameElse" : n < -1 ? "lastWeek" : n < 0 ? "lastDay" : n < 1 ? "sameDay" : n < 2 ? "nextDay" : n < 7 ? "nextWeek" : "sameElse";
    }, c.prototype = mn, c.HTML5_FMT = {
        DATETIME_LOCAL: "YYYY-MM-DDTHH:mm",
        DATETIME_LOCAL_SECONDS: "YYYY-MM-DDTHH:mm:ss",
        DATETIME_LOCAL_MS: "YYYY-MM-DDTHH:mm:ss.SSS",
        DATE: "YYYY-MM-DD",
        TIME: "HH:mm",
        TIME_SECONDS: "HH:mm:ss",
        TIME_MS: "HH:mm:ss.SSS",
        WEEK: "GGGG-[W]WW",
        MONTH: "YYYY-MM"
    }, c;
});

!function(t, e) {
    "function" == typeof define && define.amd ? define("jquery-bridget/jquery-bridget", [ "jquery" ], function(i) {
        return e(t, i);
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("jquery")) : t.jQueryBridget = e(t, t.jQuery);
}(window, function(t, e) {
    "use strict";
    function i(i, r, a) {
        function h(t, e, n) {
            var o, r = "$()." + i + '("' + e + '")';
            return t.each(function(t, h) {
                var u = a.data(h, i);
                if (!u) return void s(i + " not initialized. Cannot call methods, i.e. " + r);
                var d = u[e];
                if (!d || "_" == e.charAt(0)) return void s(r + " is not a valid method");
                var l = d.apply(u, n);
                o = void 0 === o ? l : o;
            }), void 0 !== o ? o : t;
        }
        function u(t, e) {
            t.each(function(t, n) {
                var o = a.data(n, i);
                o ? (o.option(e), o._init()) : (o = new r(n, e), a.data(n, i, o));
            });
        }
        a = a || e || t.jQuery, a && (r.prototype.option || (r.prototype.option = function(t) {
            a.isPlainObject(t) && (this.options = a.extend(!0, this.options, t));
        }), a.fn[i] = function(t) {
            if ("string" == typeof t) {
                var e = o.call(arguments, 1);
                return h(this, t, e);
            }
            return u(this, t), this;
        }, n(a));
    }
    function n(t) {
        !t || t && t.bridget || (t.bridget = i);
    }
    var o = Array.prototype.slice, r = t.console, s = "undefined" == typeof r ? function() {} : function(t) {
        r.error(t);
    };
    return n(e || t.jQuery), i;
}), function(t, e) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", e) : "object" == typeof module && module.exports ? module.exports = e() : t.EvEmitter = e();
}("undefined" != typeof window ? window : this, function() {
    function t() {}
    var e = t.prototype;
    return e.on = function(t, e) {
        if (t && e) {
            var i = this._events = this._events || {}, n = i[t] = i[t] || [];
            return -1 == n.indexOf(e) && n.push(e), this;
        }
    }, e.once = function(t, e) {
        if (t && e) {
            this.on(t, e);
            var i = this._onceEvents = this._onceEvents || {}, n = i[t] = i[t] || {};
            return n[e] = !0, this;
        }
    }, e.off = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            var n = i.indexOf(e);
            return -1 != n && i.splice(n, 1), this;
        }
    }, e.emitEvent = function(t, e) {
        var i = this._events && this._events[t];
        if (i && i.length) {
            i = i.slice(0), e = e || [];
            for (var n = this._onceEvents && this._onceEvents[t], o = 0; o < i.length; o++) {
                var r = i[o], s = n && n[r];
                s && (this.off(t, r), delete n[r]), r.apply(this, e);
            }
            return this;
        }
    }, e.allOff = function() {
        delete this._events, delete this._onceEvents;
    }, t;
}), function(t, e) {
    "function" == typeof define && define.amd ? define("get-size/get-size", e) : "object" == typeof module && module.exports ? module.exports = e() : t.getSize = e();
}(window, function() {
    "use strict";
    function t(t) {
        var e = parseFloat(t), i = -1 == t.indexOf("%") && !isNaN(e);
        return i && e;
    }
    function e() {}
    function i() {
        for (var t = {
            width: 0,
            height: 0,
            innerWidth: 0,
            innerHeight: 0,
            outerWidth: 0,
            outerHeight: 0
        }, e = 0; u > e; e++) {
            var i = h[e];
            t[i] = 0;
        }
        return t;
    }
    function n(t) {
        var e = getComputedStyle(t);
        return e || a("Style returned " + e + ". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"), 
        e;
    }
    function o() {
        if (!d) {
            d = !0;
            var e = document.createElement("div");
            e.style.width = "200px", e.style.padding = "1px 2px 3px 4px", e.style.borderStyle = "solid", 
            e.style.borderWidth = "1px 2px 3px 4px", e.style.boxSizing = "border-box";
            var i = document.body || document.documentElement;
            i.appendChild(e);
            var o = n(e);
            s = 200 == Math.round(t(o.width)), r.isBoxSizeOuter = s, i.removeChild(e);
        }
    }
    function r(e) {
        if (o(), "string" == typeof e && (e = document.querySelector(e)), e && "object" == typeof e && e.nodeType) {
            var r = n(e);
            if ("none" == r.display) return i();
            var a = {};
            a.width = e.offsetWidth, a.height = e.offsetHeight;
            for (var d = a.isBorderBox = "border-box" == r.boxSizing, l = 0; u > l; l++) {
                var c = h[l], f = r[c], m = parseFloat(f);
                a[c] = isNaN(m) ? 0 : m;
            }
            var p = a.paddingLeft + a.paddingRight, g = a.paddingTop + a.paddingBottom, y = a.marginLeft + a.marginRight, v = a.marginTop + a.marginBottom, _ = a.borderLeftWidth + a.borderRightWidth, z = a.borderTopWidth + a.borderBottomWidth, E = d && s, b = t(r.width);
            b !== !1 && (a.width = b + (E ? 0 : p + _));
            var x = t(r.height);
            return x !== !1 && (a.height = x + (E ? 0 : g + z)), a.innerWidth = a.width - (p + _), 
            a.innerHeight = a.height - (g + z), a.outerWidth = a.width + y, a.outerHeight = a.height + v, 
            a;
        }
    }
    var s, a = "undefined" == typeof console ? e : function(t) {
        console.error(t);
    }, h = [ "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth" ], u = h.length, d = !1;
    return r;
}), function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("desandro-matches-selector/matches-selector", e) : "object" == typeof module && module.exports ? module.exports = e() : t.matchesSelector = e();
}(window, function() {
    "use strict";
    var t = function() {
        var t = window.Element.prototype;
        if (t.matches) return "matches";
        if (t.matchesSelector) return "matchesSelector";
        for (var e = [ "webkit", "moz", "ms", "o" ], i = 0; i < e.length; i++) {
            var n = e[i], o = n + "MatchesSelector";
            if (t[o]) return o;
        }
    }();
    return function(e, i) {
        return e[t](i);
    };
}), function(t, e) {
    "function" == typeof define && define.amd ? define("fizzy-ui-utils/utils", [ "desandro-matches-selector/matches-selector" ], function(i) {
        return e(t, i);
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("desandro-matches-selector")) : t.fizzyUIUtils = e(t, t.matchesSelector);
}(window, function(t, e) {
    var i = {};
    i.extend = function(t, e) {
        for (var i in e) t[i] = e[i];
        return t;
    }, i.modulo = function(t, e) {
        return (t % e + e) % e;
    };
    var n = Array.prototype.slice;
    i.makeArray = function(t) {
        if (Array.isArray(t)) return t;
        if (null === t || void 0 === t) return [];
        var e = "object" == typeof t && "number" == typeof t.length;
        return e ? n.call(t) : [ t ];
    }, i.removeFrom = function(t, e) {
        var i = t.indexOf(e);
        -1 != i && t.splice(i, 1);
    }, i.getParent = function(t, i) {
        for (;t.parentNode && t != document.body; ) if (t = t.parentNode, e(t, i)) return t;
    }, i.getQueryElement = function(t) {
        return "string" == typeof t ? document.querySelector(t) : t;
    }, i.handleEvent = function(t) {
        var e = "on" + t.type;
        this[e] && this[e](t);
    }, i.filterFindElements = function(t, n) {
        t = i.makeArray(t);
        var o = [];
        return t.forEach(function(t) {
            if (t instanceof HTMLElement) {
                if (!n) return void o.push(t);
                e(t, n) && o.push(t);
                for (var i = t.querySelectorAll(n), r = 0; r < i.length; r++) o.push(i[r]);
            }
        }), o;
    }, i.debounceMethod = function(t, e, i) {
        i = i || 100;
        var n = t.prototype[e], o = e + "Timeout";
        t.prototype[e] = function() {
            var t = this[o];
            clearTimeout(t);
            var e = arguments, r = this;
            this[o] = setTimeout(function() {
                n.apply(r, e), delete r[o];
            }, i);
        };
    }, i.docReady = function(t) {
        var e = document.readyState;
        "complete" == e || "interactive" == e ? setTimeout(t) : document.addEventListener("DOMContentLoaded", t);
    }, i.toDashed = function(t) {
        return t.replace(/(.)([A-Z])/g, function(t, e, i) {
            return e + "-" + i;
        }).toLowerCase();
    };
    var o = t.console;
    return i.htmlInit = function(e, n) {
        i.docReady(function() {
            var r = i.toDashed(n), s = "data-" + r, a = document.querySelectorAll("[" + s + "]"), h = document.querySelectorAll(".js-" + r), u = i.makeArray(a).concat(i.makeArray(h)), d = s + "-options", l = t.jQuery;
            u.forEach(function(t) {
                var i, r = t.getAttribute(s) || t.getAttribute(d);
                try {
                    i = r && JSON.parse(r);
                } catch (a) {
                    return void (o && o.error("Error parsing " + s + " on " + t.className + ": " + a));
                }
                var h = new e(t, i);
                l && l.data(t, n, h);
            });
        });
    }, i;
}), function(t, e) {
    "function" == typeof define && define.amd ? define("outlayer/item", [ "ev-emitter/ev-emitter", "get-size/get-size" ], e) : "object" == typeof module && module.exports ? module.exports = e(require("ev-emitter"), require("get-size")) : (t.Outlayer = {}, 
    t.Outlayer.Item = e(t.EvEmitter, t.getSize));
}(window, function(t, e) {
    "use strict";
    function i(t) {
        for (var e in t) return !1;
        return e = null, !0;
    }
    function n(t, e) {
        t && (this.element = t, this.layout = e, this.position = {
            x: 0,
            y: 0
        }, this._create());
    }
    function o(t) {
        return t.replace(/([A-Z])/g, function(t) {
            return "-" + t.toLowerCase();
        });
    }
    var r = document.documentElement.style, s = "string" == typeof r.transition ? "transition" : "WebkitTransition", a = "string" == typeof r.transform ? "transform" : "WebkitTransform", h = {
        WebkitTransition: "webkitTransitionEnd",
        transition: "transitionend"
    }[s], u = {
        transform: a,
        transition: s,
        transitionDuration: s + "Duration",
        transitionProperty: s + "Property",
        transitionDelay: s + "Delay"
    }, d = n.prototype = Object.create(t.prototype);
    d.constructor = n, d._create = function() {
        this._transn = {
            ingProperties: {},
            clean: {},
            onEnd: {}
        }, this.css({
            position: "absolute"
        });
    }, d.handleEvent = function(t) {
        var e = "on" + t.type;
        this[e] && this[e](t);
    }, d.getSize = function() {
        this.size = e(this.element);
    }, d.css = function(t) {
        var e = this.element.style;
        for (var i in t) {
            var n = u[i] || i;
            e[n] = t[i];
        }
    }, d.getPosition = function() {
        var t = getComputedStyle(this.element), e = this.layout._getOption("originLeft"), i = this.layout._getOption("originTop"), n = t[e ? "left" : "right"], o = t[i ? "top" : "bottom"], r = parseFloat(n), s = parseFloat(o), a = this.layout.size;
        -1 != n.indexOf("%") && (r = r / 100 * a.width), -1 != o.indexOf("%") && (s = s / 100 * a.height), 
        r = isNaN(r) ? 0 : r, s = isNaN(s) ? 0 : s, r -= e ? a.paddingLeft : a.paddingRight, 
        s -= i ? a.paddingTop : a.paddingBottom, this.position.x = r, this.position.y = s;
    }, d.layoutPosition = function() {
        var t = this.layout.size, e = {}, i = this.layout._getOption("originLeft"), n = this.layout._getOption("originTop"), o = i ? "paddingLeft" : "paddingRight", r = i ? "left" : "right", s = i ? "right" : "left", a = this.position.x + t[o];
        e[r] = this.getXValue(a), e[s] = "";
        var h = n ? "paddingTop" : "paddingBottom", u = n ? "top" : "bottom", d = n ? "bottom" : "top", l = this.position.y + t[h];
        e[u] = this.getYValue(l), e[d] = "", this.css(e), this.emitEvent("layout", [ this ]);
    }, d.getXValue = function(t) {
        var e = this.layout._getOption("horizontal");
        return this.layout.options.percentPosition && !e ? t / this.layout.size.width * 100 + "%" : t + "px";
    }, d.getYValue = function(t) {
        var e = this.layout._getOption("horizontal");
        return this.layout.options.percentPosition && e ? t / this.layout.size.height * 100 + "%" : t + "px";
    }, d._transitionTo = function(t, e) {
        this.getPosition();
        var i = this.position.x, n = this.position.y, o = t == this.position.x && e == this.position.y;
        if (this.setPosition(t, e), o && !this.isTransitioning) return void this.layoutPosition();
        var r = t - i, s = e - n, a = {};
        a.transform = this.getTranslate(r, s), this.transition({
            to: a,
            onTransitionEnd: {
                transform: this.layoutPosition
            },
            isCleaning: !0
        });
    }, d.getTranslate = function(t, e) {
        var i = this.layout._getOption("originLeft"), n = this.layout._getOption("originTop");
        return t = i ? t : -t, e = n ? e : -e, "translate3d(" + t + "px, " + e + "px, 0)";
    }, d.goTo = function(t, e) {
        this.setPosition(t, e), this.layoutPosition();
    }, d.moveTo = d._transitionTo, d.setPosition = function(t, e) {
        this.position.x = parseFloat(t), this.position.y = parseFloat(e);
    }, d._nonTransition = function(t) {
        this.css(t.to), t.isCleaning && this._removeStyles(t.to);
        for (var e in t.onTransitionEnd) t.onTransitionEnd[e].call(this);
    }, d.transition = function(t) {
        if (!parseFloat(this.layout.options.transitionDuration)) return void this._nonTransition(t);
        var e = this._transn;
        for (var i in t.onTransitionEnd) e.onEnd[i] = t.onTransitionEnd[i];
        for (i in t.to) e.ingProperties[i] = !0, t.isCleaning && (e.clean[i] = !0);
        if (t.from) {
            this.css(t.from);
            var n = this.element.offsetHeight;
            n = null;
        }
        this.enableTransition(t.to), this.css(t.to), this.isTransitioning = !0;
    };
    var l = "opacity," + o(a);
    d.enableTransition = function() {
        if (!this.isTransitioning) {
            var t = this.layout.options.transitionDuration;
            t = "number" == typeof t ? t + "ms" : t, this.css({
                transitionProperty: l,
                transitionDuration: t,
                transitionDelay: this.staggerDelay || 0
            }), this.element.addEventListener(h, this, !1);
        }
    }, d.onwebkitTransitionEnd = function(t) {
        this.ontransitionend(t);
    }, d.onotransitionend = function(t) {
        this.ontransitionend(t);
    };
    var c = {
        "-webkit-transform": "transform"
    };
    d.ontransitionend = function(t) {
        if (t.target === this.element) {
            var e = this._transn, n = c[t.propertyName] || t.propertyName;
            if (delete e.ingProperties[n], i(e.ingProperties) && this.disableTransition(), n in e.clean && (this.element.style[t.propertyName] = "", 
            delete e.clean[n]), n in e.onEnd) {
                var o = e.onEnd[n];
                o.call(this), delete e.onEnd[n];
            }
            this.emitEvent("transitionEnd", [ this ]);
        }
    }, d.disableTransition = function() {
        this.removeTransitionStyles(), this.element.removeEventListener(h, this, !1), this.isTransitioning = !1;
    }, d._removeStyles = function(t) {
        var e = {};
        for (var i in t) e[i] = "";
        this.css(e);
    };
    var f = {
        transitionProperty: "",
        transitionDuration: "",
        transitionDelay: ""
    };
    return d.removeTransitionStyles = function() {
        this.css(f);
    }, d.stagger = function(t) {
        t = isNaN(t) ? 0 : t, this.staggerDelay = t + "ms";
    }, d.removeElem = function() {
        this.element.parentNode.removeChild(this.element), this.css({
            display: ""
        }), this.emitEvent("remove", [ this ]);
    }, d.remove = function() {
        return s && parseFloat(this.layout.options.transitionDuration) ? (this.once("transitionEnd", function() {
            this.removeElem();
        }), void this.hide()) : void this.removeElem();
    }, d.reveal = function() {
        delete this.isHidden, this.css({
            display: ""
        });
        var t = this.layout.options, e = {}, i = this.getHideRevealTransitionEndProperty("visibleStyle");
        e[i] = this.onRevealTransitionEnd, this.transition({
            from: t.hiddenStyle,
            to: t.visibleStyle,
            isCleaning: !0,
            onTransitionEnd: e
        });
    }, d.onRevealTransitionEnd = function() {
        this.isHidden || this.emitEvent("reveal");
    }, d.getHideRevealTransitionEndProperty = function(t) {
        var e = this.layout.options[t];
        if (e.opacity) return "opacity";
        for (var i in e) return i;
    }, d.hide = function() {
        this.isHidden = !0, this.css({
            display: ""
        });
        var t = this.layout.options, e = {}, i = this.getHideRevealTransitionEndProperty("hiddenStyle");
        e[i] = this.onHideTransitionEnd, this.transition({
            from: t.visibleStyle,
            to: t.hiddenStyle,
            isCleaning: !0,
            onTransitionEnd: e
        });
    }, d.onHideTransitionEnd = function() {
        this.isHidden && (this.css({
            display: "none"
        }), this.emitEvent("hide"));
    }, d.destroy = function() {
        this.css({
            position: "",
            left: "",
            right: "",
            top: "",
            bottom: "",
            transition: "",
            transform: ""
        });
    }, n;
}), function(t, e) {
    "use strict";
    "function" == typeof define && define.amd ? define("outlayer/outlayer", [ "ev-emitter/ev-emitter", "get-size/get-size", "fizzy-ui-utils/utils", "./item" ], function(i, n, o, r) {
        return e(t, i, n, o, r);
    }) : "object" == typeof module && module.exports ? module.exports = e(t, require("ev-emitter"), require("get-size"), require("fizzy-ui-utils"), require("./item")) : t.Outlayer = e(t, t.EvEmitter, t.getSize, t.fizzyUIUtils, t.Outlayer.Item);
}(window, function(t, e, i, n, o) {
    "use strict";
    function r(t, e) {
        var i = n.getQueryElement(t);
        if (!i) return void (h && h.error("Bad element for " + this.constructor.namespace + ": " + (i || t)));
        this.element = i, u && (this.$element = u(this.element)), this.options = n.extend({}, this.constructor.defaults), 
        this.option(e);
        var o = ++l;
        this.element.outlayerGUID = o, c[o] = this, this._create();
        var r = this._getOption("initLayout");
        r && this.layout();
    }
    function s(t) {
        function e() {
            t.apply(this, arguments);
        }
        return e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e;
    }
    function a(t) {
        if ("number" == typeof t) return t;
        var e = t.match(/(^\d*\.?\d*)(\w*)/), i = e && e[1], n = e && e[2];
        if (!i.length) return 0;
        i = parseFloat(i);
        var o = m[n] || 1;
        return i * o;
    }
    var h = t.console, u = t.jQuery, d = function() {}, l = 0, c = {};
    r.namespace = "outlayer", r.Item = o, r.defaults = {
        containerStyle: {
            position: "relative"
        },
        initLayout: !0,
        originLeft: !0,
        originTop: !0,
        resize: !0,
        resizeContainer: !0,
        transitionDuration: "0.4s",
        hiddenStyle: {
            opacity: 0,
            transform: "scale(0.001)"
        },
        visibleStyle: {
            opacity: 1,
            transform: "scale(1)"
        }
    };
    var f = r.prototype;
    n.extend(f, e.prototype), f.option = function(t) {
        n.extend(this.options, t);
    }, f._getOption = function(t) {
        var e = this.constructor.compatOptions[t];
        return e && void 0 !== this.options[e] ? this.options[e] : this.options[t];
    }, r.compatOptions = {
        initLayout: "isInitLayout",
        horizontal: "isHorizontal",
        layoutInstant: "isLayoutInstant",
        originLeft: "isOriginLeft",
        originTop: "isOriginTop",
        resize: "isResizeBound",
        resizeContainer: "isResizingContainer"
    }, f._create = function() {
        this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), n.extend(this.element.style, this.options.containerStyle);
        var t = this._getOption("resize");
        t && this.bindResize();
    }, f.reloadItems = function() {
        this.items = this._itemize(this.element.children);
    }, f._itemize = function(t) {
        for (var e = this._filterFindItemElements(t), i = this.constructor.Item, n = [], o = 0; o < e.length; o++) {
            var r = e[o], s = new i(r, this);
            n.push(s);
        }
        return n;
    }, f._filterFindItemElements = function(t) {
        return n.filterFindElements(t, this.options.itemSelector);
    }, f.getItemElements = function() {
        return this.items.map(function(t) {
            return t.element;
        });
    }, f.layout = function() {
        this._resetLayout(), this._manageStamps();
        var t = this._getOption("layoutInstant"), e = void 0 !== t ? t : !this._isLayoutInited;
        this.layoutItems(this.items, e), this._isLayoutInited = !0;
    }, f._init = f.layout, f._resetLayout = function() {
        this.getSize();
    }, f.getSize = function() {
        this.size = i(this.element);
    }, f._getMeasurement = function(t, e) {
        var n, o = this.options[t];
        o ? ("string" == typeof o ? n = this.element.querySelector(o) : o instanceof HTMLElement && (n = o), 
        this[t] = n ? i(n)[e] : o) : this[t] = 0;
    }, f.layoutItems = function(t, e) {
        t = this._getItemsForLayout(t), this._layoutItems(t, e), this._postLayout();
    }, f._getItemsForLayout = function(t) {
        return t.filter(function(t) {
            return !t.isIgnored;
        });
    }, f._layoutItems = function(t, e) {
        if (this._emitCompleteOnItems("layout", t), t && t.length) {
            var i = [];
            t.forEach(function(t) {
                var n = this._getItemLayoutPosition(t);
                n.item = t, n.isInstant = e || t.isLayoutInstant, i.push(n);
            }, this), this._processLayoutQueue(i);
        }
    }, f._getItemLayoutPosition = function() {
        return {
            x: 0,
            y: 0
        };
    }, f._processLayoutQueue = function(t) {
        this.updateStagger(), t.forEach(function(t, e) {
            this._positionItem(t.item, t.x, t.y, t.isInstant, e);
        }, this);
    }, f.updateStagger = function() {
        var t = this.options.stagger;
        return null === t || void 0 === t ? void (this.stagger = 0) : (this.stagger = a(t), 
        this.stagger);
    }, f._positionItem = function(t, e, i, n, o) {
        n ? t.goTo(e, i) : (t.stagger(o * this.stagger), t.moveTo(e, i));
    }, f._postLayout = function() {
        this.resizeContainer();
    }, f.resizeContainer = function() {
        var t = this._getOption("resizeContainer");
        if (t) {
            var e = this._getContainerSize();
            e && (this._setContainerMeasure(e.width, !0), this._setContainerMeasure(e.height, !1));
        }
    }, f._getContainerSize = d, f._setContainerMeasure = function(t, e) {
        if (void 0 !== t) {
            var i = this.size;
            i.isBorderBox && (t += e ? i.paddingLeft + i.paddingRight + i.borderLeftWidth + i.borderRightWidth : i.paddingBottom + i.paddingTop + i.borderTopWidth + i.borderBottomWidth), 
            t = Math.max(t, 0), this.element.style[e ? "width" : "height"] = t + "px";
        }
    }, f._emitCompleteOnItems = function(t, e) {
        function i() {
            o.dispatchEvent(t + "Complete", null, [ e ]);
        }
        function n() {
            s++, s == r && i();
        }
        var o = this, r = e.length;
        if (!e || !r) return void i();
        var s = 0;
        e.forEach(function(e) {
            e.once(t, n);
        });
    }, f.dispatchEvent = function(t, e, i) {
        var n = e ? [ e ].concat(i) : i;
        if (this.emitEvent(t, n), u) if (this.$element = this.$element || u(this.element), 
        e) {
            var o = u.Event(e);
            o.type = t, this.$element.trigger(o, i);
        } else this.$element.trigger(t, i);
    }, f.ignore = function(t) {
        var e = this.getItem(t);
        e && (e.isIgnored = !0);
    }, f.unignore = function(t) {
        var e = this.getItem(t);
        e && delete e.isIgnored;
    }, f.stamp = function(t) {
        t = this._find(t), t && (this.stamps = this.stamps.concat(t), t.forEach(this.ignore, this));
    }, f.unstamp = function(t) {
        t = this._find(t), t && t.forEach(function(t) {
            n.removeFrom(this.stamps, t), this.unignore(t);
        }, this);
    }, f._find = function(t) {
        return t ? ("string" == typeof t && (t = this.element.querySelectorAll(t)), t = n.makeArray(t)) : void 0;
    }, f._manageStamps = function() {
        this.stamps && this.stamps.length && (this._getBoundingRect(), this.stamps.forEach(this._manageStamp, this));
    }, f._getBoundingRect = function() {
        var t = this.element.getBoundingClientRect(), e = this.size;
        this._boundingRect = {
            left: t.left + e.paddingLeft + e.borderLeftWidth,
            top: t.top + e.paddingTop + e.borderTopWidth,
            right: t.right - (e.paddingRight + e.borderRightWidth),
            bottom: t.bottom - (e.paddingBottom + e.borderBottomWidth)
        };
    }, f._manageStamp = d, f._getElementOffset = function(t) {
        var e = t.getBoundingClientRect(), n = this._boundingRect, o = i(t), r = {
            left: e.left - n.left - o.marginLeft,
            top: e.top - n.top - o.marginTop,
            right: n.right - e.right - o.marginRight,
            bottom: n.bottom - e.bottom - o.marginBottom
        };
        return r;
    }, f.handleEvent = n.handleEvent, f.bindResize = function() {
        t.addEventListener("resize", this), this.isResizeBound = !0;
    }, f.unbindResize = function() {
        t.removeEventListener("resize", this), this.isResizeBound = !1;
    }, f.onresize = function() {
        this.resize();
    }, n.debounceMethod(r, "onresize", 100), f.resize = function() {
        this.isResizeBound && this.needsResizeLayout() && this.layout();
    }, f.needsResizeLayout = function() {
        var t = i(this.element), e = this.size && t;
        return e && t.innerWidth !== this.size.innerWidth;
    }, f.addItems = function(t) {
        var e = this._itemize(t);
        return e.length && (this.items = this.items.concat(e)), e;
    }, f.appended = function(t) {
        var e = this.addItems(t);
        e.length && (this.layoutItems(e, !0), this.reveal(e));
    }, f.prepended = function(t) {
        var e = this._itemize(t);
        if (e.length) {
            var i = this.items.slice(0);
            this.items = e.concat(i), this._resetLayout(), this._manageStamps(), this.layoutItems(e, !0), 
            this.reveal(e), this.layoutItems(i);
        }
    }, f.reveal = function(t) {
        if (this._emitCompleteOnItems("reveal", t), t && t.length) {
            var e = this.updateStagger();
            t.forEach(function(t, i) {
                t.stagger(i * e), t.reveal();
            });
        }
    }, f.hide = function(t) {
        if (this._emitCompleteOnItems("hide", t), t && t.length) {
            var e = this.updateStagger();
            t.forEach(function(t, i) {
                t.stagger(i * e), t.hide();
            });
        }
    }, f.revealItemElements = function(t) {
        var e = this.getItems(t);
        this.reveal(e);
    }, f.hideItemElements = function(t) {
        var e = this.getItems(t);
        this.hide(e);
    }, f.getItem = function(t) {
        for (var e = 0; e < this.items.length; e++) {
            var i = this.items[e];
            if (i.element == t) return i;
        }
    }, f.getItems = function(t) {
        t = n.makeArray(t);
        var e = [];
        return t.forEach(function(t) {
            var i = this.getItem(t);
            i && e.push(i);
        }, this), e;
    }, f.remove = function(t) {
        var e = this.getItems(t);
        this._emitCompleteOnItems("remove", e), e && e.length && e.forEach(function(t) {
            t.remove(), n.removeFrom(this.items, t);
        }, this);
    }, f.destroy = function() {
        var t = this.element.style;
        t.height = "", t.position = "", t.width = "", this.items.forEach(function(t) {
            t.destroy();
        }), this.unbindResize();
        var e = this.element.outlayerGUID;
        delete c[e], delete this.element.outlayerGUID, u && u.removeData(this.element, this.constructor.namespace);
    }, r.data = function(t) {
        t = n.getQueryElement(t);
        var e = t && t.outlayerGUID;
        return e && c[e];
    }, r.create = function(t, e) {
        var i = s(r);
        return i.defaults = n.extend({}, r.defaults), n.extend(i.defaults, e), i.compatOptions = n.extend({}, r.compatOptions), 
        i.namespace = t, i.data = r.data, i.Item = s(o), n.htmlInit(i, t), u && u.bridget && u.bridget(t, i), 
        i;
    };
    var m = {
        ms: 1,
        s: 1e3
    };
    return r.Item = o, r;
}), function(t, e) {
    "function" == typeof define && define.amd ? define([ "outlayer/outlayer", "get-size/get-size" ], e) : "object" == typeof module && module.exports ? module.exports = e(require("outlayer"), require("get-size")) : t.Masonry = e(t.Outlayer, t.getSize);
}(window, function(t, e) {
    var i = t.create("masonry");
    i.compatOptions.fitWidth = "isFitWidth";
    var n = i.prototype;
    return n._resetLayout = function() {
        this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), 
        this.measureColumns(), this.colYs = [];
        for (var t = 0; t < this.cols; t++) this.colYs.push(0);
        this.maxY = 0, this.horizontalColIndex = 0;
    }, n.measureColumns = function() {
        if (this.getContainerWidth(), !this.columnWidth) {
            var t = this.items[0], i = t && t.element;
            this.columnWidth = i && e(i).outerWidth || this.containerWidth;
        }
        var n = this.columnWidth += this.gutter, o = this.containerWidth + this.gutter, r = o / n, s = n - o % n, a = s && 1 > s ? "round" : "floor";
        r = Math[a](r), this.cols = Math.max(r, 1);
    }, n.getContainerWidth = function() {
        var t = this._getOption("fitWidth"), i = t ? this.element.parentNode : this.element, n = e(i);
        this.containerWidth = n && n.innerWidth;
    }, n._getItemLayoutPosition = function(t) {
        t.getSize();
        var e = t.size.outerWidth % this.columnWidth, i = e && 1 > e ? "round" : "ceil", n = Math[i](t.size.outerWidth / this.columnWidth);
        n = Math.min(n, this.cols);
        for (var o = this.options.horizontalOrder ? "_getHorizontalColPosition" : "_getTopColPosition", r = this[o](n, t), s = {
            x: this.columnWidth * r.col,
            y: r.y
        }, a = r.y + t.size.outerHeight, h = n + r.col, u = r.col; h > u; u++) this.colYs[u] = a;
        return s;
    }, n._getTopColPosition = function(t) {
        var e = this._getTopColGroup(t), i = Math.min.apply(Math, e);
        return {
            col: e.indexOf(i),
            y: i
        };
    }, n._getTopColGroup = function(t) {
        if (2 > t) return this.colYs;
        for (var e = [], i = this.cols + 1 - t, n = 0; i > n; n++) e[n] = this._getColGroupY(n, t);
        return e;
    }, n._getColGroupY = function(t, e) {
        if (2 > e) return this.colYs[t];
        var i = this.colYs.slice(t, t + e);
        return Math.max.apply(Math, i);
    }, n._getHorizontalColPosition = function(t, e) {
        var i = this.horizontalColIndex % this.cols, n = t > 1 && i + t > this.cols;
        i = n ? 0 : i;
        var o = e.size.outerWidth && e.size.outerHeight;
        return this.horizontalColIndex = o ? i + t : this.horizontalColIndex, {
            col: i,
            y: this._getColGroupY(i, t)
        };
    }, n._manageStamp = function(t) {
        var i = e(t), n = this._getElementOffset(t), o = this._getOption("originLeft"), r = o ? n.left : n.right, s = r + i.outerWidth, a = Math.floor(r / this.columnWidth);
        a = Math.max(0, a);
        var h = Math.floor(s / this.columnWidth);
        h -= s % this.columnWidth ? 0 : 1, h = Math.min(this.cols - 1, h);
        for (var u = this._getOption("originTop"), d = (u ? n.top : n.bottom) + i.outerHeight, l = a; h >= l; l++) this.colYs[l] = Math.max(d, this.colYs[l]);
    }, n._getContainerSize = function() {
        this.maxY = Math.max.apply(Math, this.colYs);
        var t = {
            height: this.maxY
        };
        return this._getOption("fitWidth") && (t.width = this._getContainerFitWidth()), 
        t;
    }, n._getContainerFitWidth = function() {
        for (var t = 0, e = this.cols; --e && 0 === this.colYs[e]; ) t++;
        return (this.cols - t) * this.columnWidth - this.gutter;
    }, n.needsResizeLayout = function() {
        var t = this.containerWidth;
        return this.getContainerWidth(), t != this.containerWidth;
    }, i;
});

!function(a, b, c, d) {
    function e(b, c) {
        this.settings = null, this.options = a.extend({}, e.Defaults, c), this.$element = a(b), 
        this._handlers = {}, this._plugins = {}, this._supress = {}, this._current = null, 
        this._speed = null, this._coordinates = [], this._breakpoint = null, this._width = null, 
        this._items = [], this._clones = [], this._mergers = [], this._widths = [], this._invalidated = {}, 
        this._pipe = [], this._drag = {
            time: null,
            target: null,
            pointer: null,
            stage: {
                start: null,
                current: null
            },
            direction: null
        }, this._states = {
            current: {},
            tags: {
                initializing: [ "busy" ],
                animating: [ "busy" ],
                dragging: [ "interacting" ]
            }
        }, a.each([ "onResize", "onThrottledResize" ], a.proxy(function(b, c) {
            this._handlers[c] = a.proxy(this[c], this);
        }, this)), a.each(e.Plugins, a.proxy(function(a, b) {
            this._plugins[a.charAt(0).toLowerCase() + a.slice(1)] = new b(this);
        }, this)), a.each(e.Workers, a.proxy(function(b, c) {
            this._pipe.push({
                filter: c.filter,
                run: a.proxy(c.run, this)
            });
        }, this)), this.setup(), this.initialize();
    }
    e.Defaults = {
        items: 3,
        loop: !1,
        center: !1,
        rewind: !1,
        mouseDrag: !0,
        touchDrag: !0,
        pullDrag: !0,
        freeDrag: !1,
        margin: 0,
        stagePadding: 0,
        merge: !1,
        mergeFit: !0,
        autoWidth: !1,
        startPosition: 0,
        rtl: !1,
        smartSpeed: 250,
        fluidSpeed: !1,
        dragEndSpeed: !1,
        responsive: {},
        responsiveRefreshRate: 200,
        responsiveBaseElement: b,
        fallbackEasing: "swing",
        info: !1,
        nestedItemSelector: !1,
        itemElement: "div",
        stageElement: "div",
        refreshClass: "owl-refresh",
        loadedClass: "owl-loaded",
        loadingClass: "owl-loading",
        rtlClass: "owl-rtl",
        responsiveClass: "owl-responsive",
        dragClass: "owl-drag",
        itemClass: "owl-item",
        stageClass: "owl-stage",
        stageOuterClass: "owl-stage-outer",
        grabClass: "owl-grab"
    }, e.Width = {
        Default: "default",
        Inner: "inner",
        Outer: "outer"
    }, e.Type = {
        Event: "event",
        State: "state"
    }, e.Plugins = {}, e.Workers = [ {
        filter: [ "width", "settings" ],
        run: function() {
            this._width = this.$element.width();
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function(a) {
            a.current = this._items && this._items[this.relative(this._current)];
        }
    }, {
        filter: [ "items", "settings" ],
        run: function() {
            this.$stage.children(".cloned").remove();
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function(a) {
            var b = this.settings.margin || "", c = !this.settings.autoWidth, d = this.settings.rtl, e = {
                width: "auto",
                "margin-left": d ? b : "",
                "margin-right": d ? "" : b
            };
            !c && this.$stage.children().css(e), a.css = e;
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function(a) {
            var b = (this.width() / this.settings.items).toFixed(3) - this.settings.margin, c = null, d = this._items.length, e = !this.settings.autoWidth, f = [];
            for (a.items = {
                merge: !1,
                width: b
            }; d--; ) c = this._mergers[d], c = this.settings.mergeFit && Math.min(c, this.settings.items) || c, 
            a.items.merge = c > 1 || a.items.merge, f[d] = e ? b * c : this._items[d].width();
            this._widths = f;
        }
    }, {
        filter: [ "items", "settings" ],
        run: function() {
            var b = [], c = this._items, d = this.settings, e = Math.max(2 * d.items, 4), f = 2 * Math.ceil(c.length / 2), g = d.loop && c.length ? d.rewind ? e : Math.max(e, f) : 0, h = "", i = "";
            for (g /= 2; g > 0; ) b.push(this.normalize(b.length / 2, !0)), h += c[b[b.length - 1]][0].outerHTML, 
            b.push(this.normalize(c.length - 1 - (b.length - 1) / 2, !0)), i = c[b[b.length - 1]][0].outerHTML + i, 
            g -= 1;
            this._clones = b, a(h).addClass("cloned").appendTo(this.$stage), a(i).addClass("cloned").prependTo(this.$stage);
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function() {
            for (var a = this.settings.rtl ? 1 : -1, b = this._clones.length + this._items.length, c = -1, d = 0, e = 0, f = []; ++c < b; ) d = f[c - 1] || 0, 
            e = this._widths[this.relative(c)] + this.settings.margin, f.push(d + e * a);
            this._coordinates = f;
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function() {
            var a = this.settings.stagePadding, b = this._coordinates, c = {
                width: Math.ceil(Math.abs(b[b.length - 1])) + 2 * a,
                "padding-left": a || "",
                "padding-right": a || ""
            };
            this.$stage.css(c);
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function(a) {
            var b = this._coordinates.length, c = !this.settings.autoWidth, d = this.$stage.children();
            if (c && a.items.merge) for (;b--; ) a.css.width = this._widths[this.relative(b)], 
            d.eq(b).css(a.css); else c && (a.css.width = a.items.width, d.css(a.css));
        }
    }, {
        filter: [ "items" ],
        run: function() {
            this._coordinates.length < 1 && this.$stage.removeAttr("style");
        }
    }, {
        filter: [ "width", "items", "settings" ],
        run: function(a) {
            a.current = a.current ? this.$stage.children().index(a.current) : 0, a.current = Math.max(this.minimum(), Math.min(this.maximum(), a.current)), 
            this.reset(a.current);
        }
    }, {
        filter: [ "position" ],
        run: function() {
            this.animate(this.coordinates(this._current));
        }
    }, {
        filter: [ "width", "position", "items", "settings" ],
        run: function() {
            var a, b, c, d, e = this.settings.rtl ? 1 : -1, f = 2 * this.settings.stagePadding, g = this.coordinates(this.current()) + f, h = g + this.width() * e, i = [];
            for (c = 0, d = this._coordinates.length; c < d; c++) a = this._coordinates[c - 1] || 0, 
            b = Math.abs(this._coordinates[c]) + f * e, (this.op(a, "<=", g) && this.op(a, ">", h) || this.op(b, "<", g) && this.op(b, ">", h)) && i.push(c);
            this.$stage.children(".active").removeClass("active"), this.$stage.children(":eq(" + i.join("), :eq(") + ")").addClass("active"), 
            this.$stage.children(".center").removeClass("center"), this.settings.center && this.$stage.children().eq(this.current()).addClass("center");
        }
    } ], e.prototype.initialize = function() {
        if (this.enter("initializing"), this.trigger("initialize"), this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl), 
        this.settings.autoWidth && !this.is("pre-loading")) {
            var b, c, e;
            b = this.$element.find("img"), c = this.settings.nestedItemSelector ? "." + this.settings.nestedItemSelector : d, 
            e = this.$element.children(c).width(), b.length && e <= 0 && this.preloadAutoWidthImages(b);
        }
        this.$element.addClass(this.options.loadingClass), this.$stage = a("<" + this.settings.stageElement + ' class="' + this.settings.stageClass + '"/>').wrap('<div class="' + this.settings.stageOuterClass + '"/>'), 
        this.$element.append(this.$stage.parent()), this.replace(this.$element.children().not(this.$stage.parent())), 
        this.$element.is(":visible") ? this.refresh() : this.invalidate("width"), this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass), 
        this.registerEventHandlers(), this.leave("initializing"), this.trigger("initialized");
    }, e.prototype.setup = function() {
        var b = this.viewport(), c = this.options.responsive, d = -1, e = null;
        c ? (a.each(c, function(a) {
            a <= b && a > d && (d = Number(a));
        }), e = a.extend({}, this.options, c[d]), "function" == typeof e.stagePadding && (e.stagePadding = e.stagePadding()), 
        delete e.responsive, e.responsiveClass && this.$element.attr("class", this.$element.attr("class").replace(new RegExp("(" + this.options.responsiveClass + "-)\\S+\\s", "g"), "$1" + d))) : e = a.extend({}, this.options), 
        this.trigger("change", {
            property: {
                name: "settings",
                value: e
            }
        }), this._breakpoint = d, this.settings = e, this.invalidate("settings"), this.trigger("changed", {
            property: {
                name: "settings",
                value: this.settings
            }
        });
    }, e.prototype.optionsLogic = function() {
        this.settings.autoWidth && (this.settings.stagePadding = !1, this.settings.merge = !1);
    }, e.prototype.prepare = function(b) {
        var c = this.trigger("prepare", {
            content: b
        });
        return c.data || (c.data = a("<" + this.settings.itemElement + "/>").addClass(this.options.itemClass).append(b)), 
        this.trigger("prepared", {
            content: c.data
        }), c.data;
    }, e.prototype.update = function() {
        for (var b = 0, c = this._pipe.length, d = a.proxy(function(a) {
            return this[a];
        }, this._invalidated), e = {}; b < c; ) (this._invalidated.all || a.grep(this._pipe[b].filter, d).length > 0) && this._pipe[b].run(e), 
        b++;
        this._invalidated = {}, !this.is("valid") && this.enter("valid");
    }, e.prototype.width = function(a) {
        switch (a = a || e.Width.Default) {
          case e.Width.Inner:
          case e.Width.Outer:
            return this._width;

          default:
            return this._width - 2 * this.settings.stagePadding + this.settings.margin;
        }
    }, e.prototype.refresh = function() {
        this.enter("refreshing"), this.trigger("refresh"), this.setup(), this.optionsLogic(), 
        this.$element.addClass(this.options.refreshClass), this.update(), this.$element.removeClass(this.options.refreshClass), 
        this.leave("refreshing"), this.trigger("refreshed");
    }, e.prototype.onThrottledResize = function() {
        b.clearTimeout(this.resizeTimer), this.resizeTimer = b.setTimeout(this._handlers.onResize, this.settings.responsiveRefreshRate);
    }, e.prototype.onResize = function() {
        return !!this._items.length && (this._width !== this.$element.width() && (!!this.$element.is(":visible") && (this.enter("resizing"), 
        this.trigger("resize").isDefaultPrevented() ? (this.leave("resizing"), !1) : (this.invalidate("width"), 
        this.refresh(), this.leave("resizing"), void this.trigger("resized")))));
    }, e.prototype.registerEventHandlers = function() {
        a.support.transition && this.$stage.on(a.support.transition.end + ".owl.core", a.proxy(this.onTransitionEnd, this)), 
        !1 !== this.settings.responsive && this.on(b, "resize", this._handlers.onThrottledResize), 
        this.settings.mouseDrag && (this.$element.addClass(this.options.dragClass), this.$stage.on("mousedown.owl.core", a.proxy(this.onDragStart, this)), 
        this.$stage.on("dragstart.owl.core selectstart.owl.core", function() {
            return !1;
        })), this.settings.touchDrag && (this.$stage.on("touchstart.owl.core", a.proxy(this.onDragStart, this)), 
        this.$stage.on("touchcancel.owl.core", a.proxy(this.onDragEnd, this)));
    }, e.prototype.onDragStart = function(b) {
        var d = null;
        3 !== b.which && (a.support.transform ? (d = this.$stage.css("transform").replace(/.*\(|\)| /g, "").split(","), 
        d = {
            x: d[16 === d.length ? 12 : 4],
            y: d[16 === d.length ? 13 : 5]
        }) : (d = this.$stage.position(), d = {
            x: this.settings.rtl ? d.left + this.$stage.width() - this.width() + this.settings.margin : d.left,
            y: d.top
        }), this.is("animating") && (a.support.transform ? this.animate(d.x) : this.$stage.stop(), 
        this.invalidate("position")), this.$element.toggleClass(this.options.grabClass, "mousedown" === b.type), 
        this.speed(0), this._drag.time = new Date().getTime(), this._drag.target = a(b.target), 
        this._drag.stage.start = d, this._drag.stage.current = d, this._drag.pointer = this.pointer(b), 
        a(c).on("mouseup.owl.core touchend.owl.core", a.proxy(this.onDragEnd, this)), a(c).one("mousemove.owl.core touchmove.owl.core", a.proxy(function(b) {
            var d = this.difference(this._drag.pointer, this.pointer(b));
            a(c).on("mousemove.owl.core touchmove.owl.core", a.proxy(this.onDragMove, this)), 
            Math.abs(d.x) < Math.abs(d.y) && this.is("valid") || (b.preventDefault(), this.enter("dragging"), 
            this.trigger("drag"));
        }, this)));
    }, e.prototype.onDragMove = function(a) {
        var b = null, c = null, d = null, e = this.difference(this._drag.pointer, this.pointer(a)), f = this.difference(this._drag.stage.start, e);
        this.is("dragging") && (a.preventDefault(), this.settings.loop ? (b = this.coordinates(this.minimum()), 
        c = this.coordinates(this.maximum() + 1) - b, f.x = ((f.x - b) % c + c) % c + b) : (b = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum()), 
        c = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum()), 
        d = this.settings.pullDrag ? -1 * e.x / 5 : 0, f.x = Math.max(Math.min(f.x, b + d), c + d)), 
        this._drag.stage.current = f, this.animate(f.x));
    }, e.prototype.onDragEnd = function(b) {
        var d = this.difference(this._drag.pointer, this.pointer(b)), e = this._drag.stage.current, f = d.x > 0 ^ this.settings.rtl ? "left" : "right";
        a(c).off(".owl.core"), this.$element.removeClass(this.options.grabClass), (0 !== d.x && this.is("dragging") || !this.is("valid")) && (this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed), 
        this.current(this.closest(e.x, 0 !== d.x ? f : this._drag.direction)), this.invalidate("position"), 
        this.update(), this._drag.direction = f, (Math.abs(d.x) > 3 || new Date().getTime() - this._drag.time > 300) && this._drag.target.one("click.owl.core", function() {
            return !1;
        })), this.is("dragging") && (this.leave("dragging"), this.trigger("dragged"));
    }, e.prototype.closest = function(b, c) {
        var d = -1, e = 30, f = this.width(), g = this.coordinates();
        return this.settings.freeDrag || a.each(g, a.proxy(function(a, h) {
            return "left" === c && b > h - e && b < h + e ? d = a : "right" === c && b > h - f - e && b < h - f + e ? d = a + 1 : this.op(b, "<", h) && this.op(b, ">", g[a + 1] || h - f) && (d = "left" === c ? a + 1 : a), 
            -1 === d;
        }, this)), this.settings.loop || (this.op(b, ">", g[this.minimum()]) ? d = b = this.minimum() : this.op(b, "<", g[this.maximum()]) && (d = b = this.maximum())), 
        d;
    }, e.prototype.animate = function(b) {
        var c = this.speed() > 0;
        this.is("animating") && this.onTransitionEnd(), c && (this.enter("animating"), this.trigger("translate")), 
        a.support.transform3d && a.support.transition ? this.$stage.css({
            transform: "translate3d(" + b + "px,0px,0px)",
            transition: this.speed() / 1e3 + "s"
        }) : c ? this.$stage.animate({
            left: b + "px"
        }, this.speed(), this.settings.fallbackEasing, a.proxy(this.onTransitionEnd, this)) : this.$stage.css({
            left: b + "px"
        });
    }, e.prototype.is = function(a) {
        return this._states.current[a] && this._states.current[a] > 0;
    }, e.prototype.current = function(a) {
        if (a === d) return this._current;
        if (0 === this._items.length) return d;
        if (a = this.normalize(a), this._current !== a) {
            var b = this.trigger("change", {
                property: {
                    name: "position",
                    value: a
                }
            });
            b.data !== d && (a = this.normalize(b.data)), this._current = a, this.invalidate("position"), 
            this.trigger("changed", {
                property: {
                    name: "position",
                    value: this._current
                }
            });
        }
        return this._current;
    }, e.prototype.invalidate = function(b) {
        return "string" === a.type(b) && (this._invalidated[b] = !0, this.is("valid") && this.leave("valid")), 
        a.map(this._invalidated, function(a, b) {
            return b;
        });
    }, e.prototype.reset = function(a) {
        (a = this.normalize(a)) !== d && (this._speed = 0, this._current = a, this.suppress([ "translate", "translated" ]), 
        this.animate(this.coordinates(a)), this.release([ "translate", "translated" ]));
    }, e.prototype.normalize = function(a, b) {
        var c = this._items.length, e = b ? 0 : this._clones.length;
        return !this.isNumeric(a) || c < 1 ? a = d : (a < 0 || a >= c + e) && (a = ((a - e / 2) % c + c) % c + e / 2), 
        a;
    }, e.prototype.relative = function(a) {
        return a -= this._clones.length / 2, this.normalize(a, !0);
    }, e.prototype.maximum = function(a) {
        var b, c, d, e = this.settings, f = this._coordinates.length;
        if (e.loop) f = this._clones.length / 2 + this._items.length - 1; else if (e.autoWidth || e.merge) {
            if (b = this._items.length) for (c = this._items[--b].width(), d = this.$element.width(); b-- && !((c += this._items[b].width() + this.settings.margin) > d); ) ;
            f = b + 1;
        } else f = e.center ? this._items.length - 1 : this._items.length - e.items;
        return a && (f -= this._clones.length / 2), Math.max(f, 0);
    }, e.prototype.minimum = function(a) {
        return a ? 0 : this._clones.length / 2;
    }, e.prototype.items = function(a) {
        return a === d ? this._items.slice() : (a = this.normalize(a, !0), this._items[a]);
    }, e.prototype.mergers = function(a) {
        return a === d ? this._mergers.slice() : (a = this.normalize(a, !0), this._mergers[a]);
    }, e.prototype.clones = function(b) {
        var c = this._clones.length / 2, e = c + this._items.length, f = function(a) {
            return a % 2 == 0 ? e + a / 2 : c - (a + 1) / 2;
        };
        return b === d ? a.map(this._clones, function(a, b) {
            return f(b);
        }) : a.map(this._clones, function(a, c) {
            return a === b ? f(c) : null;
        });
    }, e.prototype.speed = function(a) {
        return a !== d && (this._speed = a), this._speed;
    }, e.prototype.coordinates = function(b) {
        var c, e = 1, f = b - 1;
        return b === d ? a.map(this._coordinates, a.proxy(function(a, b) {
            return this.coordinates(b);
        }, this)) : (this.settings.center ? (this.settings.rtl && (e = -1, f = b + 1), c = this._coordinates[b], 
        c += (this.width() - c + (this._coordinates[f] || 0)) / 2 * e) : c = this._coordinates[f] || 0, 
        c = Math.ceil(c));
    }, e.prototype.duration = function(a, b, c) {
        return 0 === c ? 0 : Math.min(Math.max(Math.abs(b - a), 1), 6) * Math.abs(c || this.settings.smartSpeed);
    }, e.prototype.to = function(a, b) {
        var c = this.current(), d = null, e = a - this.relative(c), f = (e > 0) - (e < 0), g = this._items.length, h = this.minimum(), i = this.maximum();
        this.settings.loop ? (!this.settings.rewind && Math.abs(e) > g / 2 && (e += -1 * f * g), 
        a = c + e, (d = ((a - h) % g + g) % g + h) !== a && d - e <= i && d - e > 0 && (c = d - e, 
        a = d, this.reset(c))) : this.settings.rewind ? (i += 1, a = (a % i + i) % i) : a = Math.max(h, Math.min(i, a)), 
        this.speed(this.duration(c, a, b)), this.current(a), this.$element.is(":visible") && this.update();
    }, e.prototype.next = function(a) {
        a = a || !1, this.to(this.relative(this.current()) + 1, a);
    }, e.prototype.prev = function(a) {
        a = a || !1, this.to(this.relative(this.current()) - 1, a);
    }, e.prototype.onTransitionEnd = function(a) {
        if (a !== d && (a.stopPropagation(), (a.target || a.srcElement || a.originalTarget) !== this.$stage.get(0))) return !1;
        this.leave("animating"), this.trigger("translated");
    }, e.prototype.viewport = function() {
        var d;
        return this.options.responsiveBaseElement !== b ? d = a(this.options.responsiveBaseElement).width() : b.innerWidth ? d = b.innerWidth : c.documentElement && c.documentElement.clientWidth ? d = c.documentElement.clientWidth : console.warn("Can not detect viewport width."), 
        d;
    }, e.prototype.replace = function(b) {
        this.$stage.empty(), this._items = [], b && (b = b instanceof jQuery ? b : a(b)), 
        this.settings.nestedItemSelector && (b = b.find("." + this.settings.nestedItemSelector)), 
        b.filter(function() {
            return 1 === this.nodeType;
        }).each(a.proxy(function(a, b) {
            b = this.prepare(b), this.$stage.append(b), this._items.push(b), this._mergers.push(1 * b.find("[data-merge]").addBack("[data-merge]").attr("data-merge") || 1);
        }, this)), this.reset(this.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0), 
        this.invalidate("items");
    }, e.prototype.add = function(b, c) {
        var e = this.relative(this._current);
        c = c === d ? this._items.length : this.normalize(c, !0), b = b instanceof jQuery ? b : a(b), 
        this.trigger("add", {
            content: b,
            position: c
        }), b = this.prepare(b), 0 === this._items.length || c === this._items.length ? (0 === this._items.length && this.$stage.append(b), 
        0 !== this._items.length && this._items[c - 1].after(b), this._items.push(b), this._mergers.push(1 * b.find("[data-merge]").addBack("[data-merge]").attr("data-merge") || 1)) : (this._items[c].before(b), 
        this._items.splice(c, 0, b), this._mergers.splice(c, 0, 1 * b.find("[data-merge]").addBack("[data-merge]").attr("data-merge") || 1)), 
        this._items[e] && this.reset(this._items[e].index()), this.invalidate("items"), 
        this.trigger("added", {
            content: b,
            position: c
        });
    }, e.prototype.remove = function(a) {
        (a = this.normalize(a, !0)) !== d && (this.trigger("remove", {
            content: this._items[a],
            position: a
        }), this._items[a].remove(), this._items.splice(a, 1), this._mergers.splice(a, 1), 
        this.invalidate("items"), this.trigger("removed", {
            content: null,
            position: a
        }));
    }, e.prototype.preloadAutoWidthImages = function(b) {
        b.each(a.proxy(function(b, c) {
            this.enter("pre-loading"), c = a(c), a(new Image()).one("load", a.proxy(function(a) {
                c.attr("src", a.target.src), c.css("opacity", 1), this.leave("pre-loading"), !this.is("pre-loading") && !this.is("initializing") && this.refresh();
            }, this)).attr("src", c.attr("src") || c.attr("data-src") || c.attr("data-src-retina"));
        }, this));
    }, e.prototype.destroy = function() {
        this.$element.off(".owl.core"), this.$stage.off(".owl.core"), a(c).off(".owl.core"), 
        !1 !== this.settings.responsive && (b.clearTimeout(this.resizeTimer), this.off(b, "resize", this._handlers.onThrottledResize));
        for (var d in this._plugins) this._plugins[d].destroy();
        this.$stage.children(".cloned").remove(), this.$stage.unwrap(), this.$stage.children().contents().unwrap(), 
        this.$stage.children().unwrap(), this.$stage.remove(), this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class", this.$element.attr("class").replace(new RegExp(this.options.responsiveClass + "-\\S+\\s", "g"), "")).removeData("owl.carousel");
    }, e.prototype.op = function(a, b, c) {
        var d = this.settings.rtl;
        switch (b) {
          case "<":
            return d ? a > c : a < c;

          case ">":
            return d ? a < c : a > c;

          case ">=":
            return d ? a <= c : a >= c;

          case "<=":
            return d ? a >= c : a <= c;
        }
    }, e.prototype.on = function(a, b, c, d) {
        a.addEventListener ? a.addEventListener(b, c, d) : a.attachEvent && a.attachEvent("on" + b, c);
    }, e.prototype.off = function(a, b, c, d) {
        a.removeEventListener ? a.removeEventListener(b, c, d) : a.detachEvent && a.detachEvent("on" + b, c);
    }, e.prototype.trigger = function(b, c, d, f, g) {
        var h = {
            item: {
                count: this._items.length,
                index: this.current()
            }
        }, i = a.camelCase(a.grep([ "on", b, d ], function(a) {
            return a;
        }).join("-").toLowerCase()), j = a.Event([ b, "owl", d || "carousel" ].join(".").toLowerCase(), a.extend({
            relatedTarget: this
        }, h, c));
        return this._supress[b] || (a.each(this._plugins, function(a, b) {
            b.onTrigger && b.onTrigger(j);
        }), this.register({
            type: e.Type.Event,
            name: b
        }), this.$element.trigger(j), this.settings && "function" == typeof this.settings[i] && this.settings[i].call(this, j)), 
        j;
    }, e.prototype.enter = function(b) {
        a.each([ b ].concat(this._states.tags[b] || []), a.proxy(function(a, b) {
            this._states.current[b] === d && (this._states.current[b] = 0), this._states.current[b]++;
        }, this));
    }, e.prototype.leave = function(b) {
        a.each([ b ].concat(this._states.tags[b] || []), a.proxy(function(a, b) {
            this._states.current[b]--;
        }, this));
    }, e.prototype.register = function(b) {
        if (b.type === e.Type.Event) {
            if (a.event.special[b.name] || (a.event.special[b.name] = {}), !a.event.special[b.name].owl) {
                var c = a.event.special[b.name]._default;
                a.event.special[b.name]._default = function(a) {
                    return !c || !c.apply || a.namespace && -1 !== a.namespace.indexOf("owl") ? a.namespace && a.namespace.indexOf("owl") > -1 : c.apply(this, arguments);
                }, a.event.special[b.name].owl = !0;
            }
        } else b.type === e.Type.State && (this._states.tags[b.name] ? this._states.tags[b.name] = this._states.tags[b.name].concat(b.tags) : this._states.tags[b.name] = b.tags, 
        this._states.tags[b.name] = a.grep(this._states.tags[b.name], a.proxy(function(c, d) {
            return a.inArray(c, this._states.tags[b.name]) === d;
        }, this)));
    }, e.prototype.suppress = function(b) {
        a.each(b, a.proxy(function(a, b) {
            this._supress[b] = !0;
        }, this));
    }, e.prototype.release = function(b) {
        a.each(b, a.proxy(function(a, b) {
            delete this._supress[b];
        }, this));
    }, e.prototype.pointer = function(a) {
        var c = {
            x: null,
            y: null
        };
        return a = a.originalEvent || a || b.event, a = a.touches && a.touches.length ? a.touches[0] : a.changedTouches && a.changedTouches.length ? a.changedTouches[0] : a, 
        a.pageX ? (c.x = a.pageX, c.y = a.pageY) : (c.x = a.clientX, c.y = a.clientY), c;
    }, e.prototype.isNumeric = function(a) {
        return !isNaN(parseFloat(a));
    }, e.prototype.difference = function(a, b) {
        return {
            x: a.x - b.x,
            y: a.y - b.y
        };
    }, a.fn.owlCarousel = function(b) {
        var c = Array.prototype.slice.call(arguments, 1);
        return this.each(function() {
            var d = a(this), f = d.data("owl.carousel");
            f || (f = new e(this, "object" == typeof b && b), d.data("owl.carousel", f), a.each([ "next", "prev", "to", "destroy", "refresh", "replace", "add", "remove" ], function(b, c) {
                f.register({
                    type: e.Type.Event,
                    name: c
                }), f.$element.on(c + ".owl.carousel.core", a.proxy(function(a) {
                    a.namespace && a.relatedTarget !== this && (this.suppress([ c ]), f[c].apply(this, [].slice.call(arguments, 1)), 
                    this.release([ c ]));
                }, f));
            })), "string" == typeof b && "_" !== b.charAt(0) && f[b].apply(f, c);
        });
    }, a.fn.owlCarousel.Constructor = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this._core = b, this._interval = null, this._visible = null, this._handlers = {
            "initialized.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.autoRefresh && this.watch();
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this._core.$element.on(this._handlers);
    };
    e.Defaults = {
        autoRefresh: !0,
        autoRefreshInterval: 500
    }, e.prototype.watch = function() {
        this._interval || (this._visible = this._core.$element.is(":visible"), this._interval = b.setInterval(a.proxy(this.refresh, this), this._core.settings.autoRefreshInterval));
    }, e.prototype.refresh = function() {
        this._core.$element.is(":visible") !== this._visible && (this._visible = !this._visible, 
        this._core.$element.toggleClass("owl-hidden", !this._visible), this._visible && this._core.invalidate("width") && this._core.refresh());
    }, e.prototype.destroy = function() {
        var a, c;
        b.clearInterval(this._interval);
        for (a in this._handlers) this._core.$element.off(a, this._handlers[a]);
        for (c in Object.getOwnPropertyNames(this)) "function" != typeof this[c] && (this[c] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.AutoRefresh = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this._core = b, this._loaded = [], this._handlers = {
            "initialized.owl.carousel change.owl.carousel resized.owl.carousel": a.proxy(function(b) {
                if (b.namespace && this._core.settings && this._core.settings.lazyLoad && (b.property && "position" == b.property.name || "initialized" == b.type)) for (var c = this._core.settings, e = c.center && Math.ceil(c.items / 2) || c.items, f = c.center && -1 * e || 0, g = (b.property && b.property.value !== d ? b.property.value : this._core.current()) + f, h = this._core.clones().length, i = a.proxy(function(a, b) {
                    this.load(b);
                }, this); f++ < e; ) this.load(h / 2 + this._core.relative(g)), h && a.each(this._core.clones(this._core.relative(g)), i), 
                g++;
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this._core.$element.on(this._handlers);
    };
    e.Defaults = {
        lazyLoad: !1
    }, e.prototype.load = function(c) {
        var d = this._core.$stage.children().eq(c), e = d && d.find(".owl-lazy");
        !e || a.inArray(d.get(0), this._loaded) > -1 || (e.each(a.proxy(function(c, d) {
            var e, f = a(d), g = b.devicePixelRatio > 1 && f.attr("data-src-retina") || f.attr("data-src");
            this._core.trigger("load", {
                element: f,
                url: g
            }, "lazy"), f.is("img") ? f.one("load.owl.lazy", a.proxy(function() {
                f.css("opacity", 1), this._core.trigger("loaded", {
                    element: f,
                    url: g
                }, "lazy");
            }, this)).attr("src", g) : (e = new Image(), e.onload = a.proxy(function() {
                f.css({
                    "background-image": 'url("' + g + '")',
                    opacity: "1"
                }), this._core.trigger("loaded", {
                    element: f,
                    url: g
                }, "lazy");
            }, this), e.src = g);
        }, this)), this._loaded.push(d.get(0)));
    }, e.prototype.destroy = function() {
        var a, b;
        for (a in this.handlers) this._core.$element.off(a, this.handlers[a]);
        for (b in Object.getOwnPropertyNames(this)) "function" != typeof this[b] && (this[b] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.Lazy = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this._core = b, this._handlers = {
            "initialized.owl.carousel refreshed.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.autoHeight && this.update();
            }, this),
            "changed.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.autoHeight && "position" == a.property.name && this.update();
            }, this),
            "loaded.owl.lazy": a.proxy(function(a) {
                a.namespace && this._core.settings.autoHeight && a.element.closest("." + this._core.settings.itemClass).index() === this._core.current() && this.update();
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this._core.$element.on(this._handlers);
    };
    e.Defaults = {
        autoHeight: !1,
        autoHeightClass: "owl-height"
    }, e.prototype.update = function() {
        var b = this._core._current, c = b + this._core.settings.items, d = this._core.$stage.children().toArray().slice(b, c), e = [], f = 0;
        a.each(d, function(b, c) {
            e.push(a(c).height());
        }), f = Math.max.apply(null, e), this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass);
    }, e.prototype.destroy = function() {
        var a, b;
        for (a in this._handlers) this._core.$element.off(a, this._handlers[a]);
        for (b in Object.getOwnPropertyNames(this)) "function" != typeof this[b] && (this[b] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.AutoHeight = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this._core = b, this._videos = {}, this._playing = null, this._handlers = {
            "initialized.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.register({
                    type: "state",
                    name: "playing",
                    tags: [ "interacting" ]
                });
            }, this),
            "resize.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.video && this.isInFullScreen() && a.preventDefault();
            }, this),
            "refreshed.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.is("resizing") && this._core.$stage.find(".cloned .owl-video-frame").remove();
            }, this),
            "changed.owl.carousel": a.proxy(function(a) {
                a.namespace && "position" === a.property.name && this._playing && this.stop();
            }, this),
            "prepared.owl.carousel": a.proxy(function(b) {
                if (b.namespace) {
                    var c = a(b.content).find(".owl-video");
                    c.length && (c.css("display", "none"), this.fetch(c, a(b.content)));
                }
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this._core.$element.on(this._handlers), 
        this._core.$element.on("click.owl.video", ".owl-video-play-icon", a.proxy(function(a) {
            this.play(a);
        }, this));
    };
    e.Defaults = {
        video: !1,
        videoHeight: !1,
        videoWidth: !1
    }, e.prototype.fetch = function(a, b) {
        var c = function() {
            return a.attr("data-vimeo-id") ? "vimeo" : a.attr("data-vzaar-id") ? "vzaar" : "youtube";
        }(), d = a.attr("data-vimeo-id") || a.attr("data-youtube-id") || a.attr("data-vzaar-id"), e = a.attr("data-width") || this._core.settings.videoWidth, f = a.attr("data-height") || this._core.settings.videoHeight, g = a.attr("href");
        if (!g) throw new Error("Missing video URL.");
        if (d = g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/), 
        d[3].indexOf("youtu") > -1) c = "youtube"; else if (d[3].indexOf("vimeo") > -1) c = "vimeo"; else {
            if (!(d[3].indexOf("vzaar") > -1)) throw new Error("Video URL not supported.");
            c = "vzaar";
        }
        d = d[6], this._videos[g] = {
            type: c,
            id: d,
            width: e,
            height: f
        }, b.attr("data-video", g), this.thumbnail(a, this._videos[g]);
    }, e.prototype.thumbnail = function(b, c) {
        var d, e, f, g = c.width && c.height ? 'style="width:' + c.width + "px;height:" + c.height + 'px;"' : "", h = b.find("img"), i = "src", j = "", k = this._core.settings, l = function(a) {
            e = '<div class="owl-video-play-icon"></div>', d = k.lazyLoad ? '<div class="owl-video-tn ' + j + '" ' + i + '="' + a + '"></div>' : '<div class="owl-video-tn" style="opacity:1;background-image:url(' + a + ')"></div>', 
            b.after(d), b.after(e);
        };
        if (b.wrap('<div class="owl-video-wrapper"' + g + "></div>"), this._core.settings.lazyLoad && (i = "data-src", 
        j = "owl-lazy"), h.length) return l(h.attr(i)), h.remove(), !1;
        "youtube" === c.type ? (f = "//img.youtube.com/vi/" + c.id + "/hqdefault.jpg", l(f)) : "vimeo" === c.type ? a.ajax({
            type: "GET",
            url: "//vimeo.com/api/v2/video/" + c.id + ".json",
            jsonp: "callback",
            dataType: "jsonp",
            success: function(a) {
                f = a[0].thumbnail_large, l(f);
            }
        }) : "vzaar" === c.type && a.ajax({
            type: "GET",
            url: "//vzaar.com/api/videos/" + c.id + ".json",
            jsonp: "callback",
            dataType: "jsonp",
            success: function(a) {
                f = a.framegrab_url, l(f);
            }
        });
    }, e.prototype.stop = function() {
        this._core.trigger("stop", null, "video"), this._playing.find(".owl-video-frame").remove(), 
        this._playing.removeClass("owl-video-playing"), this._playing = null, this._core.leave("playing"), 
        this._core.trigger("stopped", null, "video");
    }, e.prototype.play = function(b) {
        var c, d = a(b.target), e = d.closest("." + this._core.settings.itemClass), f = this._videos[e.attr("data-video")], g = f.width || "100%", h = f.height || this._core.$stage.height();
        this._playing || (this._core.enter("playing"), this._core.trigger("play", null, "video"), 
        e = this._core.items(this._core.relative(e.index())), this._core.reset(e.index()), 
        "youtube" === f.type ? c = '<iframe width="' + g + '" height="' + h + '" src="//www.youtube.com/embed/' + f.id + "?autoplay=1&rel=0&v=" + f.id + '" frameborder="0" allowfullscreen></iframe>' : "vimeo" === f.type ? c = '<iframe src="//player.vimeo.com/video/' + f.id + '?autoplay=1" width="' + g + '" height="' + h + '" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>' : "vzaar" === f.type && (c = '<iframe frameborder="0"height="' + h + '"width="' + g + '" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/' + f.id + '/player?autoplay=true"></iframe>'), 
        a('<div class="owl-video-frame">' + c + "</div>").insertAfter(e.find(".owl-video")), 
        this._playing = e.addClass("owl-video-playing"));
    }, e.prototype.isInFullScreen = function() {
        var b = c.fullscreenElement || c.mozFullScreenElement || c.webkitFullscreenElement;
        return b && a(b).parent().hasClass("owl-video-frame");
    }, e.prototype.destroy = function() {
        var a, b;
        this._core.$element.off("click.owl.video");
        for (a in this._handlers) this._core.$element.off(a, this._handlers[a]);
        for (b in Object.getOwnPropertyNames(this)) "function" != typeof this[b] && (this[b] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.Video = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this.core = b, this.core.options = a.extend({}, e.Defaults, this.core.options), 
        this.swapping = !0, this.previous = d, this.next = d, this.handlers = {
            "change.owl.carousel": a.proxy(function(a) {
                a.namespace && "position" == a.property.name && (this.previous = this.core.current(), 
                this.next = a.property.value);
            }, this),
            "drag.owl.carousel dragged.owl.carousel translated.owl.carousel": a.proxy(function(a) {
                a.namespace && (this.swapping = "translated" == a.type);
            }, this),
            "translate.owl.carousel": a.proxy(function(a) {
                a.namespace && this.swapping && (this.core.options.animateOut || this.core.options.animateIn) && this.swap();
            }, this)
        }, this.core.$element.on(this.handlers);
    };
    e.Defaults = {
        animateOut: !1,
        animateIn: !1
    }, e.prototype.swap = function() {
        if (1 === this.core.settings.items && a.support.animation && a.support.transition) {
            this.core.speed(0);
            var b, c = a.proxy(this.clear, this), d = this.core.$stage.children().eq(this.previous), e = this.core.$stage.children().eq(this.next), f = this.core.settings.animateIn, g = this.core.settings.animateOut;
            this.core.current() !== this.previous && (g && (b = this.core.coordinates(this.previous) - this.core.coordinates(this.next), 
            d.one(a.support.animation.end, c).css({
                left: b + "px"
            }).addClass("animated owl-animated-out").addClass(g)), f && e.one(a.support.animation.end, c).addClass("animated owl-animated-in").addClass(f));
        }
    }, e.prototype.clear = function(b) {
        a(b.target).css({
            left: ""
        }).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut), 
        this.core.onTransitionEnd();
    }, e.prototype.destroy = function() {
        var a, b;
        for (a in this.handlers) this.core.$element.off(a, this.handlers[a]);
        for (b in Object.getOwnPropertyNames(this)) "function" != typeof this[b] && (this[b] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.Animate = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    var e = function(b) {
        this._core = b, this._call = null, this._time = 0, this._timeout = 0, this._paused = !0, 
        this._handlers = {
            "changed.owl.carousel": a.proxy(function(a) {
                a.namespace && "settings" === a.property.name ? this._core.settings.autoplay ? this.play() : this.stop() : a.namespace && "position" === a.property.name && this._paused && (this._time = 0);
            }, this),
            "initialized.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.autoplay && this.play();
            }, this),
            "play.owl.autoplay": a.proxy(function(a, b, c) {
                a.namespace && this.play(b, c);
            }, this),
            "stop.owl.autoplay": a.proxy(function(a) {
                a.namespace && this.stop();
            }, this),
            "mouseover.owl.autoplay": a.proxy(function() {
                this._core.settings.autoplayHoverPause && this._core.is("rotating") && this.pause();
            }, this),
            "mouseleave.owl.autoplay": a.proxy(function() {
                this._core.settings.autoplayHoverPause && this._core.is("rotating") && this.play();
            }, this),
            "touchstart.owl.core": a.proxy(function() {
                this._core.settings.autoplayHoverPause && this._core.is("rotating") && this.pause();
            }, this),
            "touchend.owl.core": a.proxy(function() {
                this._core.settings.autoplayHoverPause && this.play();
            }, this)
        }, this._core.$element.on(this._handlers), this._core.options = a.extend({}, e.Defaults, this._core.options);
    };
    e.Defaults = {
        autoplay: !1,
        autoplayTimeout: 5e3,
        autoplayHoverPause: !1,
        autoplaySpeed: !1
    }, e.prototype._next = function(d) {
        this._call = b.setTimeout(a.proxy(this._next, this, d), this._timeout * (Math.round(this.read() / this._timeout) + 1) - this.read()), 
        this._core.is("busy") || this._core.is("interacting") || c.hidden || this._core.next(d || this._core.settings.autoplaySpeed);
    }, e.prototype.read = function() {
        return new Date().getTime() - this._time;
    }, e.prototype.play = function(c, d) {
        var e;
        this._core.is("rotating") || this._core.enter("rotating"), c = c || this._core.settings.autoplayTimeout, 
        e = Math.min(this._time % (this._timeout || c), c), this._paused ? (this._time = this.read(), 
        this._paused = !1) : b.clearTimeout(this._call), this._time += this.read() % c - e, 
        this._timeout = c, this._call = b.setTimeout(a.proxy(this._next, this, d), c - e);
    }, e.prototype.stop = function() {
        this._core.is("rotating") && (this._time = 0, this._paused = !0, b.clearTimeout(this._call), 
        this._core.leave("rotating"));
    }, e.prototype.pause = function() {
        this._core.is("rotating") && !this._paused && (this._time = this.read(), this._paused = !0, 
        b.clearTimeout(this._call));
    }, e.prototype.destroy = function() {
        var a, b;
        this.stop();
        for (a in this._handlers) this._core.$element.off(a, this._handlers[a]);
        for (b in Object.getOwnPropertyNames(this)) "function" != typeof this[b] && (this[b] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.autoplay = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    "use strict";
    var e = function(b) {
        this._core = b, this._initialized = !1, this._pages = [], this._controls = {}, this._templates = [], 
        this.$element = this._core.$element, this._overrides = {
            next: this._core.next,
            prev: this._core.prev,
            to: this._core.to
        }, this._handlers = {
            "prepared.owl.carousel": a.proxy(function(b) {
                b.namespace && this._core.settings.dotsData && this._templates.push('<div class="' + this._core.settings.dotClass + '">' + a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot") + "</div>");
            }, this),
            "added.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.dotsData && this._templates.splice(a.position, 0, this._templates.pop());
            }, this),
            "remove.owl.carousel": a.proxy(function(a) {
                a.namespace && this._core.settings.dotsData && this._templates.splice(a.position, 1);
            }, this),
            "changed.owl.carousel": a.proxy(function(a) {
                a.namespace && "position" == a.property.name && this.draw();
            }, this),
            "initialized.owl.carousel": a.proxy(function(a) {
                a.namespace && !this._initialized && (this._core.trigger("initialize", null, "navigation"), 
                this.initialize(), this.update(), this.draw(), this._initialized = !0, this._core.trigger("initialized", null, "navigation"));
            }, this),
            "refreshed.owl.carousel": a.proxy(function(a) {
                a.namespace && this._initialized && (this._core.trigger("refresh", null, "navigation"), 
                this.update(), this.draw(), this._core.trigger("refreshed", null, "navigation"));
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this.$element.on(this._handlers);
    };
    e.Defaults = {
        nav: !1,
        navText: [ '<span aria-label="prev">&#x2039;</span>', '<span aria-label="next">&#x203a;</span>' ],
        navSpeed: !1,
        navElement: 'button role="presentation"',
        navContainer: !1,
        navContainerClass: "owl-nav",
        navClass: [ "owl-prev", "owl-next" ],
        slideBy: 1,
        dotClass: "owl-dot",
        dotsClass: "owl-dots",
        dots: !0,
        dotsEach: !1,
        dotsData: !1,
        dotsSpeed: !1,
        dotsContainer: !1
    }, e.prototype.initialize = function() {
        var b, c = this._core.settings;
        this._controls.$relative = (c.navContainer ? a(c.navContainer) : a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"), 
        this._controls.$previous = a("<" + c.navElement + ">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click", a.proxy(function(a) {
            this.prev(c.navSpeed);
        }, this)), this._controls.$next = a("<" + c.navElement + ">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click", a.proxy(function(a) {
            this.next(c.navSpeed);
        }, this)), c.dotsData || (this._templates = [ a("<button>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML") ]), 
        this._controls.$absolute = (c.dotsContainer ? a(c.dotsContainer) : a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"), 
        this._controls.$absolute.on("click", "button", a.proxy(function(b) {
            var d = a(b.target).parent().is(this._controls.$absolute) ? a(b.target).index() : a(b.target).parent().index();
            b.preventDefault(), this.to(d, c.dotsSpeed);
        }, this));
        for (b in this._overrides) this._core[b] = a.proxy(this[b], this);
    }, e.prototype.destroy = function() {
        var a, b, c, d, e;
        e = this._core.settings;
        for (a in this._handlers) this.$element.off(a, this._handlers[a]);
        for (b in this._controls) "$relative" === b && e.navContainer ? this._controls[b].html("") : this._controls[b].remove();
        for (d in this.overides) this._core[d] = this._overrides[d];
        for (c in Object.getOwnPropertyNames(this)) "function" != typeof this[c] && (this[c] = null);
    }, e.prototype.update = function() {
        var a, b, c, d = this._core.clones().length / 2, e = d + this._core.items().length, f = this._core.maximum(!0), g = this._core.settings, h = g.center || g.autoWidth || g.dotsData ? 1 : g.dotsEach || g.items;
        if ("page" !== g.slideBy && (g.slideBy = Math.min(g.slideBy, g.items)), g.dots || "page" == g.slideBy) for (this._pages = [], 
        a = d, b = 0, c = 0; a < e; a++) {
            if (b >= h || 0 === b) {
                if (this._pages.push({
                    start: Math.min(f, a - d),
                    end: a - d + h - 1
                }), Math.min(f, a - d) === f) break;
                b = 0, ++c;
            }
            b += this._core.mergers(this._core.relative(a));
        }
    }, e.prototype.draw = function() {
        var b, c = this._core.settings, d = this._core.items().length <= c.items, e = this._core.relative(this._core.current()), f = c.loop || c.rewind;
        this._controls.$relative.toggleClass("disabled", !c.nav || d), c.nav && (this._controls.$previous.toggleClass("disabled", !f && e <= this._core.minimum(!0)), 
        this._controls.$next.toggleClass("disabled", !f && e >= this._core.maximum(!0))), 
        this._controls.$absolute.toggleClass("disabled", !c.dots || d), c.dots && (b = this._pages.length - this._controls.$absolute.children().length, 
        c.dotsData && 0 !== b ? this._controls.$absolute.html(this._templates.join("")) : b > 0 ? this._controls.$absolute.append(new Array(b + 1).join(this._templates[0])) : b < 0 && this._controls.$absolute.children().slice(b).remove(), 
        this._controls.$absolute.find(".active").removeClass("active"), this._controls.$absolute.children().eq(a.inArray(this.current(), this._pages)).addClass("active"));
    }, e.prototype.onTrigger = function(b) {
        var c = this._core.settings;
        b.page = {
            index: a.inArray(this.current(), this._pages),
            count: this._pages.length,
            size: c && (c.center || c.autoWidth || c.dotsData ? 1 : c.dotsEach || c.items)
        };
    }, e.prototype.current = function() {
        var b = this._core.relative(this._core.current());
        return a.grep(this._pages, a.proxy(function(a, c) {
            return a.start <= b && a.end >= b;
        }, this)).pop();
    }, e.prototype.getPosition = function(b) {
        var c, d, e = this._core.settings;
        return "page" == e.slideBy ? (c = a.inArray(this.current(), this._pages), d = this._pages.length, 
        b ? ++c : --c, c = this._pages[(c % d + d) % d].start) : (c = this._core.relative(this._core.current()), 
        d = this._core.items().length, b ? c += e.slideBy : c -= e.slideBy), c;
    }, e.prototype.next = function(b) {
        a.proxy(this._overrides.to, this._core)(this.getPosition(!0), b);
    }, e.prototype.prev = function(b) {
        a.proxy(this._overrides.to, this._core)(this.getPosition(!1), b);
    }, e.prototype.to = function(b, c, d) {
        var e;
        !d && this._pages.length ? (e = this._pages.length, a.proxy(this._overrides.to, this._core)(this._pages[(b % e + e) % e].start, c)) : a.proxy(this._overrides.to, this._core)(b, c);
    }, a.fn.owlCarousel.Constructor.Plugins.Navigation = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    "use strict";
    var e = function(c) {
        this._core = c, this._hashes = {}, this.$element = this._core.$element, this._handlers = {
            "initialized.owl.carousel": a.proxy(function(c) {
                c.namespace && "URLHash" === this._core.settings.startPosition && a(b).trigger("hashchange.owl.navigation");
            }, this),
            "prepared.owl.carousel": a.proxy(function(b) {
                if (b.namespace) {
                    var c = a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");
                    if (!c) return;
                    this._hashes[c] = b.content;
                }
            }, this),
            "changed.owl.carousel": a.proxy(function(c) {
                if (c.namespace && "position" === c.property.name) {
                    var d = this._core.items(this._core.relative(this._core.current())), e = a.map(this._hashes, function(a, b) {
                        return a === d ? b : null;
                    }).join();
                    if (!e || b.location.hash.slice(1) === e) return;
                    b.location.hash = e;
                }
            }, this)
        }, this._core.options = a.extend({}, e.Defaults, this._core.options), this.$element.on(this._handlers), 
        a(b).on("hashchange.owl.navigation", a.proxy(function(a) {
            var c = b.location.hash.substring(1), e = this._core.$stage.children(), f = this._hashes[c] && e.index(this._hashes[c]);
            f !== d && f !== this._core.current() && this._core.to(this._core.relative(f), !1, !0);
        }, this));
    };
    e.Defaults = {
        URLhashListener: !1
    }, e.prototype.destroy = function() {
        var c, d;
        a(b).off("hashchange.owl.navigation");
        for (c in this._handlers) this._core.$element.off(c, this._handlers[c]);
        for (d in Object.getOwnPropertyNames(this)) "function" != typeof this[d] && (this[d] = null);
    }, a.fn.owlCarousel.Constructor.Plugins.Hash = e;
}(window.Zepto || window.jQuery, window, document), function(a, b, c, d) {
    function e(b, c) {
        var e = !1, f = b.charAt(0).toUpperCase() + b.slice(1);
        return a.each((b + " " + h.join(f + " ") + f).split(" "), function(a, b) {
            if (g[b] !== d) return e = !c || b, !1;
        }), e;
    }
    function f(a) {
        return e(a, !0);
    }
    var g = a("<support>").get(0).style, h = "Webkit Moz O ms".split(" "), i = {
        transition: {
            end: {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd",
                transition: "transitionend"
            }
        },
        animation: {
            end: {
                WebkitAnimation: "webkitAnimationEnd",
                MozAnimation: "animationend",
                OAnimation: "oAnimationEnd",
                animation: "animationend"
            }
        }
    }, j = {
        csstransforms: function() {
            return !!e("transform");
        },
        csstransforms3d: function() {
            return !!e("perspective");
        },
        csstransitions: function() {
            return !!e("transition");
        },
        cssanimations: function() {
            return !!e("animation");
        }
    };
    j.csstransitions() && (a.support.transition = a.support.transition || {}, a.support.transition.end || (a.support.transition.end = i.transition.end[new String(f("transition"))])), 
    j.cssanimations() && (a.support.animation = a.support.animation || {}, a.support.animation.end || (a.support.animation.end = i.animation.end[new String(f("animation"))])), 
    j.csstransforms() && (a.support.transform3d = j.csstransforms3d());
}(window.Zepto || window.jQuery, window, document);

(function($) {
    if ($.fn.inputmask == undefined) {
        $.inputmask = {
            defaults: {
                placeholder: "_",
                optionalmarker: {
                    start: "[",
                    end: "]"
                },
                escapeChar: "\\",
                mask: null,
                oncomplete: $.noop,
                onincomplete: $.noop,
                oncleared: $.noop,
                overrideFocus: false,
                repeat: 0,
                greedy: true,
                autoUnmask: false,
                clearMaskOnLostFocus: true,
                insertMode: true,
                clearIncomplete: false,
                aliases: {},
                onKeyUp: $.noop,
                onKeyDown: $.noop,
                showMaskOnHover: true,
                onKeyValidation: $.noop,
                numericInput: false,
                radixPoint: ".",
                definitions: {
                    9: {
                        validator: "[0-9]",
                        cardinality: 1
                    },
                    a: {
                        validator: "[A-Za-zА-яЁё]",
                        cardinality: 1
                    },
                    "*": {
                        validator: "[A-Za-zА-яЁё0-9]",
                        cardinality: 1
                    }
                },
                keyCode: {
                    ALT: 18,
                    BACKSPACE: 8,
                    CAPS_LOCK: 20,
                    COMMA: 188,
                    COMMAND: 91,
                    COMMAND_LEFT: 91,
                    COMMAND_RIGHT: 93,
                    CONTROL: 17,
                    DELETE: 46,
                    DOWN: 40,
                    END: 35,
                    ENTER: 13,
                    ESCAPE: 27,
                    HOME: 36,
                    INSERT: 45,
                    LEFT: 37,
                    MENU: 93,
                    NUMPAD_ADD: 107,
                    NUMPAD_DECIMAL: 110,
                    NUMPAD_DIVIDE: 111,
                    NUMPAD_ENTER: 108,
                    NUMPAD_MULTIPLY: 106,
                    NUMPAD_SUBTRACT: 109,
                    PAGE_DOWN: 34,
                    PAGE_UP: 33,
                    PERIOD: 190,
                    RIGHT: 39,
                    SHIFT: 16,
                    SPACE: 32,
                    TAB: 9,
                    UP: 38,
                    WINDOWS: 91
                },
                ignorables: [ 8, 9, 13, 16, 17, 18, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 46, 91, 93, 108 ]
            },
            val: $.fn.val
        };
        $.fn.inputmask = function(fn, options) {
            var opts = $.extend(true, {}, $.inputmask.defaults, options);
            var pasteEvent = isInputEventSupported("paste") ? "paste" : "input";
            var iphone = navigator.userAgent.match(/iphone/i) != null;
            var android = navigator.userAgent.match(/android.*mobile safari.*/i) != null;
            if (android) {
                var browser = navigator.userAgent.match(/mobile safari.*/i);
                var version = parseInt(new RegExp(/[0-9]+/).exec(browser));
                android = version <= 533;
            }
            var caretposCorrection = null;
            if (typeof fn == "string") {
                switch (fn) {
                  case "mask":
                    var _buffer = getMaskTemplate();
                    var tests = getTestingChain();
                    return this.each(function() {
                        mask(this);
                    });
                    break;

                  case "unmaskedvalue":
                    var tests = this.data("inputmask")["tests"];
                    var _buffer = this.data("inputmask")["_buffer"];
                    opts.greedy = this.data("inputmask")["greedy"];
                    opts.repeat = this.data("inputmask")["repeat"];
                    opts.definitions = this.data("inputmask")["definitions"];
                    return unmaskedvalue(this);
                    break;

                  case "remove":
                    var tests, _buffer;
                    return this.each(function() {
                        var $input = $(this), input = this;
                        setTimeout(function() {
                            if ($input.data("inputmask")) {
                                tests = $input.data("inputmask")["tests"];
                                _buffer = $input.data("inputmask")["_buffer"];
                                opts.greedy = $input.data("inputmask")["greedy"];
                                opts.repeat = $input.data("inputmask")["repeat"];
                                opts.definitions = $input.data("inputmask")["definitions"];
                                input._valueSet(unmaskedvalue($input, true));
                                $input.removeData("inputmask");
                                $input.unbind(".inputmask");
                                $input.removeClass("focus.inputmask");
                                var valueProperty;
                                if (Object.getOwnPropertyDescriptor) valueProperty = Object.getOwnPropertyDescriptor(input, "value");
                                if (valueProperty && valueProperty.get) {
                                    if (input._valueGet) {
                                        Object.defineProperty(input, "value", {
                                            get: input._valueGet,
                                            set: input._valueSet
                                        });
                                    }
                                } else if (document.__lookupGetter__ && input.__lookupGetter__("value")) {
                                    if (input._valueGet) {
                                        input.__defineGetter__("value", input._valueGet);
                                        input.__defineSetter__("value", input._valueSet);
                                    }
                                }
                                delete input._valueGet;
                                delete input._valueSet;
                            }
                        }, 0);
                    });
                    break;

                  case "getemptymask":
                    if (this.data("inputmask")) return this.data("inputmask")["_buffer"].join(""); else return "";

                  case "hasMaskedValue":
                    return this.data("inputmask") ? !this.data("inputmask")["autoUnmask"] : false;

                  default:
                    if (!resolveAlias(fn)) {
                        opts.mask = fn;
                    }
                    var _buffer = getMaskTemplate();
                    var tests = getTestingChain();
                    return this.each(function() {
                        mask(this);
                    });
                    break;
                }
            }
            if (typeof fn == "object") {
                opts = $.extend(true, {}, $.inputmask.defaults, fn);
                resolveAlias(opts.alias);
                var _buffer = getMaskTemplate();
                var tests = getTestingChain();
                return this.each(function() {
                    mask(this);
                });
            }
            function isInputEventSupported(eventName) {
                var el = document.createElement("input"), eventName = "on" + eventName, isSupported = eventName in el;
                if (!isSupported) {
                    el.setAttribute(eventName, "return;");
                    isSupported = typeof el[eventName] == "function";
                }
                el = null;
                return isSupported;
            }
            function resolveAlias(aliasStr) {
                var aliasDefinition = opts.aliases[aliasStr];
                if (aliasDefinition) {
                    if (aliasDefinition.alias) resolveAlias(aliasDefinition.alias);
                    $.extend(true, opts, aliasDefinition);
                    $.extend(true, opts, options);
                    return true;
                }
                return false;
            }
            function getMaskTemplate() {
                var escaped = false, outCount = 0;
                if (opts.mask.length == 1 && opts.greedy == false) {
                    opts.placeholder = "";
                }
                var singleMask = $.map(opts.mask.split(""), function(element, index) {
                    var outElem = [];
                    if (element == opts.escapeChar) {
                        escaped = true;
                    } else if (element != opts.optionalmarker.start && element != opts.optionalmarker.end || escaped) {
                        var maskdef = opts.definitions[element];
                        if (maskdef && !escaped) {
                            for (var i = 0; i < maskdef.cardinality; i++) {
                                outElem.push(getPlaceHolder(outCount + i));
                            }
                        } else {
                            outElem.push(element);
                            escaped = false;
                        }
                        outCount += outElem.length;
                        return outElem;
                    }
                });
                var repeatedMask = singleMask.slice();
                for (var i = 1; i < opts.repeat && opts.greedy; i++) {
                    repeatedMask = repeatedMask.concat(singleMask.slice());
                }
                return repeatedMask;
            }
            function getTestingChain() {
                var isOptional = false, escaped = false;
                var newBlockMarker = false;
                return $.map(opts.mask.split(""), function(element, index) {
                    var outElem = [];
                    if (element == opts.escapeChar) {
                        escaped = true;
                    } else if (element == opts.optionalmarker.start && !escaped) {
                        isOptional = true;
                        newBlockMarker = true;
                    } else if (element == opts.optionalmarker.end && !escaped) {
                        isOptional = false;
                        newBlockMarker = true;
                    } else {
                        var maskdef = opts.definitions[element];
                        if (maskdef && !escaped) {
                            var prevalidators = maskdef["prevalidator"], prevalidatorsL = prevalidators ? prevalidators.length : 0;
                            for (var i = 1; i < maskdef.cardinality; i++) {
                                var prevalidator = prevalidatorsL >= i ? prevalidators[i - 1] : [], validator = prevalidator["validator"], cardinality = prevalidator["cardinality"];
                                outElem.push({
                                    fn: validator ? typeof validator == "string" ? new RegExp(validator) : new function() {
                                        this.test = validator;
                                    }() : new RegExp("."),
                                    cardinality: cardinality ? cardinality : 1,
                                    optionality: isOptional,
                                    newBlockMarker: isOptional == true ? newBlockMarker : false,
                                    offset: 0,
                                    casing: maskdef["casing"],
                                    def: element
                                });
                                if (isOptional == true) newBlockMarker = false;
                            }
                            outElem.push({
                                fn: maskdef.validator ? typeof maskdef.validator == "string" ? new RegExp(maskdef.validator) : new function() {
                                    this.test = maskdef.validator;
                                }() : new RegExp("."),
                                cardinality: maskdef.cardinality,
                                optionality: isOptional,
                                newBlockMarker: newBlockMarker,
                                offset: 0,
                                casing: maskdef["casing"],
                                def: element
                            });
                        } else {
                            outElem.push({
                                fn: null,
                                cardinality: 0,
                                optionality: isOptional,
                                newBlockMarker: newBlockMarker,
                                offset: 0,
                                casing: null,
                                def: element
                            });
                            escaped = false;
                        }
                        newBlockMarker = false;
                        return outElem;
                    }
                });
            }
            function isValid(pos, c, buffer, strict) {
                var result = false;
                if (pos >= 0 && pos < getMaskLength()) {
                    var testPos = determineTestPosition(pos), loopend = c ? 1 : 0, chrs = "";
                    for (var i = tests[testPos].cardinality; i > loopend; i--) {
                        chrs += getBufferElement(buffer, testPos - (i - 1));
                    }
                    if (c) {
                        chrs += c;
                    }
                    result = tests[testPos].fn != null ? tests[testPos].fn.test(chrs, buffer, pos, strict, opts) : false;
                }
                return result;
            }
            function isMask(pos) {
                var testPos = determineTestPosition(pos);
                var test = tests[testPos];
                return test != undefined ? test.fn : false;
            }
            function determineTestPosition(pos) {
                return pos % tests.length;
            }
            function getPlaceHolder(pos) {
                return opts.placeholder.charAt(pos % opts.placeholder.length);
            }
            function getMaskLength() {
                var calculatedLength = _buffer.length;
                if (!opts.greedy && opts.repeat > 1) {
                    calculatedLength += _buffer.length * (opts.repeat - 1);
                }
                return calculatedLength;
            }
            function seekNext(buffer, pos) {
                var maskL = getMaskLength();
                if (pos >= maskL) return maskL;
                var position = pos;
                while (++position < maskL && !isMask(position)) {}
                return position;
            }
            function seekPrevious(buffer, pos) {
                var position = pos;
                if (position <= 0) return 0;
                while (--position > 0 && !isMask(position)) {}
                return position;
            }
            function setBufferElement(buffer, position, element) {
                var test = tests[determineTestPosition(position)];
                var elem = element;
                if (elem != undefined) {
                    switch (test.casing) {
                      case "upper":
                        elem = element.toUpperCase();
                        break;

                      case "lower":
                        elem = element.toLowerCase();
                        break;
                    }
                }
                buffer[position] = elem;
            }
            function getBufferElement(buffer, position, autoPrepare) {
                if (autoPrepare) position = prepareBuffer(buffer, position);
                return buffer[position];
            }
            function prepareBuffer(buffer, position, isRTL) {
                var j;
                if (isRTL) {
                    while (position < 0 && buffer.length < getMaskLength()) {
                        j = _buffer.length - 1;
                        position = _buffer.length;
                        while (_buffer[j] !== undefined) {
                            buffer.unshift(_buffer[j--]);
                        }
                    }
                } else {
                    while (buffer[position] == undefined && buffer.length < getMaskLength()) {
                        j = 0;
                        while (_buffer[j] !== undefined) {
                            buffer.push(_buffer[j++]);
                        }
                    }
                }
                return position;
            }
            function writeBuffer(input, buffer, caretPos) {
                input._valueSet(buffer.join(""));
                if (caretPos != undefined) {
                    if (android) {
                        setTimeout(function() {
                            caret(input, caretPos);
                        }, 100);
                    } else caret(input, caretPos);
                }
            }
            function clearBuffer(buffer, start, end) {
                for (var i = start, maskL = getMaskLength(); i < end && i < maskL; i++) {
                    setBufferElement(buffer, i, getBufferElement(_buffer.slice(), i));
                }
            }
            function setReTargetPlaceHolder(buffer, pos) {
                var testPos = determineTestPosition(pos);
                setBufferElement(buffer, pos, getBufferElement(_buffer, testPos));
            }
            function checkVal(input, buffer, clearInvalid, skipRadixHandling) {
                var isRTL = $(input).data("inputmask")["isRTL"], inputValue = truncateInput(input._valueGet(), isRTL).split("");
                if (isRTL) {
                    var maskL = getMaskLength();
                    var inputValueRev = inputValue.reverse();
                    inputValueRev.length = maskL;
                    for (var i = 0; i < maskL; i++) {
                        var targetPosition = determineTestPosition(maskL - (i + 1));
                        if (tests[targetPosition].fn == null && inputValueRev[i] != getBufferElement(_buffer, targetPosition)) {
                            inputValueRev.splice(i, 0, getBufferElement(_buffer, targetPosition));
                            inputValueRev.length = maskL;
                        } else {
                            inputValueRev[i] = inputValueRev[i] || getBufferElement(_buffer, targetPosition);
                        }
                    }
                    inputValue = inputValueRev.reverse();
                }
                clearBuffer(buffer, 0, buffer.length);
                buffer.length = _buffer.length;
                var lastMatch = -1, checkPosition = -1, np, maskL = getMaskLength(), ivl = inputValue.length, rtlMatch = ivl == 0 ? maskL : -1;
                for (var i = 0; i < ivl; i++) {
                    for (var pos = checkPosition + 1; pos < maskL; pos++) {
                        if (isMask(pos)) {
                            var c = inputValue[i];
                            if ((np = isValid(pos, c, buffer, !clearInvalid)) !== false) {
                                if (np !== true) {
                                    pos = np.pos || pos;
                                    c = np.c || c;
                                }
                                setBufferElement(buffer, pos, c);
                                lastMatch = checkPosition = pos;
                            } else {
                                setReTargetPlaceHolder(buffer, pos);
                                if (c == getPlaceHolder(pos)) {
                                    checkPosition = pos;
                                    rtlMatch = pos;
                                }
                            }
                            break;
                        } else {
                            setReTargetPlaceHolder(buffer, pos);
                            if (lastMatch == checkPosition) lastMatch = pos;
                            checkPosition = pos;
                            if (inputValue[i] == getBufferElement(buffer, pos)) break;
                        }
                    }
                }
                if (opts.greedy == false) {
                    var newBuffer = truncateInput(buffer.join(""), isRTL).split("");
                    while (buffer.length != newBuffer.length) {
                        isRTL ? buffer.shift() : buffer.pop();
                    }
                }
                if (clearInvalid) {
                    writeBuffer(input, buffer);
                }
                return isRTL ? opts.numericInput ? $.inArray(opts.radixPoint, buffer) != -1 && skipRadixHandling !== true ? $.inArray(opts.radixPoint, buffer) : seekNext(buffer, maskL) : seekNext(buffer, rtlMatch) : seekNext(buffer, lastMatch);
            }
            function escapeRegex(str) {
                var specials = [ "/", ".", "*", "+", "?", "|", "(", ")", "[", "]", "{", "}", "\\" ];
                return str.replace(new RegExp("(\\" + specials.join("|\\") + ")", "gim"), "\\$1");
            }
            function truncateInput(inputValue, rtl) {
                return rtl ? inputValue.replace(new RegExp("^(" + escapeRegex(_buffer.join("")) + ")*"), "") : inputValue.replace(new RegExp("(" + escapeRegex(_buffer.join("")) + ")*$"), "");
            }
            function clearOptionalTail(input, buffer) {
                checkVal(input, buffer, false);
                var tmpBuffer = buffer.slice();
                if ($(input).data("inputmask")["isRTL"]) {
                    for (var pos = 0; pos <= tmpBuffer.length - 1; pos++) {
                        var testPos = determineTestPosition(pos);
                        if (tests[testPos].optionality) {
                            if (getPlaceHolder(pos) == buffer[pos] || !isMask(pos)) tmpBuffer.splice(0, 1); else break;
                        } else break;
                    }
                } else {
                    for (var pos = tmpBuffer.length - 1; pos >= 0; pos--) {
                        var testPos = determineTestPosition(pos);
                        if (tests[testPos].optionality) {
                            if (getPlaceHolder(pos) == buffer[pos] || !isMask(pos)) tmpBuffer.pop(); else break;
                        } else break;
                    }
                }
                writeBuffer(input, tmpBuffer);
            }
            function unmaskedvalue($input, skipDatepickerCheck) {
                var input = $input[0];
                if (tests && (skipDatepickerCheck === true || !$input.hasClass("hasDatepicker"))) {
                    var buffer = _buffer.slice();
                    checkVal(input, buffer);
                    return $.map(buffer, function(element, index) {
                        return isMask(index) && element != getBufferElement(_buffer.slice(), index) ? element : null;
                    }).join("");
                } else {
                    return input._valueGet();
                }
            }
            function caret(input, begin, end) {
                var npt = input.jquery && input.length > 0 ? input[0] : input;
                if (typeof begin == "number") {
                    end = typeof end == "number" ? end : begin;
                    if (opts.insertMode == false && begin == end) end++;
                    if (npt.setSelectionRange) {
                        npt.setSelectionRange(begin, end);
                    } else if (npt.createTextRange) {
                        var range = npt.createTextRange();
                        range.collapse(true);
                        range.moveEnd("character", end);
                        range.moveStart("character", begin);
                        range.select();
                    }
                    npt.focus();
                    if (android && end != npt.selectionEnd) caretposCorrection = {
                        begin: begin,
                        end: end
                    };
                } else {
                    var caretpos = android ? caretposCorrection : null, caretposCorrection = null;
                    if (caretpos == null) {
                        if (npt.setSelectionRange) {
                            begin = npt.selectionStart;
                            end = npt.selectionEnd;
                        } else if (document.selection && document.selection.createRange) {
                            var range = document.selection.createRange();
                            begin = 0 - range.duplicate().moveStart("character", -1e5);
                            end = begin + range.text.length;
                        }
                        caretpos = {
                            begin: begin,
                            end: end
                        };
                    }
                    return caretpos;
                }
            }
            function mask(el) {
                var $input = $(el);
                if (!$input.is(":input")) return;
                opts.greedy = opts.greedy ? opts.greedy : opts.repeat == 0;
                var maxLength = $input.prop("maxLength");
                if (getMaskLength() > maxLength && maxLength > -1) {
                    if (maxLength < _buffer.length) _buffer.length = maxLength;
                    if (opts.greedy == false) {
                        opts.repeat = Math.round(maxLength / _buffer.length);
                    }
                }
                $input.prop("maxLength", getMaskLength() * 2);
                $input.data("inputmask", {
                    tests: tests,
                    _buffer: _buffer,
                    greedy: opts.greedy,
                    repeat: opts.repeat,
                    autoUnmask: opts.autoUnmask,
                    definitions: opts.definitions,
                    isRTL: false
                });
                patchValueProperty(el);
                var buffer = _buffer.slice(), undoBuffer = el._valueGet(), skipKeyPressEvent = false, ignorable = false, lastPosition = -1, firstMaskPos = seekNext(buffer, -1), lastMaskPos = seekPrevious(buffer, getMaskLength()), isRTL = false;
                if (el.dir == "rtl" || opts.numericInput) {
                    el.dir = "ltr";
                    $input.css("text-align", "right");
                    $input.removeAttr("dir");
                    var inputData = $input.data("inputmask");
                    inputData["isRTL"] = true;
                    $input.data("inputmask", inputData);
                    isRTL = true;
                }
                $input.unbind(".inputmask");
                $input.removeClass("focus.inputmask");
                $input.bind("mouseenter.inputmask", function() {
                    var $input = $(this), input = this;
                    if (!$input.hasClass("focus.inputmask") && opts.showMaskOnHover) {
                        var nptL = input._valueGet().length;
                        if (nptL < buffer.length) {
                            if (nptL == 0) buffer = _buffer.slice();
                            writeBuffer(input, buffer);
                        }
                    }
                }).bind("blur.inputmask", function() {
                    var $input = $(this), input = this, nptValue = input._valueGet();
                    $input.removeClass("focus.inputmask");
                    if (nptValue != undoBuffer) {
                        $input.change();
                    }
                    if (opts.clearMaskOnLostFocus) {
                        if (nptValue == _buffer.join("")) input._valueSet(""); else {
                            clearOptionalTail(input, buffer);
                        }
                    }
                    if (!isComplete(input)) {
                        $input.trigger("incomplete");
                        if (opts.clearIncomplete) {
                            if (opts.clearMaskOnLostFocus) input._valueSet(""); else {
                                buffer = _buffer.slice();
                                writeBuffer(input, buffer);
                            }
                        }
                    }
                }).bind("focus.inputmask", function() {
                    var $input = $(this), input = this;
                    if (!opts.overrideFocus) {
                        if (!$input.hasClass("focus.inputmask") && !opts.showMaskOnHover) {
                            var nptL = input._valueGet().length;
                            if (nptL < buffer.length) {
                                if (nptL == 0) buffer = _buffer.slice();
                                caret(input, checkVal(input, buffer, true));
                            }
                        }
                    }
                    $input.addClass("focus.inputmask");
                    undoBuffer = input._valueGet();
                }).bind("mouseleave.inputmask", function() {
                    var $input = $(this), input = this;
                    if (opts.clearMaskOnLostFocus) {
                        if (!$input.hasClass("focus.inputmask")) {
                            if (input._valueGet() == _buffer.join("") || input._valueGet() == "") input._valueSet(""); else {
                                clearOptionalTail(input, buffer);
                            }
                        }
                    }
                }).bind("click.inputmask", function() {
                    var input = this;
                    setTimeout(function() {
                        var selectedCaret = caret(input);
                        if (selectedCaret.begin == selectedCaret.end) {
                            var clickPosition = selectedCaret.begin;
                            lastPosition = checkVal(input, buffer, false);
                            if (isRTL) caret(input, clickPosition > lastPosition && (isValid(clickPosition, buffer[clickPosition], buffer, true) !== false || !isMask(clickPosition)) ? clickPosition : lastPosition); else caret(input, clickPosition < lastPosition && (isValid(clickPosition, buffer[clickPosition], buffer, true) !== false || !isMask(clickPosition)) ? clickPosition : lastPosition);
                        }
                    }, 0);
                }).bind("dblclick.inputmask", function() {
                    var input = this;
                    setTimeout(function() {
                        caret(input, 0, lastPosition);
                    }, 0);
                }).bind("keydown.inputmask", keydownEvent).bind("keypress.inputmask", keypressEvent).bind("keyup.inputmask", keyupEvent).bind(pasteEvent + ".inputmask, dragdrop.inputmask, drop.inputmask", function() {
                    var input = this;
                    setTimeout(function() {
                        caret(input, checkVal(input, buffer, true));
                    }, 0);
                }).bind("setvalue.inputmask", function() {
                    var input = this;
                    undoBuffer = input._valueGet();
                    checkVal(input, buffer, true);
                    if (input._valueGet() == _buffer.join("")) input._valueSet("");
                }).bind("complete.inputmask", opts.oncomplete).bind("incomplete.inputmask", opts.onincomplete).bind("cleared.inputmask", opts.oncleared);
                lastPosition = checkVal(el, buffer, true);
                var activeElement;
                try {
                    activeElement = document.activeElement;
                } catch (e) {}
                if (activeElement === el) {
                    $input.addClass("focus.inputmask");
                    caret(el, lastPosition);
                } else if (opts.clearMaskOnLostFocus) {
                    if (el._valueGet() == _buffer.join("")) {
                        el._valueSet("");
                    } else {
                        clearOptionalTail(el, buffer);
                    }
                }
                installEventRuler(el);
                function isComplete(npt) {
                    var complete = true, nptValue = npt._valueGet(), ml = nptValue.length;
                    for (var i = 0; i < ml; i++) {
                        if (isMask(i) && nptValue.charAt(i) == getPlaceHolder(i)) {
                            complete = false;
                            break;
                        }
                    }
                    return complete;
                }
                function installEventRuler(npt) {
                    var events = $._data(npt).events;
                    $.each(events, function(eventType, eventHandlers) {
                        $(npt).bind(eventType + ".inputmask", function(event) {
                            if (this.readOnly || this.disabled) {
                                event.stopPropagation();
                                event.stopImmediatePropagation();
                                event.preventDefault();
                                return false;
                            }
                        });
                        var ourHandler = eventHandlers[eventHandlers.length - 1];
                        for (var i = eventHandlers.length - 1; i > 0; i--) {
                            eventHandlers[i] = eventHandlers[i - 1];
                        }
                        eventHandlers[0] = ourHandler;
                    });
                }
                function patchValueProperty(npt) {
                    var valueProperty;
                    if (Object.getOwnPropertyDescriptor) valueProperty = Object.getOwnPropertyDescriptor(npt, "value");
                    if (valueProperty && valueProperty.get) {
                        if (!npt._valueGet) {
                            npt._valueGet = valueProperty.get;
                            npt._valueSet = valueProperty.set;
                            Object.defineProperty(npt, "value", {
                                get: function() {
                                    var $self = $(this), inputData = $(this).data("inputmask");
                                    return inputData && inputData["autoUnmask"] ? $self.inputmask("unmaskedvalue") : this._valueGet() != inputData["_buffer"].join("") ? this._valueGet() : "";
                                },
                                set: function(value) {
                                    this._valueSet(value);
                                    $(this).triggerHandler("setvalue.inputmask");
                                }
                            });
                        }
                    } else if (document.__lookupGetter__ && npt.__lookupGetter__("value")) {
                        if (!npt._valueGet) {
                            npt._valueGet = npt.__lookupGetter__("value");
                            npt._valueSet = npt.__lookupSetter__("value");
                            npt.__defineGetter__("value", function() {
                                var $self = $(this), inputData = $(this).data("inputmask");
                                return inputData && inputData["autoUnmask"] ? $self.inputmask("unmaskedvalue") : this._valueGet() != inputData["_buffer"].join("") ? this._valueGet() : "";
                            });
                            npt.__defineSetter__("value", function(value) {
                                this._valueSet(value);
                                $(this).triggerHandler("setvalue.inputmask");
                            });
                        }
                    } else {
                        if (!npt._valueGet) {
                            npt._valueGet = function() {
                                return this.value;
                            };
                            npt._valueSet = function(value) {
                                this.value = value;
                            };
                        }
                        if ($.fn.val.inputmaskpatch != true) {
                            $.fn.val = function() {
                                if (arguments.length == 0) {
                                    var $self = $(this);
                                    if ($self.data("inputmask")) {
                                        if ($self.data("inputmask")["autoUnmask"]) return $self.inputmask("unmaskedvalue"); else {
                                            var result = $.inputmask.val.apply($self);
                                            return result != $self.data("inputmask")["_buffer"].join("") ? result : "";
                                        }
                                    } else return $.inputmask.val.apply($self);
                                } else {
                                    var args = arguments;
                                    return this.each(function() {
                                        var $self = $(this);
                                        var result = $.inputmask.val.apply($self, args);
                                        if ($self.data("inputmask")) $self.triggerHandler("setvalue.inputmask");
                                        return result;
                                    });
                                }
                            };
                            $.extend($.fn.val, {
                                inputmaskpatch: true
                            });
                        }
                    }
                }
                function shiftL(start, end, c) {
                    while (!isMask(start) && start - 1 >= 0) start--;
                    for (var i = start; i < end && i < getMaskLength(); i++) {
                        if (isMask(i)) {
                            setReTargetPlaceHolder(buffer, i);
                            var j = seekNext(buffer, i);
                            var p = getBufferElement(buffer, j);
                            if (p != getPlaceHolder(j)) {
                                if (j < getMaskLength() && isValid(i, p, buffer, true) !== false && tests[determineTestPosition(i)].def == tests[determineTestPosition(j)].def) {
                                    setBufferElement(buffer, i, getBufferElement(buffer, j));
                                    setReTargetPlaceHolder(buffer, j);
                                } else {
                                    if (isMask(i)) break;
                                }
                            } else if (c == undefined) break;
                        } else {
                            setReTargetPlaceHolder(buffer, i);
                        }
                    }
                    if (c != undefined) setBufferElement(buffer, isRTL ? end : seekPrevious(buffer, end), c);
                    buffer = truncateInput(buffer.join(""), isRTL).split("");
                    if (buffer.length == 0) buffer = _buffer.slice();
                    return start;
                }
                function shiftR(start, end, c, full) {
                    for (var i = start; i <= end && i < getMaskLength(); i++) {
                        if (isMask(i)) {
                            var t = getBufferElement(buffer, i);
                            setBufferElement(buffer, i, c);
                            if (t != getPlaceHolder(i)) {
                                var j = seekNext(buffer, i);
                                if (j < getMaskLength()) {
                                    if (isValid(j, t, buffer, true) !== false && tests[determineTestPosition(i)].def == tests[determineTestPosition(j)].def) c = t; else {
                                        if (isMask(j)) break; else c = t;
                                    }
                                } else break;
                            } else if (full !== true) break;
                        } else setReTargetPlaceHolder(buffer, i);
                    }
                    var lengthBefore = buffer.length;
                    buffer = truncateInput(buffer.join(""), isRTL).split("");
                    if (buffer.length == 0) buffer = _buffer.slice();
                    return end - (lengthBefore - buffer.length);
                }
                function keydownEvent(e) {
                    skipKeyPressEvent = false;
                    var input = this, k = e.keyCode, pos = caret(input);
                    if (opts.numericInput) {
                        var nptStr = input._valueGet();
                        var radixPosition = nptStr.indexOf(opts.radixPoint);
                        if (radixPosition != -1) {
                            isRTL = pos.begin <= radixPosition || pos.end <= radixPosition;
                        }
                    }
                    if (k == opts.keyCode.BACKSPACE || k == opts.keyCode.DELETE || iphone && k == 127) {
                        var maskL = getMaskLength();
                        if (pos.begin == 0 && pos.end == maskL) {
                            buffer = _buffer.slice();
                            writeBuffer(input, buffer);
                            caret(input, checkVal(input, buffer, false));
                        } else if (pos.end - pos.begin > 1 || pos.end - pos.begin == 1 && opts.insertMode) {
                            clearBuffer(buffer, pos.begin, pos.end);
                            writeBuffer(input, buffer, isRTL ? checkVal(input, buffer, false) : pos.begin);
                        } else {
                            var beginPos = pos.begin - (k == opts.keyCode.DELETE ? 0 : 1);
                            if (beginPos < firstMaskPos && k == opts.keyCode.DELETE) {
                                beginPos = firstMaskPos;
                            }
                            if (beginPos >= firstMaskPos) {
                                if (opts.numericInput && opts.greedy && k == opts.keyCode.DELETE && buffer[beginPos] == opts.radixPoint) {
                                    beginPos = seekNext(buffer, beginPos);
                                    isRTL = false;
                                }
                                if (isRTL) {
                                    beginPos = shiftR(firstMaskPos, beginPos, getPlaceHolder(beginPos), true);
                                    beginPos = opts.numericInput && opts.greedy && k == opts.keyCode.BACKSPACE && buffer[beginPos + 1] == opts.radixPoint ? beginPos + 1 : seekNext(buffer, beginPos);
                                } else beginPos = shiftL(beginPos, maskL);
                                writeBuffer(input, buffer, beginPos);
                            }
                        }
                        if (input._valueGet() == _buffer.join("")) $(input).trigger("cleared");
                        return false;
                    } else if (k == opts.keyCode.END || k == opts.keyCode.PAGE_DOWN) {
                        setTimeout(function() {
                            var caretPos = checkVal(input, buffer, false, true);
                            if (!opts.insertMode && caretPos == getMaskLength() && !e.shiftKey) caretPos--;
                            caret(input, e.shiftKey ? pos.begin : caretPos, caretPos);
                        }, 0);
                        return false;
                    } else if (k == opts.keyCode.HOME || k == opts.keyCode.PAGE_UP) {
                        caret(input, 0, e.shiftKey ? pos.begin : 0);
                        return false;
                    } else if (k == opts.keyCode.ESCAPE) {
                        input._valueSet(undoBuffer);
                        caret(input, 0, checkVal(input, buffer));
                        return false;
                    } else if (k == opts.keyCode.INSERT) {
                        opts.insertMode = !opts.insertMode;
                        caret(input, !opts.insertMode && pos.begin == getMaskLength() ? pos.begin - 1 : pos.begin);
                        return false;
                    } else if (e.ctrlKey && k == 88) {
                        setTimeout(function() {
                            caret(input, checkVal(input, buffer, true));
                        }, 0);
                    } else if (!opts.insertMode) {
                        if (k == opts.keyCode.RIGHT) {
                            var caretPos = pos.begin == pos.end ? pos.end + 1 : pos.end;
                            caretPos = caretPos < getMaskLength() ? caretPos : pos.end;
                            caret(input, e.shiftKey ? pos.begin : caretPos, e.shiftKey ? caretPos + 1 : caretPos);
                            return false;
                        } else if (k == opts.keyCode.LEFT) {
                            var caretPos = pos.begin - 1;
                            caretPos = caretPos > 0 ? caretPos : 0;
                            caret(input, caretPos, e.shiftKey ? pos.end : caretPos);
                            return false;
                        }
                    }
                    opts.onKeyDown.call(this, e, opts);
                    ignorable = $.inArray(k, opts.ignorables) != -1;
                }
                function keypressEvent(e) {
                    if (skipKeyPressEvent) return false;
                    skipKeyPressEvent = true;
                    var input = this, $input = $(input);
                    e = e || window.event;
                    var k = e.which || e.charCode || e.keyCode;
                    if (opts.numericInput && k == opts.radixPoint.charCodeAt(opts.radixPoint.length - 1)) {
                        var nptStr = input._valueGet();
                        var radixPosition = nptStr.indexOf(opts.radixPoint);
                        caret(input, seekNext(buffer, radixPosition != -1 ? radixPosition : getMaskLength()));
                    }
                    if (e.ctrlKey || e.altKey || e.metaKey || ignorable) {
                        return true;
                    } else {
                        if (k) {
                            $input.trigger("input");
                            var pos = caret(input), c = String.fromCharCode(k), maskL = getMaskLength();
                            clearBuffer(buffer, pos.begin, pos.end);
                            if (isRTL) {
                                var p = opts.numericInput ? pos.end : seekPrevious(buffer, pos.end), np;
                                if ((np = isValid(p == maskL || getBufferElement(buffer, p) == opts.radixPoint ? seekPrevious(buffer, p) : p, c, buffer, false)) !== false) {
                                    if (np !== true) {
                                        p = np.pos || pos;
                                        c = np.c || c;
                                    }
                                    var firstUnmaskedPosition = firstMaskPos;
                                    if (opts.insertMode == true) {
                                        if (opts.greedy == true) {
                                            var bfrClone = buffer.slice();
                                            while (getBufferElement(bfrClone, firstUnmaskedPosition, true) != getPlaceHolder(firstUnmaskedPosition) && firstUnmaskedPosition <= p) {
                                                firstUnmaskedPosition = firstUnmaskedPosition == maskL ? maskL + 1 : seekNext(buffer, firstUnmaskedPosition);
                                            }
                                        }
                                        if (firstUnmaskedPosition <= p && (opts.greedy || buffer.length < maskL)) {
                                            if (buffer[firstMaskPos] != getPlaceHolder(firstMaskPos) && buffer.length < maskL) {
                                                var offset = prepareBuffer(buffer, -1, isRTL);
                                                if (pos.end != 0) p = p + offset;
                                                maskL = buffer.length;
                                            }
                                            shiftL(firstUnmaskedPosition, opts.numericInput ? seekPrevious(buffer, p) : p, c);
                                        } else return false;
                                    } else setBufferElement(buffer, opts.numericInput ? seekPrevious(buffer, p) : p, c);
                                    writeBuffer(input, buffer, opts.numericInput && p == 0 ? seekNext(buffer, p) : p);
                                    setTimeout(function() {
                                        if (isComplete(input)) $input.trigger("complete");
                                    }, 0);
                                } else if (android) writeBuffer(input, buffer, pos.begin);
                            } else {
                                var p = seekNext(buffer, pos.begin - 1), np;
                                prepareBuffer(buffer, p, isRTL);
                                if ((np = isValid(p, c, buffer, false)) !== false) {
                                    if (np !== true) {
                                        p = np.pos || p;
                                        c = np.c || c;
                                    }
                                    if (opts.insertMode == true) {
                                        var lastUnmaskedPosition = getMaskLength();
                                        var bfrClone = buffer.slice();
                                        while (getBufferElement(bfrClone, lastUnmaskedPosition, true) != getPlaceHolder(lastUnmaskedPosition) && lastUnmaskedPosition >= p) {
                                            lastUnmaskedPosition = lastUnmaskedPosition == 0 ? -1 : seekPrevious(buffer, lastUnmaskedPosition);
                                        }
                                        if (lastUnmaskedPosition >= p) shiftR(p, buffer.length, c); else return false;
                                    } else setBufferElement(buffer, p, c);
                                    var next = seekNext(buffer, p);
                                    writeBuffer(input, buffer, next);
                                    setTimeout(function() {
                                        if (isComplete(input)) $input.trigger("complete");
                                    }, 0);
                                } else if (android) writeBuffer(input, buffer, pos.begin);
                            }
                            return false;
                        }
                    }
                }
                function keyupEvent(e) {
                    var $input = $(this), input = this;
                    var k = e.keyCode;
                    opts.onKeyUp.call(this, e, opts);
                    if (k == opts.keyCode.TAB && $input.hasClass("focus.inputmask") && input._valueGet().length == 0) {
                        buffer = _buffer.slice();
                        writeBuffer(input, buffer);
                        if (!isRTL) caret(input, 0);
                        undoBuffer = input._valueGet();
                    }
                }
            }
            return this;
        };
    }
})(jQuery);

(function() {
    var b = void 0, f = !0, j = null, l = !1;
    function m() {
        return function() {};
    }
    function n(a) {
        return function() {
            return this[a];
        };
    }
    function q(a) {
        return function() {
            return a;
        };
    }
    var s;
    document.createElement("video");
    document.createElement("audio");
    document.createElement("track");
    function t(a, c, d) {
        if ("string" === typeof a) {
            0 === a.indexOf("#") && (a = a.slice(1));
            if (t.Aa[a]) return c && t.log.warn('Player "' + a + '" is already initialised. Options will not be applied.'), 
            d && t.Aa[a].I(d), t.Aa[a];
            a = t.m(a);
        }
        if (!a || !a.nodeName) throw new TypeError("The element or ID supplied is not valid. (videojs)");
        return a.player || new t.Player(a, c, d);
    }
    var videojs = window.videojs = t;
    t.ic = "4.12";
    t.vd = "https:" == document.location.protocol ? "https://" : "http://";
    t.VERSION = "4.12.7";
    t.options = {
        techOrder: [ "html5", "flash" ],
        html5: {},
        flash: {},
        width: 300,
        height: 150,
        defaultVolume: 0,
        playbackRates: [],
        inactivityTimeout: 2e3,
        children: {
            mediaLoader: {},
            posterImage: {},
            loadingSpinner: {},
            textTrackDisplay: {},
            bigPlayButton: {},
            controlBar: {},
            errorDisplay: {},
            textTrackSettings: {}
        },
        language: document.getElementsByTagName("html")[0].getAttribute("lang") || navigator.languages && navigator.languages[0] || navigator.If || navigator.language || "en",
        languages: {},
        notSupportedMessage: "No compatible source was found for this video."
    };
    "GENERATED_CDN_VSN" !== t.ic && (videojs.options.flash.swf = t.vd + "vjs.zencdn.net/" + t.ic + "/video-js.swf");
    t.Jd = function(a, c) {
        t.options.languages[a] = t.options.languages[a] !== b ? t.$.ya(t.options.languages[a], c) : c;
        return t.options.languages;
    };
    t.Aa = {};
    "function" === typeof define && define.amd ? define("videojs", [], function() {
        return videojs;
    }) : "object" === typeof exports && "object" === typeof module && (module.exports = videojs);
    t.Ea = t.CoreObject = m();
    t.Ea.extend = function(a) {
        var c, d;
        a = a || {};
        c = a.init || a.l || this.prototype.init || this.prototype.l || m();
        d = function() {
            c.apply(this, arguments);
        };
        d.prototype = t.i.create(this.prototype);
        d.prototype.constructor = d;
        d.extend = t.Ea.extend;
        d.create = t.Ea.create;
        for (var e in a) a.hasOwnProperty(e) && (d.prototype[e] = a[e]);
        return d;
    };
    t.Ea.create = function() {
        var a = t.i.create(this.prototype);
        this.apply(a, arguments);
        return a;
    };
    t.b = function(a, c, d) {
        if (t.i.isArray(c)) return v(t.b, a, c, d);
        var e = t.getData(a);
        e.G || (e.G = {});
        e.G[c] || (e.G[c] = []);
        d.s || (d.s = t.s++);
        e.G[c].push(d);
        e.ca || (e.disabled = l, e.ca = function(c) {
            if (!e.disabled) {
                c = t.Pb(c);
                var d = e.G[c.type];
                if (d) for (var d = d.slice(0), k = 0, p = d.length; k < p && !c.Rc(); k++) d[k].call(a, c);
            }
        });
        1 == e.G[c].length && (a.addEventListener ? a.addEventListener(c, e.ca, l) : a.attachEvent && a.attachEvent("on" + c, e.ca));
    };
    t.n = function(a, c, d) {
        if (t.Mc(a)) {
            var e = t.getData(a);
            if (e.G) {
                if (t.i.isArray(c)) return v(t.n, a, c, d);
                if (c) {
                    var g = e.G[c];
                    if (g) {
                        if (d) {
                            if (d.s) for (e = 0; e < g.length; e++) g[e].s === d.s && g.splice(e--, 1);
                        } else e.G[c] = [];
                        t.Ac(a, c);
                    }
                } else for (g in e.G) c = g, e.G[c] = [], t.Ac(a, c);
            }
        }
    };
    t.Ac = function(a, c) {
        var d = t.getData(a);
        0 === d.G[c].length && (delete d.G[c], a.removeEventListener ? a.removeEventListener(c, d.ca, l) : a.detachEvent && a.detachEvent("on" + c, d.ca));
        t.ib(d.G) && (delete d.G, delete d.ca, delete d.disabled);
        t.ib(d) && t.cd(a);
    };
    t.Pb = function(a) {
        function c() {
            return f;
        }
        function d() {
            return l;
        }
        if (!a || !a.Vb) {
            var e = a || window.event;
            a = {};
            for (var g in e) "layerX" !== g && ("layerY" !== g && "keyLocation" !== g) && ("returnValue" == g && e.preventDefault || (a[g] = e[g]));
            a.target || (a.target = a.srcElement || document);
            a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement;
            a.preventDefault = function() {
                e.preventDefault && e.preventDefault();
                a.returnValue = l;
                a.ie = c;
                a.defaultPrevented = f;
            };
            a.ie = d;
            a.defaultPrevented = l;
            a.stopPropagation = function() {
                e.stopPropagation && e.stopPropagation();
                a.cancelBubble = f;
                a.Vb = c;
            };
            a.Vb = d;
            a.stopImmediatePropagation = function() {
                e.stopImmediatePropagation && e.stopImmediatePropagation();
                a.Rc = c;
                a.stopPropagation();
            };
            a.Rc = d;
            if (a.clientX != j) {
                g = document.documentElement;
                var h = document.body;
                a.pageX = a.clientX + (g && g.scrollLeft || h && h.scrollLeft || 0) - (g && g.clientLeft || h && h.clientLeft || 0);
                a.pageY = a.clientY + (g && g.scrollTop || h && h.scrollTop || 0) - (g && g.clientTop || h && h.clientTop || 0);
            }
            a.which = a.charCode || a.keyCode;
            a.button != j && (a.button = a.button & 1 ? 0 : a.button & 4 ? 1 : a.button & 2 ? 2 : 0);
        }
        return a;
    };
    t.o = function(a, c) {
        var d = t.Mc(a) ? t.getData(a) : {}, e = a.parentNode || a.ownerDocument;
        "string" === typeof c && (c = {
            type: c,
            target: a
        });
        c = t.Pb(c);
        d.ca && d.ca.call(a, c);
        if (e && !c.Vb() && c.bubbles !== l) t.o(e, c); else if (!e && !c.defaultPrevented && (d = t.getData(c.target), 
        c.target[c.type])) {
            d.disabled = f;
            if ("function" === typeof c.target[c.type]) c.target[c.type]();
            d.disabled = l;
        }
        return !c.defaultPrevented;
    };
    t.N = function(a, c, d) {
        function e() {
            t.n(a, c, e);
            d.apply(this, arguments);
        }
        if (t.i.isArray(c)) return v(t.N, a, c, d);
        e.s = d.s = d.s || t.s++;
        t.b(a, c, e);
    };
    function v(a, c, d, e) {
        t.wc.forEach(d, function(d) {
            a(c, d, e);
        });
    }
    var w = Object.prototype.hasOwnProperty;
    t.e = function(a, c) {
        var d;
        c = c || {};
        d = document.createElement(a || "div");
        t.i.da(c, function(a, c) {
            -1 !== a.indexOf("aria-") || "role" == a ? d.setAttribute(a, c) : d[a] = c;
        });
        return d;
    };
    t.ua = function(a) {
        return a.charAt(0).toUpperCase() + a.slice(1);
    };
    t.i = {};
    t.i.create = Object.create || function(a) {
        function c() {}
        c.prototype = a;
        return new c();
    };
    t.i.da = function(a, c, d) {
        for (var e in a) w.call(a, e) && c.call(d || this, e, a[e]);
    };
    t.i.D = function(a, c) {
        if (!c) return a;
        for (var d in c) w.call(c, d) && (a[d] = c[d]);
        return a;
    };
    t.i.Rd = function(a, c) {
        var d, e, g;
        a = t.i.copy(a);
        for (d in c) w.call(c, d) && (e = a[d], g = c[d], a[d] = t.i.jb(e) && t.i.jb(g) ? t.i.Rd(e, g) : c[d]);
        return a;
    };
    t.i.copy = function(a) {
        return t.i.D({}, a);
    };
    t.i.jb = function(a) {
        return !!a && "object" === typeof a && "[object Object]" === a.toString() && a.constructor === Object;
    };
    t.i.isArray = Array.isArray || function(a) {
        return "[object Array]" === Object.prototype.toString.call(a);
    };
    t.ke = function(a) {
        return a !== a;
    };
    t.bind = function(a, c, d) {
        function e() {
            return c.apply(a, arguments);
        }
        c.s || (c.s = t.s++);
        e.s = d ? d + "_" + c.s : c.s;
        return e;
    };
    t.ta = {};
    t.s = 1;
    t.expando = "vdata" + new Date().getTime();
    t.getData = function(a) {
        var c = a[t.expando];
        c || (c = a[t.expando] = t.s++);
        t.ta[c] || (t.ta[c] = {});
        return t.ta[c];
    };
    t.Mc = function(a) {
        a = a[t.expando];
        return !(!a || t.ib(t.ta[a]));
    };
    t.cd = function(a) {
        var c = a[t.expando];
        if (c) {
            delete t.ta[c];
            try {
                delete a[t.expando];
            } catch (d) {
                a.removeAttribute ? a.removeAttribute(t.expando) : a[t.expando] = j;
            }
        }
    };
    t.ib = function(a) {
        for (var c in a) if (a[c] !== j) return l;
        return f;
    };
    t.Oa = function(a, c) {
        return -1 !== (" " + a.className + " ").indexOf(" " + c + " ");
    };
    t.p = function(a, c) {
        t.Oa(a, c) || (a.className = "" === a.className ? c : a.className + " " + c);
    };
    t.r = function(a, c) {
        var d, e;
        if (t.Oa(a, c)) {
            d = a.className.split(" ");
            for (e = d.length - 1; 0 <= e; e--) d[e] === c && d.splice(e, 1);
            a.className = d.join(" ");
        }
    };
    t.A = t.e("video");
    var x = document.createElement("track");
    x.Wb = "captions";
    x.hd = "en";
    x.label = "English";
    t.A.appendChild(x);
    t.P = navigator.userAgent;
    t.Cd = /iPhone/i.test(t.P);
    t.Bd = /iPad/i.test(t.P);
    t.Dd = /iPod/i.test(t.P);
    t.Ad = t.Cd || t.Bd || t.Dd;
    var aa = t, y;
    var z = t.P.match(/OS (\d+)_/i);
    y = z && z[1] ? z[1] : b;
    aa.kf = y;
    t.zd = /Android/i.test(t.P);
    var ba = t, B;
    var C = t.P.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i), D, E;
    C ? (D = C[1] && parseFloat(C[1]), E = C[2] && parseFloat(C[2]), B = D && E ? parseFloat(C[1] + "." + C[2]) : D ? D : j) : B = j;
    ba.hc = B;
    t.Ed = t.zd && /webkit/i.test(t.P) && 2.3 > t.hc;
    t.jc = /Firefox/i.test(t.P);
    t.lf = /Chrome/i.test(t.P);
    t.oa = /MSIE\s8\.0/.test(t.P);
    t.Eb = !!("ontouchstart" in window || window.xd && document instanceof window.xd);
    t.wd = "backgroundSize" in t.A.style;
    t.ed = function(a, c) {
        t.i.da(c, function(c, e) {
            e === j || "undefined" === typeof e || e === l ? a.removeAttribute(c) : a.setAttribute(c, e === f ? "" : e);
        });
    };
    t.Na = function(a) {
        var c, d, e, g;
        c = {};
        if (a && a.attributes && 0 < a.attributes.length) {
            d = a.attributes;
            for (var h = d.length - 1; 0 <= h; h--) {
                e = d[h].name;
                g = d[h].value;
                if ("boolean" === typeof a[e] || -1 !== ",autoplay,controls,loop,muted,default,".indexOf("," + e + ",")) g = g !== j ? f : l;
                c[e] = g;
            }
        }
        return c;
    };
    t.vf = function(a, c) {
        var d = "";
        document.defaultView && document.defaultView.getComputedStyle ? d = document.defaultView.getComputedStyle(a, "").getPropertyValue(c) : a.currentStyle && (d = a["client" + c.substr(0, 1).toUpperCase() + c.substr(1)] + "px");
        return d;
    };
    t.Ub = function(a, c) {
        c.firstChild ? c.insertBefore(a, c.firstChild) : c.appendChild(a);
    };
    t.cb = {};
    t.m = function(a) {
        0 === a.indexOf("#") && (a = a.slice(1));
        return document.getElementById(a);
    };
    t.Ma = function(a, c) {
        c = c || a;
        var d = Math.floor(a % 60), e = Math.floor(a / 60 % 60), g = Math.floor(a / 3600), h = Math.floor(c / 60 % 60), k = Math.floor(c / 3600);
        if (isNaN(a) || Infinity === a) g = e = d = "-";
        g = 0 < g || 0 < k ? g + ":" : "";
        return g + (((g || 10 <= h) && 10 > e ? "0" + e : e) + ":") + (10 > d ? "0" + d : d);
    };
    t.Ld = function() {
        document.body.focus();
        document.onselectstart = q(l);
    };
    t.af = function() {
        document.onselectstart = q(f);
    };
    t.trim = function(a) {
        return (a + "").replace(/^\s+|\s+$/g, "");
    };
    t.round = function(a, c) {
        c || (c = 0);
        return Math.round(a * Math.pow(10, c)) / Math.pow(10, c);
    };
    t.Lb = function(a, c) {
        return {
            length: 1,
            start: function() {
                return a;
            },
            end: function() {
                return c;
            }
        };
    };
    t.Me = function(a) {
        try {
            var c = window.localStorage || l;
            c && (c.volume = a);
        } catch (d) {
            22 == d.code || 1014 == d.code ? t.log("LocalStorage Full (VideoJS)", d) : 18 == d.code ? t.log("LocalStorage not allowed (VideoJS)", d) : t.log("LocalStorage Error (VideoJS)", d);
        }
    };
    t.$d = function(a) {
        a.match(/^https?:\/\//) || (a = t.e("div", {
            innerHTML: '<a href="' + a + '">x</a>'
        }).firstChild.href);
        return a;
    };
    t.Ee = function(a) {
        var c, d, e, g;
        g = "protocol hostname port pathname search hash host".split(" ");
        d = t.e("a", {
            href: a
        });
        if (e = "" === d.host && "file:" !== d.protocol) c = t.e("div"), c.innerHTML = '<a href="' + a + '"></a>', 
        d = c.firstChild, c.setAttribute("style", "display:none; position:absolute;"), document.body.appendChild(c);
        a = {};
        for (var h = 0; h < g.length; h++) a[g[h]] = d[g[h]];
        "http:" === a.protocol && (a.host = a.host.replace(/:80$/, ""));
        "https:" === a.protocol && (a.host = a.host.replace(/:443$/, ""));
        e && document.body.removeChild(c);
        return a;
    };
    function F(a, c) {
        var d, e;
        d = Array.prototype.slice.call(c);
        e = m();
        e = window.console || {
            log: e,
            warn: e,
            error: e
        };
        a ? d.unshift(a.toUpperCase() + ":") : a = "log";
        t.log.history.push(d);
        d.unshift("VIDEOJS:");
        if (e[a].apply) e[a].apply(e, d); else e[a](d.join(" "));
    }
    t.log = function() {
        F(j, arguments);
    };
    t.log.history = [];
    t.log.error = function() {
        F("error", arguments);
    };
    t.log.warn = function() {
        F("warn", arguments);
    };
    t.Yd = function(a) {
        var c, d;
        a.getBoundingClientRect && a.parentNode && (c = a.getBoundingClientRect());
        if (!c) return {
            left: 0,
            top: 0
        };
        a = document.documentElement;
        d = document.body;
        return {
            left: t.round(c.left + (window.pageXOffset || d.scrollLeft) - (a.clientLeft || d.clientLeft || 0)),
            top: t.round(c.top + (window.pageYOffset || d.scrollTop) - (a.clientTop || d.clientTop || 0))
        };
    };
    t.wc = {};
    t.wc.forEach = function(a, c, d) {
        if (t.i.isArray(a) && c instanceof Function) for (var e = 0, g = a.length; e < g; ++e) c.call(d || t, a[e], e, a);
        return a;
    };
    t.ff = function(a, c) {
        var d, e, g, h, k, p, r;
        "string" === typeof a && (a = {
            uri: a
        });
        videojs.$.ya({
            method: "GET",
            timeout: 45e3
        }, a);
        c = c || m();
        p = function() {
            window.clearTimeout(k);
            c(j, e, e.response || e.responseText);
        };
        r = function(a) {
            window.clearTimeout(k);
            if (!a || "string" === typeof a) a = Error(a);
            c(a, e);
        };
        d = window.XMLHttpRequest;
        "undefined" === typeof d && (d = function() {
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.6.0");
            } catch (a) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.3.0");
            } catch (c) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP");
            } catch (d) {}
            throw Error("This browser does not support XMLHttpRequest.");
        });
        e = new d();
        e.uri = a.uri;
        d = t.Ee(a.uri);
        g = window.location;
        d.protocol + d.host !== g.protocol + g.host && window.XDomainRequest && !("withCredentials" in e) ? (e = new window.XDomainRequest(), 
        e.onload = p, e.onerror = r, e.onprogress = m(), e.ontimeout = m()) : (h = "file:" == d.protocol || "file:" == g.protocol, 
        e.onreadystatechange = function() {
            if (4 === e.readyState) {
                if (e.Ye) return r("timeout");
                200 === e.status || h && 0 === e.status ? p() : r();
            }
        }, a.timeout && (k = window.setTimeout(function() {
            4 !== e.readyState && (e.Ye = f, e.abort());
        }, a.timeout)));
        try {
            e.open(a.method || "GET", a.uri, f);
        } catch (u) {
            r(u);
            return;
        }
        a.withCredentials && (e.withCredentials = f);
        a.responseType && (e.responseType = a.responseType);
        try {
            e.send();
        } catch (A) {
            r(A);
        }
    };
    t.$ = {};
    t.$.ya = function(a, c) {
        var d, e, g;
        a = t.i.copy(a);
        for (d in c) c.hasOwnProperty(d) && (e = a[d], g = c[d], a[d] = t.i.jb(e) && t.i.jb(g) ? t.$.ya(e, g) : c[d]);
        return a;
    };
    t.z = m();
    s = t.z.prototype;
    s.bb = {};
    s.b = function(a, c) {
        var d = this.addEventListener;
        this.addEventListener = Function.prototype;
        t.b(this, a, c);
        this.addEventListener = d;
    };
    s.addEventListener = t.z.prototype.b;
    s.n = function(a, c) {
        t.n(this, a, c);
    };
    s.removeEventListener = t.z.prototype.n;
    s.N = function(a, c) {
        t.N(this, a, c);
    };
    s.o = function(a) {
        var c = a.type || a;
        "string" === typeof a && (a = {
            type: c
        });
        a = t.Pb(a);
        if (this.bb[c] && this["on" + c]) this["on" + c](a);
        t.o(this, a);
    };
    s.dispatchEvent = t.z.prototype.o;
    t.a = t.Ea.extend({
        l: function(a, c, d) {
            this.d = a;
            this.q = t.i.copy(this.q);
            c = this.options(c);
            this.Pa = c.id || c.el && c.el.id;
            this.Pa || (this.Pa = (a.id && a.id() || "no_player") + "_component_" + t.s++);
            this.te = c.name || j;
            this.c = c.el || this.e();
            this.R = [];
            this.fb = {};
            this.gb = {};
            this.Oc();
            this.I(d);
            if (c.dd !== l) {
                var e, g;
                this.k().reportUserActivity && (e = t.bind(this.k(), this.k().reportUserActivity), 
                this.b("touchstart", function() {
                    e();
                    this.clearInterval(g);
                    g = this.setInterval(e, 250);
                }), a = function() {
                    e();
                    this.clearInterval(g);
                }, this.b("touchmove", e), this.b("touchend", a), this.b("touchcancel", a));
            }
        }
    });
    s = t.a.prototype;
    s.dispose = function() {
        this.o({
            type: "dispose",
            bubbles: l
        });
        if (this.R) for (var a = this.R.length - 1; 0 <= a; a--) this.R[a].dispose && this.R[a].dispose();
        this.gb = this.fb = this.R = j;
        this.n();
        this.c.parentNode && this.c.parentNode.removeChild(this.c);
        t.cd(this.c);
        this.c = j;
    };
    s.d = f;
    s.k = n("d");
    s.options = function(a) {
        return a === b ? this.q : this.q = t.$.ya(this.q, a);
    };
    s.e = function(a, c) {
        return t.e(a, c);
    };
    s.v = function(a) {
        var c = this.d.language(), d = this.d.languages();
        return d && d[c] && d[c][a] ? d[c][a] : a;
    };
    s.m = n("c");
    s.va = function() {
        return this.B || this.c;
    };
    s.id = n("Pa");
    s.name = n("te");
    s.children = n("R");
    s.ae = function(a) {
        return this.fb[a];
    };
    s.ea = function(a) {
        return this.gb[a];
    };
    s.ba = function(a, c) {
        var d, e;
        "string" === typeof a ? (e = a, c = c || {}, d = c.componentClass || t.ua(e), c.name = e, 
        d = new window.videojs[d](this.d || this, c)) : d = a;
        this.R.push(d);
        "function" === typeof d.id && (this.fb[d.id()] = d);
        (e = e || d.name && d.name()) && (this.gb[e] = d);
        "function" === typeof d.el && d.el() && this.va().appendChild(d.el());
        return d;
    };
    s.removeChild = function(a) {
        "string" === typeof a && (a = this.ea(a));
        if (a && this.R) {
            for (var c = l, d = this.R.length - 1; 0 <= d; d--) if (this.R[d] === a) {
                c = f;
                this.R.splice(d, 1);
                break;
            }
            c && (this.fb[a.id()] = j, this.gb[a.name()] = j, (c = a.m()) && c.parentNode === this.va() && this.va().removeChild(a.m()));
        }
    };
    s.Oc = function() {
        var a, c, d, e, g, h;
        a = this;
        c = a.options();
        if (d = c.children) if (h = function(d, e) {
            c[d] !== b && (e = c[d]);
            e !== l && (a[d] = a.ba(d, e));
        }, t.i.isArray(d)) for (var k = 0; k < d.length; k++) e = d[k], "string" == typeof e ? (g = e, 
        e = {}) : g = e.name, h(g, e); else t.i.da(d, h);
    };
    s.V = q("");
    s.b = function(a, c, d) {
        var e, g, h;
        "string" === typeof a || t.i.isArray(a) ? t.b(this.c, a, t.bind(this, c)) : (e = t.bind(this, d), 
        h = this, g = function() {
            h.n(a, c, e);
        }, g.s = e.s, this.b("dispose", g), d = function() {
            h.n("dispose", g);
        }, d.s = e.s, a.nodeName ? (t.b(a, c, e), t.b(a, "dispose", d)) : "function" === typeof a.b && (a.b(c, e), 
        a.b("dispose", d)));
        return this;
    };
    s.n = function(a, c, d) {
        !a || "string" === typeof a || t.i.isArray(a) ? t.n(this.c, a, c) : (d = t.bind(this, d), 
        this.n("dispose", d), a.nodeName ? (t.n(a, c, d), t.n(a, "dispose", d)) : (a.n(c, d), 
        a.n("dispose", d)));
        return this;
    };
    s.N = function(a, c, d) {
        var e, g, h;
        "string" === typeof a || t.i.isArray(a) ? t.N(this.c, a, t.bind(this, c)) : (e = t.bind(this, d), 
        g = this, h = function() {
            g.n(a, c, h);
            e.apply(this, arguments);
        }, h.s = e.s, this.b(a, c, h));
        return this;
    };
    s.o = function(a) {
        t.o(this.c, a);
        return this;
    };
    s.I = function(a) {
        a && (this.wa ? a.call(this) : (this.nb === b && (this.nb = []), this.nb.push(a)));
        return this;
    };
    s.Wa = function() {
        this.wa = f;
        var a = this.nb;
        if (a && 0 < a.length) {
            for (var c = 0, d = a.length; c < d; c++) a[c].call(this);
            this.nb = [];
            this.o("ready");
        }
    };
    s.Oa = function(a) {
        return t.Oa(this.c, a);
    };
    s.p = function(a) {
        t.p(this.c, a);
        return this;
    };
    s.r = function(a) {
        t.r(this.c, a);
        return this;
    };
    s.show = function() {
        this.r("vjs-hidden");
        return this;
    };
    s.Y = function() {
        this.p("vjs-hidden");
        return this;
    };
    function G(a) {
        a.r("vjs-lock-showing");
    }
    s.width = function(a, c) {
        return ca(this, "width", a, c);
    };
    s.height = function(a, c) {
        return ca(this, "height", a, c);
    };
    s.Td = function(a, c) {
        return this.width(a, f).height(c);
    };
    function ca(a, c, d, e) {
        if (d !== b) {
            if (d === j || t.ke(d)) d = 0;
            a.c.style[c] = -1 !== ("" + d).indexOf("%") || -1 !== ("" + d).indexOf("px") ? d : "auto" === d ? "" : d + "px";
            e || a.o("resize");
            return a;
        }
        if (!a.c) return 0;
        d = a.c.style[c];
        e = d.indexOf("px");
        return -1 !== e ? parseInt(d.slice(0, e), 10) : parseInt(a.c["offset" + t.ua(c)], 10);
    }
    function da(a) {
        var c, d, e, g, h, k, p, r;
        c = 0;
        d = j;
        a.b("touchstart", function(a) {
            1 === a.touches.length && (d = t.i.copy(a.touches[0]), c = new Date().getTime(), 
            g = f);
        });
        a.b("touchmove", function(a) {
            1 < a.touches.length ? g = l : d && (k = a.touches[0].pageX - d.pageX, p = a.touches[0].pageY - d.pageY, 
            r = Math.sqrt(k * k + p * p), 10 < r && (g = l));
        });
        h = function() {
            g = l;
        };
        a.b("touchleave", h);
        a.b("touchcancel", h);
        a.b("touchend", function(a) {
            d = j;
            g === f && (e = new Date().getTime() - c, 200 > e && (a.preventDefault(), this.o("tap")));
        });
    }
    s.setTimeout = function(a, c) {
        function d() {
            this.clearTimeout(e);
        }
        a = t.bind(this, a);
        var e = setTimeout(a, c);
        d.s = "vjs-timeout-" + e;
        this.b("dispose", d);
        return e;
    };
    s.clearTimeout = function(a) {
        function c() {}
        clearTimeout(a);
        c.s = "vjs-timeout-" + a;
        this.n("dispose", c);
        return a;
    };
    s.setInterval = function(a, c) {
        function d() {
            this.clearInterval(e);
        }
        a = t.bind(this, a);
        var e = setInterval(a, c);
        d.s = "vjs-interval-" + e;
        this.b("dispose", d);
        return e;
    };
    s.clearInterval = function(a) {
        function c() {}
        clearInterval(a);
        c.s = "vjs-interval-" + a;
        this.n("dispose", c);
        return a;
    };
    t.w = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            da(this);
            this.b("tap", this.u);
            this.b("click", this.u);
            this.b("focus", this.lb);
            this.b("blur", this.kb);
        }
    });
    s = t.w.prototype;
    s.e = function(a, c) {
        var d;
        c = t.i.D({
            className: this.V(),
            role: "button",
            "aria-live": "polite",
            tabIndex: 0
        }, c);
        d = t.a.prototype.e.call(this, a, c);
        c.innerHTML || (this.B = t.e("div", {
            className: "vjs-control-content"
        }), this.Jb = t.e("span", {
            className: "vjs-control-text",
            innerHTML: this.v(this.sa) || "Need Text"
        }), this.B.appendChild(this.Jb), d.appendChild(this.B));
        return d;
    };
    s.V = function() {
        return "vjs-control " + t.a.prototype.V.call(this);
    };
    s.u = m();
    s.lb = function() {
        t.b(document, "keydown", t.bind(this, this.ka));
    };
    s.ka = function(a) {
        if (32 == a.which || 13 == a.which) a.preventDefault(), this.u();
    };
    s.kb = function() {
        t.n(document, "keydown", t.bind(this, this.ka));
    };
    t.U = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.Kd = this.ea(this.q.barName);
            this.handle = this.ea(this.q.handleName);
            this.b("mousedown", this.mb);
            this.b("touchstart", this.mb);
            this.b("focus", this.lb);
            this.b("blur", this.kb);
            this.b("click", this.u);
            this.b(a, "controlsvisible", this.update);
            this.b(a, this.Yc, this.update);
        }
    });
    s = t.U.prototype;
    s.e = function(a, c) {
        c = c || {};
        c.className += " vjs-slider";
        c = t.i.D({
            role: "slider",
            "aria-valuenow": 0,
            "aria-valuemin": 0,
            "aria-valuemax": 100,
            tabIndex: 0
        }, c);
        return t.a.prototype.e.call(this, a, c);
    };
    s.mb = function(a) {
        a.preventDefault();
        t.Ld();
        this.p("vjs-sliding");
        this.b(document, "mousemove", this.la);
        this.b(document, "mouseup", this.za);
        this.b(document, "touchmove", this.la);
        this.b(document, "touchend", this.za);
        this.la(a);
    };
    s.la = m();
    s.za = function() {
        t.af();
        this.r("vjs-sliding");
        this.n(document, "mousemove", this.la);
        this.n(document, "mouseup", this.za);
        this.n(document, "touchmove", this.la);
        this.n(document, "touchend", this.za);
        this.update();
    };
    s.update = function() {
        if (this.c) {
            var a, c = this.Sb(), d = this.handle, e = this.Kd;
            if ("number" !== typeof c || c !== c || 0 > c || Infinity === c) c = 0;
            a = c;
            if (d) {
                a = this.c.offsetWidth;
                var g = d.m().offsetWidth;
                a = g ? g / a : 0;
                c *= 1 - a;
                a = c + a / 2;
                d.m().style.left = t.round(100 * c, 2) + "%";
            }
            e && (e.m().style.width = t.round(100 * a, 2) + "%");
        }
    };
    function ea(a, c) {
        var d, e, g, h;
        d = a.c;
        e = t.Yd(d);
        h = g = d.offsetWidth;
        d = a.handle;
        if (a.options().vertical) return h = e.top, e = c.changedTouches ? c.changedTouches[0].pageY : c.pageY, 
        d && (d = d.m().offsetHeight, h += d / 2, g -= d), Math.max(0, Math.min(1, (h - e + g) / g));
        g = e.left;
        e = c.changedTouches ? c.changedTouches[0].pageX : c.pageX;
        d && (d = d.m().offsetWidth, g += d / 2, h -= d);
        return Math.max(0, Math.min(1, (e - g) / h));
    }
    s.lb = function() {
        this.b(document, "keydown", this.ka);
    };
    s.ka = function(a) {
        if (37 == a.which || 40 == a.which) a.preventDefault(), this.jd(); else if (38 == a.which || 39 == a.which) a.preventDefault(), 
        this.kd();
    };
    s.kb = function() {
        this.n(document, "keydown", this.ka);
    };
    s.u = function(a) {
        a.stopImmediatePropagation();
        a.preventDefault();
    };
    t.ha = t.a.extend();
    t.ha.prototype.defaultValue = 0;
    t.ha.prototype.e = function(a, c) {
        c = c || {};
        c.className += " vjs-slider-handle";
        c = t.i.D({
            innerHTML: '<span class="vjs-control-text">' + this.defaultValue + "</span>"
        }, c);
        return t.a.prototype.e.call(this, "div", c);
    };
    t.pa = t.a.extend();
    function fa(a, c) {
        a.ba(c);
        c.b("click", t.bind(a, function() {
            G(this);
        }));
    }
    t.pa.prototype.e = function() {
        var a = this.options().Cc || "ul";
        this.B = t.e(a, {
            className: "vjs-menu-content"
        });
        a = t.a.prototype.e.call(this, "div", {
            append: this.B,
            className: "vjs-menu"
        });
        a.appendChild(this.B);
        t.b(a, "click", function(a) {
            a.preventDefault();
            a.stopImmediatePropagation();
        });
        return a;
    };
    t.M = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
            this.selected(c.selected);
        }
    });
    t.M.prototype.e = function(a, c) {
        return t.w.prototype.e.call(this, "li", t.i.D({
            className: "vjs-menu-item",
            innerHTML: this.v(this.q.label)
        }, c));
    };
    t.M.prototype.u = function() {
        this.selected(f);
    };
    t.M.prototype.selected = function(a) {
        a ? (this.p("vjs-selected"), this.c.setAttribute("aria-selected", f)) : (this.r("vjs-selected"), 
        this.c.setAttribute("aria-selected", l));
    };
    t.O = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
            this.update();
            this.b("keydown", this.ka);
            this.c.setAttribute("aria-haspopup", f);
            this.c.setAttribute("role", "button");
        }
    });
    s = t.O.prototype;
    s.update = function() {
        var a = this.Ja();
        this.xa && this.removeChild(this.xa);
        this.xa = a;
        this.ba(a);
        this.H && 0 === this.H.length ? this.Y() : this.H && 1 < this.H.length && this.show();
    };
    s.Ha = l;
    s.Ja = function() {
        var a = new t.pa(this.d);
        this.options().title && a.va().appendChild(t.e("li", {
            className: "vjs-menu-title",
            innerHTML: t.ua(this.options().title),
            We: -1
        }));
        if (this.H = this.createItems()) for (var c = 0; c < this.H.length; c++) fa(a, this.H[c]);
        return a;
    };
    s.Ia = m();
    s.V = function() {
        return this.className + " vjs-menu-button " + t.w.prototype.V.call(this);
    };
    s.lb = m();
    s.kb = m();
    s.u = function() {
        this.N("mouseout", t.bind(this, function() {
            G(this.xa);
            this.c.blur();
        }));
        this.Ha ? H(this) : ga(this);
    };
    s.ka = function(a) {
        32 == a.which || 13 == a.which ? (this.Ha ? H(this) : ga(this), a.preventDefault()) : 27 == a.which && (this.Ha && H(this), 
        a.preventDefault());
    };
    function ga(a) {
        a.Ha = f;
        a.xa.p("vjs-lock-showing");
        a.c.setAttribute("aria-pressed", f);
        a.H && 0 < a.H.length && a.H[0].m().focus();
    }
    function H(a) {
        a.Ha = l;
        G(a.xa);
        a.c.setAttribute("aria-pressed", l);
    }
    t.J = function(a) {
        "number" === typeof a ? this.code = a : "string" === typeof a ? this.message = a : "object" === typeof a && t.i.D(this, a);
        this.message || (this.message = t.J.Sd[this.code] || "");
    };
    t.J.prototype.code = 0;
    t.J.prototype.message = "";
    t.J.prototype.status = j;
    t.J.hb = "MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
    t.J.Sd = {
        1: "You aborted the video playback",
        2: "A network error caused the video download to fail part-way.",
        3: "The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",
        4: "The video could not be loaded, either because the server or network failed or because the format is not supported.",
        5: "The video is encrypted and we do not have the keys to decrypt it."
    };
    for (var I = 0; I < t.J.hb.length; I++) t.J[t.J.hb[I]] = I, t.J.prototype[t.J.hb[I]] = I;
    var J, ha, K, L;
    J = [ "requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "), "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "), "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ") ];
    ha = J[0];
    for (L = 0; L < J.length; L++) if (J[L][1] in document) {
        K = J[L];
        break;
    }
    if (K) {
        t.cb.Rb = {};
        for (L = 0; L < K.length; L++) t.cb.Rb[ha[L]] = K[L];
    }
    t.Player = t.a.extend({
        l: function(a, c, d) {
            this.L = a;
            a.id = a.id || "vjs_video_" + t.s++;
            this.Xe = a && t.Na(a);
            c = t.i.D(ia(a), c);
            this.Tc = c.language || t.options.language;
            this.ne = c.languages || t.options.languages;
            this.K = {};
            this.Zc = c.poster || "";
            this.Kb = !!c.controls;
            a.controls = l;
            c.dd = l;
            ja(this, "audio" === this.L.nodeName.toLowerCase());
            t.a.call(this, this, c, d);
            this.controls() ? this.p("vjs-controls-enabled") : this.p("vjs-controls-disabled");
            ja(this) && this.p("vjs-audio");
            t.Aa[this.Pa] = this;
            c.plugins && t.i.da(c.plugins, function(a, c) {
                this[a](c);
            }, this);
            var e, g, h, k, p;
            e = t.bind(this, this.reportUserActivity);
            this.b("mousedown", function() {
                e();
                this.clearInterval(g);
                g = this.setInterval(e, 250);
            });
            this.b("mousemove", function(a) {
                if (a.screenX != k || a.screenY != p) k = a.screenX, p = a.screenY, e();
            });
            this.b("mouseup", function() {
                e();
                this.clearInterval(g);
            });
            this.b("keydown", e);
            this.b("keyup", e);
            this.setInterval(function() {
                if (this.Da) {
                    this.Da = l;
                    this.userActive(f);
                    this.clearTimeout(h);
                    var a = this.options().inactivityTimeout;
                    0 < a && (h = this.setTimeout(function() {
                        this.Da || this.userActive(l);
                    }, a));
                }
            }, 250);
        }
    });
    s = t.Player.prototype;
    s.language = function(a) {
        if (a === b) return this.Tc;
        this.Tc = a;
        return this;
    };
    s.languages = n("ne");
    s.q = t.options;
    s.dispose = function() {
        this.o("dispose");
        this.n("dispose");
        t.Aa[this.Pa] = j;
        this.L && this.L.player && (this.L.player = j);
        this.c && this.c.player && (this.c.player = j);
        this.h && this.h.dispose();
        t.a.prototype.dispose.call(this);
    };
    function ia(a) {
        var c, d, e = {
            sources: [],
            tracks: []
        };
        c = t.Na(a);
        d = c["data-setup"];
        d !== j && t.i.D(c, t.JSON.parse(d || "{}"));
        t.i.D(e, c);
        if (a.hasChildNodes()) {
            var g, h;
            a = a.childNodes;
            g = 0;
            for (h = a.length; g < h; g++) c = a[g], d = c.nodeName.toLowerCase(), "source" === d ? e.sources.push(t.Na(c)) : "track" === d && e.tracks.push(t.Na(c));
        }
        return e;
    }
    s.e = function() {
        var a = this.c = t.a.prototype.e.call(this, "div"), c = this.L, d;
        c.removeAttribute("width");
        c.removeAttribute("height");
        d = t.Na(c);
        t.i.da(d, function(c) {
            "class" == c ? a.className = d[c] : a.setAttribute(c, d[c]);
        });
        c.id += "_html5_api";
        c.className = "vjs-tech";
        c.player = a.player = this;
        this.p("vjs-paused");
        this.width(this.q.width, f);
        this.height(this.q.height, f);
        c.ge = c.networkState;
        c.parentNode && c.parentNode.insertBefore(a, c);
        t.Ub(c, a);
        this.c = a;
        this.b("loadstart", this.xe);
        this.b("waiting", this.De);
        this.b([ "canplay", "canplaythrough", "playing", "ended" ], this.Ce);
        this.b("seeking", this.Ae);
        this.b("seeked", this.ze);
        this.b("ended", this.ue);
        this.b("play", this.$b);
        this.b("firstplay", this.ve);
        this.b("pause", this.Zb);
        this.b("progress", this.ye);
        this.b("durationchange", this.Wc);
        this.b("fullscreenchange", this.we);
        return a;
    };
    function ka(a, c, d) {
        a.h && (a.wa = l, a.h.dispose(), a.h = l);
        "Html5" !== c && a.L && (t.f.Mb(a.L), a.L = j);
        a.Ua = c;
        a.wa = l;
        var e = t.i.D({
            source: d,
            parentEl: a.c
        }, a.q[c.toLowerCase()]);
        d && (a.Gc = d.type, d.src == a.K.src && 0 < a.K.currentTime && (e.startTime = a.K.currentTime), 
        a.K.src = d.src);
        a.h = new window.videojs[c](a, e);
        a.h.I(function() {
            this.d.Wa();
        });
    }
    s.xe = function() {
        this.r("vjs-ended");
        this.error(j);
        this.paused() ? la(this, l) : this.o("firstplay");
    };
    s.Nc = l;
    function la(a, c) {
        c !== b && a.Nc !== c && ((a.Nc = c) ? (a.p("vjs-has-started"), a.o("firstplay")) : a.r("vjs-has-started"));
    }
    s.$b = function() {
        this.r("vjs-ended");
        this.r("vjs-paused");
        this.p("vjs-playing");
        la(this, f);
    };
    s.De = function() {
        this.p("vjs-waiting");
    };
    s.Ce = function() {
        this.r("vjs-waiting");
    };
    s.Ae = function() {
        this.p("vjs-seeking");
    };
    s.ze = function() {
        this.r("vjs-seeking");
    };
    s.ve = function() {
        this.q.starttime && this.currentTime(this.q.starttime);
        this.p("vjs-has-started");
    };
    s.Zb = function() {
        this.r("vjs-playing");
        this.p("vjs-paused");
    };
    s.ye = function() {
        1 == this.bufferedPercent() && this.o("loadedalldata");
    };
    s.ue = function() {
        this.p("vjs-ended");
        this.q.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause();
    };
    s.Wc = function() {
        var a = M(this, "duration");
        a && (0 > a && (a = Infinity), this.duration(a), Infinity === a ? this.p("vjs-live") : this.r("vjs-live"));
    };
    s.we = function() {
        this.isFullscreen() ? this.p("vjs-fullscreen") : this.r("vjs-fullscreen");
    };
    function N(a, c, d) {
        if (a.h && !a.h.wa) a.h.I(function() {
            this[c](d);
        }); else try {
            a.h[c](d);
        } catch (e) {
            throw t.log(e), e;
        }
    }
    function M(a, c) {
        if (a.h && a.h.wa) try {
            return a.h[c]();
        } catch (d) {
            throw a.h[c] === b ? t.log("Video.js: " + c + " method not defined for " + a.Ua + " playback technology.", d) : "TypeError" == d.name ? (t.log("Video.js: " + c + " unavailable on " + a.Ua + " playback technology element.", d), 
            a.h.wa = l) : t.log(d), d;
        }
    }
    s.play = function() {
        N(this, "play");
        return this;
    };
    s.pause = function() {
        N(this, "pause");
        return this;
    };
    s.paused = function() {
        return M(this, "paused") === l ? l : f;
    };
    s.currentTime = function(a) {
        return a !== b ? (N(this, "setCurrentTime", a), this) : this.K.currentTime = M(this, "currentTime") || 0;
    };
    s.duration = function(a) {
        if (a !== b) return this.K.duration = parseFloat(a), this;
        this.K.duration === b && this.Wc();
        return this.K.duration || 0;
    };
    s.remainingTime = function() {
        return this.duration() - this.currentTime();
    };
    s.buffered = function() {
        var a = M(this, "buffered");
        if (!a || !a.length) a = t.Lb(0, 0);
        return a;
    };
    s.bufferedPercent = function() {
        var a = this.duration(), c = this.buffered(), d = 0, e, g;
        if (!a) return 0;
        for (var h = 0; h < c.length; h++) e = c.start(h), g = c.end(h), g > a && (g = a), 
        d += g - e;
        return d / a;
    };
    s.volume = function(a) {
        if (a !== b) return a = Math.max(0, Math.min(1, parseFloat(a))), this.K.volume = a, 
        N(this, "setVolume", a), t.Me(a), this;
        a = parseFloat(M(this, "volume"));
        return isNaN(a) ? 1 : a;
    };
    s.muted = function(a) {
        return a !== b ? (N(this, "setMuted", a), this) : M(this, "muted") || l;
    };
    s.Ta = function() {
        return M(this, "supportsFullScreen") || l;
    };
    s.Qc = l;
    s.isFullscreen = function(a) {
        return a !== b ? (this.Qc = !!a, this) : this.Qc;
    };
    s.isFullScreen = function(a) {
        t.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
        return this.isFullscreen(a);
    };
    s.requestFullscreen = function() {
        var a = t.cb.Rb;
        this.isFullscreen(f);
        a ? (t.b(document, a.fullscreenchange, t.bind(this, function(c) {
            this.isFullscreen(document[a.fullscreenElement]);
            this.isFullscreen() === l && t.n(document, a.fullscreenchange, arguments.callee);
            this.o("fullscreenchange");
        })), this.c[a.requestFullscreen]()) : this.h.Ta() ? N(this, "enterFullScreen") : (this.Jc(), 
        this.o("fullscreenchange"));
        return this;
    };
    s.requestFullScreen = function() {
        t.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');
        return this.requestFullscreen();
    };
    s.exitFullscreen = function() {
        var a = t.cb.Rb;
        this.isFullscreen(l);
        if (a) document[a.exitFullscreen](); else this.h.Ta() ? N(this, "exitFullScreen") : (this.Nb(), 
        this.o("fullscreenchange"));
        return this;
    };
    s.cancelFullScreen = function() {
        t.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()");
        return this.exitFullscreen();
    };
    s.Jc = function() {
        this.je = f;
        this.Ud = document.documentElement.style.overflow;
        t.b(document, "keydown", t.bind(this, this.Kc));
        document.documentElement.style.overflow = "hidden";
        t.p(document.body, "vjs-full-window");
        this.o("enterFullWindow");
    };
    s.Kc = function(a) {
        27 === a.keyCode && (this.isFullscreen() === f ? this.exitFullscreen() : this.Nb());
    };
    s.Nb = function() {
        this.je = l;
        t.n(document, "keydown", this.Kc);
        document.documentElement.style.overflow = this.Ud;
        t.r(document.body, "vjs-full-window");
        this.o("exitFullWindow");
    };
    s.selectSource = function(a) {
        for (var c = 0, d = this.q.techOrder; c < d.length; c++) {
            var e = t.ua(d[c]), g = window.videojs[e];
            if (g) {
                if (g.isSupported()) for (var h = 0, k = a; h < k.length; h++) {
                    var p = k[h];
                    if (g.canPlaySource(p)) return {
                        source: p,
                        h: e
                    };
                }
            } else t.log.error('The "' + e + '" tech is undefined. Skipped browser support check for that tech.');
        }
        return l;
    };
    s.src = function(a) {
        if (a === b) return M(this, "src");
        t.i.isArray(a) ? ma(this, a) : "string" === typeof a ? this.src({
            src: a
        }) : a instanceof Object && (a.type && !window.videojs[this.Ua].canPlaySource(a) ? ma(this, [ a ]) : (this.K.src = a.src, 
        this.Gc = a.type || "", this.I(function() {
            window.videojs[this.Ua].prototype.hasOwnProperty("setSource") ? N(this, "setSource", a) : N(this, "src", a.src);
            "auto" == this.q.preload && this.load();
            this.q.autoplay && this.play();
        })));
        return this;
    };
    function ma(a, c) {
        var d = a.selectSource(c);
        d ? d.h === a.Ua ? a.src(d.source) : ka(a, d.h, d.source) : (a.setTimeout(function() {
            this.error({
                code: 4,
                message: this.v(this.options().notSupportedMessage)
            });
        }, 0), a.Wa());
    }
    s.load = function() {
        N(this, "load");
        return this;
    };
    s.currentSrc = function() {
        return M(this, "currentSrc") || this.K.src || "";
    };
    s.Qd = function() {
        return this.Gc || "";
    };
    s.Qa = function(a) {
        return a !== b ? (N(this, "setPreload", a), this.q.preload = a, this) : M(this, "preload");
    };
    s.autoplay = function(a) {
        return a !== b ? (N(this, "setAutoplay", a), this.q.autoplay = a, this) : M(this, "autoplay");
    };
    s.loop = function(a) {
        return a !== b ? (N(this, "setLoop", a), this.q.loop = a, this) : M(this, "loop");
    };
    s.poster = function(a) {
        if (a === b) return this.Zc;
        a || (a = "");
        this.Zc = a;
        N(this, "setPoster", a);
        this.o("posterchange");
        return this;
    };
    s.controls = function(a) {
        return a !== b ? (a = !!a, this.Kb !== a && ((this.Kb = a) ? (this.r("vjs-controls-disabled"), 
        this.p("vjs-controls-enabled"), this.o("controlsenabled")) : (this.r("vjs-controls-enabled"), 
        this.p("vjs-controls-disabled"), this.o("controlsdisabled"))), this) : this.Kb;
    };
    t.Player.prototype.ec;
    s = t.Player.prototype;
    s.usingNativeControls = function(a) {
        return a !== b ? (a = !!a, this.ec !== a && ((this.ec = a) ? (this.p("vjs-using-native-controls"), 
        this.o("usingnativecontrols")) : (this.r("vjs-using-native-controls"), this.o("usingcustomcontrols"))), 
        this) : this.ec;
    };
    s.ja = j;
    s.error = function(a) {
        if (a === b) return this.ja;
        if (a === j) return this.ja = a, this.r("vjs-error"), this;
        this.ja = a instanceof t.J ? a : new t.J(a);
        this.o("error");
        this.p("vjs-error");
        t.log.error("(CODE:" + this.ja.code + " " + t.J.hb[this.ja.code] + ")", this.ja.message, this.ja);
        return this;
    };
    s.ended = function() {
        return M(this, "ended");
    };
    s.seeking = function() {
        return M(this, "seeking");
    };
    s.Da = f;
    s.reportUserActivity = function() {
        this.Da = f;
    };
    s.dc = f;
    s.userActive = function(a) {
        return a !== b ? (a = !!a, a !== this.dc && ((this.dc = a) ? (this.Da = f, this.r("vjs-user-inactive"), 
        this.p("vjs-user-active"), this.o("useractive")) : (this.Da = l, this.h && this.h.N("mousemove", function(a) {
            a.stopPropagation();
            a.preventDefault();
        }), this.r("vjs-user-active"), this.p("vjs-user-inactive"), this.o("userinactive"))), 
        this) : this.dc;
    };
    s.playbackRate = function(a) {
        return a !== b ? (N(this, "setPlaybackRate", a), this) : this.h && this.h.featuresPlaybackRate ? M(this, "playbackRate") : 1;
    };
    s.Pc = l;
    function ja(a, c) {
        return c !== b ? (a.Pc = !!c, a) : a.Pc;
    }
    s.networkState = function() {
        return M(this, "networkState");
    };
    s.readyState = function() {
        return M(this, "readyState");
    };
    s.textTracks = function() {
        return this.h && this.h.textTracks();
    };
    s.Z = function() {
        return this.h && this.h.remoteTextTracks();
    };
    s.addTextTrack = function(a, c, d) {
        return this.h && this.h.addTextTrack(a, c, d);
    };
    s.ia = function(a) {
        return this.h && this.h.addRemoteTextTrack(a);
    };
    s.Ba = function(a) {
        this.h && this.h.removeRemoteTextTrack(a);
    };
    t.ub = t.a.extend();
    t.ub.prototype.q = {
        wf: "play",
        children: {
            playToggle: {},
            currentTimeDisplay: {},
            timeDivider: {},
            durationDisplay: {},
            remainingTimeDisplay: {},
            liveDisplay: {},
            progressControl: {},
            fullscreenToggle: {},
            volumeControl: {},
            muteToggle: {},
            playbackRateMenuButton: {},
            subtitlesButton: {},
            captionsButton: {},
            chaptersButton: {}
        }
    };
    t.ub.prototype.e = function() {
        return t.e("div", {
            className: "vjs-control-bar"
        });
    };
    t.kc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.kc.prototype.e = function() {
        var a = t.a.prototype.e.call(this, "div", {
            className: "vjs-live-controls vjs-control"
        });
        this.B = t.e("div", {
            className: "vjs-live-display",
            innerHTML: '<span class="vjs-control-text">' + this.v("Stream Type") + "</span>" + this.v("LIVE"),
            "aria-live": "off"
        });
        a.appendChild(this.B);
        return a;
    };
    t.nc = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
            this.b(a, "play", this.$b);
            this.b(a, "pause", this.Zb);
        }
    });
    s = t.nc.prototype;
    s.sa = "Play";
    s.V = function() {
        return "vjs-play-control " + t.w.prototype.V.call(this);
    };
    s.u = function() {
        this.d.paused() ? this.d.play() : this.d.pause();
    };
    s.$b = function() {
        this.r("vjs-paused");
        this.p("vjs-playing");
        this.c.children[0].children[0].innerHTML = this.v("Pause");
    };
    s.Zb = function() {
        this.r("vjs-playing");
        this.p("vjs-paused");
        this.c.children[0].children[0].innerHTML = this.v("Play");
    };
    t.vb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.b(a, "timeupdate", this.ga);
        }
    });
    t.vb.prototype.e = function() {
        var a = t.a.prototype.e.call(this, "div", {
            className: "vjs-current-time vjs-time-controls vjs-control"
        });
        this.B = t.e("div", {
            className: "vjs-current-time-display",
            innerHTML: '<span class="vjs-control-text">Current Time </span>0:00',
            "aria-live": "off"
        });
        a.appendChild(this.B);
        return a;
    };
    t.vb.prototype.ga = function() {
        var a = this.d.ob ? this.d.K.currentTime : this.d.currentTime();
        this.B.innerHTML = '<span class="vjs-control-text">' + this.v("Current Time") + "</span> " + t.Ma(a, this.d.duration());
    };
    t.wb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.b(a, "timeupdate", this.ga);
            this.b(a, "loadedmetadata", this.ga);
        }
    });
    t.wb.prototype.e = function() {
        var a = t.a.prototype.e.call(this, "div", {
            className: "vjs-duration vjs-time-controls vjs-control"
        });
        this.B = t.e("div", {
            className: "vjs-duration-display",
            innerHTML: '<span class="vjs-control-text">' + this.v("Duration Time") + "</span> 0:00",
            "aria-live": "off"
        });
        a.appendChild(this.B);
        return a;
    };
    t.wb.prototype.ga = function() {
        var a = this.d.duration();
        a && (this.B.innerHTML = '<span class="vjs-control-text">' + this.v("Duration Time") + "</span> " + t.Ma(a));
    };
    t.tc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.tc.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-time-divider",
            innerHTML: "<div><span>/</span></div>"
        });
    };
    t.Db = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.b(a, "timeupdate", this.ga);
        }
    });
    t.Db.prototype.e = function() {
        var a = t.a.prototype.e.call(this, "div", {
            className: "vjs-remaining-time vjs-time-controls vjs-control"
        });
        this.B = t.e("div", {
            className: "vjs-remaining-time-display",
            innerHTML: '<span class="vjs-control-text">' + this.v("Remaining Time") + "</span> -0:00",
            "aria-live": "off"
        });
        a.appendChild(this.B);
        return a;
    };
    t.Db.prototype.ga = function() {
        this.d.duration() && (this.B.innerHTML = '<span class="vjs-control-text">' + this.v("Remaining Time") + "</span> -" + t.Ma(this.d.remainingTime()));
    };
    t.Za = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
        }
    });
    t.Za.prototype.sa = "Fullscreen";
    t.Za.prototype.V = function() {
        return "vjs-fullscreen-control " + t.w.prototype.V.call(this);
    };
    t.Za.prototype.u = function() {
        this.d.isFullscreen() ? (this.d.exitFullscreen(), this.Jb.innerHTML = this.v("Fullscreen")) : (this.d.requestFullscreen(), 
        this.Jb.innerHTML = this.v("Non-Fullscreen"));
    };
    t.Cb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.Cb.prototype.q = {
        children: {
            seekBar: {}
        }
    };
    t.Cb.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-progress-control vjs-control"
        });
    };
    t.qc = t.U.extend({
        l: function(a, c) {
            t.U.call(this, a, c);
            this.b(a, "timeupdate", this.Ca);
            a.I(t.bind(this, this.Ca));
        }
    });
    s = t.qc.prototype;
    s.q = {
        children: {
            loadProgressBar: {},
            playProgressBar: {},
            seekHandle: {}
        },
        barName: "playProgressBar",
        handleName: "seekHandle"
    };
    s.Yc = "timeupdate";
    s.e = function() {
        return t.U.prototype.e.call(this, "div", {
            className: "vjs-progress-holder",
            "aria-label": "video progress bar"
        });
    };
    s.Ca = function() {
        var a = this.d.ob ? this.d.K.currentTime : this.d.currentTime();
        this.c.setAttribute("aria-valuenow", t.round(100 * this.Sb(), 2));
        this.c.setAttribute("aria-valuetext", t.Ma(a, this.d.duration()));
    };
    s.Sb = function() {
        return this.d.currentTime() / this.d.duration();
    };
    s.mb = function(a) {
        t.U.prototype.mb.call(this, a);
        this.d.ob = f;
        this.d.p("vjs-scrubbing");
        this.df = !this.d.paused();
        this.d.pause();
    };
    s.la = function(a) {
        a = ea(this, a) * this.d.duration();
        a == this.d.duration() && (a -= .1);
        this.d.currentTime(a);
    };
    s.za = function(a) {
        t.U.prototype.za.call(this, a);
        this.d.ob = l;
        this.d.r("vjs-scrubbing");
        this.df && this.d.play();
    };
    s.kd = function() {
        this.d.currentTime(this.d.currentTime() + 5);
    };
    s.jd = function() {
        this.d.currentTime(this.d.currentTime() - 5);
    };
    t.zb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.b(a, "progress", this.update);
        }
    });
    t.zb.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-load-progress",
            innerHTML: '<span class="vjs-control-text"><span>' + this.v("Loaded") + "</span>: 0%</span>"
        });
    };
    t.zb.prototype.update = function() {
        var a, c, d, e, g = this.d.buffered();
        a = this.d.duration();
        var h, k = this.d;
        h = k.buffered();
        k = k.duration();
        h = h.end(h.length - 1);
        h > k && (h = k);
        k = this.c.children;
        this.c.style.width = 100 * (h / a || 0) + "%";
        for (a = 0; a < g.length; a++) c = g.start(a), d = g.end(a), (e = k[a]) || (e = this.c.appendChild(t.e())), 
        e.style.left = 100 * (c / h || 0) + "%", e.style.width = 100 * ((d - c) / h || 0) + "%";
        for (a = k.length; a > g.length; a--) this.c.removeChild(k[a - 1]);
    };
    t.mc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.mc.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-play-progress",
            innerHTML: '<span class="vjs-control-text"><span>' + this.v("Progress") + "</span>: 0%</span>"
        });
    };
    t.$a = t.ha.extend({
        l: function(a, c) {
            t.ha.call(this, a, c);
            this.b(a, "timeupdate", this.ga);
        }
    });
    t.$a.prototype.defaultValue = "00:00";
    t.$a.prototype.e = function() {
        return t.ha.prototype.e.call(this, "div", {
            className: "vjs-seek-handle",
            "aria-live": "off"
        });
    };
    t.$a.prototype.ga = function() {
        var a = this.d.ob ? this.d.K.currentTime : this.d.currentTime();
        this.c.innerHTML = '<span class="vjs-control-text">' + t.Ma(a, this.d.duration()) + "</span>";
    };
    t.Gb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            a.h && a.h.featuresVolumeControl === l && this.p("vjs-hidden");
            this.b(a, "loadstart", function() {
                a.h.featuresVolumeControl === l ? this.p("vjs-hidden") : this.r("vjs-hidden");
            });
        }
    });
    t.Gb.prototype.q = {
        children: {
            volumeBar: {}
        }
    };
    t.Gb.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-volume-control vjs-control"
        });
    };
    t.Fb = t.U.extend({
        l: function(a, c) {
            t.U.call(this, a, c);
            this.b(a, "volumechange", this.Ca);
            a.I(t.bind(this, this.Ca));
        }
    });
    s = t.Fb.prototype;
    s.Ca = function() {
        this.c.setAttribute("aria-valuenow", t.round(100 * this.d.volume(), 2));
        this.c.setAttribute("aria-valuetext", t.round(100 * this.d.volume(), 2) + "%");
    };
    s.q = {
        children: {
            volumeLevel: {},
            volumeHandle: {}
        },
        barName: "volumeLevel",
        handleName: "volumeHandle"
    };
    s.Yc = "volumechange";
    s.e = function() {
        return t.U.prototype.e.call(this, "div", {
            className: "vjs-volume-bar",
            "aria-label": "volume level"
        });
    };
    s.la = function(a) {
        this.d.muted() && this.d.muted(l);
        this.d.volume(ea(this, a));
    };
    s.Sb = function() {
        return this.d.muted() ? 0 : this.d.volume();
    };
    s.kd = function() {
        this.d.volume(this.d.volume() + .1);
    };
    s.jd = function() {
        this.d.volume(this.d.volume() - .1);
    };
    t.uc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.uc.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-volume-level",
            innerHTML: '<span class="vjs-control-text"></span>'
        });
    };
    t.Hb = t.ha.extend();
    t.Hb.prototype.defaultValue = "00:00";
    t.Hb.prototype.e = function() {
        return t.ha.prototype.e.call(this, "div", {
            className: "vjs-volume-handle"
        });
    };
    t.qa = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
            this.b(a, "volumechange", this.update);
            a.h && a.h.featuresVolumeControl === l && this.p("vjs-hidden");
            this.b(a, "loadstart", function() {
                a.h.featuresVolumeControl === l ? this.p("vjs-hidden") : this.r("vjs-hidden");
            });
        }
    });
    t.qa.prototype.e = function() {
        return t.w.prototype.e.call(this, "div", {
            className: "vjs-mute-control vjs-control",
            innerHTML: '<div><span class="vjs-control-text">' + this.v("Mute") + "</span></div>"
        });
    };
    t.qa.prototype.u = function() {
        this.d.muted(this.d.muted() ? l : f);
    };
    t.qa.prototype.update = function() {
        var a = this.d.volume(), c = 3;
        0 === a || this.d.muted() ? c = 0 : .33 > a ? c = 1 : .67 > a && (c = 2);
        this.d.muted() ? this.c.children[0].children[0].innerHTML != this.v("Unmute") && (this.c.children[0].children[0].innerHTML = this.v("Unmute")) : this.c.children[0].children[0].innerHTML != this.v("Mute") && (this.c.children[0].children[0].innerHTML = this.v("Mute"));
        for (a = 0; 4 > a; a++) t.r(this.c, "vjs-vol-" + a);
        t.p(this.c, "vjs-vol-" + c);
    };
    t.Fa = t.O.extend({
        l: function(a, c) {
            t.O.call(this, a, c);
            this.b(a, "volumechange", this.ef);
            a.h && a.h.featuresVolumeControl === l && this.p("vjs-hidden");
            this.b(a, "loadstart", function() {
                a.h.featuresVolumeControl === l ? this.p("vjs-hidden") : this.r("vjs-hidden");
            });
            this.p("vjs-menu-button");
        }
    });
    t.Fa.prototype.Ja = function() {
        var a = new t.pa(this.d, {
            Cc: "div"
        }), c = new t.Fb(this.d, this.q.volumeBar);
        c.b("focus", function() {
            a.p("vjs-lock-showing");
        });
        c.b("blur", function() {
            G(a);
        });
        a.ba(c);
        return a;
    };
    t.Fa.prototype.u = function() {
        t.qa.prototype.u.call(this);
        t.O.prototype.u.call(this);
    };
    t.Fa.prototype.e = function() {
        return t.w.prototype.e.call(this, "div", {
            className: "vjs-volume-menu-button vjs-menu-button vjs-control",
            innerHTML: '<div><span class="vjs-control-text">' + this.v("Mute") + "</span></div>"
        });
    };
    t.Fa.prototype.ef = t.qa.prototype.update;
    t.oc = t.O.extend({
        l: function(a, c) {
            t.O.call(this, a, c);
            this.sd();
            this.rd();
            this.b(a, "loadstart", this.sd);
            this.b(a, "ratechange", this.rd);
        }
    });
    s = t.oc.prototype;
    s.sa = "Playback Rate";
    s.className = "vjs-playback-rate";
    s.e = function() {
        var a = t.O.prototype.e.call(this);
        this.Sc = t.e("div", {
            className: "vjs-playback-rate-value",
            innerHTML: 1
        });
        a.appendChild(this.Sc);
        return a;
    };
    s.Ja = function() {
        var a = new t.pa(this.k()), c = this.k().options().playbackRates;
        if (c) for (var d = c.length - 1; 0 <= d; d--) a.ba(new t.Bb(this.k(), {
            rate: c[d] + "x"
        }));
        return a;
    };
    s.Ca = function() {
        this.m().setAttribute("aria-valuenow", this.k().playbackRate());
    };
    s.u = function() {
        for (var a = this.k().playbackRate(), c = this.k().options().playbackRates, d = c[0], e = 0; e < c.length; e++) if (c[e] > a) {
            d = c[e];
            break;
        }
        this.k().playbackRate(d);
    };
    function na(a) {
        return a.k().h && a.k().h.featuresPlaybackRate && a.k().options().playbackRates && 0 < a.k().options().playbackRates.length;
    }
    s.sd = function() {
        na(this) ? this.r("vjs-hidden") : this.p("vjs-hidden");
    };
    s.rd = function() {
        na(this) && (this.Sc.innerHTML = this.k().playbackRate() + "x");
    };
    t.Bb = t.M.extend({
        Cc: "button",
        l: function(a, c) {
            var d = this.label = c.rate, e = this.$c = parseFloat(d, 10);
            c.label = d;
            c.selected = 1 === e;
            t.M.call(this, a, c);
            this.b(a, "ratechange", this.update);
        }
    });
    t.Bb.prototype.u = function() {
        t.M.prototype.u.call(this);
        this.k().playbackRate(this.$c);
    };
    t.Bb.prototype.update = function() {
        this.selected(this.k().playbackRate() == this.$c);
    };
    t.pc = t.w.extend({
        l: function(a, c) {
            t.w.call(this, a, c);
            this.update();
            a.b("posterchange", t.bind(this, this.update));
        }
    });
    s = t.pc.prototype;
    s.dispose = function() {
        this.k().n("posterchange", this.update);
        t.w.prototype.dispose.call(this);
    };
    s.e = function() {
        var a = t.e("div", {
            className: "vjs-poster",
            tabIndex: -1
        });
        t.wd || (this.Ob = t.e("img"), a.appendChild(this.Ob));
        return a;
    };
    s.update = function() {
        var a = this.k().poster();
        this.ma(a);
        a ? this.show() : this.Y();
    };
    s.ma = function(a) {
        var c;
        this.Ob ? this.Ob.src = a : (c = "", a && (c = 'url("' + a + '")'), this.c.style.backgroundImage = c);
    };
    s.u = function() {
        this.d.play();
    };
    t.lc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
        }
    });
    t.lc.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-loading-spinner"
        });
    };
    t.sb = t.w.extend();
    t.sb.prototype.e = function() {
        return t.w.prototype.e.call(this, "div", {
            className: "vjs-big-play-button",
            innerHTML: '<span aria-hidden="true"></span>',
            "aria-label": "play video"
        });
    };
    t.sb.prototype.u = function() {
        this.d.play();
    };
    t.xb = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.update();
            this.b(a, "error", this.update);
        }
    });
    t.xb.prototype.e = function() {
        var a = t.a.prototype.e.call(this, "div", {
            className: "vjs-error-display"
        });
        this.B = t.e("div");
        a.appendChild(this.B);
        return a;
    };
    t.xb.prototype.update = function() {
        this.k().error() && (this.B.innerHTML = this.v(this.k().error().message));
    };
    var O;
    t.j = t.a.extend({
        l: function(a, c, d) {
            c = c || {};
            c.dd = l;
            t.a.call(this, a, c, d);
            this.featuresProgressEvents || this.re();
            this.featuresTimeupdateEvents || this.se();
            this.fe();
            this.featuresNativeTextTracks || this.Vd();
            this.he();
        }
    });
    s = t.j.prototype;
    s.fe = function() {
        var a, c;
        a = this.k();
        c = function() {
            a.controls() && !a.usingNativeControls() && this.Id();
        };
        this.I(c);
        this.b(a, "controlsenabled", c);
        this.b(a, "controlsdisabled", this.He);
        this.I(function() {
            this.networkState && 0 < this.networkState() && this.k().o("loadstart");
        });
    };
    s.Id = function() {
        var a;
        this.b("mousedown", this.u);
        this.b("touchstart", function() {
            a = this.d.userActive();
        });
        this.b("touchmove", function() {
            a && this.k().reportUserActivity();
        });
        this.b("touchend", function(a) {
            a.preventDefault();
        });
        da(this);
        this.b("tap", this.Be);
    };
    s.He = function() {
        this.n("tap");
        this.n("touchstart");
        this.n("touchmove");
        this.n("touchleave");
        this.n("touchcancel");
        this.n("touchend");
        this.n("click");
        this.n("mousedown");
    };
    s.u = function(a) {
        0 === a.button && this.k().controls() && (this.k().paused() ? this.k().play() : this.k().pause());
    };
    s.Be = function() {
        this.k().userActive(!this.k().userActive());
    };
    s.re = function() {
        this.Uc = f;
        this.$e();
    };
    s.qe = function() {
        this.Uc = l;
        this.ld();
    };
    s.$e = function() {
        this.Ge = this.setInterval(function() {
            var a = this.k().bufferedPercent();
            this.Md != a && this.k().o("progress");
            this.Md = a;
            1 === a && this.ld();
        }, 500);
    };
    s.ld = function() {
        this.clearInterval(this.Ge);
    };
    s.se = function() {
        var a = this.d;
        this.Yb = f;
        this.b(a, "play", this.pd);
        this.b(a, "pause", this.rb);
        this.N("timeupdate", function() {
            this.featuresTimeupdateEvents = f;
            this.Vc();
        });
    };
    s.Vc = function() {
        var a = this.d;
        this.Yb = l;
        this.rb();
        this.n(a, "play", this.pd);
        this.n(a, "pause", this.rb);
    };
    s.pd = function() {
        this.Fc && this.rb();
        this.Fc = this.setInterval(function() {
            this.k().o("timeupdate");
        }, 250);
    };
    s.rb = function() {
        this.clearInterval(this.Fc);
        this.k().o("timeupdate");
    };
    s.dispose = function() {
        this.Uc && this.qe();
        this.Yb && this.Vc();
        t.a.prototype.dispose.call(this);
    };
    s.bc = function() {
        this.Yb && this.k().o("timeupdate");
    };
    s.he = function() {
        function a() {
            var a = c.ea("textTrackDisplay");
            a && a.C();
        }
        var c = this.d, d;
        if (d = this.textTracks()) d.addEventListener("removetrack", a), d.addEventListener("addtrack", a), 
        this.b("dispose", t.bind(this, function() {
            d.removeEventListener("removetrack", a);
            d.removeEventListener("addtrack", a);
        }));
    };
    s.Vd = function() {
        var a = this.d, c, d, e;
        window.WebVTT || (e = document.createElement("script"), e.src = a.options()["vtt.js"] || "../node_modules/vtt.js/dist/vtt.js", 
        a.m().appendChild(e), window.WebVTT = f);
        if (d = this.textTracks()) c = function() {
            var c, d, e;
            e = a.ea("textTrackDisplay");
            e.C();
            for (c = 0; c < this.length; c++) d = this[c], d.removeEventListener("cuechange", t.bind(e, e.C)), 
            "showing" === d.mode && d.addEventListener("cuechange", t.bind(e, e.C));
        }, d.addEventListener("change", c), this.b("dispose", t.bind(this, function() {
            d.removeEventListener("change", c);
        }));
    };
    s.textTracks = function() {
        this.d.od = this.d.od || new t.F();
        return this.d.od;
    };
    s.Z = function() {
        this.d.ad = this.d.ad || new t.F();
        return this.d.ad;
    };
    O = function(a, c, d, e, g) {
        var h = a.textTracks();
        g = g || {};
        g.kind = c;
        d && (g.label = d);
        e && (g.language = e);
        g.player = a.d;
        a = new t.t(g);
        P(h, a);
        return a;
    };
    t.j.prototype.addTextTrack = function(a, c, d) {
        if (!a) throw Error("TextTrack kind is required but was not provided");
        return O(this, a, c, d);
    };
    t.j.prototype.ia = function(a) {
        a = O(this, a.kind, a.label, a.language, a);
        P(this.Z(), a);
        return {
            T: a
        };
    };
    t.j.prototype.Ba = function(a) {
        Q(this.textTracks(), a);
        Q(this.Z(), a);
    };
    t.j.prototype.fd = m();
    t.j.prototype.featuresVolumeControl = f;
    t.j.prototype.featuresFullscreenResize = l;
    t.j.prototype.featuresPlaybackRate = l;
    t.j.prototype.featuresProgressEvents = l;
    t.j.prototype.featuresTimeupdateEvents = l;
    t.j.prototype.featuresNativeTextTracks = l;
    t.j.gc = function(a) {
        a.Ra = function(c, d) {
            var e = a.gd;
            e || (e = a.gd = []);
            d === b && (d = e.length);
            e.splice(d, 0, c);
        };
        a.pb = function(c) {
            for (var d = a.gd || [], e, g = 0; g < d.length; g++) if (e = d[g].eb(c)) return d[g];
            return j;
        };
        a.zc = function(c) {
            var d = a.pb(c);
            return d ? d.eb(c) : "";
        };
        a.prototype.Sa = function(c) {
            var d = a.pb(c);
            d || (a.S ? d = a.S : t.log.error("No source hander found for the current source."));
            this.Ka();
            this.n("dispose", this.Ka);
            this.Ec = c;
            this.cc = d.Tb(c, this);
            this.b("dispose", this.Ka);
            return this;
        };
        a.prototype.Ka = function() {
            this.cc && this.cc.dispose && this.cc.dispose();
        };
    };
    t.media = {};
    t.f = t.j.extend({
        l: function(a, c, d) {
            var e, g, h;
            if (c.nativeCaptions === l || c.nativeTextTracks === l) this.featuresNativeTextTracks = l;
            t.j.call(this, a, c, d);
            for (d = t.f.yb.length - 1; 0 <= d; d--) this.b(t.f.yb[d], this.Wd);
            (c = c.source) && (this.c.currentSrc !== c.src || a.L && 3 === a.L.ge) && this.Sa(c);
            if (this.c.hasChildNodes()) {
                d = this.c.childNodes;
                e = d.length;
                for (c = []; e--; ) g = d[e], h = g.nodeName.toLowerCase(), "track" === h && (this.featuresNativeTextTracks ? P(this.Z(), g.track) : c.push(g));
                for (d = 0; d < c.length; d++) this.c.removeChild(c[d]);
            }
            this.featuresNativeTextTracks && this.b("loadstart", t.bind(this, this.ee));
            if (t.Eb && a.options().nativeControlsForTouch === f) {
                var k, p, r, u;
                k = this;
                p = this.k();
                c = p.controls();
                k.c.controls = !!c;
                r = function() {
                    k.c.controls = f;
                };
                u = function() {
                    k.c.controls = l;
                };
                p.b("controlsenabled", r);
                p.b("controlsdisabled", u);
                c = function() {
                    p.n("controlsenabled", r);
                    p.n("controlsdisabled", u);
                };
                k.b("dispose", c);
                p.b("usingcustomcontrols", c);
                p.usingNativeControls(f);
            }
            a.I(function() {
                this.src() && (this.L && this.q.autoplay && this.paused()) && (delete this.L.poster, 
                this.play());
            });
            this.Wa();
        }
    });
    s = t.f.prototype;
    s.dispose = function() {
        t.f.Mb(this.c);
        t.j.prototype.dispose.call(this);
    };
    s.e = function() {
        var a = this.d, c, d, e, g = a.L;
        if (!g || this.movingMediaElementInDOM === l) {
            g ? (e = g.cloneNode(l), t.f.Mb(g), g = e, a.L = j) : (g = t.e("video"), e = videojs.$.ya({}, a.Xe), 
            (!t.Eb || a.options().nativeControlsForTouch !== f) && delete e.controls, t.ed(g, t.i.D(e, {
                id: a.id() + "_html5_api",
                class: "vjs-tech"
            })));
            g.player = a;
            if (a.q.qd) for (e = 0; e < a.q.qd.length; e++) c = a.q.qd[e], d = document.createElement("track"), 
            d.Wb = c.Wb, d.label = c.label, d.hd = c.hd, d.src = c.src, "default" in c && d.setAttribute("default", "default"), 
            g.appendChild(d);
            t.Ub(g, a.m());
        }
        c = [ "autoplay", "preload", "loop", "muted" ];
        for (e = c.length - 1; 0 <= e; e--) {
            d = c[e];
            var h = {};
            "undefined" !== typeof a.q[d] && (h[d] = a.q[d]);
            t.ed(g, h);
        }
        return g;
    };
    s.ee = function() {
        for (var a = this.c.querySelectorAll("track"), c, d = a.length, e = {
            captions: 1,
            subtitles: 1
        }; d--; ) if ((c = a[d].T) && c.kind in e && !a[d]["default"]) c.mode = "disabled";
    };
    s.Wd = function(a) {
        "error" == a.type && this.error() ? this.k().error(this.error().code) : (a.bubbles = l, 
        this.k().o(a));
    };
    s.play = function() {
        this.c.play();
    };
    s.pause = function() {
        this.c.pause();
    };
    s.paused = function() {
        return this.c.paused;
    };
    s.currentTime = function() {
        return this.c.currentTime;
    };
    s.bc = function(a) {
        try {
            this.c.currentTime = a;
        } catch (c) {
            t.log(c, "Video is not ready. (Video.js)");
        }
    };
    s.duration = function() {
        return this.c.duration || 0;
    };
    s.buffered = function() {
        return this.c.buffered;
    };
    s.volume = function() {
        return this.c.volume;
    };
    s.Se = function(a) {
        this.c.volume = a;
    };
    s.muted = function() {
        return this.c.muted;
    };
    s.Oe = function(a) {
        this.c.muted = a;
    };
    s.width = function() {
        return this.c.offsetWidth;
    };
    s.height = function() {
        return this.c.offsetHeight;
    };
    s.Ta = function() {
        return "function" == typeof this.c.webkitEnterFullScreen && (/Android/.test(t.P) || !/Chrome|Mac OS X 10.5/.test(t.P)) ? f : l;
    };
    s.Ic = function() {
        var a = this.c;
        "webkitDisplayingFullscreen" in a && this.N("webkitbeginfullscreen", function() {
            this.d.isFullscreen(f);
            this.N("webkitendfullscreen", function() {
                this.d.isFullscreen(l);
                this.d.o("fullscreenchange");
            });
            this.d.o("fullscreenchange");
        });
        a.paused && a.networkState <= a.jf ? (this.c.play(), this.setTimeout(function() {
            a.pause();
            a.webkitEnterFullScreen();
        }, 0)) : a.webkitEnterFullScreen();
    };
    s.Xd = function() {
        this.c.webkitExitFullScreen();
    };
    s.src = function(a) {
        if (a === b) return this.c.src;
        this.ma(a);
    };
    s.ma = function(a) {
        this.c.src = a;
    };
    s.load = function() {
        this.c.load();
    };
    s.currentSrc = function() {
        return this.c.currentSrc;
    };
    s.poster = function() {
        return this.c.poster;
    };
    s.fd = function(a) {
        this.c.poster = a;
    };
    s.Qa = function() {
        return this.c.Qa;
    };
    s.Qe = function(a) {
        this.c.Qa = a;
    };
    s.autoplay = function() {
        return this.c.autoplay;
    };
    s.Le = function(a) {
        this.c.autoplay = a;
    };
    s.controls = function() {
        return this.c.controls;
    };
    s.loop = function() {
        return this.c.loop;
    };
    s.Ne = function(a) {
        this.c.loop = a;
    };
    s.error = function() {
        return this.c.error;
    };
    s.seeking = function() {
        return this.c.seeking;
    };
    s.ended = function() {
        return this.c.ended;
    };
    s.playbackRate = function() {
        return this.c.playbackRate;
    };
    s.Pe = function(a) {
        this.c.playbackRate = a;
    };
    s.networkState = function() {
        return this.c.networkState;
    };
    s.readyState = function() {
        return this.c.readyState;
    };
    s.textTracks = function() {
        return !this.featuresNativeTextTracks ? t.j.prototype.textTracks.call(this) : this.c.textTracks;
    };
    s.addTextTrack = function(a, c, d) {
        return !this.featuresNativeTextTracks ? t.j.prototype.addTextTrack.call(this, a, c, d) : this.c.addTextTrack(a, c, d);
    };
    s.ia = function(a) {
        if (!this.featuresNativeTextTracks) return t.j.prototype.ia.call(this, a);
        var c = document.createElement("track");
        a = a || {};
        a.kind && (c.kind = a.kind);
        a.label && (c.label = a.label);
        if (a.language || a.srclang) c.srclang = a.language || a.srclang;
        a["default"] && (c["default"] = a["default"]);
        a.id && (c.id = a.id);
        a.src && (c.src = a.src);
        this.m().appendChild(c);
        c.track.mode = "metadata" === c.T.kind ? "hidden" : "disabled";
        c.onload = function() {
            var a = c.track;
            2 <= c.readyState && ("metadata" === a.kind && "hidden" !== a.mode ? a.mode = "hidden" : "metadata" !== a.kind && "disabled" !== a.mode && (a.mode = "disabled"), 
            c.onload = j);
        };
        P(this.Z(), c.T);
        return c;
    };
    s.Ba = function(a) {
        if (!this.featuresNativeTextTracks) return t.j.prototype.Ba.call(this, a);
        var c, d;
        Q(this.Z(), a);
        c = this.m().querySelectorAll("track");
        for (d = 0; d < c.length; d++) if (c[d] === a || c[d].track === a) {
            c[d].parentNode.removeChild(c[d]);
            break;
        }
    };
    t.f.isSupported = function() {
        try {
            t.A.volume = .5;
        } catch (a) {
            return l;
        }
        return !!t.A.canPlayType;
    };
    t.j.gc(t.f);
    t.f.S = {};
    t.f.S.eb = function(a) {
        function c(a) {
            try {
                return t.A.canPlayType(a);
            } catch (c) {
                return "";
            }
        }
        return a.type ? c(a.type) : a.src ? (a = (a = a.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i)) && a[1], 
        c("video/" + a)) : "";
    };
    t.f.S.Tb = function(a, c) {
        c.ma(a.src);
    };
    t.f.S.dispose = m();
    t.f.Ra(t.f.S);
    t.f.Od = function() {
        var a = t.A.volume;
        t.A.volume = a / 2 + .1;
        return a !== t.A.volume;
    };
    t.f.Nd = function() {
        var a = t.A.playbackRate;
        t.A.playbackRate = a / 2 + .1;
        return a !== t.A.playbackRate;
    };
    t.f.Ve = function() {
        var a;
        (a = !!t.A.textTracks) && 0 < t.A.textTracks.length && (a = "number" !== typeof t.A.textTracks[0].mode);
        a && t.jc && (a = l);
        return a;
    };
    t.f.prototype.featuresVolumeControl = t.f.Od();
    t.f.prototype.featuresPlaybackRate = t.f.Nd();
    t.f.prototype.movingMediaElementInDOM = !t.Ad;
    t.f.prototype.featuresFullscreenResize = f;
    t.f.prototype.featuresProgressEvents = f;
    t.f.prototype.featuresNativeTextTracks = t.f.Ve();
    var S, oa = /^application\/(?:x-|vnd\.apple\.)mpegurl/i, pa = /^video\/mp4/i;
    t.f.Xc = function() {
        4 <= t.hc && (S || (S = t.A.constructor.prototype.canPlayType), t.A.constructor.prototype.canPlayType = function(a) {
            return a && oa.test(a) ? "maybe" : S.call(this, a);
        });
        t.Ed && (S || (S = t.A.constructor.prototype.canPlayType), t.A.constructor.prototype.canPlayType = function(a) {
            return a && pa.test(a) ? "maybe" : S.call(this, a);
        });
    };
    t.f.bf = function() {
        var a = t.A.constructor.prototype.canPlayType;
        t.A.constructor.prototype.canPlayType = S;
        S = j;
        return a;
    };
    t.f.Xc();
    t.f.yb = "loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");
    t.f.Mb = function(a) {
        if (a) {
            a.player = j;
            for (a.parentNode && a.parentNode.removeChild(a); a.hasChildNodes(); ) a.removeChild(a.firstChild);
            a.removeAttribute("src");
            if ("function" === typeof a.load) try {
                a.load();
            } catch (c) {}
        }
    };
    t.g = t.j.extend({
        l: function(a, c, d) {
            t.j.call(this, a, c, d);
            var e = c.source;
            d = a.id() + "_flash_api";
            var g = a.q, g = t.i.D({
                readyFunction: "videojs.Flash.onReady",
                eventProxyFunction: "videojs.Flash.onEvent",
                errorEventProxyFunction: "videojs.Flash.onError",
                autoplay: g.autoplay,
                preload: g.Qa,
                loop: g.loop,
                muted: g.muted
            }, c.flashVars), h = t.i.D({
                wmode: "opaque",
                bgcolor: "#000000"
            }, c.params);
            d = t.i.D({
                id: d,
                name: d,
                class: "vjs-tech"
            }, c.attributes);
            e && this.I(function() {
                this.Sa(e);
            });
            t.Ub(this.c, c.parentEl);
            c.startTime && this.I(function() {
                this.load();
                this.play();
                this.currentTime(c.startTime);
            });
            t.jc && this.I(function() {
                this.b("mousemove", function() {
                    this.k().o({
                        type: "mousemove",
                        bubbles: l
                    });
                });
            });
            a.b("stageclick", a.reportUserActivity);
            this.c = t.g.Hc(c.swf, this.c, g, h, d);
        }
    });
    s = t.g.prototype;
    s.dispose = function() {
        t.j.prototype.dispose.call(this);
    };
    s.play = function() {
        this.c.vjs_play();
    };
    s.pause = function() {
        this.c.vjs_pause();
    };
    s.src = function(a) {
        return a === b ? this.currentSrc() : this.ma(a);
    };
    s.ma = function(a) {
        a = t.$d(a);
        this.c.vjs_src(a);
        if (this.d.autoplay()) {
            var c = this;
            this.setTimeout(function() {
                c.play();
            }, 0);
        }
    };
    t.g.prototype.setCurrentTime = function(a) {
        this.oe = a;
        this.c.vjs_setProperty("currentTime", a);
        t.j.prototype.bc.call(this);
    };
    t.g.prototype.currentTime = function() {
        return this.seeking() ? this.oe || 0 : this.c.vjs_getProperty("currentTime");
    };
    t.g.prototype.currentSrc = function() {
        return this.Ec ? this.Ec.src : this.c.vjs_getProperty("currentSrc");
    };
    t.g.prototype.load = function() {
        this.c.vjs_load();
    };
    t.g.prototype.poster = function() {
        this.c.vjs_getProperty("poster");
    };
    t.g.prototype.setPoster = m();
    t.g.prototype.buffered = function() {
        return t.Lb(0, this.c.vjs_getProperty("buffered"));
    };
    t.g.prototype.Ta = q(l);
    t.g.prototype.Ic = q(l);
    function qa() {
        var a = T[U], c = a.charAt(0).toUpperCase() + a.slice(1);
        ra["set" + c] = function(c) {
            return this.c.vjs_setProperty(a, c);
        };
    }
    function sa(a) {
        ra[a] = function() {
            return this.c.vjs_getProperty(a);
        };
    }
    var ra = t.g.prototype, T = "rtmpConnection rtmpStream preload defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "), ta = "error networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight".split(" "), U;
    for (U = 0; U < T.length; U++) sa(T[U]), qa();
    for (U = 0; U < ta.length; U++) sa(ta[U]);
    t.g.isSupported = function() {
        return 10 <= t.g.version()[0];
    };
    t.j.gc(t.g);
    t.g.S = {};
    t.g.S.eb = function(a) {
        return !a.type ? "" : a.type.replace(/;.*/, "").toLowerCase() in t.g.Zd ? "maybe" : "";
    };
    t.g.S.Tb = function(a, c) {
        c.ma(a.src);
    };
    t.g.S.dispose = m();
    t.g.Ra(t.g.S);
    t.g.Zd = {
        "video/flv": "FLV",
        "video/x-flv": "FLV",
        "video/mp4": "MP4",
        "video/m4v": "MP4"
    };
    t.g.onReady = function(a) {
        var c;
        if (c = (a = t.m(a)) && a.parentNode && a.parentNode.player) a.player = c, t.g.checkReady(c.h);
    };
    t.g.checkReady = function(a) {
        a.m() && (a.m().vjs_getProperty ? a.Wa() : this.setTimeout(function() {
            t.g.checkReady(a);
        }, 50));
    };
    t.g.onEvent = function(a, c) {
        t.m(a).player.o(c);
    };
    t.g.onError = function(a, c) {
        var d = t.m(a).player, e = "FLASH: " + c;
        "srcnotfound" == c ? d.error({
            code: 4,
            message: e
        }) : d.error(e);
    };
    t.g.version = function() {
        var a = "0,0,0";
        try {
            a = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g, ",").match(/^,?(.+),?$/)[1];
        } catch (c) {
            try {
                navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin && (a = (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1]);
            } catch (d) {}
        }
        return a.split(",");
    };
    t.g.Hc = function(a, c, d, e, g) {
        a = t.g.ce(a, d, e, g);
        a = t.e("div", {
            innerHTML: a
        }).childNodes[0];
        d = c.parentNode;
        c.parentNode.replaceChild(a, c);
        a[t.expando] = c[t.expando];
        var h = d.childNodes[0];
        setTimeout(function() {
            h.style.display = "block";
        }, 1e3);
        return a;
    };
    t.g.ce = function(a, c, d, e) {
        var g = "", h = "", k = "";
        c && t.i.da(c, function(a, c) {
            g += a + "=" + c + "&amp;";
        });
        d = t.i.D({
            movie: a,
            flashvars: g,
            allowScriptAccess: "always",
            allowNetworking: "all"
        }, d);
        t.i.da(d, function(a, c) {
            h += '<param name="' + a + '" value="' + c + '" />';
        });
        e = t.i.D({
            data: a,
            width: "100%",
            height: "100%"
        }, e);
        t.i.da(e, function(a, c) {
            k += a + '="' + c + '" ';
        });
        return '<object type="application/x-shockwave-flash" ' + k + ">" + h + "</object>";
    };
    t.g.Ue = {
        "rtmp/mp4": "MP4",
        "rtmp/flv": "FLV"
    };
    t.g.Hf = function(a, c) {
        return a + "&" + c;
    };
    t.g.Te = function(a) {
        var c = {
            Bc: "",
            md: ""
        };
        if (!a) return c;
        var d = a.indexOf("&"), e;
        -1 !== d ? e = d + 1 : (d = e = a.lastIndexOf("/") + 1, 0 === d && (d = e = a.length));
        c.Bc = a.substring(0, d);
        c.md = a.substring(e, a.length);
        return c;
    };
    t.g.me = function(a) {
        return a in t.g.Ue;
    };
    t.g.Gd = /^rtmp[set]?:\/\//i;
    t.g.le = function(a) {
        return t.g.Gd.test(a);
    };
    t.g.ac = {};
    t.g.ac.eb = function(a) {
        return t.g.me(a.type) || t.g.le(a.src) ? "maybe" : "";
    };
    t.g.ac.Tb = function(a, c) {
        var d = t.g.Te(a.src);
        c.setRtmpConnection(d.Bc);
        c.setRtmpStream(d.md);
    };
    t.g.Ra(t.g.ac);
    t.Fd = t.a.extend({
        l: function(a, c, d) {
            t.a.call(this, a, c, d);
            if (!a.q.sources || 0 === a.q.sources.length) {
                c = 0;
                for (d = a.q.techOrder; c < d.length; c++) {
                    var e = t.ua(d[c]), g = window.videojs[e];
                    if (g && g.isSupported()) {
                        ka(a, e);
                        break;
                    }
                }
            } else a.src(a.q.sources);
        }
    });
    t.rc = {
        disabled: "disabled",
        hidden: "hidden",
        showing: "showing"
    };
    t.Hd = {
        subtitles: "subtitles",
        captions: "captions",
        descriptions: "descriptions",
        chapters: "chapters",
        metadata: "metadata"
    };
    t.t = function(a) {
        var c, d, e, g, h, k, p, r, u, A, R;
        a = a || {};
        if (!a.player) throw Error("A player was not provided.");
        c = this;
        if (t.oa) for (R in c = document.createElement("custom"), t.t.prototype) c[R] = t.t.prototype[R];
        c.d = a.player;
        e = t.rc[a.mode] || "disabled";
        g = t.Hd[a.kind] || "subtitles";
        h = a.label || "";
        k = a.language || a.srclang || "";
        d = a.id || "vjs_text_track_" + t.s++;
        if ("metadata" === g || "chapters" === g) e = "hidden";
        c.X = [];
        c.Ga = [];
        p = new t.W(c.X);
        r = new t.W(c.Ga);
        A = l;
        u = t.bind(c, function() {
            this.activeCues;
            A && (this.trigger("cuechange"), A = l);
        });
        "disabled" !== e && c.d.b("timeupdate", u);
        Object.defineProperty(c, "kind", {
            get: function() {
                return g;
            },
            set: Function.prototype
        });
        Object.defineProperty(c, "label", {
            get: function() {
                return h;
            },
            set: Function.prototype
        });
        Object.defineProperty(c, "language", {
            get: function() {
                return k;
            },
            set: Function.prototype
        });
        Object.defineProperty(c, "id", {
            get: function() {
                return d;
            },
            set: Function.prototype
        });
        Object.defineProperty(c, "mode", {
            get: function() {
                return e;
            },
            set: function(a) {
                t.rc[a] && (e = a, "showing" === e && this.d.b("timeupdate", u), this.o("modechange"));
            }
        });
        Object.defineProperty(c, "cues", {
            get: function() {
                return !this.Xb ? j : p;
            },
            set: Function.prototype
        });
        Object.defineProperty(c, "activeCues", {
            get: function() {
                var a, c, d, e, g;
                if (!this.Xb) return j;
                if (0 === this.cues.length) return r;
                e = this.d.currentTime();
                a = 0;
                c = this.cues.length;
                for (d = []; a < c; a++) g = this.cues[a], g.startTime <= e && g.endTime >= e ? d.push(g) : g.startTime === g.endTime && (g.startTime <= e && g.startTime + .5 >= e) && d.push(g);
                A = l;
                if (d.length !== this.Ga.length) A = f; else for (a = 0; a < d.length; a++) -1 === ua.call(this.Ga, d[a]) && (A = f);
                this.Ga = d;
                r.qb(this.Ga);
                return r;
            },
            set: Function.prototype
        });
        a.src ? va(a.src, c) : c.Xb = f;
        if (t.oa) return c;
    };
    t.t.prototype = t.i.create(t.z.prototype);
    t.t.prototype.constructor = t.t;
    t.t.prototype.bb = {
        cuechange: "cuechange"
    };
    t.t.prototype.vc = function(a) {
        var c = this.d.textTracks(), d = 0;
        if (c) for (;d < c.length; d++) c[d] !== this && c[d].bd(a);
        this.X.push(a);
        this.cues.qb(this.X);
    };
    t.t.prototype.bd = function(a) {
        for (var c = 0, d = this.X.length, e, g = l; c < d; c++) e = this.X[c], e === a && (this.X.splice(c, 1), 
        g = f);
        g && this.Dc.qb(this.X);
    };
    var va, V, ua;
    va = function(a, c) {
        t.ff(a, t.bind(this, function(a, e, g) {
            if (a) return t.log.error(a);
            c.Xb = f;
            V(g, c);
        }));
    };
    V = function(a, c) {
        if ("function" !== typeof window.WebVTT) window.setTimeout(function() {
            V(a, c);
        }, 25); else {
            var d = new window.WebVTT.Parser(window, window.vttjs, window.WebVTT.StringDecoder());
            d.oncue = function(a) {
                c.vc(a);
            };
            d.onparsingerror = function(a) {
                t.log.error(a);
            };
            d.parse(a);
            d.flush();
        }
    };
    ua = function(a, c) {
        var d;
        if (this == j) throw new TypeError('"this" is null or not defined');
        var e = Object(this), g = e.length >>> 0;
        if (0 === g) return -1;
        d = +c || 0;
        Infinity === Math.abs(d) && (d = 0);
        if (d >= g) return -1;
        for (d = Math.max(0 <= d ? d : g - Math.abs(d), 0); d < g; ) {
            if (d in e && e[d] === a) return d;
            d++;
        }
        return -1;
    };
    t.F = function(a) {
        var c = this, d, e = 0;
        if (t.oa) for (d in c = document.createElement("custom"), t.F.prototype) c[d] = t.F.prototype[d];
        a = a || [];
        c.Va = [];
        for (Object.defineProperty(c, "length", {
            get: function() {
                return this.Va.length;
            }
        }); e < a.length; e++) P(c, a[e]);
        if (t.oa) return c;
    };
    t.F.prototype = t.i.create(t.z.prototype);
    t.F.prototype.constructor = t.F;
    t.F.prototype.bb = {
        change: "change",
        addtrack: "addtrack",
        removetrack: "removetrack"
    };
    for (var wa in t.F.prototype.bb) t.F.prototype["on" + wa] = j;
    function P(a, c) {
        var d = a.Va.length;
        "" + d in a || Object.defineProperty(a, d, {
            get: function() {
                return this.Va[d];
            }
        });
        c.addEventListener("modechange", t.bind(a, function() {
            this.o("change");
        }));
        a.Va.push(c);
        a.o({
            type: "addtrack",
            T: c
        });
    }
    function Q(a, c) {
        for (var d = 0, e = a.length, g; d < e; d++) if (g = a[d], g === c) {
            a.Va.splice(d, 1);
            break;
        }
        a.o({
            type: "removetrack",
            T: c
        });
    }
    t.F.prototype.de = function(a) {
        for (var c = 0, d = this.length, e = j, g; c < d; c++) if (g = this[c], g.id === a) {
            e = g;
            break;
        }
        return e;
    };
    t.W = function(a) {
        var c = this, d;
        if (t.oa) for (d in c = document.createElement("custom"), t.W.prototype) c[d] = t.W.prototype[d];
        t.W.prototype.qb.call(c, a);
        Object.defineProperty(c, "length", {
            get: n("pe")
        });
        if (t.oa) return c;
    };
    t.W.prototype.qb = function(a) {
        var c = this.length || 0, d = 0, e = a.length;
        this.X = a;
        this.pe = a.length;
        a = function(a) {
            "" + a in this || Object.defineProperty(this, "" + a, {
                get: function() {
                    return this.X[a];
                }
            });
        };
        if (c < e) for (d = c; d < e; d++) a.call(this, d);
    };
    t.W.prototype.be = function(a) {
        for (var c = 0, d = this.length, e = j, g; c < d; c++) if (g = this[c], g.id === a) {
            e = g;
            break;
        }
        return e;
    };
    t.ra = t.a.extend({
        l: function(a, c, d) {
            t.a.call(this, a, c, d);
            a.b("loadstart", t.bind(this, this.Ze));
            a.I(t.bind(this, function() {
                if (a.h && a.h.featuresNativeTextTracks) this.Y(); else {
                    var c, d, h;
                    a.b("fullscreenchange", t.bind(this, this.C));
                    d = a.q.tracks || [];
                    for (c = 0; c < d.length; c++) h = d[c], this.d.ia(h);
                }
            }));
        }
    });
    t.ra.prototype.Ze = function() {
        this.d.h && this.d.h.featuresNativeTextTracks ? this.Y() : this.show();
    };
    t.ra.prototype.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-text-track-display"
        });
    };
    t.ra.prototype.Pd = function() {
        "function" === typeof window.WebVTT && window.WebVTT.processCues(window, [], this.c);
    };
    function W(a, c) {
        return "rgba(" + parseInt(a[1] + a[1], 16) + "," + parseInt(a[2] + a[2], 16) + "," + parseInt(a[3] + a[3], 16) + "," + c + ")";
    }
    var xa = {
        xf: "monospace",
        Df: "sans-serif",
        Ff: "serif",
        yf: '"Andale Mono", "Lucida Console", monospace',
        zf: '"Courier New", monospace',
        Bf: "sans-serif",
        Cf: "serif",
        of: '"Comic Sans MS", Impact, fantasy',
        Ef: '"Monotype Corsiva", cursive',
        Gf: '"Andale Mono", "Lucida Console", monospace, sans-serif'
    };
    t.ra.prototype.C = function() {
        var a = this.d.textTracks(), c = 0, d;
        this.Pd();
        if (a) for (;c < a.length; c++) d = a[c], "showing" === d.mode && this.cf(d);
    };
    t.ra.prototype.cf = function(a) {
        if ("function" === typeof window.WebVTT && a.activeCues) {
            for (var c = 0, d = this.d.textTrackSettings.Lc(), e, g = []; c < a.activeCues.length; c++) g.push(a.activeCues[c]);
            window.WebVTT.processCues(window, a.activeCues, this.c);
            for (c = g.length; c--; ) {
                a = g[c].pf;
                d.color && (a.firstChild.style.color = d.color);
                if (d.nd) try {
                    a.firstChild.style.color = W(d.color || "#fff", d.nd);
                } catch (h) {}
                d.backgroundColor && (a.firstChild.style.backgroundColor = d.backgroundColor);
                if (d.yc) try {
                    a.firstChild.style.backgroundColor = W(d.backgroundColor || "#000", d.yc);
                } catch (k) {}
                if (d.fc) if (d.ud) try {
                    a.style.backgroundColor = W(d.fc, d.ud);
                } catch (p) {} else a.style.backgroundColor = d.fc;
                d.La && ("dropshadow" === d.La ? a.firstChild.style.textShadow = "2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222" : "raised" === d.La ? a.firstChild.style.textShadow = "1px 1px #222, 2px 2px #222, 3px 3px #222" : "depressed" === d.La ? a.firstChild.style.textShadow = "1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222" : "uniform" === d.La && (a.firstChild.style.textShadow = "0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));
                d.Qb && 1 !== d.Qb && (e = window.Af(a.style.fontSize), a.style.fontSize = e * d.Qb + "px", 
                a.style.height = "auto", a.style.top = "auto", a.style.bottom = "2px");
                d.fontFamily && "default" !== d.fontFamily && ("small-caps" === d.fontFamily ? a.firstChild.style.fontVariant = "small-caps" : a.firstChild.style.fontFamily = xa[d.fontFamily]);
            }
        }
    };
    t.aa = t.M.extend({
        l: function(a, c) {
            var d = this.T = c.track, e = a.textTracks(), g, h;
            e && (g = t.bind(this, function() {
                var a = "showing" === this.T.mode, c, d, g;
                if (this instanceof t.Ab) {
                    a = f;
                    d = 0;
                    for (g = e.length; d < g; d++) if (c = e[d], c.kind === this.T.kind && "showing" === c.mode) {
                        a = l;
                        break;
                    }
                }
                this.selected(a);
            }), e.addEventListener("change", g), a.b("dispose", function() {
                e.removeEventListener("change", g);
            }));
            c.label = d.label || d.language || "Unknown";
            c.selected = d["default"] || "showing" === d.mode;
            t.M.call(this, a, c);
            e && e.onchange === b && this.b([ "tap", "click" ], function() {
                if ("object" !== typeof window.yd) try {
                    h = new window.yd("change");
                } catch (a) {}
                h || (h = document.createEvent("Event"), h.initEvent("change", f, f));
                e.dispatchEvent(h);
            });
        }
    });
    t.aa.prototype.u = function() {
        var a = this.T.kind, c = this.d.textTracks(), d, e = 0;
        t.M.prototype.u.call(this);
        if (c) for (;e < c.length; e++) d = c[e], d.kind === a && (d.mode = d === this.T ? "showing" : "disabled");
    };
    t.Ab = t.aa.extend({
        l: function(a, c) {
            c.track = {
                kind: c.kind,
                player: a,
                label: c.kind + " off",
                default: l,
                mode: "disabled"
            };
            t.aa.call(this, a, c);
            this.selected(f);
        }
    });
    t.tb = t.aa.extend({
        l: function(a, c) {
            c.track = {
                kind: c.kind,
                player: a,
                label: c.kind + " settings",
                default: l,
                mode: "disabled"
            };
            t.aa.call(this, a, c);
            this.p("vjs-texttrack-settings");
        }
    });
    t.tb.prototype.u = function() {
        this.k().ea("textTrackSettings").show();
    };
    t.Q = t.O.extend({
        l: function(a, c) {
            var d, e;
            t.O.call(this, a, c);
            d = this.d.textTracks();
            1 >= this.H.length && this.Y();
            d && (e = t.bind(this, this.update), d.addEventListener("removetrack", e), d.addEventListener("addtrack", e), 
            this.d.b("dispose", function() {
                d.removeEventListener("removetrack", e);
                d.removeEventListener("addtrack", e);
            }));
        }
    });
    t.Q.prototype.Ia = function() {
        var a = [], c, d;
        this instanceof t.na && (!this.k().h || !this.k().h.featuresNativeTextTracks) && a.push(new t.tb(this.d, {
            kind: this.fa
        }));
        a.push(new t.Ab(this.d, {
            kind: this.fa
        }));
        d = this.d.textTracks();
        if (!d) return a;
        for (var e = 0; e < d.length; e++) c = d[e], c.kind === this.fa && a.push(new t.aa(this.d, {
            track: c
        }));
        return a;
    };
    t.na = t.Q.extend({
        l: function(a, c, d) {
            t.Q.call(this, a, c, d);
            this.c.setAttribute("aria-label", "Captions Menu");
        }
    });
    t.na.prototype.fa = "captions";
    t.na.prototype.sa = "Captions";
    t.na.prototype.className = "vjs-captions-button";
    t.na.prototype.update = function() {
        var a = 2;
        t.Q.prototype.update.call(this);
        this.k().h && this.k().h.featuresNativeTextTracks && (a = 1);
        this.H && this.H.length > a ? this.show() : this.Y();
    };
    t.ab = t.Q.extend({
        l: function(a, c, d) {
            t.Q.call(this, a, c, d);
            this.c.setAttribute("aria-label", "Subtitles Menu");
        }
    });
    t.ab.prototype.fa = "subtitles";
    t.ab.prototype.sa = "Subtitles";
    t.ab.prototype.className = "vjs-subtitles-button";
    t.Xa = t.Q.extend({
        l: function(a, c, d) {
            t.Q.call(this, a, c, d);
            this.c.setAttribute("aria-label", "Chapters Menu");
        }
    });
    s = t.Xa.prototype;
    s.fa = "chapters";
    s.sa = "Chapters";
    s.className = "vjs-chapters-button";
    s.Ia = function() {
        var a = [], c, d;
        d = this.d.textTracks();
        if (!d) return a;
        for (var e = 0; e < d.length; e++) c = d[e], c.kind === this.fa && a.push(new t.aa(this.d, {
            track: c
        }));
        return a;
    };
    s.Ja = function() {
        for (var a = this.d.textTracks() || [], c = 0, d = a.length, e, g, h = this.H = []; c < d; c++) if (e = a[c], 
        e.kind == this.fa) if (e.Dc) {
            g = e;
            break;
        } else e.mode = "hidden", window.setTimeout(t.bind(this, function() {
            this.Ja();
        }), 100);
        a = this.xa;
        a === b && (a = new t.pa(this.d), a.va().appendChild(t.e("li", {
            className: "vjs-menu-title",
            innerHTML: t.ua(this.fa),
            We: -1
        })));
        if (g) {
            e = g.cues;
            for (var k, c = 0, d = e.length; c < d; c++) k = e[c], k = new t.Ya(this.d, {
                track: g,
                cue: k
            }), h.push(k), a.ba(k);
            this.ba(a);
        }
        0 < this.H.length && this.show();
        return a;
    };
    t.Ya = t.M.extend({
        l: function(a, c) {
            var d = this.T = c.track, e = this.cue = c.cue, g = a.currentTime();
            c.label = e.text;
            c.selected = e.startTime <= g && g < e.endTime;
            t.M.call(this, a, c);
            d.addEventListener("cuechange", t.bind(this, this.update));
        }
    });
    t.Ya.prototype.u = function() {
        t.M.prototype.u.call(this);
        this.d.currentTime(this.cue.startTime);
        this.update(this.cue.startTime);
    };
    t.Ya.prototype.update = function() {
        var a = this.cue, c = this.d.currentTime();
        this.selected(a.startTime <= c && c < a.endTime);
    };
    function X(a) {
        var c;
        a.Ke ? c = a.Ke[0] : a.options && (c = a.options[a.options.selectedIndex]);
        return c.value;
    }
    function Y(a, c) {
        var d, e;
        if (c) {
            for (d = 0; d < a.options.length && !(e = a.options[d], e.value === c); d++) ;
            a.selectedIndex = d;
        }
    }
    t.sc = t.a.extend({
        l: function(a, c) {
            t.a.call(this, a, c);
            this.Y();
            t.b(this.m().querySelector(".vjs-done-button"), "click", t.bind(this, function() {
                this.Je();
                this.Y();
            }));
            t.b(this.m().querySelector(".vjs-default-button"), "click", t.bind(this, function() {
                this.m().querySelector(".vjs-fg-color > select").selectedIndex = 0;
                this.m().querySelector(".vjs-bg-color > select").selectedIndex = 0;
                this.m().querySelector(".window-color > select").selectedIndex = 0;
                this.m().querySelector(".vjs-text-opacity > select").selectedIndex = 0;
                this.m().querySelector(".vjs-bg-opacity > select").selectedIndex = 0;
                this.m().querySelector(".vjs-window-opacity > select").selectedIndex = 0;
                this.m().querySelector(".vjs-edge-style select").selectedIndex = 0;
                this.m().querySelector(".vjs-font-family select").selectedIndex = 0;
                this.m().querySelector(".vjs-font-percent select").selectedIndex = 2;
                this.C();
            }));
            t.b(this.m().querySelector(".vjs-fg-color > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-bg-color > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".window-color > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-text-opacity > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-bg-opacity > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-window-opacity > select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-font-percent select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-edge-style select"), "change", t.bind(this, this.C));
            t.b(this.m().querySelector(".vjs-font-family select"), "change", t.bind(this, this.C));
            a.options().persistTextTrackSettings && this.Ie();
        }
    });
    s = t.sc.prototype;
    s.e = function() {
        return t.a.prototype.e.call(this, "div", {
            className: "vjs-caption-settings vjs-modal-overlay",
            innerHTML: '<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'
        });
    };
    s.Lc = function() {
        var a, c, d, e, g, h, k, p, r, u;
        a = this.m();
        g = X(a.querySelector(".vjs-edge-style select"));
        h = X(a.querySelector(".vjs-font-family select"));
        k = X(a.querySelector(".vjs-fg-color > select"));
        d = X(a.querySelector(".vjs-text-opacity > select"));
        p = X(a.querySelector(".vjs-bg-color > select"));
        c = X(a.querySelector(".vjs-bg-opacity > select"));
        r = X(a.querySelector(".window-color > select"));
        e = X(a.querySelector(".vjs-window-opacity > select"));
        a = window.parseFloat(X(a.querySelector(".vjs-font-percent > select")));
        c = {
            backgroundOpacity: c,
            textOpacity: d,
            windowOpacity: e,
            edgeStyle: g,
            fontFamily: h,
            color: k,
            backgroundColor: p,
            windowColor: r,
            fontPercent: a
        };
        for (u in c) ("" === c[u] || "none" === c[u] || "fontPercent" === u && 1 === c[u]) && delete c[u];
        return c;
    };
    s.Re = function(a) {
        var c = this.m();
        Y(c.querySelector(".vjs-edge-style select"), a.La);
        Y(c.querySelector(".vjs-font-family select"), a.fontFamily);
        Y(c.querySelector(".vjs-fg-color > select"), a.color);
        Y(c.querySelector(".vjs-text-opacity > select"), a.nd);
        Y(c.querySelector(".vjs-bg-color > select"), a.backgroundColor);
        Y(c.querySelector(".vjs-bg-opacity > select"), a.yc);
        Y(c.querySelector(".window-color > select"), a.fc);
        Y(c.querySelector(".vjs-window-opacity > select"), a.ud);
        (a = a.Qb) && (a = a.toFixed(2));
        Y(c.querySelector(".vjs-font-percent > select"), a);
    };
    s.Ie = function() {
        var a;
        try {
            a = JSON.parse(window.localStorage.getItem("vjs-text-track-settings"));
        } catch (c) {}
        a && this.Re(a);
    };
    s.Je = function() {
        var a;
        if (this.d.options().persistTextTrackSettings) {
            a = this.Lc();
            try {
                t.ib(a) ? window.localStorage.removeItem("vjs-text-track-settings") : window.localStorage.setItem("vjs-text-track-settings", JSON.stringify(a));
            } catch (c) {}
        }
    };
    s.C = function() {
        var a = this.d.ea("textTrackDisplay");
        a && a.C();
    };
    if ("undefined" !== typeof window.JSON && "function" === typeof window.JSON.parse) t.JSON = window.JSON; else {
        t.JSON = {};
        var Z = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        t.JSON.parse = function(a, c) {
            function d(a, e) {
                var k, p, r = a[e];
                if (r && "object" === typeof r) for (k in r) Object.prototype.hasOwnProperty.call(r, k) && (p = d(r, k), 
                p !== b ? r[k] = p : delete r[k]);
                return c.call(a, e, r);
            }
            var e;
            a = String(a);
            Z.lastIndex = 0;
            Z.test(a) && (a = a.replace(Z, function(a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
            }));
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return e = eval("(" + a + ")"), 
            "function" === typeof c ? d({
                "": e
            }, "") : e;
            throw new SyntaxError("JSON.parse(): invalid or malformed JSON data");
        };
    }
    t.xc = function() {
        var a, c, d, e;
        a = document.getElementsByTagName("video");
        c = document.getElementsByTagName("audio");
        var g = [];
        if (a && 0 < a.length) {
            d = 0;
            for (e = a.length; d < e; d++) g.push(a[d]);
        }
        if (c && 0 < c.length) {
            d = 0;
            for (e = c.length; d < e; d++) g.push(c[d]);
        }
        if (g && 0 < g.length) {
            d = 0;
            for (e = g.length; d < e; d++) if ((c = g[d]) && c.getAttribute) c.player === b && (a = c.getAttribute("data-setup"), 
            a !== j && videojs(c)); else {
                t.Ib();
                break;
            }
        } else t.td || t.Ib();
    };
    t.Ib = function() {
        setTimeout(t.xc, 1);
    };
    "complete" === document.readyState ? t.td = f : t.N(window, "load", function() {
        t.td = f;
    });
    t.Ib();
    t.Fe = function(a, c) {
        t.Player.prototype[a] = c;
    };
    var ya = this;
    function $(a, c) {
        var d = a.split("."), e = ya;
        !(d[0] in e) && e.execScript && e.execScript("var " + d[0]);
        for (var g; d.length && (g = d.shift()); ) !d.length && c !== b ? e[g] = c : e = e[g] ? e[g] : e[g] = {};
    }
    $("videojs", t);
    $("_V_", t);
    $("videojs.options", t.options);
    $("videojs.players", t.Aa);
    $("videojs.TOUCH_ENABLED", t.Eb);
    $("videojs.cache", t.ta);
    $("videojs.Component", t.a);
    t.a.prototype.player = t.a.prototype.k;
    t.a.prototype.options = t.a.prototype.options;
    t.a.prototype.init = t.a.prototype.l;
    t.a.prototype.dispose = t.a.prototype.dispose;
    t.a.prototype.createEl = t.a.prototype.e;
    t.a.prototype.contentEl = t.a.prototype.va;
    t.a.prototype.el = t.a.prototype.m;
    t.a.prototype.addChild = t.a.prototype.ba;
    t.a.prototype.getChild = t.a.prototype.ea;
    t.a.prototype.getChildById = t.a.prototype.ae;
    t.a.prototype.children = t.a.prototype.children;
    t.a.prototype.initChildren = t.a.prototype.Oc;
    t.a.prototype.removeChild = t.a.prototype.removeChild;
    t.a.prototype.on = t.a.prototype.b;
    t.a.prototype.off = t.a.prototype.n;
    t.a.prototype.one = t.a.prototype.N;
    t.a.prototype.trigger = t.a.prototype.o;
    t.a.prototype.triggerReady = t.a.prototype.Wa;
    t.a.prototype.show = t.a.prototype.show;
    t.a.prototype.hide = t.a.prototype.Y;
    t.a.prototype.width = t.a.prototype.width;
    t.a.prototype.height = t.a.prototype.height;
    t.a.prototype.dimensions = t.a.prototype.Td;
    t.a.prototype.ready = t.a.prototype.I;
    t.a.prototype.addClass = t.a.prototype.p;
    t.a.prototype.removeClass = t.a.prototype.r;
    t.a.prototype.hasClass = t.a.prototype.Oa;
    t.a.prototype.buildCSSClass = t.a.prototype.V;
    t.a.prototype.localize = t.a.prototype.v;
    t.a.prototype.setInterval = t.a.prototype.setInterval;
    t.a.prototype.setTimeout = t.a.prototype.setTimeout;
    $("videojs.EventEmitter", t.z);
    t.z.prototype.on = t.z.prototype.b;
    t.z.prototype.addEventListener = t.z.prototype.addEventListener;
    t.z.prototype.off = t.z.prototype.n;
    t.z.prototype.removeEventListener = t.z.prototype.removeEventListener;
    t.z.prototype.one = t.z.prototype.N;
    t.z.prototype.trigger = t.z.prototype.o;
    t.z.prototype.dispatchEvent = t.z.prototype.dispatchEvent;
    t.Player.prototype.ended = t.Player.prototype.ended;
    t.Player.prototype.enterFullWindow = t.Player.prototype.Jc;
    t.Player.prototype.exitFullWindow = t.Player.prototype.Nb;
    t.Player.prototype.preload = t.Player.prototype.Qa;
    t.Player.prototype.remainingTime = t.Player.prototype.remainingTime;
    t.Player.prototype.supportsFullScreen = t.Player.prototype.Ta;
    t.Player.prototype.currentType = t.Player.prototype.Qd;
    t.Player.prototype.requestFullScreen = t.Player.prototype.requestFullScreen;
    t.Player.prototype.requestFullscreen = t.Player.prototype.requestFullscreen;
    t.Player.prototype.cancelFullScreen = t.Player.prototype.cancelFullScreen;
    t.Player.prototype.exitFullscreen = t.Player.prototype.exitFullscreen;
    t.Player.prototype.isFullScreen = t.Player.prototype.isFullScreen;
    t.Player.prototype.isFullscreen = t.Player.prototype.isFullscreen;
    t.Player.prototype.textTracks = t.Player.prototype.textTracks;
    t.Player.prototype.remoteTextTracks = t.Player.prototype.Z;
    t.Player.prototype.addTextTrack = t.Player.prototype.addTextTrack;
    t.Player.prototype.addRemoteTextTrack = t.Player.prototype.ia;
    t.Player.prototype.removeRemoteTextTrack = t.Player.prototype.Ba;
    $("videojs.MediaLoader", t.Fd);
    $("videojs.TextTrackDisplay", t.ra);
    $("videojs.ControlBar", t.ub);
    $("videojs.Button", t.w);
    $("videojs.PlayToggle", t.nc);
    $("videojs.FullscreenToggle", t.Za);
    $("videojs.BigPlayButton", t.sb);
    $("videojs.LoadingSpinner", t.lc);
    $("videojs.CurrentTimeDisplay", t.vb);
    $("videojs.DurationDisplay", t.wb);
    $("videojs.TimeDivider", t.tc);
    $("videojs.RemainingTimeDisplay", t.Db);
    $("videojs.LiveDisplay", t.kc);
    $("videojs.ErrorDisplay", t.xb);
    $("videojs.Slider", t.U);
    $("videojs.ProgressControl", t.Cb);
    $("videojs.SeekBar", t.qc);
    $("videojs.LoadProgressBar", t.zb);
    $("videojs.PlayProgressBar", t.mc);
    $("videojs.SeekHandle", t.$a);
    $("videojs.VolumeControl", t.Gb);
    $("videojs.VolumeBar", t.Fb);
    $("videojs.VolumeLevel", t.uc);
    $("videojs.VolumeMenuButton", t.Fa);
    $("videojs.VolumeHandle", t.Hb);
    $("videojs.MuteToggle", t.qa);
    $("videojs.PosterImage", t.pc);
    $("videojs.Menu", t.pa);
    $("videojs.MenuItem", t.M);
    $("videojs.MenuButton", t.O);
    $("videojs.PlaybackRateMenuButton", t.oc);
    $("videojs.ChaptersTrackMenuItem", t.Ya);
    $("videojs.TextTrackButton", t.Q);
    $("videojs.TextTrackMenuItem", t.aa);
    $("videojs.OffTextTrackMenuItem", t.Ab);
    $("videojs.CaptionSettingsMenuItem", t.tb);
    t.O.prototype.createItems = t.O.prototype.Ia;
    t.Q.prototype.createItems = t.Q.prototype.Ia;
    t.Xa.prototype.createItems = t.Xa.prototype.Ia;
    $("videojs.SubtitlesButton", t.ab);
    $("videojs.CaptionsButton", t.na);
    $("videojs.ChaptersButton", t.Xa);
    $("videojs.MediaTechController", t.j);
    t.j.withSourceHandlers = t.j.gc;
    t.j.prototype.featuresVolumeControl = t.j.prototype.uf;
    t.j.prototype.featuresFullscreenResize = t.j.prototype.qf;
    t.j.prototype.featuresPlaybackRate = t.j.prototype.rf;
    t.j.prototype.featuresProgressEvents = t.j.prototype.sf;
    t.j.prototype.featuresTimeupdateEvents = t.j.prototype.tf;
    t.j.prototype.setPoster = t.j.prototype.fd;
    t.j.prototype.textTracks = t.j.prototype.textTracks;
    t.j.prototype.remoteTextTracks = t.j.prototype.Z;
    t.j.prototype.addTextTrack = t.j.prototype.addTextTrack;
    t.j.prototype.addRemoteTextTrack = t.j.prototype.ia;
    t.j.prototype.removeRemoteTextTrack = t.j.prototype.Ba;
    $("videojs.Html5", t.f);
    t.f.Events = t.f.yb;
    t.f.isSupported = t.f.isSupported;
    t.f.canPlaySource = t.f.zc;
    t.f.patchCanPlayType = t.f.Xc;
    t.f.unpatchCanPlayType = t.f.bf;
    t.f.prototype.setCurrentTime = t.f.prototype.bc;
    t.f.prototype.setVolume = t.f.prototype.Se;
    t.f.prototype.setMuted = t.f.prototype.Oe;
    t.f.prototype.setPreload = t.f.prototype.Qe;
    t.f.prototype.setAutoplay = t.f.prototype.Le;
    t.f.prototype.setLoop = t.f.prototype.Ne;
    t.f.prototype.enterFullScreen = t.f.prototype.Ic;
    t.f.prototype.exitFullScreen = t.f.prototype.Xd;
    t.f.prototype.playbackRate = t.f.prototype.playbackRate;
    t.f.prototype.setPlaybackRate = t.f.prototype.Pe;
    t.f.registerSourceHandler = t.f.Ra;
    t.f.selectSourceHandler = t.f.pb;
    t.f.prototype.setSource = t.f.prototype.Sa;
    t.f.prototype.disposeSourceHandler = t.f.prototype.Ka;
    t.f.prototype.textTracks = t.f.prototype.textTracks;
    t.f.prototype.remoteTextTracks = t.f.prototype.Z;
    t.f.prototype.addTextTrack = t.f.prototype.addTextTrack;
    t.f.prototype.addRemoteTextTrack = t.f.prototype.ia;
    t.f.prototype.removeRemoteTextTrack = t.f.prototype.Ba;
    $("videojs.Flash", t.g);
    t.g.isSupported = t.g.isSupported;
    t.g.canPlaySource = t.g.zc;
    t.g.onReady = t.g.onReady;
    t.g.embed = t.g.Hc;
    t.g.version = t.g.version;
    t.g.prototype.setSource = t.g.prototype.Sa;
    t.g.registerSourceHandler = t.g.Ra;
    t.g.selectSourceHandler = t.g.pb;
    t.g.prototype.setSource = t.g.prototype.Sa;
    t.g.prototype.disposeSourceHandler = t.g.prototype.Ka;
    $("videojs.TextTrack", t.t);
    $("videojs.TextTrackList", t.F);
    $("videojs.TextTrackCueList", t.W);
    $("videojs.TextTrackSettings", t.sc);
    t.t.prototype.id = t.t.prototype.id;
    t.t.prototype.label = t.t.prototype.label;
    t.t.prototype.kind = t.t.prototype.Wb;
    t.t.prototype.mode = t.t.prototype.mode;
    t.t.prototype.cues = t.t.prototype.Dc;
    t.t.prototype.activeCues = t.t.prototype.nf;
    t.t.prototype.addCue = t.t.prototype.vc;
    t.t.prototype.removeCue = t.t.prototype.bd;
    t.F.prototype.getTrackById = t.F.prototype.de;
    t.W.prototype.getCueById = t.F.prototype.be;
    $("videojs.CaptionsTrack", t.gf);
    $("videojs.SubtitlesTrack", t.mf);
    $("videojs.ChaptersTrack", t.hf);
    $("videojs.autoSetup", t.xc);
    $("videojs.plugin", t.Fe);
    $("videojs.createTimeRange", t.Lb);
    $("videojs.util", t.$);
    t.$.mergeOptions = t.$.ya;
    t.addLanguage = t.Jd;
})();

!function(a) {
    var b = a.vttjs = {}, c = b.VTTCue, d = b.VTTRegion, e = a.VTTCue, f = a.VTTRegion;
    b.shim = function() {
        b.VTTCue = c, b.VTTRegion = d;
    }, b.restore = function() {
        b.VTTCue = e, b.VTTRegion = f;
    };
}(this), function(a, b) {
    function c(a) {
        if ("string" != typeof a) return !1;
        var b = h[a.toLowerCase()];
        return b ? a.toLowerCase() : !1;
    }
    function d(a) {
        if ("string" != typeof a) return !1;
        var b = i[a.toLowerCase()];
        return b ? a.toLowerCase() : !1;
    }
    function e(a) {
        for (var b = 1; b < arguments.length; b++) {
            var c = arguments[b];
            for (var d in c) a[d] = c[d];
        }
        return a;
    }
    function f(a, b, f) {
        var h = this, i = /MSIE\s8\.0/.test(navigator.userAgent), j = {};
        i ? h = document.createElement("custom") : j.enumerable = !0, h.hasBeenReset = !1;
        var k = "", l = !1, m = a, n = b, o = f, p = null, q = "", r = !0, s = "auto", t = "start", u = 50, v = "middle", w = 50, x = "middle";
        return Object.defineProperty(h, "id", e({}, j, {
            get: function() {
                return k;
            },
            set: function(a) {
                k = "" + a;
            }
        })), Object.defineProperty(h, "pauseOnExit", e({}, j, {
            get: function() {
                return l;
            },
            set: function(a) {
                l = !!a;
            }
        })), Object.defineProperty(h, "startTime", e({}, j, {
            get: function() {
                return m;
            },
            set: function(a) {
                if ("number" != typeof a) throw new TypeError("Start time must be set to a number.");
                m = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "endTime", e({}, j, {
            get: function() {
                return n;
            },
            set: function(a) {
                if ("number" != typeof a) throw new TypeError("End time must be set to a number.");
                n = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "text", e({}, j, {
            get: function() {
                return o;
            },
            set: function(a) {
                o = "" + a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "region", e({}, j, {
            get: function() {
                return p;
            },
            set: function(a) {
                p = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "vertical", e({}, j, {
            get: function() {
                return q;
            },
            set: function(a) {
                var b = c(a);
                if (b === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                q = b, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "snapToLines", e({}, j, {
            get: function() {
                return r;
            },
            set: function(a) {
                r = !!a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "line", e({}, j, {
            get: function() {
                return s;
            },
            set: function(a) {
                if ("number" != typeof a && a !== g) throw new SyntaxError("An invalid number or illegal string was specified.");
                s = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "lineAlign", e({}, j, {
            get: function() {
                return t;
            },
            set: function(a) {
                var b = d(a);
                if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                t = b, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "position", e({}, j, {
            get: function() {
                return u;
            },
            set: function(a) {
                if (0 > a || a > 100) throw new Error("Position must be between 0 and 100.");
                u = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "positionAlign", e({}, j, {
            get: function() {
                return v;
            },
            set: function(a) {
                var b = d(a);
                if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                v = b, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "size", e({}, j, {
            get: function() {
                return w;
            },
            set: function(a) {
                if (0 > a || a > 100) throw new Error("Size must be between 0 and 100.");
                w = a, this.hasBeenReset = !0;
            }
        })), Object.defineProperty(h, "align", e({}, j, {
            get: function() {
                return x;
            },
            set: function(a) {
                var b = d(a);
                if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                x = b, this.hasBeenReset = !0;
            }
        })), h.displayState = void 0, i ? h : void 0;
    }
    var g = "auto", h = {
        "": !0,
        lr: !0,
        rl: !0
    }, i = {
        start: !0,
        middle: !0,
        end: !0,
        left: !0,
        right: !0
    };
    f.prototype.getCueAsHTML = function() {
        return WebVTT.convertCueToDOMTree(window, this.text);
    }, a.VTTCue = a.VTTCue || f, b.VTTCue = f;
}(this, this.vttjs || {}), function(a, b) {
    function c(a) {
        if ("string" != typeof a) return !1;
        var b = f[a.toLowerCase()];
        return b ? a.toLowerCase() : !1;
    }
    function d(a) {
        return "number" == typeof a && a >= 0 && 100 >= a;
    }
    function e() {
        var a = 100, b = 3, e = 0, f = 100, g = 0, h = 100, i = "";
        Object.defineProperties(this, {
            width: {
                enumerable: !0,
                get: function() {
                    return a;
                },
                set: function(b) {
                    if (!d(b)) throw new Error("Width must be between 0 and 100.");
                    a = b;
                }
            },
            lines: {
                enumerable: !0,
                get: function() {
                    return b;
                },
                set: function(a) {
                    if ("number" != typeof a) throw new TypeError("Lines must be set to a number.");
                    b = a;
                }
            },
            regionAnchorY: {
                enumerable: !0,
                get: function() {
                    return f;
                },
                set: function(a) {
                    if (!d(a)) throw new Error("RegionAnchorX must be between 0 and 100.");
                    f = a;
                }
            },
            regionAnchorX: {
                enumerable: !0,
                get: function() {
                    return e;
                },
                set: function(a) {
                    if (!d(a)) throw new Error("RegionAnchorY must be between 0 and 100.");
                    e = a;
                }
            },
            viewportAnchorY: {
                enumerable: !0,
                get: function() {
                    return h;
                },
                set: function(a) {
                    if (!d(a)) throw new Error("ViewportAnchorY must be between 0 and 100.");
                    h = a;
                }
            },
            viewportAnchorX: {
                enumerable: !0,
                get: function() {
                    return g;
                },
                set: function(a) {
                    if (!d(a)) throw new Error("ViewportAnchorX must be between 0 and 100.");
                    g = a;
                }
            },
            scroll: {
                enumerable: !0,
                get: function() {
                    return i;
                },
                set: function(a) {
                    var b = c(a);
                    if (b === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                    i = b;
                }
            }
        });
    }
    var f = {
        "": !0,
        up: !0
    };
    a.VTTRegion = a.VTTRegion || e, b.VTTRegion = e;
}(this, this.vttjs || {}), function(a) {
    function b(a, b) {
        this.name = "ParsingError", this.code = a.code, this.message = b || a.message;
    }
    function c(a) {
        function b(a, b, c, d) {
            return 3600 * (0 | a) + 60 * (0 | b) + (0 | c) + (0 | d) / 1e3;
        }
        var c = a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
        return c ? c[3] ? b(c[1], c[2], c[3].replace(":", ""), c[4]) : c[1] > 59 ? b(c[1], c[2], 0, c[4]) : b(0, c[1], c[2], c[4]) : null;
    }
    function d() {
        this.values = o(null);
    }
    function e(a, b, c, d) {
        var e = d ? a.split(d) : [ a ];
        for (var f in e) if ("string" == typeof e[f]) {
            var g = e[f].split(c);
            if (2 === g.length) {
                var h = g[0], i = g[1];
                b(h, i);
            }
        }
    }
    function f(a, f, g) {
        function h() {
            var d = c(a);
            if (null === d) throw new b(b.Errors.BadTimeStamp, "Malformed timestamp: " + k);
            return a = a.replace(/^[^\sa-zA-Z-]+/, ""), d;
        }
        function i(a, b) {
            var c = new d();
            e(a, function(a, b) {
                switch (a) {
                  case "region":
                    for (var d = g.length - 1; d >= 0; d--) if (g[d].id === b) {
                        c.set(a, g[d].region);
                        break;
                    }
                    break;

                  case "vertical":
                    c.alt(a, b, [ "rl", "lr" ]);
                    break;

                  case "line":
                    var e = b.split(","), f = e[0];
                    c.integer(a, f), c.percent(a, f) ? c.set("snapToLines", !1) : null, c.alt(a, f, [ "auto" ]), 
                    2 === e.length && c.alt("lineAlign", e[1], [ "start", "middle", "end" ]);
                    break;

                  case "position":
                    e = b.split(","), c.percent(a, e[0]), 2 === e.length && c.alt("positionAlign", e[1], [ "start", "middle", "end" ]);
                    break;

                  case "size":
                    c.percent(a, b);
                    break;

                  case "align":
                    c.alt(a, b, [ "start", "middle", "end", "left", "right" ]);
                }
            }, /:/, /\s/), b.region = c.get("region", null), b.vertical = c.get("vertical", ""), 
            b.line = c.get("line", "auto"), b.lineAlign = c.get("lineAlign", "start"), b.snapToLines = c.get("snapToLines", !0), 
            b.size = c.get("size", 100), b.align = c.get("align", "middle"), b.position = c.get("position", {
                start: 0,
                left: 0,
                middle: 50,
                end: 100,
                right: 100
            }, b.align), b.positionAlign = c.get("positionAlign", {
                start: "start",
                left: "start",
                middle: "middle",
                end: "end",
                right: "end"
            }, b.align);
        }
        function j() {
            a = a.replace(/^\s+/, "");
        }
        var k = a;
        if (j(), f.startTime = h(), j(), "--\x3e" !== a.substr(0, 3)) throw new b(b.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '--\x3e'): " + k);
        a = a.substr(3), j(), f.endTime = h(), j(), i(a, f);
    }
    function g(a, b) {
        function d() {
            function a(a) {
                return b = b.substr(a.length), a;
            }
            if (!b) return null;
            var c = b.match(/^([^<]*)(<[^>]+>?)?/);
            return a(c[1] ? c[1] : c[2]);
        }
        function e(a) {
            return p[a];
        }
        function f(a) {
            for (;o = a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/); ) a = a.replace(o[0], e);
            return a;
        }
        function g(a, b) {
            return !s[b.localName] || s[b.localName] === a.localName;
        }
        function h(b, c) {
            var d = q[b];
            if (!d) return null;
            var e = a.document.createElement(d);
            e.localName = d;
            var f = r[b];
            return f && c && (e[f] = c.trim()), e;
        }
        for (var i, j = a.document.createElement("div"), k = j, l = []; null !== (i = d()); ) if ("<" !== i[0]) k.appendChild(a.document.createTextNode(f(i))); else {
            if ("/" === i[1]) {
                l.length && l[l.length - 1] === i.substr(2).replace(">", "") && (l.pop(), k = k.parentNode);
                continue;
            }
            var m, n = c(i.substr(1, i.length - 2));
            if (n) {
                m = a.document.createProcessingInstruction("timestamp", n), k.appendChild(m);
                continue;
            }
            var o = i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
            if (!o) continue;
            if (m = h(o[1], o[3]), !m) continue;
            if (!g(k, m)) continue;
            o[2] && (m.className = o[2].substr(1).replace(".", " ")), l.push(o[1]), k.appendChild(m), 
            k = m;
        }
        return j;
    }
    function h(a) {
        function b(a, b) {
            for (var c = b.childNodes.length - 1; c >= 0; c--) a.push(b.childNodes[c]);
        }
        function c(a) {
            if (!a || !a.length) return null;
            var d = a.pop(), e = d.textContent || d.innerText;
            if (e) {
                var f = e.match(/^.*(\n|\r)/);
                return f ? (a.length = 0, f[0]) : e;
            }
            return "ruby" === d.tagName ? c(a) : d.childNodes ? (b(a, d), c(a)) : void 0;
        }
        var d, e = [], f = "";
        if (!a || !a.childNodes) return "ltr";
        for (b(e, a); f = c(e); ) for (var g = 0; g < f.length; g++) {
            d = f.charCodeAt(g);
            for (var h = 0; h < t.length; h++) if (t[h] === d) return "rtl";
        }
        return "ltr";
    }
    function i(a) {
        if ("number" == typeof a.line && (a.snapToLines || a.line >= 0 && a.line <= 100)) return a.line;
        if (!a.track || !a.track.textTrackList || !a.track.textTrackList.mediaElement) return -1;
        for (var b = a.track, c = b.textTrackList, d = 0, e = 0; e < c.length && c[e] !== b; e++) "showing" === c[e].mode && d++;
        return -1 * ++d;
    }
    function j() {}
    function k(a, b, c) {
        var d = /MSIE\s8\.0/.test(navigator.userAgent), e = "rgba(255, 255, 255, 1)", f = "rgba(0, 0, 0, 0.8)";
        d && (e = "rgb(255, 255, 255)", f = "rgb(0, 0, 0)"), j.call(this), this.cue = b, 
        this.cueDiv = g(a, b.text);
        var i = {
            color: e,
            backgroundColor: f,
            position: "relative",
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            display: "inline"
        };
        d || (i.writingMode = "" === b.vertical ? "horizontal-tb" : "lr" === b.vertical ? "vertical-lr" : "vertical-rl", 
        i.unicodeBidi = "plaintext"), this.applyStyles(i, this.cueDiv), this.div = a.document.createElement("div"), 
        i = {
            textAlign: "middle" === b.align ? "center" : b.align,
            font: c.font,
            whiteSpace: "pre-line",
            position: "absolute"
        }, d || (i.direction = h(this.cueDiv), i.writingMode = "" === b.vertical ? "horizontal-tb" : "lr" === b.vertical ? "vertical-lr" : "vertical-rl".stylesunicodeBidi = "plaintext"), 
        this.applyStyles(i), this.div.appendChild(this.cueDiv);
        var k = 0;
        switch (b.positionAlign) {
          case "start":
            k = b.position;
            break;

          case "middle":
            k = b.position - b.size / 2;
            break;

          case "end":
            k = b.position - b.size;
        }
        this.applyStyles("" === b.vertical ? {
            left: this.formatStyle(k, "%"),
            width: this.formatStyle(b.size, "%")
        } : {
            top: this.formatStyle(k, "%"),
            height: this.formatStyle(b.size, "%")
        }), this.move = function(a) {
            this.applyStyles({
                top: this.formatStyle(a.top, "px"),
                bottom: this.formatStyle(a.bottom, "px"),
                left: this.formatStyle(a.left, "px"),
                right: this.formatStyle(a.right, "px"),
                height: this.formatStyle(a.height, "px"),
                width: this.formatStyle(a.width, "px")
            });
        };
    }
    function l(a) {
        var b, c, d, e, f = /MSIE\s8\.0/.test(navigator.userAgent);
        if (a.div) {
            c = a.div.offsetHeight, d = a.div.offsetWidth, e = a.div.offsetTop;
            var g = (g = a.div.childNodes) && (g = g[0]) && g.getClientRects && g.getClientRects();
            a = a.div.getBoundingClientRect(), b = g ? Math.max(g[0] && g[0].height || 0, a.height / g.length) : 0;
        }
        this.left = a.left, this.right = a.right, this.top = a.top || e, this.height = a.height || c, 
        this.bottom = a.bottom || e + (a.height || c), this.width = a.width || d, this.lineHeight = void 0 !== b ? b : a.lineHeight, 
        f && !this.lineHeight && (this.lineHeight = 13);
    }
    function m(a, b, c, d) {
        function e(a, b) {
            for (var e, f = new l(a), g = 1, h = 0; h < b.length; h++) {
                for (;a.overlapsOppositeAxis(c, b[h]) || a.within(c) && a.overlapsAny(d); ) a.move(b[h]);
                if (a.within(c)) return a;
                var i = a.intersectPercentage(c);
                g > i && (e = new l(a), g = i), a = new l(f);
            }
            return e || f;
        }
        var f = new l(b), g = b.cue, h = i(g), j = [];
        if (g.snapToLines) {
            var k;
            switch (g.vertical) {
              case "":
                j = [ "+y", "-y" ], k = "height";
                break;

              case "rl":
                j = [ "+x", "-x" ], k = "width";
                break;

              case "lr":
                j = [ "-x", "+x" ], k = "width";
            }
            var m = f.lineHeight, n = m * Math.round(h), o = c[k] + m, p = j[0];
            Math.abs(n) > o && (n = 0 > n ? -1 : 1, n *= Math.ceil(o / m) * m), 0 > h && (n += "" === g.vertical ? c.height : c.width, 
            j = j.reverse()), f.move(p, n);
        } else {
            var q = f.lineHeight / c.height * 100;
            switch (g.lineAlign) {
              case "middle":
                h -= q / 2;
                break;

              case "end":
                h -= q;
            }
            switch (g.vertical) {
              case "":
                b.applyStyles({
                    top: b.formatStyle(h, "%")
                });
                break;

              case "rl":
                b.applyStyles({
                    left: b.formatStyle(h, "%")
                });
                break;

              case "lr":
                b.applyStyles({
                    right: b.formatStyle(h, "%")
                });
            }
            j = [ "+y", "-x", "+x", "-y" ], f = new l(b);
        }
        var r = e(f, j);
        b.move(r.toCSSCompatValues(c));
    }
    function n() {}
    var o = Object.create || function() {
        function a() {}
        return function(b) {
            if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter.");
            return a.prototype = b, new a();
        };
    }();
    b.prototype = o(Error.prototype), b.prototype.constructor = b, b.Errors = {
        BadSignature: {
            code: 0,
            message: "Malformed WebVTT signature."
        },
        BadTimeStamp: {
            code: 1,
            message: "Malformed time stamp."
        }
    }, d.prototype = {
        set: function(a, b) {
            this.get(a) || "" === b || (this.values[a] = b);
        },
        get: function(a, b, c) {
            return c ? this.has(a) ? this.values[a] : b[c] : this.has(a) ? this.values[a] : b;
        },
        has: function(a) {
            return a in this.values;
        },
        alt: function(a, b, c) {
            for (var d = 0; d < c.length; ++d) if (b === c[d]) {
                this.set(a, b);
                break;
            }
        },
        integer: function(a, b) {
            /^-?\d+$/.test(b) && this.set(a, parseInt(b, 10));
        },
        percent: function(a, b) {
            var c;
            return (c = b.match(/^([\d]{1,3})(\.[\d]*)?%$/)) && (b = parseFloat(b), b >= 0 && 100 >= b) ? (this.set(a, b), 
            !0) : !1;
        }
    };
    var p = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&lrm;": "‎",
        "&rlm;": "‏",
        "&nbsp;": " "
    }, q = {
        c: "span",
        i: "i",
        b: "b",
        u: "u",
        ruby: "ruby",
        rt: "rt",
        v: "span",
        lang: "span"
    }, r = {
        v: "title",
        lang: "lang"
    }, s = {
        rt: "ruby"
    }, t = [ 1470, 1472, 1475, 1478, 1488, 1489, 1490, 1491, 1492, 1493, 1494, 1495, 1496, 1497, 1498, 1499, 1500, 1501, 1502, 1503, 1504, 1505, 1506, 1507, 1508, 1509, 1510, 1511, 1512, 1513, 1514, 1520, 1521, 1522, 1523, 1524, 1544, 1547, 1549, 1563, 1566, 1567, 1568, 1569, 1570, 1571, 1572, 1573, 1574, 1575, 1576, 1577, 1578, 1579, 1580, 1581, 1582, 1583, 1584, 1585, 1586, 1587, 1588, 1589, 1590, 1591, 1592, 1593, 1594, 1595, 1596, 1597, 1598, 1599, 1600, 1601, 1602, 1603, 1604, 1605, 1606, 1607, 1608, 1609, 1610, 1645, 1646, 1647, 1649, 1650, 1651, 1652, 1653, 1654, 1655, 1656, 1657, 1658, 1659, 1660, 1661, 1662, 1663, 1664, 1665, 1666, 1667, 1668, 1669, 1670, 1671, 1672, 1673, 1674, 1675, 1676, 1677, 1678, 1679, 1680, 1681, 1682, 1683, 1684, 1685, 1686, 1687, 1688, 1689, 1690, 1691, 1692, 1693, 1694, 1695, 1696, 1697, 1698, 1699, 1700, 1701, 1702, 1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712, 1713, 1714, 1715, 1716, 1717, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1727, 1728, 1729, 1730, 1731, 1732, 1733, 1734, 1735, 1736, 1737, 1738, 1739, 1740, 1741, 1742, 1743, 1744, 1745, 1746, 1747, 1748, 1749, 1765, 1766, 1774, 1775, 1786, 1787, 1788, 1789, 1790, 1791, 1792, 1793, 1794, 1795, 1796, 1797, 1798, 1799, 1800, 1801, 1802, 1803, 1804, 1805, 1807, 1808, 1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1819, 1820, 1821, 1822, 1823, 1824, 1825, 1826, 1827, 1828, 1829, 1830, 1831, 1832, 1833, 1834, 1835, 1836, 1837, 1838, 1839, 1869, 1870, 1871, 1872, 1873, 1874, 1875, 1876, 1877, 1878, 1879, 1880, 1881, 1882, 1883, 1884, 1885, 1886, 1887, 1888, 1889, 1890, 1891, 1892, 1893, 1894, 1895, 1896, 1897, 1898, 1899, 1900, 1901, 1902, 1903, 1904, 1905, 1906, 1907, 1908, 1909, 1910, 1911, 1912, 1913, 1914, 1915, 1916, 1917, 1918, 1919, 1920, 1921, 1922, 1923, 1924, 1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1969, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2e3, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2036, 2037, 2042, 2048, 2049, 2050, 2051, 2052, 2053, 2054, 2055, 2056, 2057, 2058, 2059, 2060, 2061, 2062, 2063, 2064, 2065, 2066, 2067, 2068, 2069, 2074, 2084, 2088, 2096, 2097, 2098, 2099, 2100, 2101, 2102, 2103, 2104, 2105, 2106, 2107, 2108, 2109, 2110, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2124, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2136, 2142, 2208, 2210, 2211, 2212, 2213, 2214, 2215, 2216, 2217, 2218, 2219, 2220, 8207, 64285, 64287, 64288, 64289, 64290, 64291, 64292, 64293, 64294, 64295, 64296, 64298, 64299, 64300, 64301, 64302, 64303, 64304, 64305, 64306, 64307, 64308, 64309, 64310, 64312, 64313, 64314, 64315, 64316, 64318, 64320, 64321, 64323, 64324, 64326, 64327, 64328, 64329, 64330, 64331, 64332, 64333, 64334, 64335, 64336, 64337, 64338, 64339, 64340, 64341, 64342, 64343, 64344, 64345, 64346, 64347, 64348, 64349, 64350, 64351, 64352, 64353, 64354, 64355, 64356, 64357, 64358, 64359, 64360, 64361, 64362, 64363, 64364, 64365, 64366, 64367, 64368, 64369, 64370, 64371, 64372, 64373, 64374, 64375, 64376, 64377, 64378, 64379, 64380, 64381, 64382, 64383, 64384, 64385, 64386, 64387, 64388, 64389, 64390, 64391, 64392, 64393, 64394, 64395, 64396, 64397, 64398, 64399, 64400, 64401, 64402, 64403, 64404, 64405, 64406, 64407, 64408, 64409, 64410, 64411, 64412, 64413, 64414, 64415, 64416, 64417, 64418, 64419, 64420, 64421, 64422, 64423, 64424, 64425, 64426, 64427, 64428, 64429, 64430, 64431, 64432, 64433, 64434, 64435, 64436, 64437, 64438, 64439, 64440, 64441, 64442, 64443, 64444, 64445, 64446, 64447, 64448, 64449, 64467, 64468, 64469, 64470, 64471, 64472, 64473, 64474, 64475, 64476, 64477, 64478, 64479, 64480, 64481, 64482, 64483, 64484, 64485, 64486, 64487, 64488, 64489, 64490, 64491, 64492, 64493, 64494, 64495, 64496, 64497, 64498, 64499, 64500, 64501, 64502, 64503, 64504, 64505, 64506, 64507, 64508, 64509, 64510, 64511, 64512, 64513, 64514, 64515, 64516, 64517, 64518, 64519, 64520, 64521, 64522, 64523, 64524, 64525, 64526, 64527, 64528, 64529, 64530, 64531, 64532, 64533, 64534, 64535, 64536, 64537, 64538, 64539, 64540, 64541, 64542, 64543, 64544, 64545, 64546, 64547, 64548, 64549, 64550, 64551, 64552, 64553, 64554, 64555, 64556, 64557, 64558, 64559, 64560, 64561, 64562, 64563, 64564, 64565, 64566, 64567, 64568, 64569, 64570, 64571, 64572, 64573, 64574, 64575, 64576, 64577, 64578, 64579, 64580, 64581, 64582, 64583, 64584, 64585, 64586, 64587, 64588, 64589, 64590, 64591, 64592, 64593, 64594, 64595, 64596, 64597, 64598, 64599, 64600, 64601, 64602, 64603, 64604, 64605, 64606, 64607, 64608, 64609, 64610, 64611, 64612, 64613, 64614, 64615, 64616, 64617, 64618, 64619, 64620, 64621, 64622, 64623, 64624, 64625, 64626, 64627, 64628, 64629, 64630, 64631, 64632, 64633, 64634, 64635, 64636, 64637, 64638, 64639, 64640, 64641, 64642, 64643, 64644, 64645, 64646, 64647, 64648, 64649, 64650, 64651, 64652, 64653, 64654, 64655, 64656, 64657, 64658, 64659, 64660, 64661, 64662, 64663, 64664, 64665, 64666, 64667, 64668, 64669, 64670, 64671, 64672, 64673, 64674, 64675, 64676, 64677, 64678, 64679, 64680, 64681, 64682, 64683, 64684, 64685, 64686, 64687, 64688, 64689, 64690, 64691, 64692, 64693, 64694, 64695, 64696, 64697, 64698, 64699, 64700, 64701, 64702, 64703, 64704, 64705, 64706, 64707, 64708, 64709, 64710, 64711, 64712, 64713, 64714, 64715, 64716, 64717, 64718, 64719, 64720, 64721, 64722, 64723, 64724, 64725, 64726, 64727, 64728, 64729, 64730, 64731, 64732, 64733, 64734, 64735, 64736, 64737, 64738, 64739, 64740, 64741, 64742, 64743, 64744, 64745, 64746, 64747, 64748, 64749, 64750, 64751, 64752, 64753, 64754, 64755, 64756, 64757, 64758, 64759, 64760, 64761, 64762, 64763, 64764, 64765, 64766, 64767, 64768, 64769, 64770, 64771, 64772, 64773, 64774, 64775, 64776, 64777, 64778, 64779, 64780, 64781, 64782, 64783, 64784, 64785, 64786, 64787, 64788, 64789, 64790, 64791, 64792, 64793, 64794, 64795, 64796, 64797, 64798, 64799, 64800, 64801, 64802, 64803, 64804, 64805, 64806, 64807, 64808, 64809, 64810, 64811, 64812, 64813, 64814, 64815, 64816, 64817, 64818, 64819, 64820, 64821, 64822, 64823, 64824, 64825, 64826, 64827, 64828, 64829, 64848, 64849, 64850, 64851, 64852, 64853, 64854, 64855, 64856, 64857, 64858, 64859, 64860, 64861, 64862, 64863, 64864, 64865, 64866, 64867, 64868, 64869, 64870, 64871, 64872, 64873, 64874, 64875, 64876, 64877, 64878, 64879, 64880, 64881, 64882, 64883, 64884, 64885, 64886, 64887, 64888, 64889, 64890, 64891, 64892, 64893, 64894, 64895, 64896, 64897, 64898, 64899, 64900, 64901, 64902, 64903, 64904, 64905, 64906, 64907, 64908, 64909, 64910, 64911, 64914, 64915, 64916, 64917, 64918, 64919, 64920, 64921, 64922, 64923, 64924, 64925, 64926, 64927, 64928, 64929, 64930, 64931, 64932, 64933, 64934, 64935, 64936, 64937, 64938, 64939, 64940, 64941, 64942, 64943, 64944, 64945, 64946, 64947, 64948, 64949, 64950, 64951, 64952, 64953, 64954, 64955, 64956, 64957, 64958, 64959, 64960, 64961, 64962, 64963, 64964, 64965, 64966, 64967, 65008, 65009, 65010, 65011, 65012, 65013, 65014, 65015, 65016, 65017, 65018, 65019, 65020, 65136, 65137, 65138, 65139, 65140, 65142, 65143, 65144, 65145, 65146, 65147, 65148, 65149, 65150, 65151, 65152, 65153, 65154, 65155, 65156, 65157, 65158, 65159, 65160, 65161, 65162, 65163, 65164, 65165, 65166, 65167, 65168, 65169, 65170, 65171, 65172, 65173, 65174, 65175, 65176, 65177, 65178, 65179, 65180, 65181, 65182, 65183, 65184, 65185, 65186, 65187, 65188, 65189, 65190, 65191, 65192, 65193, 65194, 65195, 65196, 65197, 65198, 65199, 65200, 65201, 65202, 65203, 65204, 65205, 65206, 65207, 65208, 65209, 65210, 65211, 65212, 65213, 65214, 65215, 65216, 65217, 65218, 65219, 65220, 65221, 65222, 65223, 65224, 65225, 65226, 65227, 65228, 65229, 65230, 65231, 65232, 65233, 65234, 65235, 65236, 65237, 65238, 65239, 65240, 65241, 65242, 65243, 65244, 65245, 65246, 65247, 65248, 65249, 65250, 65251, 65252, 65253, 65254, 65255, 65256, 65257, 65258, 65259, 65260, 65261, 65262, 65263, 65264, 65265, 65266, 65267, 65268, 65269, 65270, 65271, 65272, 65273, 65274, 65275, 65276, 67584, 67585, 67586, 67587, 67588, 67589, 67592, 67594, 67595, 67596, 67597, 67598, 67599, 67600, 67601, 67602, 67603, 67604, 67605, 67606, 67607, 67608, 67609, 67610, 67611, 67612, 67613, 67614, 67615, 67616, 67617, 67618, 67619, 67620, 67621, 67622, 67623, 67624, 67625, 67626, 67627, 67628, 67629, 67630, 67631, 67632, 67633, 67634, 67635, 67636, 67637, 67639, 67640, 67644, 67647, 67648, 67649, 67650, 67651, 67652, 67653, 67654, 67655, 67656, 67657, 67658, 67659, 67660, 67661, 67662, 67663, 67664, 67665, 67666, 67667, 67668, 67669, 67671, 67672, 67673, 67674, 67675, 67676, 67677, 67678, 67679, 67840, 67841, 67842, 67843, 67844, 67845, 67846, 67847, 67848, 67849, 67850, 67851, 67852, 67853, 67854, 67855, 67856, 67857, 67858, 67859, 67860, 67861, 67862, 67863, 67864, 67865, 67866, 67867, 67872, 67873, 67874, 67875, 67876, 67877, 67878, 67879, 67880, 67881, 67882, 67883, 67884, 67885, 67886, 67887, 67888, 67889, 67890, 67891, 67892, 67893, 67894, 67895, 67896, 67897, 67903, 67968, 67969, 67970, 67971, 67972, 67973, 67974, 67975, 67976, 67977, 67978, 67979, 67980, 67981, 67982, 67983, 67984, 67985, 67986, 67987, 67988, 67989, 67990, 67991, 67992, 67993, 67994, 67995, 67996, 67997, 67998, 67999, 68e3, 68001, 68002, 68003, 68004, 68005, 68006, 68007, 68008, 68009, 68010, 68011, 68012, 68013, 68014, 68015, 68016, 68017, 68018, 68019, 68020, 68021, 68022, 68023, 68030, 68031, 68096, 68112, 68113, 68114, 68115, 68117, 68118, 68119, 68121, 68122, 68123, 68124, 68125, 68126, 68127, 68128, 68129, 68130, 68131, 68132, 68133, 68134, 68135, 68136, 68137, 68138, 68139, 68140, 68141, 68142, 68143, 68144, 68145, 68146, 68147, 68160, 68161, 68162, 68163, 68164, 68165, 68166, 68167, 68176, 68177, 68178, 68179, 68180, 68181, 68182, 68183, 68184, 68192, 68193, 68194, 68195, 68196, 68197, 68198, 68199, 68200, 68201, 68202, 68203, 68204, 68205, 68206, 68207, 68208, 68209, 68210, 68211, 68212, 68213, 68214, 68215, 68216, 68217, 68218, 68219, 68220, 68221, 68222, 68223, 68352, 68353, 68354, 68355, 68356, 68357, 68358, 68359, 68360, 68361, 68362, 68363, 68364, 68365, 68366, 68367, 68368, 68369, 68370, 68371, 68372, 68373, 68374, 68375, 68376, 68377, 68378, 68379, 68380, 68381, 68382, 68383, 68384, 68385, 68386, 68387, 68388, 68389, 68390, 68391, 68392, 68393, 68394, 68395, 68396, 68397, 68398, 68399, 68400, 68401, 68402, 68403, 68404, 68405, 68416, 68417, 68418, 68419, 68420, 68421, 68422, 68423, 68424, 68425, 68426, 68427, 68428, 68429, 68430, 68431, 68432, 68433, 68434, 68435, 68436, 68437, 68440, 68441, 68442, 68443, 68444, 68445, 68446, 68447, 68448, 68449, 68450, 68451, 68452, 68453, 68454, 68455, 68456, 68457, 68458, 68459, 68460, 68461, 68462, 68463, 68464, 68465, 68466, 68472, 68473, 68474, 68475, 68476, 68477, 68478, 68479, 68608, 68609, 68610, 68611, 68612, 68613, 68614, 68615, 68616, 68617, 68618, 68619, 68620, 68621, 68622, 68623, 68624, 68625, 68626, 68627, 68628, 68629, 68630, 68631, 68632, 68633, 68634, 68635, 68636, 68637, 68638, 68639, 68640, 68641, 68642, 68643, 68644, 68645, 68646, 68647, 68648, 68649, 68650, 68651, 68652, 68653, 68654, 68655, 68656, 68657, 68658, 68659, 68660, 68661, 68662, 68663, 68664, 68665, 68666, 68667, 68668, 68669, 68670, 68671, 68672, 68673, 68674, 68675, 68676, 68677, 68678, 68679, 68680, 126464, 126465, 126466, 126467, 126469, 126470, 126471, 126472, 126473, 126474, 126475, 126476, 126477, 126478, 126479, 126480, 126481, 126482, 126483, 126484, 126485, 126486, 126487, 126488, 126489, 126490, 126491, 126492, 126493, 126494, 126495, 126497, 126498, 126500, 126503, 126505, 126506, 126507, 126508, 126509, 126510, 126511, 126512, 126513, 126514, 126516, 126517, 126518, 126519, 126521, 126523, 126530, 126535, 126537, 126539, 126541, 126542, 126543, 126545, 126546, 126548, 126551, 126553, 126555, 126557, 126559, 126561, 126562, 126564, 126567, 126568, 126569, 126570, 126572, 126573, 126574, 126575, 126576, 126577, 126578, 126580, 126581, 126582, 126583, 126585, 126586, 126587, 126588, 126590, 126592, 126593, 126594, 126595, 126596, 126597, 126598, 126599, 126600, 126601, 126603, 126604, 126605, 126606, 126607, 126608, 126609, 126610, 126611, 126612, 126613, 126614, 126615, 126616, 126617, 126618, 126619, 126625, 126626, 126627, 126629, 126630, 126631, 126632, 126633, 126635, 126636, 126637, 126638, 126639, 126640, 126641, 126642, 126643, 126644, 126645, 126646, 126647, 126648, 126649, 126650, 126651, 1114109 ];
    j.prototype.applyStyles = function(a, b) {
        b = b || this.div;
        for (var c in a) a.hasOwnProperty(c) && (b.style[c] = a[c]);
    }, j.prototype.formatStyle = function(a, b) {
        return 0 === a ? 0 : a + b;
    }, k.prototype = o(j.prototype), k.prototype.constructor = k, l.prototype.move = function(a, b) {
        switch (b = void 0 !== b ? b : this.lineHeight, a) {
          case "+x":
            this.left += b, this.right += b;
            break;

          case "-x":
            this.left -= b, this.right -= b;
            break;

          case "+y":
            this.top += b, this.bottom += b;
            break;

          case "-y":
            this.top -= b, this.bottom -= b;
        }
    }, l.prototype.overlaps = function(a) {
        return this.left < a.right && this.right > a.left && this.top < a.bottom && this.bottom > a.top;
    }, l.prototype.overlapsAny = function(a) {
        for (var b = 0; b < a.length; b++) if (this.overlaps(a[b])) return !0;
        return !1;
    }, l.prototype.within = function(a) {
        return this.top >= a.top && this.bottom <= a.bottom && this.left >= a.left && this.right <= a.right;
    }, l.prototype.overlapsOppositeAxis = function(a, b) {
        switch (b) {
          case "+x":
            return this.left < a.left;

          case "-x":
            return this.right > a.right;

          case "+y":
            return this.top < a.top;

          case "-y":
            return this.bottom > a.bottom;
        }
    }, l.prototype.intersectPercentage = function(a) {
        var b = Math.max(0, Math.min(this.right, a.right) - Math.max(this.left, a.left)), c = Math.max(0, Math.min(this.bottom, a.bottom) - Math.max(this.top, a.top)), d = b * c;
        return d / (this.height * this.width);
    }, l.prototype.toCSSCompatValues = function(a) {
        return {
            top: this.top - a.top,
            bottom: a.bottom - this.bottom,
            left: this.left - a.left,
            right: a.right - this.right,
            height: this.height,
            width: this.width
        };
    }, l.getSimpleBoxPosition = function(a) {
        var b = a.div ? a.div.offsetHeight : a.tagName ? a.offsetHeight : 0, c = a.div ? a.div.offsetWidth : a.tagName ? a.offsetWidth : 0, d = a.div ? a.div.offsetTop : a.tagName ? a.offsetTop : 0;
        a = a.div ? a.div.getBoundingClientRect() : a.tagName ? a.getBoundingClientRect() : a;
        var e = {
            left: a.left,
            right: a.right,
            top: a.top || d,
            height: a.height || b,
            bottom: a.bottom || d + (a.height || b),
            width: a.width || c
        };
        return e;
    }, n.StringDecoder = function() {
        return {
            decode: function(a) {
                if (!a) return "";
                if ("string" != typeof a) throw new Error("Error - expected string data.");
                return decodeURIComponent(encodeURIComponent(a));
            }
        };
    }, n.convertCueToDOMTree = function(a, b) {
        return a && b ? g(a, b) : null;
    };
    var u = .05, v = "sans-serif", w = "1.5%";
    n.processCues = function(a, b, c) {
        function d(a) {
            for (var b = 0; b < a.length; b++) if (a[b].hasBeenReset || !a[b].displayState) return !0;
            return !1;
        }
        if (!a || !b || !c) return null;
        for (;c.firstChild; ) c.removeChild(c.firstChild);
        var e = a.document.createElement("div");
        if (e.style.position = "absolute", e.style.left = "0", e.style.right = "0", e.style.top = "0", 
        e.style.bottom = "0", e.style.margin = w, c.appendChild(e), d(b)) {
            var f = [], g = l.getSimpleBoxPosition(e), h = Math.round(g.height * u * 100) / 100, i = {
                font: h + "px " + v
            };
            !function() {
                for (var c, d, h = 0; h < b.length; h++) d = b[h], c = new k(a, d, i), e.appendChild(c.div), 
                m(a, c, g, f), d.displayState = c.div, f.push(l.getSimpleBoxPosition(c));
            }();
        } else for (var j = 0; j < b.length; j++) e.appendChild(b[j].displayState);
    }, n.Parser = function(a, b, c) {
        c || (c = b, b = {}), b || (b = {}), this.window = a, this.vttjs = b, this.state = "INITIAL", 
        this.buffer = "", this.decoder = c || new TextDecoder("utf8"), this.regionList = [];
    }, n.Parser.prototype = {
        reportOrThrowError: function(a) {
            if (!(a instanceof b)) throw a;
            this.onparsingerror && this.onparsingerror(a);
        },
        parse: function(a) {
            function c() {
                for (var a = i.buffer, b = 0; b < a.length && "\r" !== a[b] && "\n" !== a[b]; ) ++b;
                var c = a.substr(0, b);
                return "\r" === a[b] && ++b, "\n" === a[b] && ++b, i.buffer = a.substr(b), c;
            }
            function g(a) {
                var b = new d();
                if (e(a, function(a, c) {
                    switch (a) {
                      case "id":
                        b.set(a, c);
                        break;

                      case "width":
                        b.percent(a, c);
                        break;

                      case "lines":
                        b.integer(a, c);
                        break;

                      case "regionanchor":
                      case "viewportanchor":
                        var e = c.split(",");
                        if (2 !== e.length) break;
                        var f = new d();
                        if (f.percent("x", e[0]), f.percent("y", e[1]), !f.has("x") || !f.has("y")) break;
                        b.set(a + "X", f.get("x")), b.set(a + "Y", f.get("y"));
                        break;

                      case "scroll":
                        b.alt(a, c, [ "up" ]);
                    }
                }, /=/, /\s/), b.has("id")) {
                    var c = new (i.vttjs.VTTRegion || i.window.VTTRegion)();
                    c.width = b.get("width", 100), c.lines = b.get("lines", 3), c.regionAnchorX = b.get("regionanchorX", 0), 
                    c.regionAnchorY = b.get("regionanchorY", 100), c.viewportAnchorX = b.get("viewportanchorX", 0), 
                    c.viewportAnchorY = b.get("viewportanchorY", 100), c.scroll = b.get("scroll", ""), 
                    i.onregion && i.onregion(c), i.regionList.push({
                        id: b.get("id"),
                        region: c
                    });
                }
            }
            function h(a) {
                e(a, function(a, b) {
                    switch (a) {
                      case "Region":
                        g(b);
                    }
                }, /:/);
            }
            var i = this;
            a && (i.buffer += i.decoder.decode(a, {
                stream: !0
            }));
            try {
                var j;
                if ("INITIAL" === i.state) {
                    if (!/\r\n|\n/.test(i.buffer)) return this;
                    j = c();
                    var k = j.match(/^WEBVTT([ \t].*)?$/);
                    if (!k || !k[0]) throw new b(b.Errors.BadSignature);
                    i.state = "HEADER";
                }
                for (var l = !1; i.buffer; ) {
                    if (!/\r\n|\n/.test(i.buffer)) return this;
                    switch (l ? l = !1 : j = c(), i.state) {
                      case "HEADER":
                        /:/.test(j) ? h(j) : j || (i.state = "ID");
                        continue;

                      case "NOTE":
                        j || (i.state = "ID");
                        continue;

                      case "ID":
                        if (/^NOTE($|[ \t])/.test(j)) {
                            i.state = "NOTE";
                            break;
                        }
                        if (!j) continue;
                        if (i.cue = new (i.vttjs.VTTCue || i.window.VTTCue)(0, 0, ""), i.state = "CUE", 
                        -1 === j.indexOf("--\x3e")) {
                            i.cue.id = j;
                            continue;
                        }

                      case "CUE":
                        try {
                            f(j, i.cue, i.regionList);
                        } catch (m) {
                            i.reportOrThrowError(m), i.cue = null, i.state = "BADCUE";
                            continue;
                        }
                        i.state = "CUETEXT";
                        continue;

                      case "CUETEXT":
                        var n = -1 !== j.indexOf("--\x3e");
                        if (!j || n && (l = !0)) {
                            i.oncue && i.oncue(i.cue), i.cue = null, i.state = "ID";
                            continue;
                        }
                        i.cue.text && (i.cue.text += "\n"), i.cue.text += j;
                        continue;

                      case "BADCUE":
                        j || (i.state = "ID");
                        continue;
                    }
                }
            } catch (m) {
                i.reportOrThrowError(m), "CUETEXT" === i.state && i.cue && i.oncue && i.oncue(i.cue), 
                i.cue = null, i.state = "INITIAL" === i.state ? "BADWEBVTT" : "BADCUE";
            }
            return this;
        },
        flush: function() {
            var a = this;
            try {
                if (a.buffer += a.decoder.decode(), (a.cue || "HEADER" === a.state) && (a.buffer += "\n\n", 
                a.parse()), "INITIAL" === a.state) throw new b(b.Errors.BadSignature);
            } catch (c) {
                a.reportOrThrowError(c);
            }
            return a.onflush && a.onflush(), this;
        }
    }, a.WebVTT = n;
}(this, this.vttjs || {});

(function() {
    function addEventListener(element, event, cb) {
        if (!element.addEventListener) {
            element.attachEvent(event, cb);
        } else {
            element.addEventListener(event, cb, true);
        }
    }
    videojs.Youtube = videojs.MediaTechController.extend({
        init: function(player, options, ready) {
            this.player_ = player;
            this["featuresProgressEvents"] = false;
            this["featuresTimeupdateEvents"] = false;
            this["featuresPlaybackRate"] = true;
            this["featuresNativeTextTracks"] = true;
            videojs.MediaTechController.call(this, player, options, ready);
            this.isIos = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
            this.isAndroid = /(Android)/g.test(navigator.userAgent);
            this.playVideoIsAllowed = !(this.isIos || this.isAndroid);
            if (this.isIos || this.isAndroid) {
                this.player_.options()["autoplay"] = false;
            }
            if (typeof options["source"] !== "undefined") {
                for (var key in options["source"]) {
                    if (options["source"].hasOwnProperty(key)) {
                        player.options()[key] = options["source"][key];
                    }
                }
            }
            this.player_.options()["playbackRates"] = [];
            this.userQuality = videojs.Youtube.convertQualityName(player.options()["quality"]);
            this.playerEl_ = player.el();
            this.playerEl_.className += " vjs-youtube";
            this.qualityButton = document.createElement("div");
            this.qualityButton.setAttribute("class", "vjs-quality-button vjs-menu-button vjs-control");
            this.qualityButton.setAttribute("tabindex", 0);
            var qualityContent = document.createElement("div");
            qualityContent.setAttribute("class", "vjs-control-content");
            this.qualityButton.appendChild(qualityContent);
            this.qualityTitle = document.createElement("span");
            this.qualityTitle.setAttribute("class", "vjs-control-text");
            qualityContent.appendChild(this.qualityTitle);
            if (player.options()["quality"] !== "undefined") {
                setInnerText(this.qualityTitle, player.options()["quality"] || "auto");
            }
            var qualityMenu = document.createElement("div");
            qualityMenu.setAttribute("class", "vjs-menu");
            qualityContent.appendChild(qualityMenu);
            this.qualityMenuContent = document.createElement("ul");
            this.qualityMenuContent.setAttribute("class", "vjs-menu-content");
            qualityMenu.appendChild(this.qualityMenuContent);
            this.id_ = this.player_.id() + "_youtube_api";
            this.el_ = videojs.Component.prototype.createEl("iframe", {
                id: this.id_,
                className: "vjs-tech",
                scrolling: "no",
                marginWidth: 0,
                marginHeight: 0,
                frameBorder: 0
            });
            this.el_.setAttribute("allowFullScreen", "");
            this.playerEl_.insertBefore(this.el_, this.playerEl_.firstChild);
            if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
                var ieVersion = Number(RegExp.$1);
                this.addIframeBlocker(ieVersion);
            } else if (!/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)) {
                this.el_.className += " onDesktop";
                this.addIframeBlocker();
            }
            this.parseSrc(player.options()["src"]);
            this.playOnReady = this.player_.options()["autoplay"] && this.playVideoIsAllowed;
            this.forceHTML5 = !!(typeof this.player_.options()["forceHTML5"] === "undefined" || this.player_.options()["forceHTML5"] === true);
            this.updateIframeSrc();
            var self = this;
            player.ready(function() {
                if (self.player_.options()["controls"]) {
                    var controlBar = self.playerEl_.querySelectorAll(".vjs-control-bar")[0];
                    if (controlBar) {
                        controlBar.appendChild(self.qualityButton);
                    }
                }
                if (self.playOnReady && !self.player_.options()["ytcontrols"]) {
                    if (typeof self.player_.loadingSpinner !== "undefined") {
                        self.player_.loadingSpinner.show();
                    }
                    if (typeof self.player_.bigPlayButton !== "undefined") {
                        self.player_.bigPlayButton.hide();
                    }
                }
                player.trigger("loadstart");
            });
            this.on("dispose", function() {
                if (this.ytplayer) {
                    this.ytplayer.destroy();
                }
                if (!this.player_.options()["ytcontrols"]) {
                    this.player_.off("waiting", this.bindedWaiting);
                }
                this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage = "none";
                if (this.el_.parentNode) {
                    this.el_.parentNode.removeChild(this.el_);
                }
                if (this.qualityButton.parentNode) {
                    this.qualityButton.parentNode.removeChild(this.qualityButton);
                }
                if (typeof this.player_.loadingSpinner !== "undefined") {
                    this.player_.loadingSpinner.hide();
                }
                if (typeof this.player_.bigPlayButton !== "undefined") {
                    this.player_.bigPlayButton.hide();
                }
                if (this.iframeblocker) {
                    this.playerEl_.removeChild(this.iframeblocker);
                }
            });
        }
    });
    videojs.Youtube.prototype.loadThumbnailUrl = function(id, callback) {
        var uri = "https://img.youtube.com/vi/" + id + "/maxresdefault.jpg";
        var fallback = "https://img.youtube.com/vi/" + id + "/0.jpg";
        try {
            var image = new Image();
            image.onload = function() {
                if ("naturalHeight" in this) {
                    if (this.naturalHeight <= 90 || this.naturalWidth <= 120) {
                        this.onerror();
                        return;
                    }
                } else if (this.height <= 90 || this.width <= 120) {
                    this.onerror();
                    return;
                }
                callback(uri);
            };
            image.onerror = function() {
                callback(fallback);
            };
            image.src = uri;
        } catch (e) {
            callback(fallback);
        }
    };
    videojs.Youtube.prototype.updateIframeSrc = function() {
        var fullscreenControls = typeof this.player_.options()["ytFullScreenControls"] !== "undefined" && !this.player_.options()["ytFullScreenControls"] ? 0 : 1;
        var params = {
            enablejsapi: 1,
            iv_load_policy: 3,
            playerapiid: this.id(),
            disablekb: 1,
            wmode: "transparent",
            controls: this.player_.options()["ytcontrols"] ? 1 : 0,
            fs: fullscreenControls,
            html5: this.player_.options()["forceHTML5"] ? 1 : null,
            playsinline: this.player_.options()["playsInline"] ? 1 : 0,
            showinfo: 0,
            rel: 0,
            autoplay: this.playOnReady ? 1 : 0,
            loop: this.player_.options()["loop"] ? 1 : 0,
            list: this.playlistId,
            vq: this.userQuality,
            origin: window.location.protocol + "//" + window.location.host
        };
        var isLocalProtocol = window.location.protocol === "file:" || window.location.protocol === "app:";
        if (isLocalProtocol) {
            delete params.origin;
        }
        for (var prop in params) {
            if (params.hasOwnProperty(prop) && (typeof params[prop] === "undefined" || params[prop] === null)) {
                delete params[prop];
            }
        }
        var self = this;
        if (!this.videoId && !this.playlistId) {
            this.el_.src = "about:blank";
            setTimeout(function() {
                self.triggerReady();
            }, 500);
        } else {
            this.el_.src = "https://www.youtube.com/embed/" + (this.videoId || "videoseries") + "?" + videojs.Youtube.makeQueryString(params);
            if (this.player_.options()["ytcontrols"]) {
                this.player_.controls(false);
            } else if (this.videoId && (typeof this.player_.poster() === "undefined" || this.player_.poster().length === 0)) {
                setTimeout(function() {
                    self.loadThumbnailUrl(self.videoId, function(url) {
                        self.player_.poster(url);
                    });
                }, 100);
            }
            this.bindedWaiting = function() {
                self.onWaiting();
            };
            this.player_.on("waiting", this.bindedWaiting);
            if (videojs.Youtube.apiReady) {
                this.loadYoutube();
            } else {
                videojs.Youtube.loadingQueue.push(this);
                if (!videojs.Youtube.apiLoading) {
                    var tag = document.createElement("script");
                    tag.onerror = function(e) {
                        self.onError(e);
                    };
                    tag.src = "https://www.youtube.com/iframe_api";
                    var firstScriptTag = document.getElementsByTagName("script")[0];
                    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                    videojs.Youtube.apiLoading = true;
                }
            }
        }
    };
    videojs.Youtube.prototype.onWaiting = function() {
        if (typeof this.player_.bigPlayButton !== "undefined") {
            this.player_.bigPlayButton.hide();
        }
    };
    videojs.Youtube.prototype.addIframeBlocker = function(ieVersion) {
        this.iframeblocker = videojs.Component.prototype.createEl("div");
        this.iframeblocker.className = "iframeblocker";
        this.iframeblocker.style.position = "absolute";
        this.iframeblocker.style.left = 0;
        this.iframeblocker.style.right = 0;
        this.iframeblocker.style.top = 0;
        this.iframeblocker.style.bottom = 0;
        if (ieVersion && ieVersion < 9) {
            this.iframeblocker.style.opacity = .01;
        } else {
            this.iframeblocker.style.background = "rgba(255, 255, 255, 0.01)";
        }
        var self = this;
        addEventListener(this.iframeblocker, "mousemove", function(e) {
            if (!self.player_.userActive()) {
                self.player_.userActive(true);
            }
            e.stopPropagation();
            e.preventDefault();
        });
        addEventListener(this.iframeblocker, "click", function() {
            if (self.paused()) {
                self.play();
            } else {
                self.pause();
            }
        });
        this.playerEl_.insertBefore(this.iframeblocker, this.el_.nextSibling);
    };
    videojs.Youtube.prototype.parseSrc = function(src) {
        this.srcVal = src;
        if (src) {
            var regId = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            var match = src.match(regId);
            if (match && match[2].length === 11) {
                this.videoId = match[2];
            } else {
                this.videoId = null;
            }
            var regPlaylist = /[?&]list=([^#\&\?]+)/;
            match = src.match(regPlaylist);
            if (match !== null && match.length > 1) {
                this.playlistId = match[1];
            } else {
                if (this.playlistId) {
                    delete this.playlistId;
                }
            }
            var regVideoQuality = /[?&]vq=([^#\&\?]+)/;
            match = src.match(regVideoQuality);
            if (match !== null && match.length > 1) {
                this.userQuality = match[1];
                videojs.Youtube.appendQualityLabel(this.qualityTitle, this.userQuality);
            }
        }
    };
    videojs.Youtube.prototype.src = function(src) {
        if (typeof src !== "undefined") {
            this.parseSrc(src);
            if (this.el_.src === "about:blank") {
                this.updateIframeSrc();
                return;
            }
            delete this.defaultQuality;
            if (this.videoId !== null) {
                if (this.player_.options()["autoplay"] && this.playVideoIsAllowed) {
                    this.ytplayer.loadVideoById({
                        videoId: this.videoId,
                        suggestedQuality: this.userQuality
                    });
                } else {
                    this.ytplayer.cueVideoById({
                        videoId: this.videoId,
                        suggestedQuality: this.userQuality
                    });
                }
                var self = this;
                this.loadThumbnailUrl(this.videoId, function(url) {
                    self.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage = "url(" + url + ")";
                    self.player_.poster(url);
                });
            }
        }
        return this.srcVal;
    };
    videojs.Youtube.prototype.load = function() {};
    videojs.Youtube.prototype.play = function() {
        if (this.videoId !== null) {
            if (!this.player_.options()["ytcontrols"]) {
                this.player_.trigger("waiting");
            }
            if (this.isReady_) {
                this.ytplayer.setVolume(this.player_.volume() * 100);
                if (this.volumeVal > 0) {
                    this.ytplayer.unMute();
                } else {
                    this.ytplayer.mute();
                }
                if (this.playVideoIsAllowed) {
                    this.ytplayer.playVideo();
                }
            } else {
                this.playOnReady = true;
            }
        }
    };
    videojs.Youtube.prototype.pause = function() {
        if (this.ytplayer) {
            this.ytplayer.pauseVideo();
        }
    };
    videojs.Youtube.prototype.paused = function() {
        return this.ytplayer ? this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING : true;
    };
    videojs.Youtube.prototype.currentTime = function() {
        return this.ytplayer && this.ytplayer.getCurrentTime ? this.ytplayer.getCurrentTime() : 0;
    };
    videojs.Youtube.prototype.setCurrentTime = function(seconds) {
        if (this.lastState === YT.PlayerState.PAUSED) {
            this.timeBeforeSeek = this.currentTime();
        }
        this.ytplayer.seekTo(seconds, true);
        this.player_.trigger("timeupdate");
        this.player_.trigger("seeking");
        this.isSeeking = true;
        if (this.lastState === YT.PlayerState.PAUSED && this.timeBeforeSeek !== seconds) {
            this.checkSeekedInPauseInterval = setInterval(videojs.bind(this, function() {
                if (this.lastState !== YT.PlayerState.PAUSED || !this.isSeeking) {
                    clearInterval(this.checkSeekedInPauseInterval);
                } else if (this.currentTime() !== this.timeBeforeSeek) {
                    this.player_.trigger("timeupdate");
                    this.player_.trigger("seeked");
                    this.isSeeking = false;
                    clearInterval(this.checkSeekedInPauseInterval);
                }
            }), 250);
        }
    };
    videojs.Youtube.prototype.playbackRate = function() {
        return this.ytplayer && this.ytplayer.getPlaybackRate ? this.ytplayer.getPlaybackRate() : 1;
    };
    videojs.Youtube.prototype.setPlaybackRate = function(suggestedRate) {
        if (this.ytplayer && this.ytplayer.setPlaybackRate) {
            this.ytplayer.setPlaybackRate(suggestedRate);
            var self = this;
            setTimeout(function() {
                self.player_.trigger("ratechange");
            }, 100);
        }
    };
    videojs.Youtube.prototype.duration = function() {
        return this.ytplayer && this.ytplayer.getDuration ? this.ytplayer.getDuration() : 0;
    };
    videojs.Youtube.prototype.currentSrc = function() {
        return this.srcVal;
    };
    videojs.Youtube.prototype.ended = function() {
        return this.ytplayer ? this.lastState === YT.PlayerState.ENDED : false;
    };
    videojs.Youtube.prototype.volume = function() {
        if (this.ytplayer && isNaN(this.volumeVal)) {
            this.volumeVal = this.ytplayer.getVolume() / 100;
            this.volumeVal = isNaN(this.volumeVal) ? 1 : this.volumeVal;
            this.player_.volume(this.volumeVal);
        }
        return this.volumeVal;
    };
    videojs.Youtube.prototype.setVolume = function(percentAsDecimal) {
        if (typeof percentAsDecimal !== "undefined" && percentAsDecimal !== this.volumeVal) {
            this.ytplayer.setVolume(percentAsDecimal * 100);
            this.volumeVal = percentAsDecimal;
            this.player_.trigger("volumechange");
        }
    };
    videojs.Youtube.prototype.muted = function() {
        return this.mutedVal;
    };
    videojs.Youtube.prototype.setMuted = function(muted) {
        if (muted) {
            this.storedVolume = this.volumeVal;
            this.ytplayer.mute();
            this.player_.volume(0);
        } else {
            this.ytplayer.unMute();
            this.player_.volume(this.storedVolume);
        }
        this.mutedVal = muted;
        this.player_.trigger("volumechange");
    };
    videojs.Youtube.prototype.buffered = function() {
        if (this.ytplayer && this.ytplayer.getVideoBytesLoaded) {
            var loadedBytes = this.ytplayer.getVideoBytesLoaded();
            var totalBytes = this.ytplayer.getVideoBytesTotal();
            if (!loadedBytes || !totalBytes) {
                return 0;
            }
            var duration = this.ytplayer.getDuration();
            var secondsBuffered = loadedBytes / totalBytes * duration;
            var secondsOffset = this.ytplayer.getVideoStartBytes() / totalBytes * duration;
            return videojs.createTimeRange(secondsOffset, secondsOffset + secondsBuffered);
        } else {
            return videojs.createTimeRange(0, 0);
        }
    };
    videojs.Youtube.prototype.supportsFullScreen = function() {
        if (typeof this.el_.webkitEnterFullScreen === "function") {
            if (/Android/.test(videojs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)) {
                return true;
            }
        }
        return false;
    };
    videojs.Youtube.isSupported = function() {
        return true;
    };
    videojs.Youtube.canPlaySource = function(srcObj) {
        return srcObj.type === "video/youtube";
    };
    videojs.Youtube.canControlVolume = function() {
        return true;
    };
    videojs.Youtube.loadingQueue = [];
    videojs.Youtube.prototype.loadYoutube = function() {
        var self = this;
        this.ytplayer = new YT.Player(this.id_, {
            events: {
                onReady: function(e) {
                    e.target.vjsTech.onReady();
                    self.player_.trigger("ratechange");
                },
                onStateChange: function(e) {
                    e.target.vjsTech.onStateChange(e.data);
                },
                onPlaybackQualityChange: function(e) {
                    e.target.vjsTech.onPlaybackQualityChange(e.data);
                },
                onError: function(e) {
                    e.target.vjsTech.onError(e.data);
                }
            }
        });
        this.ytplayer.vjsTech = this;
    };
    videojs.Youtube.makeQueryString = function(args) {
        var array = [ "modestbranding=1" ];
        for (var key in args) {
            if (args.hasOwnProperty(key)) {
                array.push(key + "=" + args[key]);
            }
        }
        return array.join("&");
    };
    window.onYouTubeIframeAPIReady = function() {
        var yt;
        while (yt = videojs.Youtube.loadingQueue.shift()) {
            yt.loadYoutube();
        }
        videojs.Youtube.loadingQueue = [];
        videojs.Youtube.apiReady = true;
    };
    videojs.Youtube.prototype.onReady = function() {
        this.isReady_ = true;
        this.triggerReady();
        this.player_.options()["playbackRates"] = this.ytplayer.getAvailablePlaybackRates();
        this.player_.controlBar.playbackRateMenuButton.update();
        this.player_.trigger("loadedmetadata");
        this.player_.trigger("durationchange");
        this.player_.trigger("timeupdate");
        if (typeof this.player_.loadingSpinner !== "undefined" && !this.isIos && !this.isAndroid) {
            this.player_.loadingSpinner.hide();
        }
        if (this.player_.options()["muted"]) {
            this.setMuted(true);
        }
        if (!this.videoId && this.playlistId) {
            this.videoId = this.ytplayer.getPlaylist()[0];
            var self = this;
            this.loadThumbnailUrl(this.videoId, function(url) {
                self.player_.poster(url);
            });
        }
        if (this.playOnReady) {
            this.playOnReady = false;
            this.play();
        }
    };
    videojs.Youtube.prototype.updateCaptions = function() {
        this.ytplayer.loadModule("captions");
        this.ytplayer.loadModule("cc");
        var options = this.ytplayer.getOptions();
        var cc = options.indexOf("captions") >= 0 ? "captions" : options.indexOf("cc") >= 0 ? "cc" : null;
        if (cc !== null && !this.tracked_) {
            var tracks = this.ytplayer.getOption(cc, "tracklist");
            if (tracks && tracks.length > 0) {
                var tt;
                for (var i = 0; i < tracks.length; i++) {
                    tt = this.addTextTrack("captions", tracks[i].displayName, tracks[i].languageCode);
                }
                var self = this;
                this.textTracks().on("change", function() {
                    var code = null;
                    for (var i = 0; i < this.length; i++) {
                        if (this[i].mode === "showing") {
                            code = this[i].language;
                            break;
                        }
                    }
                    if (code !== null) {
                        self.ytplayer.setOption(cc, "track", {
                            languageCode: code
                        });
                    } else {
                        self.ytplayer.setOption(cc, "track", {});
                    }
                });
                this.tracked_ = true;
            }
        }
    };
    videojs.Youtube.prototype.updateQualities = function() {
        function setupEventListener(el) {
            addEventListener(el, "click", function() {
                var quality = this.getAttribute("data-val");
                self.ytplayer.setPlaybackQuality(quality);
                self.userQuality = quality;
                videojs.Youtube.appendQualityLabel(self.qualityTitle, quality);
                var selected = self.qualityMenuContent.querySelector(".vjs-selected");
                if (selected) {
                    videojs.Youtube.removeClass(selected, "vjs-selected");
                }
                videojs.Youtube.addClass(this, "vjs-selected");
            });
        }
        var qualities = this.ytplayer.getAvailableQualityLevels();
        var self = this;
        if (qualities.indexOf(this.userQuality) < 0) {
            videojs.Youtube.appendQualityLabel(self.qualityTitle, this.defaultQuality);
        }
        if (qualities.length === 0) {
            this.qualityButton.style.display = "none";
        } else {
            this.qualityButton.style.display = "";
            while (this.qualityMenuContent.hasChildNodes()) {
                this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);
            }
            for (var i = 0; i < qualities.length; ++i) {
                var el = document.createElement("li");
                el.setAttribute("class", "vjs-menu-item");
                el.setAttribute("data-val", qualities[i]);
                videojs.Youtube.appendQualityLabel(el, qualities[i]);
                if (qualities[i] === this.quality) {
                    videojs.Youtube.addClass(el, "vjs-selected");
                }
                setupEventListener(el);
                this.qualityMenuContent.appendChild(el);
            }
        }
    };
    var title = "";
    videojs.Youtube.prototype.onStateChange = function(state) {
        if (state !== this.lastState) {
            $.get("https://www.googleapis.com/youtube/v3/videos?id=" + this.videoId + "&key=AIzaSyCW0OAJgcHlErEzYf9SNAJwOn3uT1bHj9Y&part=status,snippet,player", function(data) {
                title = data.items[0].snippet.title;
            });
            switch (state) {
              case -1:
                this.player_.trigger("durationchange");
                break;

              case YT.PlayerState.ENDED:
                var stopPlaying = true;
                if (this.playlistId && !this.player_.options()["loop"]) {
                    stopPlaying = this.ytplayer.getPlaylistIndex() === 0;
                }
                if (stopPlaying) {
                    if (!this.player_.options()["ytcontrols"]) {
                        this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display = "block";
                        if (typeof this.player_.bigPlayButton !== "undefined") {
                            this.player_.bigPlayButton.show();
                        }
                    }
                    this.player_.trigger("pause");
                    this.player_.trigger("ended");
                }
                try {
                    utag.link({
                        eventCategory: page_section,
                        eventAction: "end video",
                        eventLabel: title,
                        event: "endVideo"
                    });
                } catch (err) {
                    utagError = err;
                }
                break;

              case YT.PlayerState.PLAYING:
                this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display = "none";
                this.playVideoIsAllowed = true;
                this.updateQualities();
                this.updateCaptions();
                this.player_.trigger("timeupdate");
                this.player_.trigger("durationchange");
                this.player_.trigger("playing");
                this.player_.trigger("play");
                if (this.isSeeking) {
                    this.player_.trigger("seeked");
                    this.isSeeking = false;
                }
                try {
                    utag.link({
                        eventCategory: page_section,
                        eventAction: "play video",
                        eventLabel: title,
                        event: "playVideo"
                    });
                } catch (err) {
                    utagError = err;
                }
                break;

              case YT.PlayerState.PAUSED:
                this.player_.trigger("pause");
                try {
                    utag.link({
                        eventCategory: page_section,
                        eventAction: "pause video",
                        eventLabel: title,
                        event: "pauseVideo"
                    });
                } catch (err) {
                    utagError = err;
                }
                break;

              case YT.PlayerState.BUFFERING:
                this.player_.trigger("timeupdate");
                if (!this.player_.options()["ytcontrols"]) {
                    this.player_.trigger("waiting");
                }
                break;

              case YT.PlayerState.CUED:
                break;
            }
            this.lastState = state;
        }
    };
    videojs.Youtube.convertQualityName = function(name) {
        switch (name) {
          case "144p":
            return "tiny";

          case "240p":
            return "small";

          case "360p":
            return "medium";

          case "480p":
            return "large";

          case "720p":
            return "hd720";

          case "1080p":
            return "hd1080";

          case "1440p":
            return "hd1440";

          case "2160p":
            return "hd2160";
        }
        return "auto";
    };
    videojs.Youtube.parseQualityName = function(name) {
        switch (name) {
          case "tiny":
            return "144p";

          case "small":
            return "240p";

          case "medium":
            return "360p";

          case "large":
            return "480p";

          case "hd720":
            return "720p";

          case "hd1080":
            return "1080p";

          case "hd1440":
            return "1440p";

          case "hd2160":
            return "2160p";
        }
        return "auto";
    };
    videojs.Youtube.appendQualityLabel = function(element, quality) {
        setInnerText(element, videojs.Youtube.parseQualityName(quality));
        var label = document.createElement("span");
        label.setAttribute("class", "vjs-hd-label");
        switch (quality) {
          case "hd720":
          case "hd1080":
          case "hd1440":
            setInnerText(label, "HD");
            element.appendChild(label);
            break;

          case "hd2160":
            setInnerText(label, "4K");
            element.appendChild(label);
            break;
        }
    };
    videojs.Youtube.prototype.onPlaybackQualityChange = function(quality) {
        if (typeof this.defaultQuality === "undefined") {
            this.defaultQuality = quality;
            if (typeof this.userQuality !== "undefined") {
                return;
            }
        }
        this.quality = quality;
        videojs.Youtube.appendQualityLabel(this.qualityTitle, quality);
        switch (quality) {
          case "medium":
            this.player_.videoWidth = 480;
            this.player_.videoHeight = 360;
            break;

          case "large":
            this.player_.videoWidth = 640;
            this.player_.videoHeight = 480;
            break;

          case "hd720":
            this.player_.videoWidth = 960;
            this.player_.videoHeight = 720;
            break;

          case "hd1080":
            this.player_.videoWidth = 1440;
            this.player_.videoHeight = 1080;
            break;

          case "highres":
            this.player_.videoWidth = 1920;
            this.player_.videoHeight = 1080;
            break;

          case "small":
            this.player_.videoWidth = 320;
            this.player_.videoHeight = 240;
            break;

          case "tiny":
            this.player_.videoWidth = 144;
            this.player_.videoHeight = 108;
            break;

          default:
            this.player_.videoWidth = 0;
            this.player_.videoHeight = 0;
            break;
        }
        this.player_.trigger("ratechange");
    };
    videojs.Youtube.prototype.onError = function(error) {
        this.player_.error(error);
    };
    videojs.Youtube.addClass = function(element, classToAdd) {
        if ((" " + element.className + " ").indexOf(" " + classToAdd + " ") === -1) {
            element.className = element.className === "" ? classToAdd : element.className + " " + classToAdd;
        }
    };
    videojs.Youtube.removeClass = function(element, classToRemove) {
        var classNames, i;
        if (element.className.indexOf(classToRemove) === -1) {
            return;
        }
        classNames = element.className.split(" ");
        for (i = classNames.length - 1; i >= 0; i--) {
            if (classNames[i] === classToRemove) {
                classNames.splice(i, 1);
            }
        }
        element.className = classNames.join(" ");
    };
    function setInnerText(element, text) {
        if (typeof element === "undefined") {
            return false;
        }
        var textProperty = "innerText" in element ? "innerText" : "textContent";
        try {
            element[textProperty] = text;
        } catch (anException) {
            element.setAttribute("innerText", text);
        }
    }
    var style = document.createElement("style");
    var def = " " + ".vjs-youtube .vjs-poster { background-size: 100%!important; }" + ".vjs-youtube .vjs-poster, " + ".vjs-youtube .vjs-loading-spinner, " + ".vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }" + ".vjs-youtube.vjs-user-active .iframeblocker { display: none; }" + ".vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }" + ".vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }";
    style.setAttribute("type", "text/css");
    document.getElementsByTagName("head")[0].appendChild(style);
    if (style.styleSheet) {
        style.styleSheet.cssText = def;
    } else {
        style.appendChild(document.createTextNode(def));
    }
    if (!Array.prototype.indexOf) {
        Array.prototype.indexOf = function(elt) {
            var len = this.length >>> 0;
            var from = Number(arguments[1]) || 0;
            from = from < 0 ? Math.ceil(from) : Math.floor(from);
            if (from < 0) {
                from += len;
            }
            for (;from < len; from++) {
                if (from in this && this[from] === elt) {
                    return from;
                }
            }
            return -1;
        };
    }
})();

!function(t, e, n, o) {
    "use strict";
    function i(t, e) {
        var o, i, a, s = [], r = 0;
        t && t.isDefaultPrevented() || (t.preventDefault(), e = e || {}, t && t.data && (e = h(t.data.options, e)), 
        o = e.$target || n(t.currentTarget).trigger("blur"), (a = n.fancybox.getInstance()) && a.$trigger && a.$trigger.is(o) || (e.selector ? s = n(e.selector) : (i = o.attr("data-fancybox") || "", 
        i ? (s = t.data ? t.data.items : [], s = s.length ? s.filter('[data-fancybox="' + i + '"]') : n('[data-fancybox="' + i + '"]')) : s = [ o ]), 
        r = n(s).index(o), r < 0 && (r = 0), a = n.fancybox.open(s, e, r), a.$trigger = o));
    }
    if (t.console = t.console || {
        info: function(t) {}
    }, n) {
        if (n.fn.fancybox) return void console.info("fancyBox already initialized");
        var a = {
            closeExisting: !1,
            loop: !1,
            gutter: 50,
            keyboard: !0,
            preventCaptionOverlap: !0,
            arrows: !0,
            infobar: !0,
            smallBtn: "auto",
            toolbar: "auto",
            buttons: [ "zoom", "slideShow", "thumbs", "close" ],
            idleTime: 3,
            protect: !1,
            modal: !1,
            image: {
                preload: !1
            },
            ajax: {
                settings: {
                    data: {
                        fancybox: !0
                    }
                }
            },
            iframe: {
                tpl: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',
                preload: !0,
                css: {},
                attr: {
                    scrolling: "auto"
                }
            },
            video: {
                tpl: '<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',
                format: "",
                autoStart: !0
            },
            defaultType: "image",
            animationEffect: "zoom",
            animationDuration: 366,
            zoomOpacity: "auto",
            transitionEffect: "fade",
            transitionDuration: 366,
            slideClass: "",
            baseClass: "",
            baseTpl: '<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',
            spinnerTpl: '<div class="fancybox-loading"></div>',
            errorTpl: '<div class="fancybox-error"><p>{{ERROR}}</p></div>',
            btnTpl: {
                download: '<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',
                zoom: '<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',
                close: '<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',
                arrowLeft: '<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',
                arrowRight: '<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',
                smallBtn: '<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'
            },
            parentEl: "body",
            hideScrollbar: !0,
            autoFocus: !0,
            backFocus: !0,
            trapFocus: !0,
            fullScreen: {
                autoStart: !1
            },
            touch: {
                vertical: !0,
                momentum: !0
            },
            hash: null,
            media: {},
            slideShow: {
                autoStart: !1,
                speed: 3e3
            },
            thumbs: {
                autoStart: !1,
                hideOnClose: !0,
                parentEl: ".fancybox-container",
                axis: "y"
            },
            wheel: "auto",
            onInit: n.noop,
            beforeLoad: n.noop,
            afterLoad: n.noop,
            beforeShow: n.noop,
            afterShow: n.noop,
            beforeClose: n.noop,
            afterClose: n.noop,
            onActivate: n.noop,
            onDeactivate: n.noop,
            clickContent: function(t, e) {
                return "image" === t.type && "zoom";
            },
            clickSlide: "close",
            clickOutside: "close",
            dblclickContent: !1,
            dblclickSlide: !1,
            dblclickOutside: !1,
            mobile: {
                preventCaptionOverlap: !1,
                idleTime: !1,
                clickContent: function(t, e) {
                    return "image" === t.type && "toggleControls";
                },
                clickSlide: function(t, e) {
                    return "image" === t.type ? "toggleControls" : "close";
                },
                dblclickContent: function(t, e) {
                    return "image" === t.type && "zoom";
                },
                dblclickSlide: function(t, e) {
                    return "image" === t.type && "zoom";
                }
            },
            lang: "en",
            i18n: {
                en: {
                    CLOSE: "Close",
                    NEXT: "Next",
                    PREV: "Previous",
                    ERROR: "The requested content cannot be loaded. <br/> Please try again later.",
                    PLAY_START: "Start slideshow",
                    PLAY_STOP: "Pause slideshow",
                    FULL_SCREEN: "Full screen",
                    THUMBS: "Thumbnails",
                    DOWNLOAD: "Download",
                    SHARE: "Share",
                    ZOOM: "Zoom"
                },
                de: {
                    CLOSE: "Schlie&szlig;en",
                    NEXT: "Weiter",
                    PREV: "Zur&uuml;ck",
                    ERROR: "Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",
                    PLAY_START: "Diaschau starten",
                    PLAY_STOP: "Diaschau beenden",
                    FULL_SCREEN: "Vollbild",
                    THUMBS: "Vorschaubilder",
                    DOWNLOAD: "Herunterladen",
                    SHARE: "Teilen",
                    ZOOM: "Vergr&ouml;&szlig;ern"
                }
            }
        }, s = n(t), r = n(e), c = 0, l = function(t) {
            return t && t.hasOwnProperty && t instanceof n;
        }, d = function() {
            return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || function(e) {
                return t.setTimeout(e, 1e3 / 60);
            };
        }(), u = function() {
            return t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.mozCancelAnimationFrame || t.oCancelAnimationFrame || function(e) {
                t.clearTimeout(e);
            };
        }(), f = function() {
            var t, n = e.createElement("fakeelement"), o = {
                transition: "transitionend",
                OTransition: "oTransitionEnd",
                MozTransition: "transitionend",
                WebkitTransition: "webkitTransitionEnd"
            };
            for (t in o) if (void 0 !== n.style[t]) return o[t];
            return "transitionend";
        }(), p = function(t) {
            return t && t.length && t[0].offsetHeight;
        }, h = function(t, e) {
            var o = n.extend(!0, {}, t, e);
            return n.each(e, function(t, e) {
                n.isArray(e) && (o[t] = e);
            }), o;
        }, g = function(t) {
            var o, i;
            return !(!t || t.ownerDocument !== e) && (n(".fancybox-container").css("pointer-events", "none"), 
            o = {
                x: t.getBoundingClientRect().left + t.offsetWidth / 2,
                y: t.getBoundingClientRect().top + t.offsetHeight / 2
            }, i = e.elementFromPoint(o.x, o.y) === t, n(".fancybox-container").css("pointer-events", ""), 
            i);
        }, b = function(t, e, o) {
            var i = this;
            i.opts = h({
                index: o
            }, n.fancybox.defaults), n.isPlainObject(e) && (i.opts = h(i.opts, e)), n.fancybox.isMobile && (i.opts = h(i.opts, i.opts.mobile)), 
            i.id = i.opts.id || ++c, i.currIndex = parseInt(i.opts.index, 10) || 0, i.prevIndex = null, 
            i.prevPos = null, i.currPos = 0, i.firstRun = !0, i.group = [], i.slides = {}, i.addContent(t), 
            i.group.length && i.init();
        };
        n.extend(b.prototype, {
            init: function() {
                var o, i, a = this, s = a.group[a.currIndex], r = s.opts;
                r.closeExisting && n.fancybox.close(!0), n("body").addClass("fancybox-active"), 
                !n.fancybox.getInstance() && !1 !== r.hideScrollbar && !n.fancybox.isMobile && e.body.scrollHeight > t.innerHeight && (n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:' + (t.innerWidth - e.documentElement.clientWidth) + "px;}</style>"), 
                n("body").addClass("compensate-for-scrollbar")), i = "", n.each(r.buttons, function(t, e) {
                    i += r.btnTpl[e] || "";
                }), o = n(a.translate(a, r.baseTpl.replace("{{buttons}}", i).replace("{{arrows}}", r.btnTpl.arrowLeft + r.btnTpl.arrowRight))).attr("id", "fancybox-container-" + a.id).addClass(r.baseClass).data("FancyBox", a).appendTo(r.parentEl), 
                a.$refs = {
                    container: o
                }, [ "bg", "inner", "infobar", "toolbar", "stage", "caption", "navigation" ].forEach(function(t) {
                    a.$refs[t] = o.find(".fancybox-" + t);
                }), a.trigger("onInit"), a.activate(), a.jumpTo(a.currIndex);
            },
            translate: function(t, e) {
                var n = t.opts.i18n[t.opts.lang] || t.opts.i18n.en;
                return e.replace(/\{\{(\w+)\}\}/g, function(t, e) {
                    return void 0 === n[e] ? t : n[e];
                });
            },
            addContent: function(t) {
                var e, o = this, i = n.makeArray(t);
                n.each(i, function(t, e) {
                    var i, a, s, r, c, l = {}, d = {};
                    n.isPlainObject(e) ? (l = e, d = e.opts || e) : "object" === n.type(e) && n(e).length ? (i = n(e), 
                    d = i.data() || {}, d = n.extend(!0, {}, d, d.options), d.$orig = i, l.src = o.opts.src || d.src || i.attr("href"), 
                    l.type || l.src || (l.type = "inline", l.src = e)) : l = {
                        type: "html",
                        src: e + ""
                    }, l.opts = n.extend(!0, {}, o.opts, d), n.isArray(d.buttons) && (l.opts.buttons = d.buttons), 
                    n.fancybox.isMobile && l.opts.mobile && (l.opts = h(l.opts, l.opts.mobile)), a = l.type || l.opts.type, 
                    r = l.src || "", !a && r && ((s = r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i)) ? (a = "video", 
                    l.opts.video.format || (l.opts.video.format = "video/" + ("ogv" === s[1] ? "ogg" : s[1]))) : r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i) ? a = "image" : r.match(/\.(pdf)((\?|#).*)?$/i) ? (a = "iframe", 
                    l = n.extend(!0, l, {
                        contentType: "pdf",
                        opts: {
                            iframe: {
                                preload: !1
                            }
                        }
                    })) : "#" === r.charAt(0) && (a = "inline")), a ? l.type = a : o.trigger("objectNeedsType", l), 
                    l.contentType || (l.contentType = n.inArray(l.type, [ "html", "inline", "ajax" ]) > -1 ? "html" : l.type), 
                    l.index = o.group.length, "auto" == l.opts.smallBtn && (l.opts.smallBtn = n.inArray(l.type, [ "html", "inline", "ajax" ]) > -1), 
                    "auto" === l.opts.toolbar && (l.opts.toolbar = !l.opts.smallBtn), l.$thumb = l.opts.$thumb || null, 
                    l.opts.$trigger && l.index === o.opts.index && (l.$thumb = l.opts.$trigger.find("img:first"), 
                    l.$thumb.length && (l.opts.$orig = l.opts.$trigger)), l.$thumb && l.$thumb.length || !l.opts.$orig || (l.$thumb = l.opts.$orig.find("img:first")), 
                    l.$thumb && !l.$thumb.length && (l.$thumb = null), l.thumb = l.opts.thumb || (l.$thumb ? l.$thumb[0].src : null), 
                    "function" === n.type(l.opts.caption) && (l.opts.caption = l.opts.caption.apply(e, [ o, l ])), 
                    "function" === n.type(o.opts.caption) && (l.opts.caption = o.opts.caption.apply(e, [ o, l ])), 
                    l.opts.caption instanceof n || (l.opts.caption = void 0 === l.opts.caption ? "" : l.opts.caption + ""), 
                    "ajax" === l.type && (c = r.split(/\s+/, 2), c.length > 1 && (l.src = c.shift(), 
                    l.opts.filter = c.shift())), l.opts.modal && (l.opts = n.extend(!0, l.opts, {
                        trapFocus: !0,
                        infobar: 0,
                        toolbar: 0,
                        smallBtn: 0,
                        keyboard: 0,
                        slideShow: 0,
                        fullScreen: 0,
                        thumbs: 0,
                        touch: 0,
                        clickContent: !1,
                        clickSlide: !1,
                        clickOutside: !1,
                        dblclickContent: !1,
                        dblclickSlide: !1,
                        dblclickOutside: !1
                    })), o.group.push(l);
                }), Object.keys(o.slides).length && (o.updateControls(), (e = o.Thumbs) && e.isActive && (e.create(), 
                e.focus()));
            },
            addEvents: function() {
                var e = this;
                e.removeEvents(), e.$refs.container.on("click.fb-close", "[data-fancybox-close]", function(t) {
                    t.stopPropagation(), t.preventDefault(), e.close(t);
                }).on("touchstart.fb-prev click.fb-prev", "[data-fancybox-prev]", function(t) {
                    t.stopPropagation(), t.preventDefault(), e.previous();
                }).on("touchstart.fb-next click.fb-next", "[data-fancybox-next]", function(t) {
                    t.stopPropagation(), t.preventDefault(), e.next();
                }).on("click.fb", "[data-fancybox-zoom]", function(t) {
                    e[e.isScaledDown() ? "scaleToActual" : "scaleToFit"]();
                }), s.on("orientationchange.fb resize.fb", function(t) {
                    t && t.originalEvent && "resize" === t.originalEvent.type ? (e.requestId && u(e.requestId), 
                    e.requestId = d(function() {
                        e.update(t);
                    })) : (e.current && "iframe" === e.current.type && e.$refs.stage.hide(), setTimeout(function() {
                        e.$refs.stage.show(), e.update(t);
                    }, n.fancybox.isMobile ? 600 : 250));
                }), r.on("keydown.fb", function(t) {
                    var o = n.fancybox ? n.fancybox.getInstance() : null, i = o.current, a = t.keyCode || t.which;
                    if (9 == a) return void (i.opts.trapFocus && e.focus(t));
                    if (!(!i.opts.keyboard || t.ctrlKey || t.altKey || t.shiftKey || n(t.target).is("input,textarea,video,audio,select"))) return 8 === a || 27 === a ? (t.preventDefault(), 
                    void e.close(t)) : 37 === a || 38 === a ? (t.preventDefault(), void e.previous()) : 39 === a || 40 === a ? (t.preventDefault(), 
                    void e.next()) : void e.trigger("afterKeydown", t, a);
                }), e.group[e.currIndex].opts.idleTime && (e.idleSecondsCounter = 0, r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle", function(t) {
                    e.idleSecondsCounter = 0, e.isIdle && e.showControls(), e.isIdle = !1;
                }), e.idleInterval = t.setInterval(function() {
                    ++e.idleSecondsCounter >= e.group[e.currIndex].opts.idleTime && !e.isDragging && (e.isIdle = !0, 
                    e.idleSecondsCounter = 0, e.hideControls());
                }, 1e3));
            },
            removeEvents: function() {
                var e = this;
                s.off("orientationchange.fb resize.fb"), r.off("keydown.fb .fb-idle"), this.$refs.container.off(".fb-close .fb-prev .fb-next"), 
                e.idleInterval && (t.clearInterval(e.idleInterval), e.idleInterval = null);
            },
            previous: function(t) {
                return this.jumpTo(this.currPos - 1, t);
            },
            next: function(t) {
                return this.jumpTo(this.currPos + 1, t);
            },
            jumpTo: function(t, e) {
                var o, i, a, s, r, c, l, d, u, f = this, h = f.group.length;
                if (!(f.isDragging || f.isClosing || f.isAnimating && f.firstRun)) {
                    if (t = parseInt(t, 10), !(a = f.current ? f.current.opts.loop : f.opts.loop) && (t < 0 || t >= h)) return !1;
                    if (o = f.firstRun = !Object.keys(f.slides).length, r = f.current, f.prevIndex = f.currIndex, 
                    f.prevPos = f.currPos, s = f.createSlide(t), h > 1 && ((a || s.index < h - 1) && f.createSlide(t + 1), 
                    (a || s.index > 0) && f.createSlide(t - 1)), f.current = s, f.currIndex = s.index, 
                    f.currPos = s.pos, f.trigger("beforeShow", o), f.updateControls(), s.forcedDuration = void 0, 
                    n.isNumeric(e) ? s.forcedDuration = e : e = s.opts[o ? "animationDuration" : "transitionDuration"], 
                    e = parseInt(e, 10), i = f.isMoved(s), s.$slide.addClass("fancybox-slide--current"), 
                    o) return s.opts.animationEffect && e && f.$refs.container.css("transition-duration", e + "ms"), 
                    f.$refs.container.addClass("fancybox-is-open").trigger("focus"), f.loadSlide(s), 
                    void f.preload("image");
                    c = n.fancybox.getTranslate(r.$slide), l = n.fancybox.getTranslate(f.$refs.stage), 
                    n.each(f.slides, function(t, e) {
                        n.fancybox.stop(e.$slide, !0);
                    }), r.pos !== s.pos && (r.isComplete = !1), r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"), 
                    i ? (u = c.left - (r.pos * c.width + r.pos * r.opts.gutter), n.each(f.slides, function(t, o) {
                        o.$slide.removeClass("fancybox-animated").removeClass(function(t, e) {
                            return (e.match(/(^|\s)fancybox-fx-\S+/g) || []).join(" ");
                        });
                        var i = o.pos * c.width + o.pos * o.opts.gutter;
                        n.fancybox.setTranslate(o.$slide, {
                            top: 0,
                            left: i - l.left + u
                        }), o.pos !== s.pos && o.$slide.addClass("fancybox-slide--" + (o.pos > s.pos ? "next" : "previous")), 
                        p(o.$slide), n.fancybox.animate(o.$slide, {
                            top: 0,
                            left: (o.pos - s.pos) * c.width + (o.pos - s.pos) * o.opts.gutter
                        }, e, function() {
                            o.$slide.css({
                                transform: "",
                                opacity: ""
                            }).removeClass("fancybox-slide--next fancybox-slide--previous"), o.pos === f.currPos && f.complete();
                        });
                    })) : e && s.opts.transitionEffect && (d = "fancybox-animated fancybox-fx-" + s.opts.transitionEffect, 
                    r.$slide.addClass("fancybox-slide--" + (r.pos > s.pos ? "next" : "previous")), n.fancybox.animate(r.$slide, d, e, function() {
                        r.$slide.removeClass(d).removeClass("fancybox-slide--next fancybox-slide--previous");
                    }, !1)), s.isLoaded ? f.revealContent(s) : f.loadSlide(s), f.preload("image");
                }
            },
            createSlide: function(t) {
                var e, o, i = this;
                return o = t % i.group.length, o = o < 0 ? i.group.length + o : o, !i.slides[t] && i.group[o] && (e = n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage), 
                i.slides[t] = n.extend(!0, {}, i.group[o], {
                    pos: t,
                    $slide: e,
                    isLoaded: !1
                }), i.updateSlide(i.slides[t])), i.slides[t];
            },
            scaleToActual: function(t, e, o) {
                var i, a, s, r, c, l = this, d = l.current, u = d.$content, f = n.fancybox.getTranslate(d.$slide).width, p = n.fancybox.getTranslate(d.$slide).height, h = d.width, g = d.height;
                l.isAnimating || l.isMoved() || !u || "image" != d.type || !d.isLoaded || d.hasError || (l.isAnimating = !0, 
                n.fancybox.stop(u), t = void 0 === t ? .5 * f : t, e = void 0 === e ? .5 * p : e, 
                i = n.fancybox.getTranslate(u), i.top -= n.fancybox.getTranslate(d.$slide).top, 
                i.left -= n.fancybox.getTranslate(d.$slide).left, r = h / i.width, c = g / i.height, 
                a = .5 * f - .5 * h, s = .5 * p - .5 * g, h > f && (a = i.left * r - (t * r - t), 
                a > 0 && (a = 0), a < f - h && (a = f - h)), g > p && (s = i.top * c - (e * c - e), 
                s > 0 && (s = 0), s < p - g && (s = p - g)), l.updateCursor(h, g), n.fancybox.animate(u, {
                    top: s,
                    left: a,
                    scaleX: r,
                    scaleY: c
                }, o || 366, function() {
                    l.isAnimating = !1;
                }), l.SlideShow && l.SlideShow.isActive && l.SlideShow.stop());
            },
            scaleToFit: function(t) {
                var e, o = this, i = o.current, a = i.$content;
                o.isAnimating || o.isMoved() || !a || "image" != i.type || !i.isLoaded || i.hasError || (o.isAnimating = !0, 
                n.fancybox.stop(a), e = o.getFitPos(i), o.updateCursor(e.width, e.height), n.fancybox.animate(a, {
                    top: e.top,
                    left: e.left,
                    scaleX: e.width / a.width(),
                    scaleY: e.height / a.height()
                }, t || 366, function() {
                    o.isAnimating = !1;
                }));
            },
            getFitPos: function(t) {
                var e, o, i, a, s = this, r = t.$content, c = t.$slide, l = t.width || t.opts.width, d = t.height || t.opts.height, u = {};
                return !!(t.isLoaded && r && r.length) && (e = n.fancybox.getTranslate(s.$refs.stage).width, 
                o = n.fancybox.getTranslate(s.$refs.stage).height, e -= parseFloat(c.css("paddingLeft")) + parseFloat(c.css("paddingRight")) + parseFloat(r.css("marginLeft")) + parseFloat(r.css("marginRight")), 
                o -= parseFloat(c.css("paddingTop")) + parseFloat(c.css("paddingBottom")) + parseFloat(r.css("marginTop")) + parseFloat(r.css("marginBottom")), 
                l && d || (l = e, d = o), i = Math.min(1, e / l, o / d), l *= i, d *= i, l > e - .5 && (l = e), 
                d > o - .5 && (d = o), "image" === t.type ? (u.top = Math.floor(.5 * (o - d)) + parseFloat(c.css("paddingTop")), 
                u.left = Math.floor(.5 * (e - l)) + parseFloat(c.css("paddingLeft"))) : "video" === t.contentType && (a = t.opts.width && t.opts.height ? l / d : t.opts.ratio || 16 / 9, 
                d > l / a ? d = l / a : l > d * a && (l = d * a)), u.width = l, u.height = d, u);
            },
            update: function(t) {
                var e = this;
                n.each(e.slides, function(n, o) {
                    e.updateSlide(o, t);
                });
            },
            updateSlide: function(t, e) {
                var o = this, i = t && t.$content, a = t.width || t.opts.width, s = t.height || t.opts.height, r = t.$slide;
                o.adjustCaption(t), i && (a || s || "video" === t.contentType) && !t.hasError && (n.fancybox.stop(i), 
                n.fancybox.setTranslate(i, o.getFitPos(t)), t.pos === o.currPos && (o.isAnimating = !1, 
                o.updateCursor())), o.adjustLayout(t), r.length && (r.trigger("refresh"), t.pos === o.currPos && o.$refs.toolbar.add(o.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar", r.get(0).scrollHeight > r.get(0).clientHeight)), 
                o.trigger("onUpdate", t, e);
            },
            centerSlide: function(t) {
                var e = this, o = e.current, i = o.$slide;
                !e.isClosing && o && (i.siblings().css({
                    transform: "",
                    opacity: ""
                }), i.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"), 
                n.fancybox.animate(i, {
                    top: 0,
                    left: 0,
                    opacity: 1
                }, void 0 === t ? 0 : t, function() {
                    i.css({
                        transform: "",
                        opacity: ""
                    }), o.isComplete || e.complete();
                }, !1));
            },
            isMoved: function(t) {
                var e, o, i = t || this.current;
                return !!i && (o = n.fancybox.getTranslate(this.$refs.stage), e = n.fancybox.getTranslate(i.$slide), 
                !i.$slide.hasClass("fancybox-animated") && (Math.abs(e.top - o.top) > .5 || Math.abs(e.left - o.left) > .5));
            },
            updateCursor: function(t, e) {
                var o, i, a = this, s = a.current, r = a.$refs.container;
                s && !a.isClosing && a.Guestures && (r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"), 
                o = a.canPan(t, e), i = !!o || a.isZoomable(), r.toggleClass("fancybox-is-zoomable", i), 
                n("[data-fancybox-zoom]").prop("disabled", !i), o ? r.addClass("fancybox-can-pan") : i && ("zoom" === s.opts.clickContent || n.isFunction(s.opts.clickContent) && "zoom" == s.opts.clickContent(s)) ? r.addClass("fancybox-can-zoomIn") : s.opts.touch && (s.opts.touch.vertical || a.group.length > 1) && "video" !== s.contentType && r.addClass("fancybox-can-swipe"));
            },
            isZoomable: function() {
                var t, e = this, n = e.current;
                if (n && !e.isClosing && "image" === n.type && !n.hasError) {
                    if (!n.isLoaded) return !0;
                    if ((t = e.getFitPos(n)) && (n.width > t.width || n.height > t.height)) return !0;
                }
                return !1;
            },
            isScaledDown: function(t, e) {
                var o = this, i = !1, a = o.current, s = a.$content;
                return void 0 !== t && void 0 !== e ? i = t < a.width && e < a.height : s && (i = n.fancybox.getTranslate(s), 
                i = i.width < a.width && i.height < a.height), i;
            },
            canPan: function(t, e) {
                var o = this, i = o.current, a = null, s = !1;
                return "image" === i.type && (i.isComplete || t && e) && !i.hasError && (s = o.getFitPos(i), 
                void 0 !== t && void 0 !== e ? a = {
                    width: t,
                    height: e
                } : i.isComplete && (a = n.fancybox.getTranslate(i.$content)), a && s && (s = Math.abs(a.width - s.width) > 1.5 || Math.abs(a.height - s.height) > 1.5)), 
                s;
            },
            loadSlide: function(t) {
                var e, o, i, a = this;
                if (!t.isLoading && !t.isLoaded) {
                    if (t.isLoading = !0, !1 === a.trigger("beforeLoad", t)) return t.isLoading = !1, 
                    !1;
                    switch (e = t.type, o = t.$slide, o.off("refresh").trigger("onReset").addClass(t.opts.slideClass), 
                    e) {
                      case "image":
                        a.setImage(t);
                        break;

                      case "iframe":
                        a.setIframe(t);
                        break;

                      case "html":
                        a.setContent(t, t.src || t.content);
                        break;

                      case "video":
                        a.setContent(t, t.opts.video.tpl.replace(/\{\{src\}\}/gi, t.src).replace("{{format}}", t.opts.videoFormat || t.opts.video.format || "").replace("{{poster}}", t.thumb || ""));
                        break;

                      case "inline":
                        n(t.src).length ? a.setContent(t, n(t.src)) : a.setError(t);
                        break;

                      case "ajax":
                        a.showLoading(t), i = n.ajax(n.extend({}, t.opts.ajax.settings, {
                            url: t.src,
                            success: function(e, n) {
                                "success" === n && a.setContent(t, e);
                            },
                            error: function(e, n) {
                                e && "abort" !== n && a.setError(t);
                            }
                        })), o.one("onReset", function() {
                            i.abort();
                        });
                        break;

                      default:
                        a.setError(t);
                    }
                    return !0;
                }
            },
            setImage: function(t) {
                var o, i = this;
                setTimeout(function() {
                    var e = t.$image;
                    i.isClosing || !t.isLoading || e && e.length && e[0].complete || t.hasError || i.showLoading(t);
                }, 50), i.checkSrcset(t), t.$content = n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(t.$slide.addClass("fancybox-slide--image")), 
                !1 !== t.opts.preload && t.opts.width && t.opts.height && t.thumb && (t.width = t.opts.width, 
                t.height = t.opts.height, o = e.createElement("img"), o.onerror = function() {
                    n(this).remove(), t.$ghost = null;
                }, o.onload = function() {
                    i.afterLoad(t);
                }, t.$ghost = n(o).addClass("fancybox-image").appendTo(t.$content).attr("src", t.thumb)), 
                i.setBigImage(t);
            },
            checkSrcset: function(e) {
                var n, o, i, a, s = e.opts.srcset || e.opts.image.srcset;
                if (s) {
                    i = t.devicePixelRatio || 1, a = t.innerWidth * i, o = s.split(",").map(function(t) {
                        var e = {};
                        return t.trim().split(/\s+/).forEach(function(t, n) {
                            var o = parseInt(t.substring(0, t.length - 1), 10);
                            if (0 === n) return e.url = t;
                            o && (e.value = o, e.postfix = t[t.length - 1]);
                        }), e;
                    }), o.sort(function(t, e) {
                        return t.value - e.value;
                    });
                    for (var r = 0; r < o.length; r++) {
                        var c = o[r];
                        if ("w" === c.postfix && c.value >= a || "x" === c.postfix && c.value >= i) {
                            n = c;
                            break;
                        }
                    }
                    !n && o.length && (n = o[o.length - 1]), n && (e.src = n.url, e.width && e.height && "w" == n.postfix && (e.height = e.width / e.height * n.value, 
                    e.width = n.value), e.opts.srcset = s);
                }
            },
            setBigImage: function(t) {
                var o = this, i = e.createElement("img"), a = n(i);
                t.$image = a.one("error", function() {
                    o.setError(t);
                }).one("load", function() {
                    var e;
                    t.$ghost || (o.resolveImageSlideSize(t, this.naturalWidth, this.naturalHeight), 
                    o.afterLoad(t)), o.isClosing || (t.opts.srcset && (e = t.opts.sizes, e && "auto" !== e || (e = (t.width / t.height > 1 && s.width() / s.height() > 1 ? "100" : Math.round(t.width / t.height * 100)) + "vw"), 
                    a.attr("sizes", e).attr("srcset", t.opts.srcset)), t.$ghost && setTimeout(function() {
                        t.$ghost && !o.isClosing && t.$ghost.hide();
                    }, Math.min(300, Math.max(1e3, t.height / 1600))), o.hideLoading(t));
                }).addClass("fancybox-image").attr("src", t.src).appendTo(t.$content), (i.complete || "complete" == i.readyState) && a.naturalWidth && a.naturalHeight ? a.trigger("load") : i.error && a.trigger("error");
            },
            resolveImageSlideSize: function(t, e, n) {
                var o = parseInt(t.opts.width, 10), i = parseInt(t.opts.height, 10);
                t.width = e, t.height = n, o > 0 && (t.width = o, t.height = Math.floor(o * n / e)), 
                i > 0 && (t.width = Math.floor(i * e / n), t.height = i);
            },
            setIframe: function(t) {
                var e, o = this, i = t.opts.iframe, a = t.$slide;
                t.$content = n('<div class="fancybox-content' + (i.preload ? " fancybox-is-hidden" : "") + '"></div>').css(i.css).appendTo(a), 
                a.addClass("fancybox-slide--" + t.contentType), t.$iframe = e = n(i.tpl.replace(/\{rnd\}/g, new Date().getTime())).attr(i.attr).appendTo(t.$content), 
                i.preload ? (o.showLoading(t), e.on("load.fb error.fb", function(e) {
                    this.isReady = 1, t.$slide.trigger("refresh"), o.afterLoad(t);
                }), a.on("refresh.fb", function() {
                    var n, o, s = t.$content, r = i.css.width, c = i.css.height;
                    if (1 === e[0].isReady) {
                        try {
                            n = e.contents(), o = n.find("body");
                        } catch (t) {}
                        o && o.length && o.children().length && (a.css("overflow", "visible"), s.css({
                            width: "100%",
                            "max-width": "100%",
                            height: "9999px"
                        }), void 0 === r && (r = Math.ceil(Math.max(o[0].clientWidth, o.outerWidth(!0)))), 
                        s.css("width", r || "").css("max-width", ""), void 0 === c && (c = Math.ceil(Math.max(o[0].clientHeight, o.outerHeight(!0)))), 
                        s.css("height", c || ""), a.css("overflow", "auto")), s.removeClass("fancybox-is-hidden");
                    }
                })) : o.afterLoad(t), e.attr("src", t.src), a.one("onReset", function() {
                    try {
                        n(this).find("iframe").hide().unbind().attr("src", "//about:blank");
                    } catch (t) {}
                    n(this).off("refresh.fb").empty(), t.isLoaded = !1, t.isRevealed = !1;
                });
            },
            setContent: function(t, e) {
                var o = this;
                o.isClosing || (o.hideLoading(t), t.$content && n.fancybox.stop(t.$content), t.$slide.empty(), 
                l(e) && e.parent().length ? ((e.hasClass("fancybox-content") || e.parent().hasClass("fancybox-content")) && e.parents(".fancybox-slide").trigger("onReset"), 
                t.$placeholder = n("<div>").hide().insertAfter(e), e.css("display", "inline-block")) : t.hasError || ("string" === n.type(e) && (e = n("<div>").append(n.trim(e)).contents()), 
                t.opts.filter && (e = n("<div>").html(e).find(t.opts.filter))), t.$slide.one("onReset", function() {
                    n(this).find("video,audio").trigger("pause"), t.$placeholder && (t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(), 
                    t.$placeholder = null), t.$smallBtn && (t.$smallBtn.remove(), t.$smallBtn = null), 
                    t.hasError || (n(this).empty(), t.isLoaded = !1, t.isRevealed = !1);
                }), n(e).appendTo(t.$slide), n(e).is("video,audio") && (n(e).addClass("fancybox-video"), 
                n(e).wrap("<div></div>"), t.contentType = "video", t.opts.width = t.opts.width || n(e).attr("width"), 
                t.opts.height = t.opts.height || n(e).attr("height")), t.$content = t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(), 
                t.$content.siblings().hide(), t.$content.length || (t.$content = t.$slide.wrapInner("<div></div>").children().first()), 
                t.$content.addClass("fancybox-content"), t.$slide.addClass("fancybox-slide--" + t.contentType), 
                o.afterLoad(t));
            },
            setError: function(t) {
                t.hasError = !0, t.$slide.trigger("onReset").removeClass("fancybox-slide--" + t.contentType).addClass("fancybox-slide--error"), 
                t.contentType = "html", this.setContent(t, this.translate(t, t.opts.errorTpl)), 
                t.pos === this.currPos && (this.isAnimating = !1);
            },
            showLoading: function(t) {
                var e = this;
                (t = t || e.current) && !t.$spinner && (t.$spinner = n(e.translate(e, e.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"));
            },
            hideLoading: function(t) {
                var e = this;
                (t = t || e.current) && t.$spinner && (t.$spinner.stop().remove(), delete t.$spinner);
            },
            afterLoad: function(t) {
                var e = this;
                e.isClosing || (t.isLoading = !1, t.isLoaded = !0, e.trigger("afterLoad", t), e.hideLoading(t), 
                !t.opts.smallBtn || t.$smallBtn && t.$smallBtn.length || (t.$smallBtn = n(e.translate(t, t.opts.btnTpl.smallBtn)).appendTo(t.$content)), 
                t.opts.protect && t.$content && !t.hasError && (t.$content.on("contextmenu.fb", function(t) {
                    return 2 == t.button && t.preventDefault(), !0;
                }), "image" === t.type && n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)), 
                e.adjustCaption(t), e.adjustLayout(t), t.pos === e.currPos && e.updateCursor(), 
                e.revealContent(t));
            },
            adjustCaption: function(t) {
                var e, n = this, o = t || n.current, i = o.opts.caption, a = o.opts.preventCaptionOverlap, s = n.$refs.caption, r = !1;
                s.toggleClass("fancybox-caption--separate", a), a && i && i.length && (o.pos !== n.currPos ? (e = s.clone().appendTo(s.parent()), 
                e.children().eq(0).empty().html(i), r = e.outerHeight(!0), e.empty().remove()) : n.$caption && (r = n.$caption.outerHeight(!0)), 
                o.$slide.css("padding-bottom", r || ""));
            },
            adjustLayout: function(t) {
                var e, n, o, i, a = this, s = t || a.current;
                s.isLoaded && !0 !== s.opts.disableLayoutFix && (s.$content.css("margin-bottom", ""), 
                s.$content.outerHeight() > s.$slide.height() + .5 && (o = s.$slide[0].style["padding-bottom"], 
                i = s.$slide.css("padding-bottom"), parseFloat(i) > 0 && (e = s.$slide[0].scrollHeight, 
                s.$slide.css("padding-bottom", 0), Math.abs(e - s.$slide[0].scrollHeight) < 1 && (n = i), 
                s.$slide.css("padding-bottom", o))), s.$content.css("margin-bottom", n));
            },
            revealContent: function(t) {
                var e, o, i, a, s = this, r = t.$slide, c = !1, l = !1, d = s.isMoved(t), u = t.isRevealed;
                return t.isRevealed = !0, e = t.opts[s.firstRun ? "animationEffect" : "transitionEffect"], 
                i = t.opts[s.firstRun ? "animationDuration" : "transitionDuration"], i = parseInt(void 0 === t.forcedDuration ? i : t.forcedDuration, 10), 
                !d && t.pos === s.currPos && i || (e = !1), "zoom" === e && (t.pos === s.currPos && i && "image" === t.type && !t.hasError && (l = s.getThumbPos(t)) ? c = s.getFitPos(t) : e = "fade"), 
                "zoom" === e ? (s.isAnimating = !0, c.scaleX = c.width / l.width, c.scaleY = c.height / l.height, 
                a = t.opts.zoomOpacity, "auto" == a && (a = Math.abs(t.width / t.height - l.width / l.height) > .1), 
                a && (l.opacity = .1, c.opacity = 1), n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"), l), 
                p(t.$content), void n.fancybox.animate(t.$content, c, i, function() {
                    s.isAnimating = !1, s.complete();
                })) : (s.updateSlide(t), e ? (n.fancybox.stop(r), o = "fancybox-slide--" + (t.pos >= s.prevPos ? "next" : "previous") + " fancybox-animated fancybox-fx-" + e, 
                r.addClass(o).removeClass("fancybox-slide--current"), t.$content.removeClass("fancybox-is-hidden"), 
                p(r), "image" !== t.type && t.$content.hide().show(0), void n.fancybox.animate(r, "fancybox-slide--current", i, function() {
                    r.removeClass(o).css({
                        transform: "",
                        opacity: ""
                    }), t.pos === s.currPos && s.complete();
                }, !0)) : (t.$content.removeClass("fancybox-is-hidden"), u || !d || "image" !== t.type || t.hasError || t.$content.hide().fadeIn("fast"), 
                void (t.pos === s.currPos && s.complete())));
            },
            getThumbPos: function(t) {
                var e, o, i, a, s, r = !1, c = t.$thumb;
                return !(!c || !g(c[0])) && (e = n.fancybox.getTranslate(c), o = parseFloat(c.css("border-top-width") || 0), 
                i = parseFloat(c.css("border-right-width") || 0), a = parseFloat(c.css("border-bottom-width") || 0), 
                s = parseFloat(c.css("border-left-width") || 0), r = {
                    top: e.top + o,
                    left: e.left + s,
                    width: e.width - i - s,
                    height: e.height - o - a,
                    scaleX: 1,
                    scaleY: 1
                }, e.width > 0 && e.height > 0 && r);
            },
            complete: function() {
                var t, e = this, o = e.current, i = {};
                !e.isMoved() && o.isLoaded && (o.isComplete || (o.isComplete = !0, o.$slide.siblings().trigger("onReset"), 
                e.preload("inline"), p(o.$slide), o.$slide.addClass("fancybox-slide--complete"), 
                n.each(e.slides, function(t, o) {
                    o.pos >= e.currPos - 1 && o.pos <= e.currPos + 1 ? i[o.pos] = o : o && (n.fancybox.stop(o.$slide), 
                    o.$slide.off().remove());
                }), e.slides = i), e.isAnimating = !1, e.updateCursor(), e.trigger("afterShow"), 
                o.opts.video.autoStart && o.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended", function() {
                    Document.exitFullscreen ? Document.exitFullscreen() : this.webkitExitFullscreen && this.webkitExitFullscreen(), 
                    e.next();
                }), o.opts.autoFocus && "html" === o.contentType && (t = o.$content.find("input[autofocus]:enabled:visible:first"), 
                t.length ? t.trigger("focus") : e.focus(null, !0)), o.$slide.scrollTop(0).scrollLeft(0));
            },
            preload: function(t) {
                var e, n, o = this;
                o.group.length < 2 || (n = o.slides[o.currPos + 1], e = o.slides[o.currPos - 1], 
                e && e.type === t && o.loadSlide(e), n && n.type === t && o.loadSlide(n));
            },
            focus: function(t, o) {
                var i, a, s = this, r = [ "a[href]", "area[href]", 'input:not([disabled]):not([type="hidden"]):not([aria-hidden])', "select:not([disabled]):not([aria-hidden])", "textarea:not([disabled]):not([aria-hidden])", "button:not([disabled]):not([aria-hidden])", "iframe", "object", "embed", "video", "audio", "[contenteditable]", '[tabindex]:not([tabindex^="-"])' ].join(",");
                s.isClosing || (i = !t && s.current && s.current.isComplete ? s.current.$slide.find("*:visible" + (o ? ":not(.fancybox-close-small)" : "")) : s.$refs.container.find("*:visible"), 
                i = i.filter(r).filter(function() {
                    return "hidden" !== n(this).css("visibility") && !n(this).hasClass("disabled");
                }), i.length ? (a = i.index(e.activeElement), t && t.shiftKey ? (a < 0 || 0 == a) && (t.preventDefault(), 
                i.eq(i.length - 1).trigger("focus")) : (a < 0 || a == i.length - 1) && (t && t.preventDefault(), 
                i.eq(0).trigger("focus"))) : s.$refs.container.trigger("focus"));
            },
            activate: function() {
                var t = this;
                n(".fancybox-container").each(function() {
                    var e = n(this).data("FancyBox");
                    e && e.id !== t.id && !e.isClosing && (e.trigger("onDeactivate"), e.removeEvents(), 
                    e.isVisible = !1);
                }), t.isVisible = !0, (t.current || t.isIdle) && (t.update(), t.updateControls()), 
                t.trigger("onActivate"), t.addEvents();
            },
            close: function(t, e) {
                var o, i, a, s, r, c, l, u = this, f = u.current, h = function() {
                    u.cleanUp(t);
                };
                return !u.isClosing && (u.isClosing = !0, !1 === u.trigger("beforeClose", t) ? (u.isClosing = !1, 
                d(function() {
                    u.update();
                }), !1) : (u.removeEvents(), a = f.$content, o = f.opts.animationEffect, i = n.isNumeric(e) ? e : o ? f.opts.animationDuration : 0, 
                f.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"), 
                !0 !== t ? n.fancybox.stop(f.$slide) : o = !1, f.$slide.siblings().trigger("onReset").remove(), 
                i && u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration", i + "ms"), 
                u.hideLoading(f), u.hideControls(!0), u.updateCursor(), "zoom" !== o || a && i && "image" === f.type && !u.isMoved() && !f.hasError && (l = u.getThumbPos(f)) || (o = "fade"), 
                "zoom" === o ? (n.fancybox.stop(a), s = n.fancybox.getTranslate(a), c = {
                    top: s.top,
                    left: s.left,
                    scaleX: s.width / l.width,
                    scaleY: s.height / l.height,
                    width: l.width,
                    height: l.height
                }, r = f.opts.zoomOpacity, "auto" == r && (r = Math.abs(f.width / f.height - l.width / l.height) > .1), 
                r && (l.opacity = 0), n.fancybox.setTranslate(a, c), p(a), n.fancybox.animate(a, l, i, h), 
                !0) : (o && i ? n.fancybox.animate(f.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"), "fancybox-animated fancybox-fx-" + o, i, h) : !0 === t ? setTimeout(h, i) : h(), 
                !0)));
            },
            cleanUp: function(e) {
                var o, i, a, s = this, r = s.current.opts.$orig;
                s.current.$slide.trigger("onReset"), s.$refs.container.empty().remove(), s.trigger("afterClose", e), 
                s.current.opts.backFocus && (r && r.length && r.is(":visible") || (r = s.$trigger), 
                r && r.length && (i = t.scrollX, a = t.scrollY, r.trigger("focus"), n("html, body").scrollTop(a).scrollLeft(i))), 
                s.current = null, o = n.fancybox.getInstance(), o ? o.activate() : (n("body").removeClass("fancybox-active compensate-for-scrollbar"), 
                n("#fancybox-style-noscroll").remove());
            },
            trigger: function(t, e) {
                var o, i = Array.prototype.slice.call(arguments, 1), a = this, s = e && e.opts ? e : a.current;
                if (s ? i.unshift(s) : s = a, i.unshift(a), n.isFunction(s.opts[t]) && (o = s.opts[t].apply(s, i)), 
                !1 === o) return o;
                "afterClose" !== t && a.$refs ? a.$refs.container.trigger(t + ".fb", i) : r.trigger(t + ".fb", i);
            },
            updateControls: function() {
                var t = this, o = t.current, i = o.index, a = t.$refs.container, s = t.$refs.caption, r = o.opts.caption;
                o.$slide.trigger("refresh"), r && r.length ? (t.$caption = s, s.children().eq(0).html(r)) : t.$caption = null, 
                t.hasHiddenControls || t.isIdle || t.showControls(), a.find("[data-fancybox-count]").html(t.group.length), 
                a.find("[data-fancybox-index]").html(i + 1), a.find("[data-fancybox-prev]").prop("disabled", !o.opts.loop && i <= 0), 
                a.find("[data-fancybox-next]").prop("disabled", !o.opts.loop && i >= t.group.length - 1), 
                "image" === o.type ? a.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href", o.opts.image.src || o.src).show() : o.opts.toolbar && a.find("[data-fancybox-download],[data-fancybox-zoom]").hide(), 
                n(e.activeElement).is(":hidden,[disabled]") && t.$refs.container.trigger("focus");
            },
            hideControls: function(t) {
                var e = this, n = [ "infobar", "toolbar", "nav" ];
                !t && e.current.opts.preventCaptionOverlap || n.push("caption"), this.$refs.container.removeClass(n.map(function(t) {
                    return "fancybox-show-" + t;
                }).join(" ")), this.hasHiddenControls = !0;
            },
            showControls: function() {
                var t = this, e = t.current ? t.current.opts : t.opts, n = t.$refs.container;
                t.hasHiddenControls = !1, t.idleSecondsCounter = 0, n.toggleClass("fancybox-show-toolbar", !(!e.toolbar || !e.buttons)).toggleClass("fancybox-show-infobar", !!(e.infobar && t.group.length > 1)).toggleClass("fancybox-show-caption", !!t.$caption).toggleClass("fancybox-show-nav", !!(e.arrows && t.group.length > 1)).toggleClass("fancybox-is-modal", !!e.modal);
            },
            toggleControls: function() {
                this.hasHiddenControls ? this.showControls() : this.hideControls();
            }
        }), n.fancybox = {
            version: "3.5.7",
            defaults: a,
            getInstance: function(t) {
                var e = n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"), o = Array.prototype.slice.call(arguments, 1);
                return e instanceof b && ("string" === n.type(t) ? e[t].apply(e, o) : "function" === n.type(t) && t.apply(e, o), 
                e);
            },
            open: function(t, e, n) {
                return new b(t, e, n);
            },
            close: function(t) {
                var e = this.getInstance();
                e && (e.close(), !0 === t && this.close(t));
            },
            destroy: function() {
                this.close(!0), r.add("body").off("click.fb-start", "**");
            },
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            use3d: function() {
                var n = e.createElement("div");
                return t.getComputedStyle && t.getComputedStyle(n) && t.getComputedStyle(n).getPropertyValue("transform") && !(e.documentMode && e.documentMode < 11);
            }(),
            getTranslate: function(t) {
                var e;
                return !(!t || !t.length) && (e = t[0].getBoundingClientRect(), {
                    top: e.top || 0,
                    left: e.left || 0,
                    width: e.width,
                    height: e.height,
                    opacity: parseFloat(t.css("opacity"))
                });
            },
            setTranslate: function(t, e) {
                var n = "", o = {};
                if (t && e) return void 0 === e.left && void 0 === e.top || (n = (void 0 === e.left ? t.position().left : e.left) + "px, " + (void 0 === e.top ? t.position().top : e.top) + "px", 
                n = this.use3d ? "translate3d(" + n + ", 0px)" : "translate(" + n + ")"), void 0 !== e.scaleX && void 0 !== e.scaleY ? n += " scale(" + e.scaleX + ", " + e.scaleY + ")" : void 0 !== e.scaleX && (n += " scaleX(" + e.scaleX + ")"), 
                n.length && (o.transform = n), void 0 !== e.opacity && (o.opacity = e.opacity), 
                void 0 !== e.width && (o.width = e.width), void 0 !== e.height && (o.height = e.height), 
                t.css(o);
            },
            animate: function(t, e, o, i, a) {
                var s, r = this;
                n.isFunction(o) && (i = o, o = null), r.stop(t), s = r.getTranslate(t), t.on(f, function(c) {
                    (!c || !c.originalEvent || t.is(c.originalEvent.target) && "z-index" != c.originalEvent.propertyName) && (r.stop(t), 
                    n.isNumeric(o) && t.css("transition-duration", ""), n.isPlainObject(e) ? void 0 !== e.scaleX && void 0 !== e.scaleY && r.setTranslate(t, {
                        top: e.top,
                        left: e.left,
                        width: s.width * e.scaleX,
                        height: s.height * e.scaleY,
                        scaleX: 1,
                        scaleY: 1
                    }) : !0 !== a && t.removeClass(e), n.isFunction(i) && i(c));
                }), n.isNumeric(o) && t.css("transition-duration", o + "ms"), n.isPlainObject(e) ? (void 0 !== e.scaleX && void 0 !== e.scaleY && (delete e.width, 
                delete e.height, t.parent().hasClass("fancybox-slide--image") && t.parent().addClass("fancybox-is-scaling")), 
                n.fancybox.setTranslate(t, e)) : t.addClass(e), t.data("timer", setTimeout(function() {
                    t.trigger(f);
                }, o + 33));
            },
            stop: function(t, e) {
                t && t.length && (clearTimeout(t.data("timer")), e && t.trigger(f), t.off(f).css("transition-duration", ""), 
                t.parent().removeClass("fancybox-is-scaling"));
            }
        }, n.fn.fancybox = function(t) {
            var e;
            return t = t || {}, e = t.selector || !1, e ? n("body").off("click.fb-start", e).on("click.fb-start", e, {
                options: t
            }, i) : this.off("click.fb-start").on("click.fb-start", {
                items: this,
                options: t
            }, i), this;
        }, r.on("click.fb-start", "[data-fancybox]", i), r.on("click.fb-start", "[data-fancybox-trigger]", function(t) {
            n('[data-fancybox="' + n(this).attr("data-fancybox-trigger") + '"]').eq(n(this).attr("data-fancybox-index") || 0).trigger("click.fb-start", {
                $trigger: n(this)
            });
        }), function() {
            var t = null;
            r.on("mousedown mouseup focus blur", ".fancybox-button", function(e) {
                switch (e.type) {
                  case "mousedown":
                    t = n(this);
                    break;

                  case "mouseup":
                    t = null;
                    break;

                  case "focusin":
                    n(".fancybox-button").removeClass("fancybox-focus"), n(this).is(t) || n(this).is("[disabled]") || n(this).addClass("fancybox-focus");
                    break;

                  case "focusout":
                    n(".fancybox-button").removeClass("fancybox-focus");
                }
            });
        }();
    }
}(window, document, jQuery), function(t) {
    "use strict";
    var e = {
        youtube: {
            matcher: /(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,
            params: {
                autoplay: 1,
                autohide: 1,
                fs: 1,
                rel: 0,
                hd: 1,
                wmode: "transparent",
                enablejsapi: 1,
                html5: 1
            },
            paramPlace: 8,
            type: "iframe",
            url: "https://www.youtube-nocookie.com/embed/$4",
            thumb: "https://img.youtube.com/vi/$4/hqdefault.jpg"
        },
        vimeo: {
            matcher: /^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,
            params: {
                autoplay: 1,
                hd: 1,
                show_title: 1,
                show_byline: 1,
                show_portrait: 0,
                fullscreen: 1
            },
            paramPlace: 3,
            type: "iframe",
            url: "//player.vimeo.com/video/$2"
        },
        instagram: {
            matcher: /(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,
            type: "image",
            url: "//$1/p/$2/media/?size=l"
        },
        gmap_place: {
            matcher: /(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,
            type: "iframe",
            url: function(t) {
                return "//maps.google." + t[2] + "/?ll=" + (t[9] ? t[9] + "&z=" + Math.floor(t[10]) + (t[12] ? t[12].replace(/^\//, "&") : "") : t[12] + "").replace(/\?/, "&") + "&output=" + (t[12] && t[12].indexOf("layer=c") > 0 ? "svembed" : "embed");
            }
        },
        gmap_search: {
            matcher: /(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,
            type: "iframe",
            url: function(t) {
                return "//maps.google." + t[2] + "/maps?q=" + t[5].replace("query=", "q=").replace("api=1", "") + "&output=embed";
            }
        }
    }, n = function(e, n, o) {
        if (e) return o = o || "", "object" === t.type(o) && (o = t.param(o, !0)), t.each(n, function(t, n) {
            e = e.replace("$" + t, n || "");
        }), o.length && (e += (e.indexOf("?") > 0 ? "&" : "?") + o), e;
    };
    t(document).on("objectNeedsType.fb", function(o, i, a) {
        var s, r, c, l, d, u, f, p = a.src || "", h = !1;
        s = t.extend(!0, {}, e, a.opts.media), t.each(s, function(e, o) {
            if (c = p.match(o.matcher)) {
                if (h = o.type, f = e, u = {}, o.paramPlace && c[o.paramPlace]) {
                    d = c[o.paramPlace], "?" == d[0] && (d = d.substring(1)), d = d.split("&");
                    for (var i = 0; i < d.length; ++i) {
                        var s = d[i].split("=", 2);
                        2 == s.length && (u[s[0]] = decodeURIComponent(s[1].replace(/\+/g, " ")));
                    }
                }
                return l = t.extend(!0, {}, o.params, a.opts[e], u), p = "function" === t.type(o.url) ? o.url.call(this, c, l, a) : n(o.url, c, l), 
                r = "function" === t.type(o.thumb) ? o.thumb.call(this, c, l, a) : n(o.thumb, c), 
                "youtube" === e ? p = p.replace(/&t=((\d+)m)?(\d+)s/, function(t, e, n, o) {
                    return "&start=" + ((n ? 60 * parseInt(n, 10) : 0) + parseInt(o, 10));
                }) : "vimeo" === e && (p = p.replace("&%23", "#")), !1;
            }
        }), h ? (a.opts.thumb || a.opts.$thumb && a.opts.$thumb.length || (a.opts.thumb = r), 
        "iframe" === h && (a.opts = t.extend(!0, a.opts, {
            iframe: {
                preload: !1,
                attr: {
                    scrolling: "no"
                }
            }
        })), t.extend(a, {
            type: h,
            src: p,
            origSrc: a.src,
            contentSource: f,
            contentType: "image" === h ? "image" : "gmap_place" == f || "gmap_search" == f ? "map" : "video"
        })) : p && (a.type = a.opts.defaultType);
    });
    var o = {
        youtube: {
            src: "https://www.youtube.com/iframe_api",
            class: "YT",
            loading: !1,
            loaded: !1
        },
        vimeo: {
            src: "https://player.vimeo.com/api/player.js",
            class: "Vimeo",
            loading: !1,
            loaded: !1
        },
        load: function(t) {
            var e, n = this;
            if (this[t].loaded) return void setTimeout(function() {
                n.done(t);
            });
            this[t].loading || (this[t].loading = !0, e = document.createElement("script"), 
            e.type = "text/javascript", e.src = this[t].src, "youtube" === t ? window.onYouTubeIframeAPIReady = function() {
                n[t].loaded = !0, n.done(t);
            } : e.onload = function() {
                n[t].loaded = !0, n.done(t);
            }, document.body.appendChild(e));
        },
        done: function(e) {
            var n, o, i;
            "youtube" === e && delete window.onYouTubeIframeAPIReady, (n = t.fancybox.getInstance()) && (o = n.current.$content.find("iframe"), 
            "youtube" === e && void 0 !== YT && YT ? i = new YT.Player(o.attr("id"), {
                events: {
                    onStateChange: function(t) {
                        0 == t.data && n.next();
                    }
                }
            }) : "vimeo" === e && void 0 !== Vimeo && Vimeo && (i = new Vimeo.Player(o), i.on("ended", function() {
                n.next();
            })));
        }
    };
    t(document).on({
        "afterShow.fb": function(t, e, n) {
            e.group.length > 1 && ("youtube" === n.contentSource || "vimeo" === n.contentSource) && o.load(n.contentSource);
        }
    });
}(jQuery), function(t, e, n) {
    "use strict";
    var o = function() {
        return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || function(e) {
            return t.setTimeout(e, 1e3 / 60);
        };
    }(), i = function() {
        return t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.mozCancelAnimationFrame || t.oCancelAnimationFrame || function(e) {
            t.clearTimeout(e);
        };
    }(), a = function(e) {
        var n = [];
        e = e.originalEvent || e || t.e, e = e.touches && e.touches.length ? e.touches : e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ];
        for (var o in e) e[o].pageX ? n.push({
            x: e[o].pageX,
            y: e[o].pageY
        }) : e[o].clientX && n.push({
            x: e[o].clientX,
            y: e[o].clientY
        });
        return n;
    }, s = function(t, e, n) {
        return e && t ? "x" === n ? t.x - e.x : "y" === n ? t.y - e.y : Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)) : 0;
    }, r = function(t) {
        if (t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe') || n.isFunction(t.get(0).onclick) || t.data("selectable")) return !0;
        for (var e = 0, o = t[0].attributes, i = o.length; e < i; e++) if ("data-fancybox-" === o[e].nodeName.substr(0, 14)) return !0;
        return !1;
    }, c = function(e) {
        var n = t.getComputedStyle(e)["overflow-y"], o = t.getComputedStyle(e)["overflow-x"], i = ("scroll" === n || "auto" === n) && e.scrollHeight > e.clientHeight, a = ("scroll" === o || "auto" === o) && e.scrollWidth > e.clientWidth;
        return i || a;
    }, l = function(t) {
        for (var e = !1; ;) {
            if (e = c(t.get(0))) break;
            if (t = t.parent(), !t.length || t.hasClass("fancybox-stage") || t.is("body")) break;
        }
        return e;
    }, d = function(t) {
        var e = this;
        e.instance = t, e.$bg = t.$refs.bg, e.$stage = t.$refs.stage, e.$container = t.$refs.container, 
        e.destroy(), e.$container.on("touchstart.fb.touch mousedown.fb.touch", n.proxy(e, "ontouchstart"));
    };
    d.prototype.destroy = function() {
        var t = this;
        t.$container.off(".fb.touch"), n(e).off(".fb.touch"), t.requestId && (i(t.requestId), 
        t.requestId = null), t.tapped && (clearTimeout(t.tapped), t.tapped = null);
    }, d.prototype.ontouchstart = function(o) {
        var i = this, c = n(o.target), d = i.instance, u = d.current, f = u.$slide, p = u.$content, h = "touchstart" == o.type;
        if (h && i.$container.off("mousedown.fb.touch"), (!o.originalEvent || 2 != o.originalEvent.button) && f.length && c.length && !r(c) && !r(c.parent()) && (c.is("img") || !(o.originalEvent.clientX > c[0].clientWidth + c.offset().left))) {
            if (!u || d.isAnimating || u.$slide.hasClass("fancybox-animated")) return o.stopPropagation(), 
            void o.preventDefault();
            i.realPoints = i.startPoints = a(o), i.startPoints.length && (u.touch && o.stopPropagation(), 
            i.startEvent = o, i.canTap = !0, i.$target = c, i.$content = p, i.opts = u.opts.touch, 
            i.isPanning = !1, i.isSwiping = !1, i.isZooming = !1, i.isScrolling = !1, i.canPan = d.canPan(), 
            i.startTime = new Date().getTime(), i.distanceX = i.distanceY = i.distance = 0, 
            i.canvasWidth = Math.round(f[0].clientWidth), i.canvasHeight = Math.round(f[0].clientHeight), 
            i.contentLastPos = null, i.contentStartPos = n.fancybox.getTranslate(i.$content) || {
                top: 0,
                left: 0
            }, i.sliderStartPos = n.fancybox.getTranslate(f), i.stagePos = n.fancybox.getTranslate(d.$refs.stage), 
            i.sliderStartPos.top -= i.stagePos.top, i.sliderStartPos.left -= i.stagePos.left, 
            i.contentStartPos.top -= i.stagePos.top, i.contentStartPos.left -= i.stagePos.left, 
            n(e).off(".fb.touch").on(h ? "touchend.fb.touch touchcancel.fb.touch" : "mouseup.fb.touch mouseleave.fb.touch", n.proxy(i, "ontouchend")).on(h ? "touchmove.fb.touch" : "mousemove.fb.touch", n.proxy(i, "ontouchmove")), 
            n.fancybox.isMobile && e.addEventListener("scroll", i.onscroll, !0), ((i.opts || i.canPan) && (c.is(i.$stage) || i.$stage.find(c).length) || (c.is(".fancybox-image") && o.preventDefault(), 
            n.fancybox.isMobile && c.parents(".fancybox-caption").length)) && (i.isScrollable = l(c) || l(c.parent()), 
            n.fancybox.isMobile && i.isScrollable || o.preventDefault(), (1 === i.startPoints.length || u.hasError) && (i.canPan ? (n.fancybox.stop(i.$content), 
            i.isPanning = !0) : i.isSwiping = !0, i.$container.addClass("fancybox-is-grabbing")), 
            2 === i.startPoints.length && "image" === u.type && (u.isLoaded || u.$ghost) && (i.canTap = !1, 
            i.isSwiping = !1, i.isPanning = !1, i.isZooming = !0, n.fancybox.stop(i.$content), 
            i.centerPointStartX = .5 * (i.startPoints[0].x + i.startPoints[1].x) - n(t).scrollLeft(), 
            i.centerPointStartY = .5 * (i.startPoints[0].y + i.startPoints[1].y) - n(t).scrollTop(), 
            i.percentageOfImageAtPinchPointX = (i.centerPointStartX - i.contentStartPos.left) / i.contentStartPos.width, 
            i.percentageOfImageAtPinchPointY = (i.centerPointStartY - i.contentStartPos.top) / i.contentStartPos.height, 
            i.startDistanceBetweenFingers = s(i.startPoints[0], i.startPoints[1]))));
        }
    }, d.prototype.onscroll = function(t) {
        var n = this;
        n.isScrolling = !0, e.removeEventListener("scroll", n.onscroll, !0);
    }, d.prototype.ontouchmove = function(t) {
        var e = this;
        return void 0 !== t.originalEvent.buttons && 0 === t.originalEvent.buttons ? void e.ontouchend(t) : e.isScrolling ? void (e.canTap = !1) : (e.newPoints = a(t), 
        void ((e.opts || e.canPan) && e.newPoints.length && e.newPoints.length && (e.isSwiping && !0 === e.isSwiping || t.preventDefault(), 
        e.distanceX = s(e.newPoints[0], e.startPoints[0], "x"), e.distanceY = s(e.newPoints[0], e.startPoints[0], "y"), 
        e.distance = s(e.newPoints[0], e.startPoints[0]), e.distance > 0 && (e.isSwiping ? e.onSwipe(t) : e.isPanning ? e.onPan() : e.isZooming && e.onZoom()))));
    }, d.prototype.onSwipe = function(e) {
        var a, s = this, r = s.instance, c = s.isSwiping, l = s.sliderStartPos.left || 0;
        if (!0 !== c) "x" == c && (s.distanceX > 0 && (s.instance.group.length < 2 || 0 === s.instance.current.index && !s.instance.current.opts.loop) ? l += Math.pow(s.distanceX, .8) : s.distanceX < 0 && (s.instance.group.length < 2 || s.instance.current.index === s.instance.group.length - 1 && !s.instance.current.opts.loop) ? l -= Math.pow(-s.distanceX, .8) : l += s.distanceX), 
        s.sliderLastPos = {
            top: "x" == c ? 0 : s.sliderStartPos.top + s.distanceY,
            left: l
        }, s.requestId && (i(s.requestId), s.requestId = null), s.requestId = o(function() {
            s.sliderLastPos && (n.each(s.instance.slides, function(t, e) {
                var o = e.pos - s.instance.currPos;
                n.fancybox.setTranslate(e.$slide, {
                    top: s.sliderLastPos.top,
                    left: s.sliderLastPos.left + o * s.canvasWidth + o * e.opts.gutter
                });
            }), s.$container.addClass("fancybox-is-sliding"));
        }); else if (Math.abs(s.distance) > 10) {
            if (s.canTap = !1, r.group.length < 2 && s.opts.vertical ? s.isSwiping = "y" : r.isDragging || !1 === s.opts.vertical || "auto" === s.opts.vertical && n(t).width() > 800 ? s.isSwiping = "x" : (a = Math.abs(180 * Math.atan2(s.distanceY, s.distanceX) / Math.PI), 
            s.isSwiping = a > 45 && a < 135 ? "y" : "x"), "y" === s.isSwiping && n.fancybox.isMobile && s.isScrollable) return void (s.isScrolling = !0);
            r.isDragging = s.isSwiping, s.startPoints = s.newPoints, n.each(r.slides, function(t, e) {
                var o, i;
                n.fancybox.stop(e.$slide), o = n.fancybox.getTranslate(e.$slide), i = n.fancybox.getTranslate(r.$refs.stage), 
                e.$slide.css({
                    transform: "",
                    opacity: "",
                    "transition-duration": ""
                }).removeClass("fancybox-animated").removeClass(function(t, e) {
                    return (e.match(/(^|\s)fancybox-fx-\S+/g) || []).join(" ");
                }), e.pos === r.current.pos && (s.sliderStartPos.top = o.top - i.top, s.sliderStartPos.left = o.left - i.left), 
                n.fancybox.setTranslate(e.$slide, {
                    top: o.top - i.top,
                    left: o.left - i.left
                });
            }), r.SlideShow && r.SlideShow.isActive && r.SlideShow.stop();
        }
    }, d.prototype.onPan = function() {
        var t = this;
        if (s(t.newPoints[0], t.realPoints[0]) < (n.fancybox.isMobile ? 10 : 5)) return void (t.startPoints = t.newPoints);
        t.canTap = !1, t.contentLastPos = t.limitMovement(), t.requestId && i(t.requestId), 
        t.requestId = o(function() {
            n.fancybox.setTranslate(t.$content, t.contentLastPos);
        });
    }, d.prototype.limitMovement = function() {
        var t, e, n, o, i, a, s = this, r = s.canvasWidth, c = s.canvasHeight, l = s.distanceX, d = s.distanceY, u = s.contentStartPos, f = u.left, p = u.top, h = u.width, g = u.height;
        return i = h > r ? f + l : f, a = p + d, t = Math.max(0, .5 * r - .5 * h), e = Math.max(0, .5 * c - .5 * g), 
        n = Math.min(r - h, .5 * r - .5 * h), o = Math.min(c - g, .5 * c - .5 * g), l > 0 && i > t && (i = t - 1 + Math.pow(-t + f + l, .8) || 0), 
        l < 0 && i < n && (i = n + 1 - Math.pow(n - f - l, .8) || 0), d > 0 && a > e && (a = e - 1 + Math.pow(-e + p + d, .8) || 0), 
        d < 0 && a < o && (a = o + 1 - Math.pow(o - p - d, .8) || 0), {
            top: a,
            left: i
        };
    }, d.prototype.limitPosition = function(t, e, n, o) {
        var i = this, a = i.canvasWidth, s = i.canvasHeight;
        return n > a ? (t = t > 0 ? 0 : t, t = t < a - n ? a - n : t) : t = Math.max(0, a / 2 - n / 2), 
        o > s ? (e = e > 0 ? 0 : e, e = e < s - o ? s - o : e) : e = Math.max(0, s / 2 - o / 2), 
        {
            top: e,
            left: t
        };
    }, d.prototype.onZoom = function() {
        var e = this, a = e.contentStartPos, r = a.width, c = a.height, l = a.left, d = a.top, u = s(e.newPoints[0], e.newPoints[1]), f = u / e.startDistanceBetweenFingers, p = Math.floor(r * f), h = Math.floor(c * f), g = (r - p) * e.percentageOfImageAtPinchPointX, b = (c - h) * e.percentageOfImageAtPinchPointY, m = (e.newPoints[0].x + e.newPoints[1].x) / 2 - n(t).scrollLeft(), v = (e.newPoints[0].y + e.newPoints[1].y) / 2 - n(t).scrollTop(), y = m - e.centerPointStartX, x = v - e.centerPointStartY, w = l + (g + y), $ = d + (b + x), S = {
            top: $,
            left: w,
            scaleX: f,
            scaleY: f
        };
        e.canTap = !1, e.newWidth = p, e.newHeight = h, e.contentLastPos = S, e.requestId && i(e.requestId), 
        e.requestId = o(function() {
            n.fancybox.setTranslate(e.$content, e.contentLastPos);
        });
    }, d.prototype.ontouchend = function(t) {
        var o = this, s = o.isSwiping, r = o.isPanning, c = o.isZooming, l = o.isScrolling;
        if (o.endPoints = a(t), o.dMs = Math.max(new Date().getTime() - o.startTime, 1), 
        o.$container.removeClass("fancybox-is-grabbing"), n(e).off(".fb.touch"), e.removeEventListener("scroll", o.onscroll, !0), 
        o.requestId && (i(o.requestId), o.requestId = null), o.isSwiping = !1, o.isPanning = !1, 
        o.isZooming = !1, o.isScrolling = !1, o.instance.isDragging = !1, o.canTap) return o.onTap(t);
        o.speed = 100, o.velocityX = o.distanceX / o.dMs * .5, o.velocityY = o.distanceY / o.dMs * .5, 
        r ? o.endPanning() : c ? o.endZooming() : o.endSwiping(s, l);
    }, d.prototype.endSwiping = function(t, e) {
        var o = this, i = !1, a = o.instance.group.length, s = Math.abs(o.distanceX), r = "x" == t && a > 1 && (o.dMs > 130 && s > 10 || s > 50);
        o.sliderLastPos = null, "y" == t && !e && Math.abs(o.distanceY) > 50 ? (n.fancybox.animate(o.instance.current.$slide, {
            top: o.sliderStartPos.top + o.distanceY + 150 * o.velocityY,
            opacity: 0
        }, 200), i = o.instance.close(!0, 250)) : r && o.distanceX > 0 ? i = o.instance.previous(300) : r && o.distanceX < 0 && (i = o.instance.next(300)), 
        !1 !== i || "x" != t && "y" != t || o.instance.centerSlide(200), o.$container.removeClass("fancybox-is-sliding");
    }, d.prototype.endPanning = function() {
        var t, e, o, i = this;
        i.contentLastPos && (!1 === i.opts.momentum || i.dMs > 350 ? (t = i.contentLastPos.left, 
        e = i.contentLastPos.top) : (t = i.contentLastPos.left + 500 * i.velocityX, e = i.contentLastPos.top + 500 * i.velocityY), 
        o = i.limitPosition(t, e, i.contentStartPos.width, i.contentStartPos.height), o.width = i.contentStartPos.width, 
        o.height = i.contentStartPos.height, n.fancybox.animate(i.$content, o, 366));
    }, d.prototype.endZooming = function() {
        var t, e, o, i, a = this, s = a.instance.current, r = a.newWidth, c = a.newHeight;
        a.contentLastPos && (t = a.contentLastPos.left, e = a.contentLastPos.top, i = {
            top: e,
            left: t,
            width: r,
            height: c,
            scaleX: 1,
            scaleY: 1
        }, n.fancybox.setTranslate(a.$content, i), r < a.canvasWidth && c < a.canvasHeight ? a.instance.scaleToFit(150) : r > s.width || c > s.height ? a.instance.scaleToActual(a.centerPointStartX, a.centerPointStartY, 150) : (o = a.limitPosition(t, e, r, c), 
        n.fancybox.animate(a.$content, o, 150)));
    }, d.prototype.onTap = function(e) {
        var o, i = this, s = n(e.target), r = i.instance, c = r.current, l = e && a(e) || i.startPoints, d = l[0] ? l[0].x - n(t).scrollLeft() - i.stagePos.left : 0, u = l[0] ? l[0].y - n(t).scrollTop() - i.stagePos.top : 0, f = function(t) {
            var o = c.opts[t];
            if (n.isFunction(o) && (o = o.apply(r, [ c, e ])), o) switch (o) {
              case "close":
                r.close(i.startEvent);
                break;

              case "toggleControls":
                r.toggleControls();
                break;

              case "next":
                r.next();
                break;

              case "nextOrClose":
                r.group.length > 1 ? r.next() : r.close(i.startEvent);
                break;

              case "zoom":
                "image" == c.type && (c.isLoaded || c.$ghost) && (r.canPan() ? r.scaleToFit() : r.isScaledDown() ? r.scaleToActual(d, u) : r.group.length < 2 && r.close(i.startEvent));
            }
        };
        if ((!e.originalEvent || 2 != e.originalEvent.button) && (s.is("img") || !(d > s[0].clientWidth + s.offset().left))) {
            if (s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")) o = "Outside"; else if (s.is(".fancybox-slide")) o = "Slide"; else {
                if (!r.current.$content || !r.current.$content.find(s).addBack().filter(s).length) return;
                o = "Content";
            }
            if (i.tapped) {
                if (clearTimeout(i.tapped), i.tapped = null, Math.abs(d - i.tapX) > 50 || Math.abs(u - i.tapY) > 50) return this;
                f("dblclick" + o);
            } else i.tapX = d, i.tapY = u, c.opts["dblclick" + o] && c.opts["dblclick" + o] !== c.opts["click" + o] ? i.tapped = setTimeout(function() {
                i.tapped = null, r.isAnimating || f("click" + o);
            }, 500) : f("click" + o);
            return this;
        }
    }, n(e).on("onActivate.fb", function(t, e) {
        e && !e.Guestures && (e.Guestures = new d(e));
    }).on("beforeClose.fb", function(t, e) {
        e && e.Guestures && e.Guestures.destroy();
    });
}(window, document, jQuery), function(t, e) {
    "use strict";
    e.extend(!0, e.fancybox.defaults, {
        btnTpl: {
            slideShow: '<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'
        },
        slideShow: {
            autoStart: !1,
            speed: 3e3,
            progress: !0
        }
    });
    var n = function(t) {
        this.instance = t, this.init();
    };
    e.extend(n.prototype, {
        timer: null,
        isActive: !1,
        $button: null,
        init: function() {
            var t = this, n = t.instance, o = n.group[n.currIndex].opts.slideShow;
            t.$button = n.$refs.toolbar.find("[data-fancybox-play]").on("click", function() {
                t.toggle();
            }), n.group.length < 2 || !o ? t.$button.hide() : o.progress && (t.$progress = e('<div class="fancybox-progress"></div>').appendTo(n.$refs.inner));
        },
        set: function(t) {
            var n = this, o = n.instance, i = o.current;
            i && (!0 === t || i.opts.loop || o.currIndex < o.group.length - 1) ? n.isActive && "video" !== i.contentType && (n.$progress && e.fancybox.animate(n.$progress.show(), {
                scaleX: 1
            }, i.opts.slideShow.speed), n.timer = setTimeout(function() {
                o.current.opts.loop || o.current.index != o.group.length - 1 ? o.next() : o.jumpTo(0);
            }, i.opts.slideShow.speed)) : (n.stop(), o.idleSecondsCounter = 0, o.showControls());
        },
        clear: function() {
            var t = this;
            clearTimeout(t.timer), t.timer = null, t.$progress && t.$progress.removeAttr("style").hide();
        },
        start: function() {
            var t = this, e = t.instance.current;
            e && (t.$button.attr("title", (e.opts.i18n[e.opts.lang] || e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"), 
            t.isActive = !0, e.isComplete && t.set(!0), t.instance.trigger("onSlideShowChange", !0));
        },
        stop: function() {
            var t = this, e = t.instance.current;
            t.clear(), t.$button.attr("title", (e.opts.i18n[e.opts.lang] || e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"), 
            t.isActive = !1, t.instance.trigger("onSlideShowChange", !1), t.$progress && t.$progress.removeAttr("style").hide();
        },
        toggle: function() {
            var t = this;
            t.isActive ? t.stop() : t.start();
        }
    }), e(t).on({
        "onInit.fb": function(t, e) {
            e && !e.SlideShow && (e.SlideShow = new n(e));
        },
        "beforeShow.fb": function(t, e, n, o) {
            var i = e && e.SlideShow;
            o ? i && n.opts.slideShow.autoStart && i.start() : i && i.isActive && i.clear();
        },
        "afterShow.fb": function(t, e, n) {
            var o = e && e.SlideShow;
            o && o.isActive && o.set();
        },
        "afterKeydown.fb": function(n, o, i, a, s) {
            var r = o && o.SlideShow;
            !r || !i.opts.slideShow || 80 !== s && 32 !== s || e(t.activeElement).is("button,a,input") || (a.preventDefault(), 
            r.toggle());
        },
        "beforeClose.fb onDeactivate.fb": function(t, e) {
            var n = e && e.SlideShow;
            n && n.stop();
        }
    }), e(t).on("visibilitychange", function() {
        var n = e.fancybox.getInstance(), o = n && n.SlideShow;
        o && o.isActive && (t.hidden ? o.clear() : o.set());
    });
}(document, jQuery), function(t, e) {
    "use strict";
    var n = function() {
        for (var e = [ [ "requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror" ], [ "webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror" ], [ "webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror" ], [ "mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror" ], [ "msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError" ] ], n = {}, o = 0; o < e.length; o++) {
            var i = e[o];
            if (i && i[1] in t) {
                for (var a = 0; a < i.length; a++) n[e[0][a]] = i[a];
                return n;
            }
        }
        return !1;
    }();
    if (n) {
        var o = {
            request: function(e) {
                e = e || t.documentElement, e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT);
            },
            exit: function() {
                t[n.exitFullscreen]();
            },
            toggle: function(e) {
                e = e || t.documentElement, this.isFullscreen() ? this.exit() : this.request(e);
            },
            isFullscreen: function() {
                return Boolean(t[n.fullscreenElement]);
            },
            enabled: function() {
                return Boolean(t[n.fullscreenEnabled]);
            }
        };
        e.extend(!0, e.fancybox.defaults, {
            btnTpl: {
                fullScreen: '<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'
            },
            fullScreen: {
                autoStart: !1
            }
        }), e(t).on(n.fullscreenchange, function() {
            var t = o.isFullscreen(), n = e.fancybox.getInstance();
            n && (n.current && "image" === n.current.type && n.isAnimating && (n.isAnimating = !1, 
            n.update(!0, !0, 0), n.isComplete || n.complete()), n.trigger("onFullscreenChange", t), 
            n.$refs.container.toggleClass("fancybox-is-fullscreen", t), n.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter", !t).toggleClass("fancybox-button--fsexit", t));
        });
    }
    e(t).on({
        "onInit.fb": function(t, e) {
            var i;
            if (!n) return void e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove();
            e && e.group[e.currIndex].opts.fullScreen ? (i = e.$refs.container, i.on("click.fb-fullscreen", "[data-fancybox-fullscreen]", function(t) {
                t.stopPropagation(), t.preventDefault(), o.toggle();
            }), e.opts.fullScreen && !0 === e.opts.fullScreen.autoStart && o.request(), e.FullScreen = o) : e && e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide();
        },
        "afterKeydown.fb": function(t, e, n, o, i) {
            e && e.FullScreen && 70 === i && (o.preventDefault(), e.FullScreen.toggle());
        },
        "beforeClose.fb": function(t, e) {
            e && e.FullScreen && e.$refs.container.hasClass("fancybox-is-fullscreen") && o.exit();
        }
    });
}(document, jQuery), function(t, e) {
    "use strict";
    var n = "fancybox-thumbs";
    e.fancybox.defaults = e.extend(!0, {
        btnTpl: {
            thumbs: '<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'
        },
        thumbs: {
            autoStart: !1,
            hideOnClose: !0,
            parentEl: ".fancybox-container",
            axis: "y"
        }
    }, e.fancybox.defaults);
    var o = function(t) {
        this.init(t);
    };
    e.extend(o.prototype, {
        $button: null,
        $grid: null,
        $list: null,
        isVisible: !1,
        isActive: !1,
        init: function(t) {
            var e = this, n = t.group, o = 0;
            e.instance = t, e.opts = n[t.currIndex].opts.thumbs, t.Thumbs = e, e.$button = t.$refs.toolbar.find("[data-fancybox-thumbs]");
            for (var i = 0, a = n.length; i < a && (n[i].thumb && o++, !(o > 1)); i++) ;
            o > 1 && e.opts ? (e.$button.removeAttr("style").on("click", function() {
                e.toggle();
            }), e.isActive = !0) : e.$button.hide();
        },
        create: function() {
            var t, o = this, i = o.instance, a = o.opts.parentEl, s = [];
            o.$grid || (o.$grid = e('<div class="' + n + " " + n + "-" + o.opts.axis + '"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)), 
            o.$grid.on("click", "a", function() {
                i.jumpTo(e(this).attr("data-index"));
            })), o.$list || (o.$list = e('<div class="' + n + '__list">').appendTo(o.$grid)), 
            e.each(i.group, function(e, n) {
                t = n.thumb, t || "image" !== n.type || (t = n.src), s.push('<a href="javascript:;" tabindex="0" data-index="' + e + '"' + (t && t.length ? ' style="background-image:url(' + t + ')"' : 'class="fancybox-thumbs-missing"') + "></a>");
            }), o.$list[0].innerHTML = s.join(""), "x" === o.opts.axis && o.$list.width(parseInt(o.$grid.css("padding-right"), 10) + i.group.length * o.$list.children().eq(0).outerWidth(!0));
        },
        focus: function(t) {
            var e, n, o = this, i = o.$list, a = o.$grid;
            o.instance.current && (e = i.children().removeClass("fancybox-thumbs-active").filter('[data-index="' + o.instance.current.index + '"]').addClass("fancybox-thumbs-active"), 
            n = e.position(), "y" === o.opts.axis && (n.top < 0 || n.top > i.height() - e.outerHeight()) ? i.stop().animate({
                scrollTop: i.scrollTop() + n.top
            }, t) : "x" === o.opts.axis && (n.left < a.scrollLeft() || n.left > a.scrollLeft() + (a.width() - e.outerWidth())) && i.parent().stop().animate({
                scrollLeft: n.left
            }, t));
        },
        update: function() {
            var t = this;
            t.instance.$refs.container.toggleClass("fancybox-show-thumbs", this.isVisible), 
            t.isVisible ? (t.$grid || t.create(), t.instance.trigger("onThumbsShow"), t.focus(0)) : t.$grid && t.instance.trigger("onThumbsHide"), 
            t.instance.update();
        },
        hide: function() {
            this.isVisible = !1, this.update();
        },
        show: function() {
            this.isVisible = !0, this.update();
        },
        toggle: function() {
            this.isVisible = !this.isVisible, this.update();
        }
    }), e(t).on({
        "onInit.fb": function(t, e) {
            var n;
            e && !e.Thumbs && (n = new o(e), n.isActive && !0 === n.opts.autoStart && n.show());
        },
        "beforeShow.fb": function(t, e, n, o) {
            var i = e && e.Thumbs;
            i && i.isVisible && i.focus(o ? 0 : 250);
        },
        "afterKeydown.fb": function(t, e, n, o, i) {
            var a = e && e.Thumbs;
            a && a.isActive && 71 === i && (o.preventDefault(), a.toggle());
        },
        "beforeClose.fb": function(t, e) {
            var n = e && e.Thumbs;
            n && n.isVisible && !1 !== n.opts.hideOnClose && n.$grid.hide();
        }
    });
}(document, jQuery), function(t, e) {
    "use strict";
    function n(t) {
        var e = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
            "/": "&#x2F;",
            "`": "&#x60;",
            "=": "&#x3D;"
        };
        return String(t).replace(/[&<>"'`=\/]/g, function(t) {
            return e[t];
        });
    }
    e.extend(!0, e.fancybox.defaults, {
        btnTpl: {
            share: '<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'
        },
        share: {
            url: function(t, e) {
                return !t.currentHash && "inline" !== e.type && "html" !== e.type && (e.origSrc || e.src) || window.location;
            },
            tpl: '<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'
        }
    }), e(t).on("click", "[data-fancybox-share]", function() {
        var t, o, i = e.fancybox.getInstance(), a = i.current || null;
        a && ("function" === e.type(a.opts.share.url) && (t = a.opts.share.url.apply(a, [ i, a ])), 
        o = a.opts.share.tpl.replace(/\{\{media\}\}/g, "image" === a.type ? encodeURIComponent(a.src) : "").replace(/\{\{url\}\}/g, encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g, n(t)).replace(/\{\{descr\}\}/g, i.$caption ? encodeURIComponent(i.$caption.text()) : ""), 
        e.fancybox.open({
            src: i.translate(i, o),
            type: "html",
            opts: {
                touch: !1,
                animationEffect: !1,
                afterLoad: function(t, e) {
                    i.$refs.container.one("beforeClose.fb", function() {
                        t.close(null, 0);
                    }), e.$content.find(".fancybox-share__button").click(function() {
                        return window.open(this.href, "Share", "width=550, height=450"), !1;
                    });
                },
                mobile: {
                    autoFocus: !1
                }
            }
        }));
    });
}(document, jQuery), function(t, e, n) {
    "use strict";
    function o() {
        var e = t.location.hash.substr(1), n = e.split("-"), o = n.length > 1 && /^\+?\d+$/.test(n[n.length - 1]) ? parseInt(n.pop(-1), 10) || 1 : 1, i = n.join("-");
        return {
            hash: e,
            index: o < 1 ? 1 : o,
            gallery: i
        };
    }
    function i(t) {
        "" !== t.gallery && n("[data-fancybox='" + n.escapeSelector(t.gallery) + "']").eq(t.index - 1).focus().trigger("click.fb-start");
    }
    function a(t) {
        var e, n;
        return !!t && (e = t.current ? t.current.opts : t.opts, "" !== (n = e.hash || (e.$orig ? e.$orig.data("fancybox") || e.$orig.data("fancybox-trigger") : "")) && n);
    }
    n.escapeSelector || (n.escapeSelector = function(t) {
        return (t + "").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g, function(t, e) {
            return e ? "\0" === t ? "�" : t.slice(0, -1) + "\\" + t.charCodeAt(t.length - 1).toString(16) + " " : "\\" + t;
        });
    }), n(function() {
        !1 !== n.fancybox.defaults.hash && (n(e).on({
            "onInit.fb": function(t, e) {
                var n, i;
                !1 !== e.group[e.currIndex].opts.hash && (n = o(), (i = a(e)) && n.gallery && i == n.gallery && (e.currIndex = n.index - 1));
            },
            "beforeShow.fb": function(n, o, i, s) {
                var r;
                i && !1 !== i.opts.hash && (r = a(o)) && (o.currentHash = r + (o.group.length > 1 ? "-" + (i.index + 1) : ""), 
                t.location.hash !== "#" + o.currentHash && (s && !o.origHash && (o.origHash = t.location.hash), 
                o.hashTimer && clearTimeout(o.hashTimer), o.hashTimer = setTimeout(function() {
                    "replaceState" in t.history ? (t.history[s ? "pushState" : "replaceState"]({}, e.title, t.location.pathname + t.location.search + "#" + o.currentHash), 
                    s && (o.hasCreatedHistory = !0)) : t.location.hash = o.currentHash, o.hashTimer = null;
                }, 300)));
            },
            "beforeClose.fb": function(n, o, i) {
                i && !1 !== i.opts.hash && (clearTimeout(o.hashTimer), o.currentHash && o.hasCreatedHistory ? t.history.back() : o.currentHash && ("replaceState" in t.history ? t.history.replaceState({}, e.title, t.location.pathname + t.location.search + (o.origHash || "")) : t.location.hash = o.origHash), 
                o.currentHash = null);
            }
        }), n(t).on("hashchange.fb", function() {
            var t = o(), e = null;
            n.each(n(".fancybox-container").get().reverse(), function(t, o) {
                var i = n(o).data("FancyBox");
                if (i && i.currentHash) return e = i, !1;
            }), e ? e.currentHash === t.gallery + "-" + t.index || 1 === t.index && e.currentHash == t.gallery || (e.currentHash = null, 
            e.close()) : "" !== t.gallery && i(t);
        }), setTimeout(function() {
            n.fancybox.getInstance() || i(o());
        }, 50));
    });
}(window, document, jQuery), function(t, e) {
    "use strict";
    var n = new Date().getTime();
    e(t).on({
        "onInit.fb": function(t, e, o) {
            e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll", function(t) {
                var o = e.current, i = new Date().getTime();
                e.group.length < 2 || !1 === o.opts.wheel || "auto" === o.opts.wheel && "image" !== o.type || (t.preventDefault(), 
                t.stopPropagation(), o.$slide.hasClass("fancybox-animated") || (t = t.originalEvent || t, 
                i - n < 250 || (n = i, e[(-t.deltaY || -t.deltaX || t.wheelDelta || -t.detail) < 0 ? "next" : "previous"]())));
            });
        }
    });
}(document, jQuery);

!function(t) {
    "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? module.exports = t() : window.noUiSlider = t();
}(function() {
    "use strict";
    var ut = "13.1.5";
    function ct(t) {
        t.parentElement.removeChild(t);
    }
    function s(t) {
        return null != t;
    }
    function pt(t) {
        t.preventDefault();
    }
    function i(t) {
        return "number" == typeof t && !isNaN(t) && isFinite(t);
    }
    function ft(t, e, r) {
        0 < r && (mt(t, e), setTimeout(function() {
            gt(t, e);
        }, r));
    }
    function dt(t) {
        return Math.max(Math.min(t, 100), 0);
    }
    function ht(t) {
        return Array.isArray(t) ? t : [ t ];
    }
    function e(t) {
        var e = (t = String(t)).split(".");
        return 1 < e.length ? e[1].length : 0;
    }
    function mt(t, e) {
        t.classList ? t.classList.add(e) : t.className += " " + e;
    }
    function gt(t, e) {
        t.classList ? t.classList.remove(e) : t.className = t.className.replace(new RegExp("(^|\\b)" + e.split(" ").join("|") + "(\\b|$)", "gi"), " ");
    }
    function vt(t) {
        var e = void 0 !== window.pageXOffset, r = "CSS1Compat" === (t.compatMode || "");
        return {
            x: e ? window.pageXOffset : r ? t.documentElement.scrollLeft : t.body.scrollLeft,
            y: e ? window.pageYOffset : r ? t.documentElement.scrollTop : t.body.scrollTop
        };
    }
    function c(t, e) {
        return 100 / (e - t);
    }
    function p(t, e) {
        return 100 * e / (t[1] - t[0]);
    }
    function f(t, e) {
        for (var r = 1; t >= e[r]; ) r += 1;
        return r;
    }
    function r(t, e, r) {
        if (r >= t.slice(-1)[0]) return 100;
        var n, i, o = f(r, t), a = t[o - 1], s = t[o], l = e[o - 1], u = e[o];
        return l + (i = r, p(n = [ a, s ], n[0] < 0 ? i + Math.abs(n[0]) : i - n[0]) / c(l, u));
    }
    function n(t, e, r, n) {
        if (100 === n) return n;
        var i, o, a = f(n, t), s = t[a - 1], l = t[a];
        return r ? (l - s) / 2 < n - s ? l : s : e[a - 1] ? t[a - 1] + (i = n - t[a - 1], 
        o = e[a - 1], Math.round(i / o) * o) : n;
    }
    function o(t, e, r) {
        var n;
        if ("number" == typeof e && (e = [ e ]), !Array.isArray(e)) throw new Error("noUiSlider (" + ut + "): 'range' contains invalid value.");
        if (!i(n = "min" === t ? 0 : "max" === t ? 100 : parseFloat(t)) || !i(e[0])) throw new Error("noUiSlider (" + ut + "): 'range' value isn't numeric.");
        r.xPct.push(n), r.xVal.push(e[0]), n ? r.xSteps.push(!isNaN(e[1]) && e[1]) : isNaN(e[1]) || (r.xSteps[0] = e[1]), 
        r.xHighestCompleteStep.push(0);
    }
    function a(t, e, r) {
        if (e) if (r.xVal[t] !== r.xVal[t + 1]) {
            r.xSteps[t] = p([ r.xVal[t], r.xVal[t + 1] ], e) / c(r.xPct[t], r.xPct[t + 1]);
            var n = (r.xVal[t + 1] - r.xVal[t]) / r.xNumSteps[t], i = Math.ceil(Number(n.toFixed(3)) - 1), o = r.xVal[t] + r.xNumSteps[t] * i;
            r.xHighestCompleteStep[t] = o;
        } else r.xSteps[t] = r.xHighestCompleteStep[t] = r.xVal[t];
    }
    function l(t, e, r) {
        var n;
        this.xPct = [], this.xVal = [], this.xSteps = [ r || !1 ], this.xNumSteps = [ !1 ], 
        this.xHighestCompleteStep = [], this.snap = e;
        var i = [];
        for (n in t) t.hasOwnProperty(n) && i.push([ t[n], n ]);
        for (i.length && "object" == typeof i[0][0] ? i.sort(function(t, e) {
            return t[0][0] - e[0][0];
        }) : i.sort(function(t, e) {
            return t[0] - e[0];
        }), n = 0; n < i.length; n++) o(i[n][1], i[n][0], this);
        for (this.xNumSteps = this.xSteps.slice(0), n = 0; n < this.xNumSteps.length; n++) a(n, this.xNumSteps[n], this);
    }
    l.prototype.getMargin = function(t) {
        var e = this.xNumSteps[0];
        if (e && t / e % 1 != 0) throw new Error("noUiSlider (" + ut + "): 'limit', 'margin' and 'padding' must be divisible by step.");
        return 2 === this.xPct.length && p(this.xVal, t);
    }, l.prototype.toStepping = function(t) {
        return t = r(this.xVal, this.xPct, t);
    }, l.prototype.fromStepping = function(t) {
        return function(t, e, r) {
            if (100 <= r) return t.slice(-1)[0];
            var n, i = f(r, e), o = t[i - 1], a = t[i], s = e[i - 1], l = e[i];
            return n = [ o, a ], (r - s) * c(s, l) * (n[1] - n[0]) / 100 + n[0];
        }(this.xVal, this.xPct, t);
    }, l.prototype.getStep = function(t) {
        return t = n(this.xPct, this.xSteps, this.snap, t);
    }, l.prototype.getDefaultStep = function(t, e, r) {
        var n = f(t, this.xPct);
        return (100 === t || e && t === this.xPct[n - 1]) && (n = Math.max(n - 1, 1)), (this.xVal[n] - this.xVal[n - 1]) / r;
    }, l.prototype.getNearbySteps = function(t) {
        var e = f(t, this.xPct);
        return {
            stepBefore: {
                startValue: this.xVal[e - 2],
                step: this.xNumSteps[e - 2],
                highestStep: this.xHighestCompleteStep[e - 2]
            },
            thisStep: {
                startValue: this.xVal[e - 1],
                step: this.xNumSteps[e - 1],
                highestStep: this.xHighestCompleteStep[e - 1]
            },
            stepAfter: {
                startValue: this.xVal[e],
                step: this.xNumSteps[e],
                highestStep: this.xHighestCompleteStep[e]
            }
        };
    }, l.prototype.countStepDecimals = function() {
        var t = this.xNumSteps.map(e);
        return Math.max.apply(null, t);
    }, l.prototype.convert = function(t) {
        return this.getStep(this.toStepping(t));
    };
    var u = {
        to: function(t) {
            return void 0 !== t && t.toFixed(2);
        },
        from: Number
    };
    function d(t) {
        if ("object" == typeof (e = t) && "function" == typeof e.to && "function" == typeof e.from) return !0;
        var e;
        throw new Error("noUiSlider (" + ut + "): 'format' requires 'to' and 'from' methods.");
    }
    function h(t, e) {
        if (!i(e)) throw new Error("noUiSlider (" + ut + "): 'step' is not numeric.");
        t.singleStep = e;
    }
    function m(t, e) {
        if ("object" != typeof e || Array.isArray(e)) throw new Error("noUiSlider (" + ut + "): 'range' is not an object.");
        if (void 0 === e.min || void 0 === e.max) throw new Error("noUiSlider (" + ut + "): Missing 'min' or 'max' in 'range'.");
        if (e.min === e.max) throw new Error("noUiSlider (" + ut + "): 'range' 'min' and 'max' cannot be equal.");
        t.spectrum = new l(e, t.snap, t.singleStep);
    }
    function g(t, e) {
        if (e = ht(e), !Array.isArray(e) || !e.length) throw new Error("noUiSlider (" + ut + "): 'start' option is incorrect.");
        t.handles = e.length, t.start = e;
    }
    function v(t, e) {
        if ("boolean" != typeof (t.snap = e)) throw new Error("noUiSlider (" + ut + "): 'snap' option must be a boolean.");
    }
    function b(t, e) {
        if ("boolean" != typeof (t.animate = e)) throw new Error("noUiSlider (" + ut + "): 'animate' option must be a boolean.");
    }
    function S(t, e) {
        if ("number" != typeof (t.animationDuration = e)) throw new Error("noUiSlider (" + ut + "): 'animationDuration' option must be a number.");
    }
    function x(t, e) {
        var r, n = [ !1 ];
        if ("lower" === e ? e = [ !0, !1 ] : "upper" === e && (e = [ !1, !0 ]), !0 === e || !1 === e) {
            for (r = 1; r < t.handles; r++) n.push(e);
            n.push(!1);
        } else {
            if (!Array.isArray(e) || !e.length || e.length !== t.handles + 1) throw new Error("noUiSlider (" + ut + "): 'connect' option doesn't match handle count.");
            n = e;
        }
        t.connect = n;
    }
    function w(t, e) {
        switch (e) {
          case "horizontal":
            t.ort = 0;
            break;

          case "vertical":
            t.ort = 1;
            break;

          default:
            throw new Error("noUiSlider (" + ut + "): 'orientation' option is invalid.");
        }
    }
    function y(t, e) {
        if (!i(e)) throw new Error("noUiSlider (" + ut + "): 'margin' option must be numeric.");
        if (0 !== e && (t.margin = t.spectrum.getMargin(e), !t.margin)) throw new Error("noUiSlider (" + ut + "): 'margin' option is only supported on linear sliders.");
    }
    function E(t, e) {
        if (!i(e)) throw new Error("noUiSlider (" + ut + "): 'limit' option must be numeric.");
        if (t.limit = t.spectrum.getMargin(e), !t.limit || t.handles < 2) throw new Error("noUiSlider (" + ut + "): 'limit' option is only supported on linear sliders with 2 or more handles.");
    }
    function C(t, e) {
        if (!i(e) && !Array.isArray(e)) throw new Error("noUiSlider (" + ut + "): 'padding' option must be numeric or array of exactly 2 numbers.");
        if (Array.isArray(e) && 2 !== e.length && !i(e[0]) && !i(e[1])) throw new Error("noUiSlider (" + ut + "): 'padding' option must be numeric or array of exactly 2 numbers.");
        if (0 !== e) {
            if (Array.isArray(e) || (e = [ e, e ]), !(t.padding = [ t.spectrum.getMargin(e[0]), t.spectrum.getMargin(e[1]) ]) === t.padding[0] || !1 === t.padding[1]) throw new Error("noUiSlider (" + ut + "): 'padding' option is only supported on linear sliders.");
            if (t.padding[0] < 0 || t.padding[1] < 0) throw new Error("noUiSlider (" + ut + "): 'padding' option must be a positive number(s).");
            if (100 < t.padding[0] + t.padding[1]) throw new Error("noUiSlider (" + ut + "): 'padding' option must not exceed 100% of the range.");
        }
    }
    function N(t, e) {
        switch (e) {
          case "ltr":
            t.dir = 0;
            break;

          case "rtl":
            t.dir = 1;
            break;

          default:
            throw new Error("noUiSlider (" + ut + "): 'direction' option was not recognized.");
        }
    }
    function U(t, e) {
        if ("string" != typeof e) throw new Error("noUiSlider (" + ut + "): 'behaviour' must be a string containing options.");
        var r = 0 <= e.indexOf("tap"), n = 0 <= e.indexOf("drag"), i = 0 <= e.indexOf("fixed"), o = 0 <= e.indexOf("snap"), a = 0 <= e.indexOf("hover"), s = 0 <= e.indexOf("unconstrained");
        if (i) {
            if (2 !== t.handles) throw new Error("noUiSlider (" + ut + "): 'fixed' behaviour must be used with 2 handles");
            y(t, t.start[1] - t.start[0]);
        }
        if (s && (t.margin || t.limit)) throw new Error("noUiSlider (" + ut + "): 'unconstrained' behaviour cannot be used with margin or limit");
        t.events = {
            tap: r || o,
            drag: n,
            fixed: i,
            snap: o,
            hover: a,
            unconstrained: s
        };
    }
    function k(t, e) {
        if (!1 !== e) if (!0 === e) {
            t.tooltips = [];
            for (var r = 0; r < t.handles; r++) t.tooltips.push(!0);
        } else {
            if (t.tooltips = ht(e), t.tooltips.length !== t.handles) throw new Error("noUiSlider (" + ut + "): must pass a formatter for all handles.");
            t.tooltips.forEach(function(t) {
                if ("boolean" != typeof t && ("object" != typeof t || "function" != typeof t.to)) throw new Error("noUiSlider (" + ut + "): 'tooltips' must be passed a formatter or 'false'.");
            });
        }
    }
    function P(t, e) {
        d(t.ariaFormat = e);
    }
    function A(t, e) {
        d(t.format = e);
    }
    function V(t, e) {
        if ("boolean" != typeof (t.keyboardSupport = e)) throw new Error("noUiSlider (" + ut + "): 'keyboardSupport' option must be a boolean.");
    }
    function M(t, e) {
        t.documentElement = e;
    }
    function O(t, e) {
        if ("string" != typeof e && !1 !== e) throw new Error("noUiSlider (" + ut + "): 'cssPrefix' must be a string or `false`.");
        t.cssPrefix = e;
    }
    function L(t, e) {
        if ("object" != typeof e) throw new Error("noUiSlider (" + ut + "): 'cssClasses' must be an object.");
        if ("string" == typeof t.cssPrefix) for (var r in t.cssClasses = {}, e) e.hasOwnProperty(r) && (t.cssClasses[r] = t.cssPrefix + e[r]); else t.cssClasses = e;
    }
    function bt(e) {
        var r = {
            margin: 0,
            limit: 0,
            padding: 0,
            animate: !0,
            animationDuration: 300,
            ariaFormat: u,
            format: u
        }, n = {
            step: {
                r: !1,
                t: h
            },
            start: {
                r: !0,
                t: g
            },
            connect: {
                r: !0,
                t: x
            },
            direction: {
                r: !0,
                t: N
            },
            snap: {
                r: !1,
                t: v
            },
            animate: {
                r: !1,
                t: b
            },
            animationDuration: {
                r: !1,
                t: S
            },
            range: {
                r: !0,
                t: m
            },
            orientation: {
                r: !1,
                t: w
            },
            margin: {
                r: !1,
                t: y
            },
            limit: {
                r: !1,
                t: E
            },
            padding: {
                r: !1,
                t: C
            },
            behaviour: {
                r: !0,
                t: U
            },
            ariaFormat: {
                r: !1,
                t: P
            },
            format: {
                r: !1,
                t: A
            },
            tooltips: {
                r: !1,
                t: k
            },
            keyboardSupport: {
                r: !0,
                t: V
            },
            documentElement: {
                r: !1,
                t: M
            },
            cssPrefix: {
                r: !0,
                t: O
            },
            cssClasses: {
                r: !0,
                t: L
            }
        }, i = {
            connect: !1,
            direction: "ltr",
            behaviour: "tap",
            orientation: "horizontal",
            keyboardSupport: !0,
            cssPrefix: "noUi-",
            cssClasses: {
                target: "target",
                base: "base",
                origin: "origin",
                handle: "handle",
                handleLower: "handle-lower",
                handleUpper: "handle-upper",
                touchArea: "touch-area",
                horizontal: "horizontal",
                vertical: "vertical",
                background: "background",
                connect: "connect",
                connects: "connects",
                ltr: "ltr",
                rtl: "rtl",
                draggable: "draggable",
                drag: "state-drag",
                tap: "state-tap",
                active: "active",
                tooltip: "tooltip",
                pips: "pips",
                pipsHorizontal: "pips-horizontal",
                pipsVertical: "pips-vertical",
                marker: "marker",
                markerHorizontal: "marker-horizontal",
                markerVertical: "marker-vertical",
                markerNormal: "marker-normal",
                markerLarge: "marker-large",
                markerSub: "marker-sub",
                value: "value",
                valueHorizontal: "value-horizontal",
                valueVertical: "value-vertical",
                valueNormal: "value-normal",
                valueLarge: "value-large",
                valueSub: "value-sub"
            }
        };
        e.format && !e.ariaFormat && (e.ariaFormat = e.format), Object.keys(n).forEach(function(t) {
            if (!s(e[t]) && void 0 === i[t]) {
                if (n[t].r) throw new Error("noUiSlider (" + ut + "): '" + t + "' is required.");
                return !0;
            }
            n[t].t(r, s(e[t]) ? e[t] : i[t]);
        }), r.pips = e.pips;
        var t = document.createElement("div"), o = void 0 !== t.style.msTransform, a = void 0 !== t.style.transform;
        r.transformRule = a ? "transform" : o ? "msTransform" : "webkitTransform";
        return r.style = [ [ "left", "top" ], [ "right", "bottom" ] ][r.dir][r.ort], r;
    }
    function z(t, f, o) {
        var l, u, a, c, i, s, e, p, d = window.navigator.pointerEnabled ? {
            start: "pointerdown",
            move: "pointermove",
            end: "pointerup"
        } : window.navigator.msPointerEnabled ? {
            start: "MSPointerDown",
            move: "MSPointerMove",
            end: "MSPointerUp"
        } : {
            start: "mousedown touchstart",
            move: "mousemove touchmove",
            end: "mouseup touchend"
        }, h = window.CSS && CSS.supports && CSS.supports("touch-action", "none") && function() {
            var t = !1;
            try {
                var e = Object.defineProperty({}, "passive", {
                    get: function() {
                        t = !0;
                    }
                });
                window.addEventListener("test", null, e);
            } catch (t) {}
            return t;
        }(), y = t, E = f.spectrum, m = [], g = [], v = [], b = 0, S = {}, x = t.ownerDocument, w = f.documentElement || x.documentElement, C = x.body, N = -1, U = 0, k = 1, P = 2, A = "rtl" === x.dir || 1 === f.ort ? 0 : 100;
        function V(t, e) {
            var r = x.createElement("div");
            return e && mt(r, e), t.appendChild(r), r;
        }
        function M(t, e) {
            var r = V(t, f.cssClasses.origin), n = V(r, f.cssClasses.handle);
            return V(n, f.cssClasses.touchArea), n.setAttribute("data-handle", e), f.keyboardSupport && (n.setAttribute("tabindex", "0"), 
            n.addEventListener("keydown", function(t) {
                return function(t, e) {
                    if (L() || z(e)) return !1;
                    var r = [ "Left", "Right" ], n = [ "Down", "Up" ];
                    f.dir && !f.ort ? r.reverse() : f.ort && !f.dir && n.reverse();
                    var i = t.key.replace("Arrow", ""), o = i === n[0] || i === r[0], a = i === n[1] || i === r[1];
                    if (!o && !a) return !0;
                    t.preventDefault();
                    var s = o ? 0 : 1, l = lt(e)[s];
                    if (null === l) return !1;
                    !1 === l && (l = E.getDefaultStep(g[e], o, 10));
                    return l = Math.max(l, 1e-7), l *= o ? -1 : 1, at(e, m[e] + l, !0), !1;
                }(t, e);
            })), n.setAttribute("role", "slider"), n.setAttribute("aria-orientation", f.ort ? "vertical" : "horizontal"), 
            0 === e ? mt(n, f.cssClasses.handleLower) : e === f.handles - 1 && mt(n, f.cssClasses.handleUpper), 
            r;
        }
        function O(t, e) {
            return !!e && V(t, f.cssClasses.connect);
        }
        function r(t, e) {
            return !!f.tooltips[e] && V(t.firstChild, f.cssClasses.tooltip);
        }
        function L() {
            return y.hasAttribute("disabled");
        }
        function z(t) {
            return u[t].hasAttribute("disabled");
        }
        function j() {
            i && (G("update.tooltips"), i.forEach(function(t) {
                t && ct(t);
            }), i = null);
        }
        function H() {
            j(), i = u.map(r), $("update.tooltips", function(t, e, r) {
                if (i[e]) {
                    var n = t[e];
                    !0 !== f.tooltips[e] && (n = f.tooltips[e].to(r[e])), i[e].innerHTML = n;
                }
            });
        }
        function F(e, i, o) {
            var a = x.createElement("div"), s = [];
            s[U] = f.cssClasses.valueNormal, s[k] = f.cssClasses.valueLarge, s[P] = f.cssClasses.valueSub;
            var l = [];
            l[U] = f.cssClasses.markerNormal, l[k] = f.cssClasses.markerLarge, l[P] = f.cssClasses.markerSub;
            var u = [ f.cssClasses.valueHorizontal, f.cssClasses.valueVertical ], c = [ f.cssClasses.markerHorizontal, f.cssClasses.markerVertical ];
            function p(t, e) {
                var r = e === f.cssClasses.value, n = r ? s : l;
                return e + " " + (r ? u : c)[f.ort] + " " + n[t];
            }
            return mt(a, f.cssClasses.pips), mt(a, 0 === f.ort ? f.cssClasses.pipsHorizontal : f.cssClasses.pipsVertical), 
            Object.keys(e).forEach(function(t) {
                !function(t, e, r) {
                    if ((r = i ? i(e, r) : r) !== N) {
                        var n = V(a, !1);
                        n.className = p(r, f.cssClasses.marker), n.style[f.style] = t + "%", U < r && ((n = V(a, !1)).className = p(r, f.cssClasses.value), 
                        n.setAttribute("data-value", e), n.style[f.style] = t + "%", n.innerHTML = o.to(e));
                    }
                }(t, e[t][0], e[t][1]);
            }), a;
        }
        function D() {
            c && (ct(c), c = null);
        }
        function T(t) {
            D();
            var m, g, v, b, e, r, S, x, w, n = t.mode, i = t.density || 1, o = t.filter || !1, a = function(t, e, r) {
                if ("range" === t || "steps" === t) return E.xVal;
                if ("count" === t) {
                    if (e < 2) throw new Error("noUiSlider (" + ut + "): 'values' (>= 2) required for mode 'count'.");
                    var n = e - 1, i = 100 / n;
                    for (e = []; n--; ) e[n] = n * i;
                    e.push(100), t = "positions";
                }
                return "positions" === t ? e.map(function(t) {
                    return E.fromStepping(r ? E.getStep(t) : t);
                }) : "values" === t ? r ? e.map(function(t) {
                    return E.fromStepping(E.getStep(E.toStepping(t)));
                }) : e : void 0;
            }(n, t.values || !1, t.stepped || !1), s = (m = i, g = n, v = a, b = {}, e = E.xVal[0], 
            r = E.xVal[E.xVal.length - 1], x = S = !1, w = 0, (v = v.slice().sort(function(t, e) {
                return t - e;
            }).filter(function(t) {
                return !this[t] && (this[t] = !0);
            }, {}))[0] !== e && (v.unshift(e), S = !0), v[v.length - 1] !== r && (v.push(r), 
            x = !0), v.forEach(function(t, e) {
                var r, n, i, o, a, s, l, u, c, p, f = t, d = v[e + 1], h = "steps" === g;
                if (h && (r = E.xNumSteps[e]), r || (r = d - f), !1 !== f && void 0 !== d) for (r = Math.max(r, 1e-7), 
                n = f; n <= d; n = (n + r).toFixed(7) / 1) {
                    for (u = (a = (o = E.toStepping(n)) - w) / m, p = a / (c = Math.round(u)), i = 1; i <= c; i += 1) b[(s = w + i * p).toFixed(5)] = [ E.fromStepping(s), 0 ];
                    l = -1 < v.indexOf(n) ? k : h ? P : U, !e && S && (l = 0), n === d && x || (b[o.toFixed(5)] = [ n, l ]), 
                    w = o;
                }
            }), b), l = t.format || {
                to: Math.round
            };
            return c = y.appendChild(F(s, o, l));
        }
        function R() {
            var t = l.getBoundingClientRect(), e = "offset" + [ "Width", "Height" ][f.ort];
            return 0 === f.ort ? t.width || l[e] : t.height || l[e];
        }
        function B(n, i, o, a) {
            var e = function(t) {
                return !!(t = function(t, e, r) {
                    var n, i, o = 0 === t.type.indexOf("touch"), a = 0 === t.type.indexOf("mouse"), s = 0 === t.type.indexOf("pointer");
                    0 === t.type.indexOf("MSPointer") && (s = !0);
                    if (o) {
                        var l = function(t) {
                            return t.target === r || r.contains(t.target);
                        };
                        if ("touchstart" === t.type) {
                            var u = Array.prototype.filter.call(t.touches, l);
                            if (1 < u.length) return !1;
                            n = u[0].pageX, i = u[0].pageY;
                        } else {
                            var c = Array.prototype.find.call(t.changedTouches, l);
                            if (!c) return !1;
                            n = c.pageX, i = c.pageY;
                        }
                    }
                    e = e || vt(x), (a || s) && (n = t.clientX + e.x, i = t.clientY + e.y);
                    return t.pageOffset = e, t.points = [ n, i ], t.cursor = a || s, t;
                }(t, a.pageOffset, a.target || i)) && (!(L() && !a.doNotReject) && (e = y, r = f.cssClasses.tap, 
                !((e.classList ? e.classList.contains(r) : new RegExp("\\b" + r + "\\b").test(e.className)) && !a.doNotReject) && (!(n === d.start && void 0 !== t.buttons && 1 < t.buttons) && ((!a.hover || !t.buttons) && (h || t.preventDefault(), 
                t.calcPoint = t.points[f.ort], void o(t, a))))));
                var e, r;
            }, r = [];
            return n.split(" ").forEach(function(t) {
                i.addEventListener(t, e, !!h && {
                    passive: !0
                }), r.push([ t, e ]);
            }), r;
        }
        function q(t) {
            var e, r, n, i, o, a, s = 100 * (t - (e = l, r = f.ort, n = e.getBoundingClientRect(), 
            i = e.ownerDocument, o = i.documentElement, a = vt(i), /webkit.*Chrome.*Mobile/i.test(navigator.userAgent) && (a.x = 0), 
            r ? n.top + a.y - o.clientTop : n.left + a.x - o.clientLeft)) / R();
            return s = dt(s), f.dir ? 100 - s : s;
        }
        function X(t, e) {
            "mouseout" === t.type && "HTML" === t.target.nodeName && null === t.relatedTarget && _(t, e);
        }
        function Y(t, e) {
            if (-1 === navigator.appVersion.indexOf("MSIE 9") && 0 === t.buttons && 0 !== e.buttonsProperty) return _(t, e);
            var r = (f.dir ? -1 : 1) * (t.calcPoint - e.startCalcPoint);
            Z(0 < r, 100 * r / e.baseSize, e.locations, e.handleNumbers);
        }
        function _(t, e) {
            e.handle && (gt(e.handle, f.cssClasses.active), b -= 1), e.listeners.forEach(function(t) {
                w.removeEventListener(t[0], t[1]);
            }), 0 === b && (gt(y, f.cssClasses.drag), et(), t.cursor && (C.style.cursor = "", 
            C.removeEventListener("selectstart", pt))), e.handleNumbers.forEach(function(t) {
                J("change", t), J("set", t), J("end", t);
            });
        }
        function I(t, e) {
            if (e.handleNumbers.some(z)) return !1;
            var r;
            1 === e.handleNumbers.length && (r = u[e.handleNumbers[0]].children[0], b += 1, 
            mt(r, f.cssClasses.active));
            t.stopPropagation();
            var n = [], i = B(d.move, w, Y, {
                target: t.target,
                handle: r,
                listeners: n,
                startCalcPoint: t.calcPoint,
                baseSize: R(),
                pageOffset: t.pageOffset,
                handleNumbers: e.handleNumbers,
                buttonsProperty: t.buttons,
                locations: g.slice()
            }), o = B(d.end, w, _, {
                target: t.target,
                handle: r,
                listeners: n,
                doNotReject: !0,
                handleNumbers: e.handleNumbers
            }), a = B("mouseout", w, X, {
                target: t.target,
                handle: r,
                listeners: n,
                doNotReject: !0,
                handleNumbers: e.handleNumbers
            });
            n.push.apply(n, i.concat(o, a)), t.cursor && (C.style.cursor = getComputedStyle(t.target).cursor, 
            1 < u.length && mt(y, f.cssClasses.drag), C.addEventListener("selectstart", pt, !1)), 
            e.handleNumbers.forEach(function(t) {
                J("start", t);
            });
        }
        function n(t) {
            t.stopPropagation();
            var n, i, o, e = q(t.calcPoint), r = (n = e, o = !(i = 100), u.forEach(function(t, e) {
                if (!z(e)) {
                    var r = Math.abs(g[e] - n);
                    (r < i || 100 === r && 100 === i) && (o = e, i = r);
                }
            }), o);
            if (!1 === r) return !1;
            f.events.snap || ft(y, f.cssClasses.tap, f.animationDuration), rt(r, e, !0, !0), 
            et(), J("slide", r, !0), J("update", r, !0), J("change", r, !0), J("set", r, !0), 
            f.events.snap && I(t, {
                handleNumbers: [ r ]
            });
        }
        function W(t) {
            var e = q(t.calcPoint), r = E.getStep(e), n = E.fromStepping(r);
            Object.keys(S).forEach(function(t) {
                "hover" === t.split(".")[0] && S[t].forEach(function(t) {
                    t.call(s, n);
                });
            });
        }
        function $(t, e) {
            S[t] = S[t] || [], S[t].push(e), "update" === t.split(".")[0] && u.forEach(function(t, e) {
                J("update", e);
            });
        }
        function G(t) {
            var n = t && t.split(".")[0], i = n && t.substring(n.length);
            Object.keys(S).forEach(function(t) {
                var e = t.split(".")[0], r = t.substring(e.length);
                n && n !== e || i && i !== r || delete S[t];
            });
        }
        function J(r, n, i) {
            Object.keys(S).forEach(function(t) {
                var e = t.split(".")[0];
                r === e && S[t].forEach(function(t) {
                    t.call(s, m.map(f.format.to), n, m.slice(), i || !1, g.slice());
                });
            });
        }
        function K(t, e, r, n, i, o) {
            return 1 < u.length && !f.events.unconstrained && (n && 0 < e && (r = Math.max(r, t[e - 1] + f.margin)), 
            i && e < u.length - 1 && (r = Math.min(r, t[e + 1] - f.margin))), 1 < u.length && f.limit && (n && 0 < e && (r = Math.min(r, t[e - 1] + f.limit)), 
            i && e < u.length - 1 && (r = Math.max(r, t[e + 1] - f.limit))), f.padding && (0 === e && (r = Math.max(r, f.padding[0])), 
            e === u.length - 1 && (r = Math.min(r, 100 - f.padding[1]))), !((r = dt(r = E.getStep(r))) === t[e] && !o) && r;
        }
        function Q(t, e) {
            var r = f.ort;
            return (r ? e : t) + ", " + (r ? t : e);
        }
        function Z(t, n, r, e) {
            var i = r.slice(), o = [ !t, t ], a = [ t, !t ];
            e = e.slice(), t && e.reverse(), 1 < e.length ? e.forEach(function(t, e) {
                var r = K(i, t, i[t] + n, o[e], a[e], !1);
                !1 === r ? n = 0 : (n = r - i[t], i[t] = r);
            }) : o = a = [ !0 ];
            var s = !1;
            e.forEach(function(t, e) {
                s = rt(t, r[t] + n, o[e], a[e]) || s;
            }), s && e.forEach(function(t) {
                J("update", t), J("slide", t);
            });
        }
        function tt(t, e) {
            return f.dir ? 100 - t - e : t;
        }
        function et() {
            v.forEach(function(t) {
                var e = 50 < g[t] ? -1 : 1, r = 3 + (u.length + e * t);
                u[t].style.zIndex = r;
            });
        }
        function rt(t, e, r, n) {
            return !1 !== (e = K(g, t, e, r, n, !1)) && (function(t, e) {
                g[t] = e, m[t] = E.fromStepping(e);
                var r = "translate(" + Q(tt(e, 0) - A + "%", "0") + ")";
                u[t].style[f.transformRule] = r, nt(t), nt(t + 1);
            }(t, e), !0);
        }
        function nt(t) {
            if (a[t]) {
                var e = 0, r = 100;
                0 !== t && (e = g[t - 1]), t !== a.length - 1 && (r = g[t]);
                var n = r - e, i = "translate(" + Q(tt(e, n) + "%", "0") + ")", o = "scale(" + Q(n / 100, "1") + ")";
                a[t].style[f.transformRule] = i + " " + o;
            }
        }
        function it(t, e) {
            return null === t || !1 === t || void 0 === t ? g[e] : ("number" == typeof t && (t = String(t)), 
            t = f.format.from(t), !1 === (t = E.toStepping(t)) || isNaN(t) ? g[e] : t);
        }
        function ot(t, e) {
            var r = ht(t), n = void 0 === g[0];
            e = void 0 === e || !!e, f.animate && !n && ft(y, f.cssClasses.tap, f.animationDuration), 
            v.forEach(function(t) {
                rt(t, it(r[t], t), !0, !1);
            }), v.forEach(function(t) {
                rt(t, g[t], !0, !0);
            }), et(), v.forEach(function(t) {
                J("update", t), null !== r[t] && e && J("set", t);
            });
        }
        function at(t, e, r) {
            if (!(0 <= (t = Number(t)) && t < v.length)) throw new Error("noUiSlider (" + ut + "): invalid handle number, got: " + t);
            rt(t, it(e, t), !0, !0), J("update", t), r && J("set", t);
        }
        function st() {
            var t = m.map(f.format.to);
            return 1 === t.length ? t[0] : t;
        }
        function lt(t) {
            var e = g[t], r = E.getNearbySteps(e), n = m[t], i = r.thisStep.step, o = null;
            if (f.snap) return [ n - r.stepBefore.startValue || null, r.stepAfter.startValue - n || null ];
            !1 !== i && n + i > r.stepAfter.startValue && (i = r.stepAfter.startValue - n), 
            o = n > r.thisStep.startValue ? r.thisStep.step : !1 !== r.stepBefore.step && n - r.stepBefore.highestStep, 
            100 === e ? i = null : 0 === e && (o = null);
            var a = E.countStepDecimals();
            return null !== i && !1 !== i && (i = Number(i.toFixed(a))), null !== o && !1 !== o && (o = Number(o.toFixed(a))), 
            [ o, i ];
        }
        return mt(e = y, f.cssClasses.target), 0 === f.dir ? mt(e, f.cssClasses.ltr) : mt(e, f.cssClasses.rtl), 
        0 === f.ort ? mt(e, f.cssClasses.horizontal) : mt(e, f.cssClasses.vertical), l = V(e, f.cssClasses.base), 
        function(t, e) {
            var r = V(e, f.cssClasses.connects);
            u = [], (a = []).push(O(r, t[0]));
            for (var n = 0; n < f.handles; n++) u.push(M(e, n)), v[n] = n, a.push(O(r, t[n + 1]));
        }(f.connect, l), (p = f.events).fixed || u.forEach(function(t, e) {
            B(d.start, t.children[0], I, {
                handleNumbers: [ e ]
            });
        }), p.tap && B(d.start, l, n, {}), p.hover && B(d.move, l, W, {
            hover: !0
        }), p.drag && a.forEach(function(t, e) {
            if (!1 !== t && 0 !== e && e !== a.length - 1) {
                var r = u[e - 1], n = u[e], i = [ t ];
                mt(t, f.cssClasses.draggable), p.fixed && (i.push(r.children[0]), i.push(n.children[0])), 
                i.forEach(function(t) {
                    B(d.start, t, I, {
                        handles: [ r, n ],
                        handleNumbers: [ e - 1, e ]
                    });
                });
            }
        }), ot(f.start), f.pips && T(f.pips), f.tooltips && H(), $("update", function(t, e, a, r, s) {
            v.forEach(function(t) {
                var e = u[t], r = K(g, t, 0, !0, !0, !0), n = K(g, t, 100, !0, !0, !0), i = s[t], o = f.ariaFormat.to(a[t]);
                r = E.fromStepping(r).toFixed(1), n = E.fromStepping(n).toFixed(1), i = E.fromStepping(i).toFixed(1), 
                e.children[0].setAttribute("aria-valuemin", r), e.children[0].setAttribute("aria-valuemax", n), 
                e.children[0].setAttribute("aria-valuenow", i), e.children[0].setAttribute("aria-valuetext", o);
            });
        }), s = {
            destroy: function() {
                for (var t in f.cssClasses) f.cssClasses.hasOwnProperty(t) && gt(y, f.cssClasses[t]);
                for (;y.firstChild; ) y.removeChild(y.firstChild);
                delete y.noUiSlider;
            },
            steps: function() {
                return v.map(lt);
            },
            on: $,
            off: G,
            get: st,
            set: ot,
            setHandle: at,
            reset: function(t) {
                ot(f.start, t);
            },
            __moveHandles: function(t, e, r) {
                Z(t, e, g, r);
            },
            options: o,
            updateOptions: function(e, t) {
                var r = st(), n = [ "margin", "limit", "padding", "range", "animate", "snap", "step", "format", "pips", "tooltips" ];
                n.forEach(function(t) {
                    void 0 !== e[t] && (o[t] = e[t]);
                });
                var i = bt(o);
                n.forEach(function(t) {
                    void 0 !== e[t] && (f[t] = i[t]);
                }), E = i.spectrum, f.margin = i.margin, f.limit = i.limit, f.padding = i.padding, 
                f.pips ? T(f.pips) : D(), f.tooltips ? H() : j(), g = [], ot(e.start || r, t);
            },
            target: y,
            removePips: D,
            removeTooltips: j,
            pips: T
        };
    }
    return {
        __spectrum: l,
        version: ut,
        create: function(t, e) {
            if (!t || !t.nodeName) throw new Error("noUiSlider (" + ut + "): create requires a single element, got: " + t);
            if (t.noUiSlider) throw new Error("noUiSlider (" + ut + "): Slider was already initialized.");
            var r = z(t, bt(e), e);
            return t.noUiSlider = r;
        }
    };
});

(function(global, factory) {
    if (typeof define === "function" && define.amd) {
        define([ "exports" ], factory);
    } else if (typeof exports !== "undefined") {
        factory(exports);
    } else {
        var mod = {
            exports: {}
        };
        factory(mod.exports);
        global.bodyScrollLock = mod.exports;
    }
})(this, function(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
        value: true
    });
    function _toConsumableArray(arr) {
        if (Array.isArray(arr)) {
            for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
                arr2[i] = arr[i];
            }
            return arr2;
        } else {
            return Array.from(arr);
        }
    }
    var hasPassiveEvents = false;
    if (typeof window !== "undefined") {
        var passiveTestOptions = {
            get passive() {
                hasPassiveEvents = true;
                return undefined;
            }
        };
        window.addEventListener("testPassive", null, passiveTestOptions);
        window.removeEventListener("testPassive", null, passiveTestOptions);
    }
    var isIosDevice = typeof window !== "undefined" && window.navigator && window.navigator.platform && /iP(ad|hone|od)/.test(window.navigator.platform);
    var locks = [];
    var documentListenerAdded = false;
    var initialClientY = -1;
    var previousBodyOverflowSetting = void 0;
    var previousBodyPaddingRight = void 0;
    var allowTouchMove = function allowTouchMove(el) {
        return locks.some(function(lock) {
            if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {
                return true;
            }
            return false;
        });
    };
    var preventDefault = function preventDefault(rawEvent) {
        var e = rawEvent || window.event;
        if (allowTouchMove(e.target)) {
            return true;
        }
        if (e.touches.length > 1) return true;
        if (e.preventDefault) e.preventDefault();
        return false;
    };
    var setOverflowHidden = function setOverflowHidden(options) {
        setTimeout(function() {
            if (previousBodyPaddingRight === undefined) {
                var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;
                var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;
                if (_reserveScrollBarGap && scrollBarGap > 0) {
                    previousBodyPaddingRight = document.body.style.paddingRight;
                    document.body.style.paddingRight = scrollBarGap + "px";
                }
            }
            if (previousBodyOverflowSetting === undefined) {
                previousBodyOverflowSetting = document.body.style.overflow;
                document.body.style.overflow = "hidden";
            }
        });
    };
    var restoreOverflowSetting = function restoreOverflowSetting() {
        setTimeout(function() {
            if (previousBodyPaddingRight !== undefined) {
                document.body.style.paddingRight = previousBodyPaddingRight;
                previousBodyPaddingRight = undefined;
            }
            if (previousBodyOverflowSetting !== undefined) {
                document.body.style.overflow = previousBodyOverflowSetting;
                previousBodyOverflowSetting = undefined;
            }
        });
    };
    var isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {
        return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;
    };
    var handleScroll = function handleScroll(event, targetElement) {
        var clientY = event.targetTouches[0].clientY - initialClientY;
        if (allowTouchMove(event.target)) {
            return false;
        }
        if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {
            return preventDefault(event);
        }
        if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {
            return preventDefault(event);
        }
        event.stopPropagation();
        return true;
    };
    var disableBodyScroll = exports.disableBodyScroll = function disableBodyScroll(targetElement, options) {
        if (isIosDevice) {
            if (!targetElement) {
                console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");
                return;
            }
            if (targetElement && !locks.some(function(lock) {
                return lock.targetElement === targetElement;
            })) {
                var lock = {
                    targetElement: targetElement,
                    options: options || {}
                };
                locks = [].concat(_toConsumableArray(locks), [ lock ]);
                targetElement.ontouchstart = function(event) {
                    if (event.targetTouches.length === 1) {
                        initialClientY = event.targetTouches[0].clientY;
                    }
                };
                targetElement.ontouchmove = function(event) {
                    if (event.targetTouches.length === 1) {
                        handleScroll(event, targetElement);
                    }
                };
                if (!documentListenerAdded) {
                    document.addEventListener("touchmove", preventDefault, hasPassiveEvents ? {
                        passive: false
                    } : undefined);
                    documentListenerAdded = true;
                }
            }
        } else {
            setOverflowHidden(options);
            var _lock = {
                targetElement: targetElement,
                options: options || {}
            };
            locks = [].concat(_toConsumableArray(locks), [ _lock ]);
        }
    };
    var clearAllBodyScrollLocks = exports.clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {
        if (isIosDevice) {
            locks.forEach(function(lock) {
                lock.targetElement.ontouchstart = null;
                lock.targetElement.ontouchmove = null;
            });
            if (documentListenerAdded) {
                document.removeEventListener("touchmove", preventDefault, hasPassiveEvents ? {
                    passive: false
                } : undefined);
                documentListenerAdded = false;
            }
            locks = [];
            initialClientY = -1;
        } else {
            restoreOverflowSetting();
            locks = [];
        }
    };
    var enableBodyScroll = exports.enableBodyScroll = function enableBodyScroll(targetElement) {
        if (isIosDevice) {
            if (!targetElement) {
                console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");
                return;
            }
            targetElement.ontouchstart = null;
            targetElement.ontouchmove = null;
            locks = locks.filter(function(lock) {
                return lock.targetElement !== targetElement;
            });
            if (documentListenerAdded && locks.length === 0) {
                document.removeEventListener("touchmove", preventDefault, hasPassiveEvents ? {
                    passive: false
                } : undefined);
                documentListenerAdded = false;
            }
        } else {
            locks = locks.filter(function(lock) {
                return lock.targetElement !== targetElement;
            });
            if (!locks.length) {
                restoreOverflowSetting();
            }
        }
    };
});

(function($) {
    var a = {}, c = "doTimeout", d = Array.prototype.slice;
    $[c] = function() {
        return b.apply(window, [ 0 ].concat(d.call(arguments)));
    };
    $.fn[c] = function() {
        var f = d.call(arguments), e = b.apply(this, [ c + f[0] ].concat(f));
        return typeof f[0] === "number" || typeof f[1] === "number" ? this : e;
    };
    function b(l) {
        var m = this, h, k = {}, g = l ? $.fn : $, n = arguments, i = 4, f = n[1], j = n[2], p = n[3];
        if (typeof f !== "string") {
            i--;
            f = l = 0;
            j = n[1];
            p = n[2];
        }
        if (l) {
            h = m.eq(0);
            h.data(l, k = h.data(l) || {});
        } else {
            if (f) {
                k = a[f] || (a[f] = {});
            }
        }
        k.id && clearTimeout(k.id);
        delete k.id;
        function e() {
            if (l) {
                h.removeData(l);
            } else {
                if (f) {
                    delete a[f];
                }
            }
        }
        function o() {
            k.id = setTimeout(function() {
                k.fn();
            }, j);
        }
        if (p) {
            k.fn = function(q) {
                if (typeof p === "string") {
                    p = g[p];
                }
                p.apply(m, d.call(n, i)) === true && !q ? o() : e();
            };
            o();
        } else {
            if (k.fn) {
                j === undefined ? e() : k.fn(j === false);
                return true;
            } else {
                e();
            }
        }
    }
})(jQuery);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

+function($) {
    "use strict";
    var Button = function Button(element, options) {
        this.$element = $(element);
        this.options = $.extend({}, Button.DEFAULTS, options);
        this.isLoading = false;
    };
    Button.VERSION = "3.3.1";
    Button.DEFAULTS = {
        loadingText: "loading..."
    };
    Button.prototype.setState = function(state) {
        var d = "disabled";
        var $el = this.$element;
        var val = $el.is("input") ? "val" : "html";
        var data = $el.data();
        state = state + "Text";
        if (data.resetText == null) $el.data("resetText", $el[val]());
        setTimeout($.proxy(function() {
            $el[val](data[state] == null ? this.options[state] : data[state]);
            if (state == "loadingText") {
                this.isLoading = true;
                $el.addClass(d).attr(d, d);
            } else if (this.isLoading) {
                this.isLoading = false;
                $el.removeClass(d).removeAttr(d);
            }
        }, this), 0);
    };
    Button.prototype.toggle = function() {
        var changed = true;
        var $parent = this.$element.closest('[data-toggle="buttons"]');
        if ($parent.length) {
            var $input = this.$element.find("input");
            if ($input.prop("type") == "radio") {
                if ($input.prop("checked") && this.$element.hasClass("active")) changed = false; else $parent.find(".active").removeClass("active");
            }
            if (changed) $input.prop("checked", !this.$element.hasClass("active")).trigger("change");
        } else {
            this.$element.attr("aria-pressed", !this.$element.hasClass("active"));
        }
        if (changed) this.$element.toggleClass("active");
    };
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this);
            var data = $this.data("bs.button");
            var options = (typeof option === "undefined" ? "undefined" : _typeof(option)) == "object" && option;
            if (!data) $this.data("bs.button", data = new Button(this, options));
            if (option == "toggle") data.toggle(); else if (option) data.setState(option);
        });
    }
    var old = $.fn.button;
    $.fn.button = Plugin;
    $.fn.button.Constructor = Button;
    $.fn.button.noConflict = function() {
        $.fn.button = old;
        return this;
    };
    $(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function(e) {
        var $btn = $(e.target);
        if (!$btn.hasClass("btn")) $btn = $btn.closest(".btn");
        Plugin.call($btn, "toggle");
        e.preventDefault();
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function(e) {
        $(e.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(e.type));
    });
}(jQuery);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

+function($) {
    "use strict";
    var Collapse = function Collapse(element, options) {
        this.$element = $(element);
        this.options = $.extend({}, Collapse.DEFAULTS, options);
        this.$trigger = $(this.options.trigger).filter('[href="#' + element.id + '"], [data-target="#' + element.id + '"]');
        this.transitioning = null;
        if (this.options.parent) {
            this.$parent = this.getParent();
        } else {
            this.addAriaAndCollapsedClass(this.$element, this.$trigger);
        }
        if (this.options.toggle) this.toggle();
    };
    Collapse.VERSION = "3.3.1";
    Collapse.TRANSITION_DURATION = 350;
    Collapse.DEFAULTS = {
        toggle: true,
        trigger: '[data-toggle="collapse"]'
    };
    Collapse.prototype.dimension = function() {
        var hasWidth = this.$element.hasClass("width");
        return hasWidth ? "width" : "height";
    };
    Collapse.prototype.show = function() {
        if (this.transitioning || this.$element.hasClass("in")) return;
        var activesData;
        var actives = this.$parent && this.$parent.find("> .panel").children(".in, .collapsing");
        if (actives && actives.length) {
            activesData = actives.data("bs.collapse");
            if (activesData && activesData.transitioning) return;
        }
        var startEvent = $.Event("show.bs.collapse");
        this.$element.trigger(startEvent);
        if (startEvent.isDefaultPrevented()) return;
        if (actives && actives.length) {
            Plugin.call(actives, "hide");
            activesData || actives.data("bs.collapse", null);
        }
        var dimension = this.dimension();
        this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded", true);
        this.$trigger.removeClass("collapsed").attr("aria-expanded", true);
        this.transitioning = 1;
        var complete = function complete() {
            this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");
            this.transitioning = 0;
            this.$element.trigger("shown.bs.collapse");
        };
        if (!$.support.transition) return complete.call(this);
        var scrollSize = $.camelCase([ "scroll", dimension ].join("-"));
        this.$element.one("bsTransitionEnd", $.proxy(complete, this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize]);
    };
    Collapse.prototype.hide = function() {
        if (this.transitioning || !this.$element.hasClass("in")) return;
        var startEvent = $.Event("hide.bs.collapse");
        this.$element.trigger(startEvent);
        if (startEvent.isDefaultPrevented()) return;
        var dimension = this.dimension();
        this.$element[dimension](this.$element[dimension]())[0].offsetHeight;
        this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", false);
        this.$trigger.addClass("collapsed").attr("aria-expanded", false);
        this.transitioning = 1;
        var complete = function complete() {
            this.transitioning = 0;
            this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse");
        };
        if (!$.support.transition) return complete.call(this);
        this.$element[dimension](0).one("bsTransitionEnd", $.proxy(complete, this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION);
    };
    Collapse.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
    };
    Collapse.prototype.getParent = function() {
        return $(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each($.proxy(function(i, element) {
            var $element = $(element);
            this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element);
        }, this)).end();
    };
    Collapse.prototype.addAriaAndCollapsedClass = function($element, $trigger) {
        var isOpen = $element.hasClass("in");
        $element.attr("aria-expanded", isOpen);
        $trigger.toggleClass("collapsed", !isOpen).attr("aria-expanded", isOpen);
    };
    function getTargetFromTrigger($trigger) {
        var href;
        var target = $trigger.attr("data-target") || (href = $trigger.attr("href")) && href.replace(/.*(?=#[^\s]+$)/, "");
        return $(target);
    }
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this);
            var data = $this.data("bs.collapse");
            var options = $.extend({}, Collapse.DEFAULTS, $this.data(), (typeof option === "undefined" ? "undefined" : _typeof(option)) == "object" && option);
            if (!data && options.toggle && option == "show") options.toggle = false;
            if (!data) $this.data("bs.collapse", data = new Collapse(this, options));
            if (typeof option == "string") data[option]();
        });
    }
    var old = $.fn.collapse;
    $.fn.collapse = Plugin;
    $.fn.collapse.Constructor = Collapse;
    $.fn.collapse.noConflict = function() {
        $.fn.collapse = old;
        return this;
    };
    $(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function(e) {
        var $this = $(this);
        if (!$this.attr("data-target")) e.preventDefault();
        var $target = getTargetFromTrigger($this);
        var data = $target.data("bs.collapse");
        var option = data ? "toggle" : $.extend({}, $this.data(), {
            trigger: this
        });
        Plugin.call($target, option);
    });
}(jQuery);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

(function($) {
    var createdElements = [];
    var defaults = {
        options: {
            prependExistingHelpBlock: false,
            sniffHtml: true,
            preventSubmit: true,
            submitError: false,
            submitSuccess: false,
            semanticallyStrict: false,
            bindEvents: "default",
            autoAdd: {
                helpBlocks: true
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).is('[type="checkbox"]');
                return true;
            }
        },
        methods: {
            init: function init(options) {
                var settings = $.extend(true, {}, defaults);
                settings.options = $.extend(true, settings.options, options);
                var $siblingElements = this;
                var uniqueForms = $.unique($siblingElements.map(function() {
                    return $(this).parents("form")[0];
                }).toArray());
                $(uniqueForms).bind("submit", function(e) {
                    var $form = $(this);
                    var warningsFound = 0;
                    var $inputs = $form.find("input,textarea,select").not("[type=submit],[type=image]").filter(settings.options.filter);
                    $inputs.trigger("submit.validation").trigger("validationLostFocus.validation");
                    $inputs.each(function(i, el) {
                        var $this = $(el), $controlGroup = $this.parents(".form-group:not(.no-validate)").first();
                        if ($controlGroup.hasClass("has-warning")) {
                            $controlGroup.removeClass("has-warning").addClass("has-error");
                            warningsFound++;
                        }
                    });
                    $inputs.trigger("validationLostFocus.validation");
                    if (warningsFound) {
                        if (settings.options.preventSubmit) {
                            e.preventDefault();
                        }
                        $form.addClass("error");
                        if ($.isFunction(settings.options.submitError)) {
                            settings.options.submitError($form, e, $inputs.jqBootstrapValidation("collectErrors", true));
                        }
                    } else {
                        $form.removeClass("error");
                        if ($.isFunction(settings.options.submitSuccess)) {
                            settings.options.submitSuccess($form, e);
                        }
                    }
                });
                return this.each(function() {
                    var $this = $(this), $controlGroup = $this.parents(".form-group:not(.no-validate)").first(), $helpBlock = $controlGroup.find(".help-block").first(), $form = $this.parents("form").first(), validatorNames = [];
                    if (!$helpBlock.length && settings.options.autoAdd && settings.options.autoAdd.helpBlocks) {
                        $helpBlock = $('<div class="help-block" />');
                        $controlGroup.find(".controls").append($helpBlock);
                        createdElements.push($helpBlock[0]);
                    }
                    if (settings.options.sniffHtml) {
                        var message = "";
                        if ($this.attr("pattern") !== undefined) {
                            message = "Not in the expected format\x3c!-- data-validation-pattern-message to override --\x3e";
                            if ($this.data("validationPatternMessage")) {
                                message = $this.data("validationPatternMessage");
                            }
                            $this.data("validationPatternMessage", message);
                            $this.data("validationPatternRegex", $this.attr("pattern"));
                        }
                        if ($this.attr("max") !== undefined || $this.attr("aria-valuemax") !== undefined) {
                            var max = $this.attr("max") !== undefined ? $this.attr("max") : $this.attr("aria-valuemax");
                            message = "Too high: Maximum of '" + max + "'\x3c!-- data-validation-max-message to override --\x3e";
                            if ($this.data("validationMaxMessage")) {
                                message = $this.data("validationMaxMessage");
                            }
                            $this.data("validationMaxMessage", message);
                            $this.data("validationMaxMax", max);
                        }
                        if ($this.attr("min") !== undefined || $this.attr("aria-valuemin") !== undefined) {
                            var min = $this.attr("min") !== undefined ? $this.attr("min") : $this.attr("aria-valuemin");
                            message = "Too low: Minimum of '" + min + "'\x3c!-- data-validation-min-message to override --\x3e";
                            if ($this.data("validationMinMessage")) {
                                message = $this.data("validationMinMessage");
                            }
                            $this.data("validationMinMessage", message);
                            $this.data("validationMinMin", min);
                        }
                        if ($this.attr("maxlength") !== undefined) {
                            message = "Too long: Maximum of '" + $this.attr("maxlength") + "' characters\x3c!-- data-validation-maxlength-message to override --\x3e";
                            if ($this.data("validationMaxlengthMessage")) {
                                message = $this.data("validationMaxlengthMessage");
                            }
                            $this.data("validationMaxlengthMessage", message);
                            $this.data("validationMaxlengthMaxlength", $this.attr("maxlength"));
                        }
                        if ($this.attr("minlength") !== undefined) {
                            message = "Too short: Minimum of '" + $this.attr("minlength") + "' characters\x3c!-- data-validation-minlength-message to override --\x3e";
                            if ($this.data("validationMinlengthMessage")) {
                                message = $this.data("validationMinlengthMessage");
                            }
                            $this.data("validationMinlengthMessage", message);
                            $this.data("validationMinlengthMinlength", $this.attr("minlength"));
                        }
                        if ($this.attr("required") !== undefined || $this.attr("aria-required") !== undefined) {
                            message = settings.builtInValidators.required.message;
                            if ($this.data("validationRequiredMessage")) {
                                message = $this.data("validationRequiredMessage");
                            }
                            $this.data("validationRequiredMessage", message);
                        }
                        if ($this.attr("type") !== undefined && $this.attr("type").toLowerCase() === "number") {
                            message = settings.builtInValidators.number.message;
                            if ($this.data("validationNumberMessage")) {
                                message = $this.data("validationNumberMessage");
                            }
                            $this.data("validationNumberMessage", message);
                        }
                        if ($this.attr("type") !== undefined && $this.attr("type").toLowerCase() === "email") {
                            message = "Not a valid email address\x3c!-- data-validator-validemail-message to override --\x3e";
                            if ($this.data("validationValidemailMessage")) {
                                message = $this.data("validationValidemailMessage");
                            } else if ($this.data("validationEmailMessage")) {
                                message = $this.data("validationEmailMessage");
                            }
                            $this.data("validationValidemailMessage", message);
                        }
                        if ($this.attr("minchecked") !== undefined) {
                            message = "Not enough options checked; Minimum of '" + $this.attr("minchecked") + "' required\x3c!-- data-validation-minchecked-message to override --\x3e";
                            if ($this.data("validationMincheckedMessage")) {
                                message = $this.data("validationMincheckedMessage");
                            }
                            $this.data("validationMincheckedMessage", message);
                            $this.data("validationMincheckedMinchecked", $this.attr("minchecked"));
                        }
                        if ($this.attr("maxchecked") !== undefined) {
                            message = "Too many options checked; Maximum of '" + $this.attr("maxchecked") + "' required\x3c!-- data-validation-maxchecked-message to override --\x3e";
                            if ($this.data("validationMaxcheckedMessage")) {
                                message = $this.data("validationMaxcheckedMessage");
                            }
                            $this.data("validationMaxcheckedMessage", message);
                            $this.data("validationMaxcheckedMaxchecked", $this.attr("maxchecked"));
                        }
                    }
                    if ($this.data("validation") !== undefined) {
                        validatorNames = $this.data("validation").split(",");
                    }
                    $.each($this.data(), function(i, el) {
                        var parts = i.replace(/([A-Z])/g, ",$1").split(",");
                        if (parts[0] === "validation" && parts[1]) {
                            validatorNames.push(parts[1]);
                        }
                    });
                    var validatorNamesToInspect = validatorNames;
                    var newValidatorNamesToInspect = [];
                    do {
                        $.each(validatorNames, function(i, el) {
                            validatorNames[i] = formatValidatorName(el);
                        });
                        validatorNames = $.unique(validatorNames);
                        newValidatorNamesToInspect = [];
                        $.each(validatorNamesToInspect, function(i, el) {
                            if ($this.data("validation" + el + "Shortcut") !== undefined) {
                                $.each($this.data("validation" + el + "Shortcut").split(","), function(i2, el2) {
                                    newValidatorNamesToInspect.push(el2);
                                });
                            } else if (settings.builtInValidators[el.toLowerCase()]) {
                                var validator = settings.builtInValidators[el.toLowerCase()];
                                if (validator.type.toLowerCase() === "shortcut") {
                                    $.each(validator.shortcut.split(","), function(i, el) {
                                        el = formatValidatorName(el);
                                        newValidatorNamesToInspect.push(el);
                                        validatorNames.push(el);
                                    });
                                }
                            }
                        });
                        validatorNamesToInspect = newValidatorNamesToInspect;
                    } while (validatorNamesToInspect.length > 0);
                    var validators = {};
                    $.each(validatorNames, function(i, el) {
                        var message = $this.data("validation" + el + "Message");
                        var hasOverrideMessage = message !== undefined;
                        var foundValidator = false;
                        message = message ? message : "'" + el + "' validation failed \x3c!-- Add attribute 'data-validation-" + el.toLowerCase() + "-message' to input to change this message --\x3e";
                        $.each(settings.validatorTypes, function(validatorType, validatorTemplate) {
                            if (validators[validatorType] === undefined) {
                                validators[validatorType] = [];
                            }
                            if (!foundValidator && $this.data("validation" + el + formatValidatorName(validatorTemplate.name)) !== undefined) {
                                validators[validatorType].push($.extend(true, {
                                    name: formatValidatorName(validatorTemplate.name),
                                    message: message
                                }, validatorTemplate.init($this, el)));
                                foundValidator = true;
                            }
                        });
                        if (!foundValidator && settings.builtInValidators[el.toLowerCase()]) {
                            var validator = $.extend(true, {}, settings.builtInValidators[el.toLowerCase()]);
                            if (hasOverrideMessage) {
                                validator.message = message;
                            }
                            var validatorType = validator.type.toLowerCase();
                            if (validatorType === "shortcut") {
                                foundValidator = true;
                            } else {
                                $.each(settings.validatorTypes, function(validatorTemplateType, validatorTemplate) {
                                    if (validators[validatorTemplateType] === undefined) {
                                        validators[validatorTemplateType] = [];
                                    }
                                    if (!foundValidator && validatorType === validatorTemplateType.toLowerCase()) {
                                        $this.data("validation" + el + formatValidatorName(validatorTemplate.name), validator[validatorTemplate.name.toLowerCase()]);
                                        validators[validatorType].push($.extend(validator, validatorTemplate.init($this, el)));
                                        foundValidator = true;
                                    }
                                });
                            }
                        }
                        if (!foundValidator) {
                            $.error("Cannot find validation info for '" + el + "'");
                        }
                    });
                    $helpBlock.data("original-contents", $helpBlock.data("original-contents") ? $helpBlock.data("original-contents") : $helpBlock.html());
                    $helpBlock.data("original-role", $helpBlock.data("original-role") ? $helpBlock.data("original-role") : $helpBlock.attr("role"));
                    $controlGroup.data("original-classes", $controlGroup.data("original-clases") ? $controlGroup.data("original-classes") : $controlGroup.attr("class"));
                    $this.data("original-aria-invalid", $this.data("original-aria-invalid") ? $this.data("original-aria-invalid") : $this.attr("aria-invalid"));
                    $this.bind("validation.validation", function(event, params) {
                        var value = getValue($this);
                        var errorsFound = [];
                        $.each(validators, function(validatorType, validatorTypeArray) {
                            if (value || value.length || params && params.includeEmpty || !!settings.validatorTypes[validatorType].blockSubmit && params && !!params.submitting) {
                                $.each(validatorTypeArray, function(i, validator) {
                                    if (settings.validatorTypes[validatorType].validate($this, value, validator)) {
                                        errorsFound.push(validator.message);
                                    }
                                });
                            }
                        });
                        return errorsFound;
                    });
                    $this.bind("getValidators.validation", function() {
                        return validators;
                    });
                    $this.bind("submit.validation", function() {
                        return $this.triggerHandler("change.validation", {
                            submitting: true
                        });
                    });
                    if (settings.options.bindEvents == "default") {
                        var events = [ "keyup", "focus", "blur", "click", "keydown", "keypress", "change" ];
                    } else {
                        var events = settings.options.bindEvents;
                    }
                    $this.bind(events.join(".validation ") + ".validation", function(e, params) {
                        var value = getValue($this);
                        var errorsFound = [];
                        if (!params && e.type === "blur") {
                            params = {
                                submitting: true
                            };
                        }
                        $controlGroup.find("input,textarea,select").each(function(i, el) {
                            var oldCount = errorsFound.length;
                            $.each($(el).triggerHandler("validation.validation", params), function(j, message) {
                                errorsFound.push(message);
                            });
                            if (errorsFound.length > oldCount) {
                                $(el).attr("aria-invalid", "true");
                            } else {
                                var original = $this.data("original-aria-invalid");
                                $(el).attr("aria-invalid", original !== undefined ? original : false);
                            }
                        });
                        $form.find("input,select,textarea").not($this).not('[name="' + $this.attr("name") + '"]').trigger("validationLostFocus.validation");
                        errorsFound = $.unique(errorsFound.sort());
                        if (errorsFound.length) {
                            $controlGroup.removeClass("has-success has-error").addClass("has-warning");
                            if (settings.options.semanticallyStrict && errorsFound.length === 1) {
                                $helpBlock.html(errorsFound[0] + (settings.options.prependExistingHelpBlock ? $helpBlock.data("original-contents") : ""));
                            } else {
                                $helpBlock.html('<ul role="alert"><li>' + errorsFound.join("</li><li>") + "</li></ul>" + (settings.options.prependExistingHelpBlock ? $helpBlock.data("original-contents") : ""));
                            }
                        } else {
                            $controlGroup.removeClass("has-warning has-error has-success");
                            if (value.length > 0) {
                                $controlGroup.addClass("has-success");
                            }
                            $helpBlock.html($helpBlock.data("original-contents"));
                        }
                        if (e.type === "blur") {
                            if ($this.attr("required") !== undefined && $this.val().length < 1) {
                                $this.closest(".form-group").addClass("has-error");
                            } else {
                                $this.closest(".form-group").removeClass("has-error");
                            }
                        }
                    });
                    $this.bind("validationLostFocus.validation", function() {});
                });
            },
            destroy: function destroy() {
                return this.each(function() {
                    var $this = $(this), $controlGroup = $this.parents(".form-group:not(.no-validate)").first(), $helpBlock = $controlGroup.find(".help-block").first();
                    $(this.form).unbind("submit");
                    $this.unbind(".validation");
                    $helpBlock.html($helpBlock.data("original-contents"));
                    $controlGroup.attr("class", $controlGroup.data("original-classes"));
                    $this.attr("aria-invalid", $this.data("original-aria-invalid"));
                    $helpBlock.attr("role", $this.data("original-role"));
                    if (createdElements.indexOf($helpBlock[0]) > -1) {
                        $helpBlock.remove();
                    }
                });
            },
            collectErrors: function collectErrors(includeEmpty) {
                var errorMessages = {};
                this.each(function(i, el) {
                    var $el = $(el);
                    var name = $el.attr("name");
                    var errors = $el.triggerHandler("validation.validation", {
                        includeEmpty: true
                    });
                    errorMessages[name] = $.extend(true, errors, errorMessages[name]);
                });
                $.each(errorMessages, function(i, el) {
                    if (el.length === 0) {
                        delete errorMessages[i];
                    }
                });
                return errorMessages;
            },
            hasErrors: function hasErrors() {
                var errorMessages = [];
                this.each(function(i, el) {
                    errorMessages = errorMessages.concat($(el).triggerHandler("getValidators.validation") ? $(el).triggerHandler("validation.validation", {
                        submitting: true
                    }) : []);
                });
                return errorMessages.length > 0;
            },
            override: function override(newDefaults) {
                defaults = $.extend(true, defaults, newDefaults);
            }
        },
        validatorTypes: {
            callback: {
                name: "callback",
                init: function init($this, name) {
                    return {
                        validatorName: name,
                        callback: $this.data("validation" + name + "Callback"),
                        lastValue: $this.val(),
                        lastValid: true,
                        lastFinished: true
                    };
                },
                validate: function validate($this, value, validator) {
                    if (validator.lastValue === value && validator.lastFinished) {
                        return !validator.lastValid;
                    }
                    if (validator.lastFinished === true) {
                        validator.lastValue = value;
                        validator.lastValid = true;
                        validator.lastFinished = false;
                        var rrjqbvValidator = validator;
                        var rrjqbvThis = $this;
                        executeFunctionByName(validator.callback, window, $this, value, function(data) {
                            if (rrjqbvValidator.lastValue === data.value) {
                                rrjqbvValidator.lastValid = data.valid;
                                if (data.message) {
                                    rrjqbvValidator.message = data.message;
                                }
                                rrjqbvValidator.lastFinished = true;
                                rrjqbvThis.data("validation" + rrjqbvValidator.validatorName + "Message", rrjqbvValidator.message);
                                setTimeout(function() {
                                    rrjqbvThis.trigger("change.validation");
                                }, 1);
                            }
                        });
                    }
                    return false;
                }
            },
            ajax: {
                name: "ajax",
                init: function init($this, name) {
                    return {
                        validatorName: name,
                        url: $this.data("validation" + name + "Ajax"),
                        lastValue: $this.val(),
                        lastValid: true,
                        lastFinished: true
                    };
                },
                validate: function validate($this, value, validator) {
                    if ("" + validator.lastValue === "" + value && validator.lastFinished === true) {
                        return validator.lastValid === false;
                    }
                    if (validator.lastFinished === true) {
                        validator.lastValue = value;
                        validator.lastValid = true;
                        validator.lastFinished = false;
                        $.ajax({
                            url: validator.url,
                            data: "value=" + value + "&field=" + $this.attr("name"),
                            dataType: "json",
                            success: function success(data) {
                                if ("" + validator.lastValue === "" + data.value) {
                                    validator.lastValid = !!data.valid;
                                    if (data.message) {
                                        validator.message = data.message;
                                    }
                                    validator.lastFinished = true;
                                    $this.data("validation" + validator.validatorName + "Message", validator.message);
                                    setTimeout(function() {
                                        $this.trigger("change.validation");
                                    }, 1);
                                }
                            },
                            failure: function failure() {
                                validator.lastValid = true;
                                validator.message = "ajax call failed";
                                validator.lastFinished = true;
                                $this.data("validation" + validator.validatorName + "Message", validator.message);
                                setTimeout(function() {
                                    $this.trigger("change.validation");
                                }, 1);
                            }
                        });
                    }
                    return false;
                }
            },
            regex: {
                name: "regex",
                init: function init($this, name) {
                    return {
                        regex: regexFromString($this.data("validation" + name + "Regex"))
                    };
                },
                validate: function validate($this, value, validator) {
                    return !validator.regex.test(value) && !validator.negative || validator.regex.test(value) && validator.negative;
                }
            },
            required: {
                name: "required",
                init: function init($this, name) {
                    return {};
                },
                validate: function validate($this, value, validator) {
                    return !!(value.length === 0 && !validator.negative) || !!(value.length > 0 && validator.negative);
                },
                blockSubmit: true
            },
            match: {
                name: "match",
                init: function init($this, name) {
                    var element = $this.parents("form").first().find('[name="' + $this.data("validation" + name + "Match") + '"]').first();
                    element.bind("validation.validation", function() {});
                    return {
                        element: element
                    };
                },
                validate: function validate($this, value, validator) {
                    return value !== validator.element.val() && !validator.negative || value === validator.element.val() && validator.negative;
                },
                blockSubmit: true
            },
            max: {
                name: "max",
                init: function init($this, name) {
                    return {
                        max: $this.data("validation" + name + "Max")
                    };
                },
                validate: function validate($this, value, validator) {
                    return parseFloat(value, 10) > parseFloat(validator.max, 10) && !validator.negative || parseFloat(value, 10) <= parseFloat(validator.max, 10) && validator.negative;
                }
            },
            min: {
                name: "min",
                init: function init($this, name) {
                    return {
                        min: $this.data("validation" + name + "Min")
                    };
                },
                validate: function validate($this, value, validator) {
                    return parseFloat(value) < parseFloat(validator.min) && !validator.negative || parseFloat(value) >= parseFloat(validator.min) && validator.negative;
                }
            },
            maxlength: {
                name: "maxlength",
                init: function init($this, name) {
                    return {
                        maxlength: $this.data("validation" + name + "Maxlength")
                    };
                },
                validate: function validate($this, value, validator) {
                    return value.length > validator.maxlength && !validator.negative || value.length <= validator.maxlength && validator.negative;
                }
            },
            minlength: {
                name: "minlength",
                init: function init($this, name) {
                    return {
                        minlength: $this.data("validation" + name + "Minlength")
                    };
                },
                validate: function validate($this, value, validator) {
                    return value.length < validator.minlength && !validator.negative || value.length >= validator.minlength && validator.negative;
                }
            },
            maxchecked: {
                name: "maxchecked",
                init: function init($this, name) {
                    var elements = $this.parents("form").first().find('[name="' + $this.attr("name") + '"]');
                    elements.bind("click.validation", function() {
                        $this.trigger("change.validation", {
                            includeEmpty: true
                        });
                    });
                    return {
                        maxchecked: $this.data("validation" + name + "Maxchecked"),
                        elements: elements
                    };
                },
                validate: function validate($this, value, validator) {
                    return validator.elements.filter(":checked").length > validator.maxchecked && !validator.negative || validator.elements.filter(":checked").length <= validator.maxchecked && validator.negative;
                },
                blockSubmit: true
            },
            minchecked: {
                name: "minchecked",
                init: function init($this, name) {
                    var elements = $this.parents("form").first().find('[name="' + $this.attr("name") + '"]');
                    elements.bind("click.validation", function() {
                        $this.trigger("change.validation", {
                            includeEmpty: true
                        });
                    });
                    return {
                        minchecked: $this.data("validation" + name + "Minchecked"),
                        elements: elements
                    };
                },
                validate: function validate($this, value, validator) {
                    return validator.elements.filter(":checked").length < validator.minchecked && !validator.negative || validator.elements.filter(":checked").length >= validator.minchecked && validator.negative;
                },
                blockSubmit: true
            }
        },
        builtInValidators: {
            email: {
                name: "Email",
                type: "shortcut",
                shortcut: "validemail"
            },
            validemail: {
                name: "Validemail",
                type: "regex",
                regex: "[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",
                message: "Not a valid email address\x3c!-- data-validator-validemail-message to override --\x3e"
            },
            passwordagain: {
                name: "Passwordagain",
                type: "match",
                match: "password",
                message: "Does not match the given password\x3c!-- data-validator-paswordagain-message to override --\x3e"
            },
            positive: {
                name: "Positive",
                type: "shortcut",
                shortcut: "number,positivenumber"
            },
            negative: {
                name: "Negative",
                type: "shortcut",
                shortcut: "number,negativenumber"
            },
            number: {
                name: "Number",
                type: "regex",
                regex: "([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",
                message: "Must be a number\x3c!-- data-validator-number-message to override --\x3e"
            },
            integer: {
                name: "Integer",
                type: "regex",
                regex: "[+-]?\\d+",
                message: "No decimal places allowed\x3c!-- data-validator-integer-message to override --\x3e"
            },
            positivenumber: {
                name: "Positivenumber",
                type: "min",
                min: 0,
                message: "Must be a positive number\x3c!-- data-validator-positivenumber-message to override --\x3e"
            },
            negativenumber: {
                name: "Negativenumber",
                type: "max",
                max: 0,
                message: "Must be a negative number\x3c!-- data-validator-negativenumber-message to override --\x3e"
            },
            required: {
                name: "Required",
                type: "required",
                message: "This is required\x3c!-- data-validator-required-message to override --\x3e"
            },
            checkone: {
                name: "Checkone",
                type: "minchecked",
                minchecked: 1,
                message: "Check at least one option\x3c!-- data-validation-checkone-message to override --\x3e"
            }
        }
    };
    var formatValidatorName = function formatValidatorName(name) {
        return name.toLowerCase().replace(/(^|\s)([a-z])/g, function(m, p1, p2) {
            return p1 + p2.toUpperCase();
        });
    };
    var getValue = function getValue($this) {
        var value = $this.val();
        var type = $this.attr("type");
        if (type === "checkbox") {
            value = $this.is(":checked") ? value : "";
        }
        if (type === "radio") {
            value = $('input[name="' + $this.attr("name") + '"]:checked').length > 0 ? value : "";
        }
        return value;
    };
    function regexFromString(inputstring) {
        return new RegExp("^" + inputstring + "$");
    }
    function executeFunctionByName(functionName, context) {
        var args = Array.prototype.slice.call(arguments).splice(2);
        var namespaces = functionName.split(".");
        var func = namespaces.pop();
        for (var i = 0; i < namespaces.length; i++) {
            context = context[namespaces[i]];
        }
        return context[func].apply(this, args);
    }
    $.fn.jqBootstrapValidation = function(method) {
        if (defaults.methods[method]) {
            return defaults.methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if ((typeof method === "undefined" ? "undefined" : _typeof(method)) === "object" || !method) {
            return defaults.methods.init.apply(this, arguments);
        } else {
            $.error("Method " + method + " does not exist on jQuery.jqBootstrapValidation");
            return null;
        }
    };
    $.jqBootstrapValidation = function(options) {
        $(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this, arguments);
    };
})(jQuery);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

+function($) {
    "use strict";
    function getValue($el) {
        return $el.is('[type="checkbox"]') ? $el.prop("checked") : $el.is('[type="radio"]') ? !!$('[name="' + $el.attr("name") + '"]:checked').length : $el.is("select[multiple]") ? ($el.val() || []).length : $el.val();
    }
    var Validator = function Validator(element, options) {
        this.options = options;
        this.validators = $.extend({}, Validator.VALIDATORS, options.custom);
        this.$element = $(element);
        this.$btn = $('button[type="submit"], input[type="submit"]').filter('[form="' + this.$element.attr("id") + '"]').add(this.$element.find('input[type="submit"], button[type="submit"]'));
        this.update();
        this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator", $.proxy(this.onInput, this));
        this.$element.on("submit.bs.validator", $.proxy(this.onSubmit, this));
        this.$element.on("reset.bs.validator", $.proxy(this.reset, this));
        this.$element.find("[data-match]").each(function() {
            var $this = $(this);
            var target = $this.attr("data-match");
            $(target).on("input.bs.validator", function(e) {
                getValue($this) && $this.trigger("input.bs.validator");
            });
        });
        this.$inputs.filter(function() {
            return getValue($(this)) && !$(this).closest(".has-error").length;
        }).trigger("focusout");
        this.$element.attr("novalidate", true);
    };
    Validator.VERSION = "0.11.9";
    Validator.INPUT_SELECTOR = ':input:not([type="hidden"], [type="submit"], [type="reset"], button)';
    Validator.FOCUS_OFFSET = 20;
    Validator.DEFAULTS = {
        delay: 500,
        html: false,
        disable: true,
        focus: true,
        custom: {},
        errors: {
            match: "Does not match",
            minlength: "Not long enough"
        },
        feedback: {
            success: "glyphicon-ok",
            error: "glyphicon-remove"
        }
    };
    Validator.VALIDATORS = {
        native: function native($el) {
            var el = $el[0];
            if (el.checkValidity) {
                return !el.checkValidity() && !el.validity.valid && (el.validationMessage || "error!");
            }
        },
        match: function match($el) {
            var target = $el.attr("data-match");
            return $el.val() !== $(target).val() && Validator.DEFAULTS.errors.match;
        },
        minlength: function minlength($el) {
            var minlength = $el.attr("data-minlength");
            return $el.val().length < minlength && Validator.DEFAULTS.errors.minlength;
        }
    };
    Validator.prototype.update = function() {
        var self = this;
        this.$inputs = this.$element.find(Validator.INPUT_SELECTOR).add(this.$element.find('[data-validate="true"]')).not(this.$element.find('[data-validate="false"]').each(function() {
            self.clearErrors($(this));
        }));
        this.toggleSubmit();
        return this;
    };
    Validator.prototype.onInput = function(e) {
        var self = this;
        var $el = $(e.target);
        var deferErrors = e.type !== "focusout";
        if (!this.$inputs.is($el)) return;
        this.validateInput($el, deferErrors).done(function() {
            self.toggleSubmit();
        });
    };
    Validator.prototype.validateInput = function($el, deferErrors) {
        var value = getValue($el);
        var prevErrors = $el.data("bs.validator.errors");
        if ($el.is('[type="radio"]')) $el = this.$element.find('input[name="' + $el.attr("name") + '"]');
        var e = $.Event("validate.bs.validator", {
            relatedTarget: $el[0]
        });
        this.$element.trigger(e);
        if (e.isDefaultPrevented()) return;
        var self = this;
        return this.runValidators($el).done(function(errors) {
            $el.data("bs.validator.errors", errors);
            errors.length ? deferErrors ? self.defer($el, self.showErrors) : self.showErrors($el) : self.clearErrors($el);
            if (!prevErrors || errors.toString() !== prevErrors.toString()) {
                e = errors.length ? $.Event("invalid.bs.validator", {
                    relatedTarget: $el[0],
                    detail: errors
                }) : $.Event("valid.bs.validator", {
                    relatedTarget: $el[0],
                    detail: prevErrors
                });
                self.$element.trigger(e);
            }
            self.toggleSubmit();
            self.$element.trigger($.Event("validated.bs.validator", {
                relatedTarget: $el[0]
            }));
        });
    };
    Validator.prototype.runValidators = function($el) {
        var errors = [];
        var deferred = $.Deferred();
        $el.data("bs.validator.deferred") && $el.data("bs.validator.deferred").reject();
        $el.data("bs.validator.deferred", deferred);
        function getValidatorSpecificError(key) {
            return $el.attr("data-" + key + "-error");
        }
        function getValidityStateError() {
            var validity = $el[0].validity;
            return validity.typeMismatch ? $el.attr("data-type-error") : validity.patternMismatch ? $el.attr("data-pattern-error") : validity.stepMismatch ? $el.attr("data-step-error") : validity.rangeOverflow ? $el.attr("data-max-error") : validity.rangeUnderflow ? $el.attr("data-min-error") : validity.valueMissing ? $el.attr("data-required-error") : null;
        }
        function getGenericError() {
            return $el.attr("data-error");
        }
        function getErrorMessage(key) {
            return getValidatorSpecificError(key) || getValidityStateError() || getGenericError();
        }
        $.each(this.validators, $.proxy(function(key, validator) {
            var error = null;
            var value = getValue($el);
            if ((value == "" || value || $el.attr("required")) && ($el.attr("data-" + key) !== undefined || key == "native") && (error = validator.call(this, $el))) {
                error = getErrorMessage(key) || error;
                !~errors.indexOf(error) && errors.push(error);
            }
        }, this));
        if (!errors.length && getValue($el) && $el.attr("data-remote")) {
            this.defer($el, function() {
                var data = {};
                data[$el.attr("name")] = getValue($el);
                $.get($el.attr("data-remote"), data).fail(function(jqXHR, textStatus, error) {
                    errors.push(getErrorMessage("remote") || error);
                }).always(function() {
                    deferred.resolve(errors);
                });
            });
        } else deferred.resolve(errors);
        return deferred.promise();
    };
    Validator.prototype.validate = function() {
        var self = this;
        $.when(this.$inputs.map(function(el) {
            return self.validateInput($(this), false);
        })).then(function() {
            self.toggleSubmit();
            self.focusError();
        });
        return this;
    };
    Validator.prototype.focusError = function() {
        if (!this.options.focus) return;
        var $input = this.$element.find(".has-error :input:first");
        if ($input.length === 0) return;
        $("html, body").animate({
            scrollTop: $input.offset().top - Validator.FOCUS_OFFSET
        }, 250);
        $input.focus();
    };
    Validator.prototype.showErrors = function($el) {
        var method = this.options.html ? "html" : "text";
        var errors = $el.data("bs.validator.errors");
        var $group = $el.closest(".form-group");
        var $block = $group.find(".help-block.with-errors");
        var $feedback = $group.find(".form-control-feedback");
        if (!errors.length) return;
        errors = $("<ul/>").addClass("list-unstyled").append($.map(errors, function(error) {
            return $("<li/>")[method](error);
        }));
        $block.data("bs.validator.originalContent") === undefined && $block.data("bs.validator.originalContent", $block.html());
        $block.empty().append(errors);
        $group.addClass("has-error has-danger");
        $group.hasClass("has-feedback") && $feedback.removeClass(this.options.feedback.success) && $feedback.addClass(this.options.feedback.error) && $group.removeClass("has-success");
    };
    Validator.prototype.clearErrors = function($el) {
        var $group = $el.closest(".form-group");
        var $block = $group.find(".help-block.with-errors");
        var $feedback = $group.find(".form-control-feedback");
        $block.html($block.data("bs.validator.originalContent"));
        $group.removeClass("has-error has-danger has-success");
        $group.hasClass("has-feedback") && $feedback.removeClass(this.options.feedback.error) && $feedback.removeClass(this.options.feedback.success) && getValue($el) && $feedback.addClass(this.options.feedback.success) && $group.addClass("has-success");
    };
    Validator.prototype.hasErrors = function() {
        function fieldErrors() {
            return !!($(this).data("bs.validator.errors") || []).length;
        }
        return !!this.$inputs.filter(fieldErrors).length;
    };
    Validator.prototype.isIncomplete = function() {
        function fieldIncomplete() {
            var value = getValue($(this));
            return !(typeof value == "string" ? $.trim(value) : value);
        }
        return !!this.$inputs.filter("[required]").filter(fieldIncomplete).length;
    };
    Validator.prototype.onSubmit = function(e) {
        this.validate();
        if (this.isIncomplete() || this.hasErrors()) e.preventDefault();
    };
    Validator.prototype.toggleSubmit = function() {
        if (!this.options.disable) return;
        this.$btn.toggleClass("disabled", this.isIncomplete() || this.hasErrors());
    };
    Validator.prototype.defer = function($el, callback) {
        callback = $.proxy(callback, this, $el);
        if (!this.options.delay) return callback();
        window.clearTimeout($el.data("bs.validator.timeout"));
        $el.data("bs.validator.timeout", window.setTimeout(callback, this.options.delay));
    };
    Validator.prototype.reset = function() {
        this.$element.find(".form-control-feedback").removeClass(this.options.feedback.error).removeClass(this.options.feedback.success);
        this.$inputs.removeData([ "bs.validator.errors", "bs.validator.deferred" ]).each(function() {
            var $this = $(this);
            var timeout = $this.data("bs.validator.timeout");
            window.clearTimeout(timeout) && $this.removeData("bs.validator.timeout");
        });
        this.$element.find(".help-block.with-errors").each(function() {
            var $this = $(this);
            var originalContent = $this.data("bs.validator.originalContent");
            $this.removeData("bs.validator.originalContent").html(originalContent);
        });
        this.$btn.removeClass("disabled");
        this.$element.find(".has-error, .has-danger, .has-success").removeClass("has-error has-danger has-success");
        return this;
    };
    Validator.prototype.destroy = function() {
        this.reset();
        this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator");
        this.$inputs.off(".bs.validator");
        this.options = null;
        this.validators = null;
        this.$element = null;
        this.$btn = null;
        this.$inputs = null;
        return this;
    };
    function Plugin(option) {
        return this.each(function() {
            var $this = $(this);
            var options = $.extend({}, Validator.DEFAULTS, $this.data(), (typeof option === "undefined" ? "undefined" : _typeof(option)) == "object" && option);
            var data = $this.data("bs.validator");
            if (!data && option == "destroy") return;
            if (!data) $this.data("bs.validator", data = new Validator(this, options));
            if (typeof option == "string") data[option]();
        });
    }
    var old = $.fn.validator;
    $.fn.validator = Plugin;
    $.fn.validator.Constructor = Validator;
    $.fn.validator.noConflict = function() {
        $.fn.validator = old;
        return this;
    };
    $(window).on("load", function() {
        $('form[data-toggle="validator"]').each(function() {
            var $form = $(this);
            Plugin.call($form, $form.data());
        });
    });
}(jQuery);

"use strict";

(function(root, factory) {
    root = root || window;
    if (typeof define === "function" && define.amd) {
        define([ "exports" ], factory);
    } else if (typeof exports !== "undefined") {
        factory(exports);
    } else {
        factory(root.dragscroll = {});
    }
})(undefined, function(exports) {
    var _window = window;
    var _document = document;
    var mousemove = "mousemove";
    var mouseup = "mouseup";
    var mousedown = "mousedown";
    var EventListener = "EventListener";
    var addEventListener = "add" + EventListener;
    var removeEventListener = "remove" + EventListener;
    var newScrollX, newScrollY;
    var dragged = [];
    var reset = function reset(i, el) {
        for (i = 0; i < dragged.length; ) {
            el = dragged[i++];
            el = el.container || el;
            el[removeEventListener](mousedown, el.md, 0);
            _window[removeEventListener](mouseup, el.mu, 0);
            _window[removeEventListener](mousemove, el.mm, 0);
        }
        dragged = [].slice.call(_document.getElementsByClassName("dragscroll"));
        for (i = 0; i < dragged.length; ) {
            (function(el, lastClientX, lastClientY, pushed, scroller, cont) {
                (cont = el.container || el)[addEventListener](mousedown, cont.md = function(e) {
                    if (!el.hasAttribute("nochilddrag") || _document.elementFromPoint(e.pageX, e.pageY) == cont) {
                        pushed = 1;
                        lastClientX = e.clientX;
                        lastClientY = e.clientY;
                        e.preventDefault();
                    }
                }, 0);
                _window[addEventListener](mouseup, cont.mu = function() {
                    pushed = 0;
                    setTimeout(function() {
                        el.setAttribute("data-scrolling", false);
                    }, 200);
                }, 0);
                _window[addEventListener](mousemove, cont.mm = function(e) {
                    if (pushed) {
                        (scroller = el.scroller || el).scrollLeft -= newScrollX = -lastClientX + (lastClientX = e.clientX);
                        scroller.scrollTop -= newScrollY = -lastClientY + (lastClientY = e.clientY);
                        if (el == _document.body) {
                            (scroller = _document.documentElement).scrollLeft -= newScrollX;
                            scroller.scrollTop -= newScrollY;
                        }
                        if (Math.abs(newScrollX) > 10) {
                            el.setAttribute("data-scrolling", true);
                        }
                    }
                }, 0);
            })(dragged[i++]);
        }
    };
    if (_document.readyState == "complete") {
        reset();
    } else {
        _window[addEventListener]("load", reset, 0);
    }
    exports.reset = reset;
});

"use strict";

(function($) {
    $.inputFilter = function(element, options) {
        var defaults = {
            type: null
        };
        var filters = {
            number: /^[0-9]*$/i,
            letters: /^[a-z]*$/i,
            positive: /^\d*$/
        };
        var plugin = this;
        var $element = $(element), element = element;
        plugin.settings = {};
        plugin.init = function() {
            plugin.settings = $.extend({}, defaults, options);
            if (plugin.settings.type) {
                $element.on("input keydown keyup mousedown mouseup select contextmenu drop", function(ev) {
                    if (filters[plugin.settings.type].test(this.value)) {
                        this.oldValue = this.value;
                        this.oldSelectionStart = this.selectionStart;
                        this.oldSelectionEnd = this.selectionEnd;
                    } else {
                        this.value = this.oldValue;
                        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                    }
                });
            }
        };
        plugin.init();
    };
    $.fn.inputFilter = function(options) {
        return this.each(function() {
            if (undefined == $(this).data("inputFilter")) {
                var plugin = new $.inputFilter(this, options);
                $(this).data("inputFilter", plugin);
            }
        });
    };
    $(".js-only-numbers").inputFilter({
        type: "number"
    });
})(jQuery);

"use strict";

(function(window, undefined) {
    "use strict";
    var $ = window.jQuery || window.Zepto, lazyInstanceId = 0, windowLoaded = false;
    $.fn.Lazy = $.fn.lazy = function(settings) {
        return new LazyPlugin(this, settings);
    };
    $.Lazy = $.lazy = function(names, elements, loader) {
        if ($.isFunction(elements)) {
            loader = elements;
            elements = [];
        }
        if (!$.isFunction(loader)) {
            return;
        }
        names = $.isArray(names) ? names : [ names ];
        elements = $.isArray(elements) ? elements : [ elements ];
        var config = LazyPlugin.prototype.config, forced = config._f || (config._f = {});
        for (var i = 0, l = names.length; i < l; i++) {
            if (config[names[i]] === undefined || $.isFunction(config[names[i]])) {
                config[names[i]] = loader;
            }
        }
        for (var c = 0, a = elements.length; c < a; c++) {
            forced[elements[c]] = names[0];
        }
    };
    function _executeLazy(instance, config, items, events, namespace) {
        var _awaitingAfterLoad = 0, _actualWidth = -1, _actualHeight = -1, _isRetinaDisplay = false, _afterLoad = "afterLoad", _load = "load", _error = "error", _img = "img", _src = "src", _srcset = "srcset", _sizes = "sizes", _backgroundImage = "background-image";
        function _initialize() {
            _isRetinaDisplay = window.devicePixelRatio > 1;
            items = _prepareItems(items);
            if (config.delay >= 0) {
                setTimeout(function() {
                    _lazyLoadItems(true);
                }, config.delay);
            }
            if (config.delay < 0 || config.combined) {
                events.e = _throttle(config.throttle, function(event) {
                    if (event.type === "resize") {
                        _actualWidth = _actualHeight = -1;
                    }
                    _lazyLoadItems(event.all);
                });
                events.a = function(additionalItems) {
                    additionalItems = _prepareItems(additionalItems);
                    items.push.apply(items, additionalItems);
                };
                events.g = function() {
                    return items = $(items).filter(function() {
                        return !$(this).data(config.loadedName);
                    });
                };
                events.f = function(forcedItems) {
                    for (var i = 0; i < forcedItems.length; i++) {
                        var item = items.filter(function() {
                            return this === forcedItems[i];
                        });
                        if (item.length) {
                            _lazyLoadItems(false, item);
                        }
                    }
                };
                _lazyLoadItems();
                $(config.appendScroll).on("scroll." + namespace + " resize." + namespace, events.e);
            }
        }
        function _prepareItems(items) {
            var defaultImage = config.defaultImage, placeholder = config.placeholder, imageBase = config.imageBase, srcsetAttribute = config.srcsetAttribute, loaderAttribute = config.loaderAttribute, forcedTags = config._f || {};
            items = $(items).filter(function() {
                var element = $(this), tag = _getElementTagName(this);
                return !element.data(config.handledName) && (element.attr(config.attribute) || element.attr(srcsetAttribute) || element.attr(loaderAttribute) || forcedTags[tag] !== undefined);
            }).data("plugin_" + config.name, instance);
            for (var i = 0, l = items.length; i < l; i++) {
                var element = $(items[i]), tag = _getElementTagName(items[i]), elementImageBase = element.attr(config.imageBaseAttribute) || imageBase;
                if (tag === _img && elementImageBase && element.attr(srcsetAttribute)) {
                    element.attr(srcsetAttribute, _getCorrectedSrcSet(element.attr(srcsetAttribute), elementImageBase));
                }
                if (forcedTags[tag] !== undefined && !element.attr(loaderAttribute)) {
                    element.attr(loaderAttribute, forcedTags[tag]);
                }
                if (tag === _img && defaultImage && !element.attr(_src)) {
                    element.attr(_src, defaultImage);
                } else if (tag !== _img && placeholder && (!element.css(_backgroundImage) || element.css(_backgroundImage) === "none")) {
                    element.css(_backgroundImage, "url('" + placeholder + "')");
                }
            }
            return items;
        }
        function _lazyLoadItems(allItems, forced) {
            if (!items.length) {
                if (config.autoDestroy) {
                    instance.destroy();
                }
                return;
            }
            var elements = forced || items, loadTriggered = false, imageBase = config.imageBase || "", srcsetAttribute = config.srcsetAttribute, handledName = config.handledName;
            for (var i = 0; i < elements.length; i++) {
                if (allItems || forced || _isInLoadableArea(elements[i])) {
                    var element = $(elements[i]), tag = _getElementTagName(elements[i]), attribute = element.attr(config.attribute), elementImageBase = element.attr(config.imageBaseAttribute) || imageBase, customLoader = element.attr(config.loaderAttribute);
                    if (!element.data(handledName) && (!config.visibleOnly || element.is(":visible")) && ((attribute || element.attr(srcsetAttribute)) && (tag === _img && (elementImageBase + attribute !== element.attr(_src) || element.attr(srcsetAttribute) !== element.attr(_srcset)) || tag !== _img && elementImageBase + attribute !== element.css(_backgroundImage)) || customLoader)) {
                        loadTriggered = true;
                        element.data(handledName, true);
                        _handleItem(element, tag, elementImageBase, customLoader);
                    }
                }
            }
            if (loadTriggered) {
                items = $(items).filter(function() {
                    return !$(this).data(handledName);
                });
            }
        }
        function _handleItem(element, tag, imageBase, customLoader) {
            ++_awaitingAfterLoad;
            var _errorCallback = function errorCallback() {
                _triggerCallback("onError", element);
                _reduceAwaiting();
                _errorCallback = $.noop;
            };
            _triggerCallback("beforeLoad", element);
            var srcAttribute = config.attribute, srcsetAttribute = config.srcsetAttribute, sizesAttribute = config.sizesAttribute, retinaAttribute = config.retinaAttribute, removeAttribute = config.removeAttribute, loadedName = config.loadedName, elementRetina = element.attr(retinaAttribute);
            if (customLoader) {
                var _loadCallback = function loadCallback() {
                    if (removeAttribute) {
                        element.removeAttr(config.loaderAttribute);
                    }
                    element.data(loadedName, true);
                    _triggerCallback(_afterLoad, element);
                    setTimeout(_reduceAwaiting, 1);
                    _loadCallback = $.noop;
                };
                element.off(_error).one(_error, _errorCallback).one(_load, _loadCallback);
                if (!_triggerCallback(customLoader, element, function(response) {
                    if (response) {
                        element.off(_load);
                        _loadCallback();
                    } else {
                        element.off(_error);
                        _errorCallback();
                    }
                })) {
                    element.trigger(_error);
                }
            } else {
                var imageObj = $(new Image());
                imageObj.one(_error, _errorCallback).one(_load, function() {
                    element.hide();
                    if (tag === _img) {
                        element.attr(_sizes, imageObj.attr(_sizes)).attr(_srcset, imageObj.attr(_srcset)).attr(_src, imageObj.attr(_src));
                    } else {
                        element.css(_backgroundImage, "url('" + imageObj.attr(_src) + "')");
                    }
                    element[config.effect](config.effectTime);
                    if (removeAttribute) {
                        element.removeAttr(srcAttribute + " " + srcsetAttribute + " " + retinaAttribute + " " + config.imageBaseAttribute);
                        if (sizesAttribute !== _sizes) {
                            element.removeAttr(sizesAttribute);
                        }
                    }
                    element.data(loadedName, true);
                    _triggerCallback(_afterLoad, element);
                    imageObj.remove();
                    _reduceAwaiting();
                });
                var imageSrc = (_isRetinaDisplay && elementRetina ? elementRetina : element.attr(srcAttribute)) || "";
                imageObj.attr(_sizes, element.attr(sizesAttribute)).attr(_srcset, element.attr(srcsetAttribute)).attr(_src, imageSrc ? imageBase + imageSrc : null);
                imageObj.complete && imageObj.trigger(_load);
            }
        }
        function _isInLoadableArea(element) {
            var elementBound = element.getBoundingClientRect(), direction = config.scrollDirection, threshold = config.threshold, vertical = _getActualHeight() + threshold > elementBound.top && -threshold < elementBound.bottom, horizontal = _getActualWidth() + threshold > elementBound.left && -threshold < elementBound.right;
            if (direction === "vertical") {
                return vertical;
            } else if (direction === "horizontal") {
                return horizontal;
            }
            return vertical && horizontal;
        }
        function _getActualWidth() {
            return _actualWidth >= 0 ? _actualWidth : _actualWidth = $(window).width();
        }
        function _getActualHeight() {
            return _actualHeight >= 0 ? _actualHeight : _actualHeight = $(window).height();
        }
        function _getElementTagName(element) {
            return element.tagName.toLowerCase();
        }
        function _getCorrectedSrcSet(srcset, imageBase) {
            if (imageBase) {
                var entries = srcset.split(",");
                srcset = "";
                for (var i = 0, l = entries.length; i < l; i++) {
                    srcset += imageBase + entries[i].trim() + (i !== l - 1 ? "," : "");
                }
            }
            return srcset;
        }
        function _throttle(delay, callback) {
            var timeout, lastExecute = 0;
            return function(event, ignoreThrottle) {
                var elapsed = +new Date() - lastExecute;
                function run() {
                    lastExecute = +new Date();
                    callback.call(instance, event);
                }
                timeout && clearTimeout(timeout);
                if (elapsed > delay || !config.enableThrottle || ignoreThrottle) {
                    run();
                } else {
                    timeout = setTimeout(run, delay - elapsed);
                }
            };
        }
        function _reduceAwaiting() {
            --_awaitingAfterLoad;
            if (!items.length && !_awaitingAfterLoad) {
                _triggerCallback("onFinishedAll");
            }
        }
        function _triggerCallback(callback, element, args) {
            if (callback = config[callback]) {
                callback.apply(instance, [].slice.call(arguments, 1));
                return true;
            }
            return false;
        }
        if (config.bind === "event" || windowLoaded) {
            _initialize();
        } else {
            $(window).on(_load + "." + namespace, _initialize);
        }
    }
    function LazyPlugin(elements, settings) {
        var _instance = this, _config = $.extend({}, _instance.config, settings), _events = {}, _namespace = _config.name + "-" + ++lazyInstanceId;
        _instance.config = function(entryName, value) {
            if (value === undefined) {
                return _config[entryName];
            }
            _config[entryName] = value;
            return _instance;
        };
        _instance.addItems = function(items) {
            _events.a && _events.a($.type(items) === "string" ? $(items) : items);
            return _instance;
        };
        _instance.getItems = function() {
            return _events.g ? _events.g() : {};
        };
        _instance.update = function(useThrottle) {
            _events.e && _events.e({}, !useThrottle);
            return _instance;
        };
        _instance.force = function(items) {
            _events.f && _events.f($.type(items) === "string" ? $(items) : items);
            return _instance;
        };
        _instance.loadAll = function() {
            _events.e && _events.e({
                all: true
            }, true);
            return _instance;
        };
        _instance.destroy = function() {
            $(_config.appendScroll).off("." + _namespace, _events.e);
            $(window).off("." + _namespace);
            _events = {};
            return undefined;
        };
        _executeLazy(_instance, _config, elements, _events, _namespace);
        return _config.chainable ? elements : _instance;
    }
    LazyPlugin.prototype.config = {
        name: "lazy",
        chainable: true,
        autoDestroy: true,
        bind: "load",
        threshold: 500,
        visibleOnly: false,
        appendScroll: window,
        scrollDirection: "both",
        imageBase: null,
        defaultImage: "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",
        placeholder: null,
        delay: -1,
        combined: false,
        attribute: "data-src",
        srcsetAttribute: "data-srcset",
        sizesAttribute: "data-sizes",
        retinaAttribute: "data-retina",
        loaderAttribute: "data-loader",
        imageBaseAttribute: "data-imagebase",
        removeAttribute: true,
        handledName: "handled",
        loadedName: "loaded",
        effect: "show",
        effectTime: 0,
        enableThrottle: true,
        throttle: 250,
        beforeLoad: undefined,
        afterLoad: undefined,
        onError: undefined,
        onFinishedAll: undefined
    };
    $(window).on("load", function() {
        windowLoaded = true;
    });
})(window);

"use strict";

(function($, window, undefined) {
    "use strict";
    var pluginName = "pep";
    var defaults = {
        initiate: function initiate() {},
        start: function start() {},
        drag: function drag() {},
        stop: function stop() {},
        easing: null,
        rest: function rest() {},
        moveTo: false,
        callIfNotStarted: [ "stop", "rest" ],
        startThreshold: [ 0, 0 ],
        grid: [ 1, 1 ],
        debug: false,
        activeClass: "pep-active",
        startClass: "pep-start",
        easeClass: "pep-ease",
        multiplier: 1,
        velocityMultiplier: 2.5,
        shouldPreventDefault: true,
        allowDragEventPropagation: true,
        stopEvents: "",
        hardwareAccelerate: true,
        useCSSTranslation: true,
        disableSelect: true,
        cssEaseString: "cubic-bezier(0.190, 1.000, 0.220, 1.000)",
        cssEaseDuration: 1e3,
        shouldEase: true,
        droppable: false,
        droppableActiveClass: "pep-dpa",
        overlapFunction: false,
        constrainTo: false,
        removeMargins: true,
        place: true,
        deferPlacement: false,
        axis: null,
        forceNonCSS3Movement: false,
        elementsWithInteraction: "input",
        revert: false,
        revertAfter: "stop",
        revertIf: function revertIf() {
            return true;
        },
        ignoreRightClick: true,
        startPos: {
            left: null,
            top: null
        },
        useBoundingClientRect: false
    };
    function Pep(el, options) {
        this.name = pluginName;
        this.el = el;
        this.$el = $(el);
        this.options = $.extend({}, defaults, options);
        this.$document = $(this.$el[0].ownerDocument);
        this.$body = this.$document.find("body");
        this.moveTrigger = "MSPointerMove pointermove touchmove mousemove";
        this.startTrigger = "MSPointerDown pointerdown touchstart mousedown";
        this.stopTrigger = "MSPointerUp pointerup touchend mouseup";
        this.startTriggerArray = this.startTrigger.split(" ");
        this.moveTriggerArray = this.moveTrigger.split(" ");
        this.stopTriggerArray = this.stopTrigger.split(" ");
        this.stopEvents = [ this.stopTrigger, this.options.stopEvents ].join(" ");
        if (this.options.constrainTo === "window") this.$container = this.$document; else if (this.options.constrainTo && this.options.constrainTo !== "parent") this.$container = $(this.options.constrainTo); else this.$container = this.$el.parent();
        if (this.isPointerEventCompatible()) this.applyMSDefaults();
        this.CSSEaseHash = this.getCSSEaseHash();
        this.scale = 1;
        this.started = false;
        this.disabled = false;
        this.autoAxis = false;
        this.activeDropRegions = [];
        this.resetVelocityQueue();
        this.init();
        return this;
    }
    Pep.prototype.init = function() {
        if (this.options.debug) this.buildDebugDiv();
        if (this.options.disableSelect) this.disableSelect();
        if (this.options.place && !this.options.deferPlacement) {
            this.positionParent();
            this.placeObject();
        }
        this.ev = {};
        this.pos = {};
        this.subscribe();
    };
    Pep.prototype.subscribe = function() {
        var self = this;
        this.onStartEvent = function(ev) {
            self.handleStart(ev);
        };
        this.$el.on(this.startTrigger, this.onStartEvent);
        this.onStartEventOnElementsWithInteraction = function(ev) {
            ev.ignorePropagation = true;
        };
        this.$el.on(this.startTrigger, this.options.elementsWithInteraction, this.onStartEventOnElementsWithInteraction);
        this.onStopEvents = function(ev) {
            self.handleStop(ev);
        };
        this.$document.on(this.stopEvents, this.onStopEvents);
        this.onMoveEvents = function(ev) {
            self.moveEvent = ev;
        };
        this.$document.on(this.moveTrigger, this.onMoveEvents);
    };
    Pep.prototype.unsubscribe = function() {
        this.$el.off(this.startTrigger, this.onStartEvent);
        this.$el.off(this.startTrigger, this.options.elementsWithInteraction, this.onStartEventOnElementsWithInteraction);
        this.$document.off(this.stopEvents, this.onStopEvents);
        this.$document.off(this.moveTrigger, this.onMoveEvents);
    };
    Pep.prototype.handleStart = function(ev) {
        if (ev.ignorePropagation) return;
        var self = this;
        if (this.isValidMoveEvent(ev) && !this.disabled) {
            if (!(this.options.ignoreRightClick && ev.which === 3)) {
                if (this.isPointerEventCompatible() && ev.preventManipulation) ev.preventManipulation();
                ev = this.normalizeEvent(ev);
                if (this.options.place && this.options.deferPlacement) {
                    this.positionParent();
                    this.placeObject();
                }
                this.log({
                    type: "event",
                    event: ev.type
                });
                if (this.options.hardwareAccelerate && !this.hardwareAccelerated) {
                    this.hardwareAccelerate();
                    this.hardwareAccelerated = true;
                }
                var shouldContinue = this.options.initiate.call(this, ev, this);
                if (shouldContinue === false) return;
                clearTimeout(this.restTimeout);
                this.$el.addClass(this.options.activeClass);
                this.removeCSSEasing();
                this.startX = this.ev.x = ev.pep.x;
                this.startY = this.ev.y = ev.pep.y;
                this.initialPosition = this.initialPosition || this.$el.position();
                this.startEvent = this.moveEvent = ev;
                this.active = true;
                if (this.options.shouldPreventDefault) ev.preventDefault();
                if (!this.options.allowDragEventPropagation) ev.stopPropagation();
                (function watchMoveLoop() {
                    if (!self.active) return;
                    self.handleMove();
                    self.requestAnimationFrame(watchMoveLoop);
                })();
                (function watchEasingLoop() {
                    if (!self.options.easing) return;
                    if (self.easing) self.options.easing.call(self, null, self);
                    self.requestAnimationFrame(watchEasingLoop);
                })();
            }
        }
    };
    Pep.prototype.handleMove = function() {
        if (typeof this.moveEvent === "undefined") return;
        var ev = this.normalizeEvent(this.moveEvent);
        var curX = window.parseInt(ev.pep.x / this.options.grid[0]) * this.options.grid[0];
        var curY = window.parseInt(ev.pep.y / this.options.grid[1]) * this.options.grid[1];
        this.addToLIFO({
            time: ev.timeStamp,
            x: curX,
            y: curY
        });
        var dx, dy;
        if ($.inArray(ev.type, this.startTriggerArray) > -1) {
            dx = 0;
            dy = 0;
        } else {
            dx = curX - this.ev.x;
            dy = curY - this.ev.y;
        }
        this.dx = dx;
        this.dy = dy;
        this.ev.x = curX;
        this.ev.y = curY;
        if (dx === 0 && dy === 0) {
            this.log({
                type: "event",
                event: "** stopped **"
            });
            return;
        }
        var initialDx = Math.abs(this.startX - curX);
        var initialDy = Math.abs(this.startY - curY);
        if (!this.started && (initialDx > this.options.startThreshold[0] || initialDy > this.options.startThreshold[1])) {
            this.started = true;
            this.$el.addClass(this.options.startClass);
            this.options.start.call(this, this.startEvent, this);
        }
        this.doMoveTo(dx, dy);
        if (this.options.droppable) {
            this.calculateActiveDropRegions();
        }
        var continueDrag = this.options.drag.call(this, ev, this);
        if (continueDrag === false) {
            this.resetVelocityQueue();
            return;
        }
        this.log({
            type: "event",
            event: ev.type
        });
        this.log({
            type: "event-coords",
            x: this.ev.x,
            y: this.ev.y
        });
        this.log({
            type: "velocity"
        });
    };
    Pep.prototype.doMoveTo = function(dx, dy) {
        var hash = this.handleConstraint(dx, dy);
        var xOp, yOp;
        if (this.options.axis === "auto" && !this.autoAxis) {
            if (Math.abs(dx) > Math.abs(dy)) this.autoAxis = "x"; else if (Math.abs(dx) < Math.abs(dy)) this.autoAxis = "y"; else {
                dy = 0;
                dx = 0;
            }
        }
        if (typeof this.options.moveTo === "function") {
            xOp = dx >= 0 ? "+=" + Math.abs(dx / this.scale) * this.options.multiplier : "-=" + Math.abs(dx / this.scale) * this.options.multiplier;
            yOp = dy >= 0 ? "+=" + Math.abs(dy / this.scale) * this.options.multiplier : "-=" + Math.abs(dy / this.scale) * this.options.multiplier;
            if (this.options.constrainTo) {
                xOp = hash.x !== false ? hash.x : xOp;
                yOp = hash.y !== false ? hash.y : yOp;
            }
            if (this.options.axis === "x" || this.autoAxis === "x") yOp = hash.y;
            if (this.options.axis === "y" || this.autoAxis === "y") xOp = hash.x;
            this.options.moveTo.call(this, xOp, yOp);
        } else if (!this.shouldUseCSSTranslation()) {
            xOp = dx >= 0 ? "+=" + Math.abs(dx / this.scale) * this.options.multiplier : "-=" + Math.abs(dx / this.scale) * this.options.multiplier;
            yOp = dy >= 0 ? "+=" + Math.abs(dy / this.scale) * this.options.multiplier : "-=" + Math.abs(dy / this.scale) * this.options.multiplier;
            if (this.options.constrainTo) {
                xOp = hash.x !== false ? hash.x : xOp;
                yOp = hash.y !== false ? hash.y : yOp;
            }
            if (this.options.axis === "x" || this.autoAxis === "x") yOp = hash.y;
            if (this.options.axis === "y" || this.autoAxis === "y") xOp = hash.x;
            this.moveTo(xOp, yOp);
        } else {
            dx = dx / this.scale * this.options.multiplier;
            dy = dy / this.scale * this.options.multiplier;
            if (this.options.constrainTo) {
                dx = hash.x === false ? dx : 0;
                dy = hash.y === false ? dy : 0;
            }
            if (this.options.axis === "x" || this.autoAxis === "x") dy = 0;
            if (this.options.axis === "y" || this.autoAxis === "y") dx = 0;
            this.moveToUsingTransforms(dx, dy);
        }
    };
    Pep.prototype.handleStop = function(ev) {
        if (!this.active) return;
        this.log({
            type: "event",
            event: ev.type
        });
        this.active = false;
        this.easing = true;
        this.$el.removeClass(this.options.startClass).addClass(this.options.easeClass);
        if (this.options.droppable) {
            this.calculateActiveDropRegions();
        }
        if (this.started || !this.started && $.inArray("stop", this.options.callIfNotStarted) > -1) {
            this.options.stop.call(this, ev, this);
        }
        if (this.options.shouldEase) {
            this.ease(ev, this.started);
        } else {
            this.removeActiveClass();
        }
        if (this.options.revert && (this.options.revertAfter === "stop" || !this.options.shouldEase) && this.options.revertIf && this.options.revertIf.call(this)) {
            this.revert();
        }
        this.started = false;
        if (this.autoAxis) this.autoAxis = false;
        this.resetVelocityQueue();
    };
    Pep.prototype.ease = function(ev, started) {
        var pos = this.$el.position();
        var vel = this.velocity();
        var dt = this.dt;
        var x = vel.x / this.scale * this.options.multiplier;
        var y = vel.y / this.scale * this.options.multiplier;
        var hash = this.handleConstraint(x, y, true);
        if (this.cssAnimationsSupported()) this.$el.css(this.getCSSEaseHash());
        var xOp = vel.x > 0 ? "+=" + x : "-=" + Math.abs(x);
        var yOp = vel.y > 0 ? "+=" + y : "-=" + Math.abs(y);
        if (this.options.constrainTo) {
            xOp = hash.x !== false ? hash.x : xOp;
            yOp = hash.y !== false ? hash.y : yOp;
        }
        if (this.options.axis === "x" || this.autoAxis === "x") yOp = "+=0";
        if (this.options.axis === "y" || this.autoAxis === "y") xOp = "+=0";
        var jsAnimateFallback = !this.cssAnimationsSupported() || this.options.forceNonCSS3Movement;
        if (typeof this.options.moveTo === "function") {
            this.options.moveTo.call(this, xOp, yOp);
        } else {
            this.moveTo(xOp, yOp, jsAnimateFallback);
        }
        var self = this;
        this.restTimeout = setTimeout(function() {
            if (self.options.droppable) {
                self.calculateActiveDropRegions();
            }
            self.easing = false;
            if (started || !started && $.inArray("rest", self.options.callIfNotStarted) > -1) {
                self.options.rest.call(self, ev, self);
            }
            if (self.options.revert && self.options.revertAfter === "ease" && self.options.shouldEase && self.options.revertIf && self.options.revertIf.call(self)) {
                self.revert();
            }
            self.removeActiveClass();
        }, this.options.cssEaseDuration);
    };
    Pep.prototype.normalizeEvent = function(ev) {
        ev.pep = {};
        if (this.isTouch(ev)) {
            ev.pep.x = ev.originalEvent.touches[0].pageX;
            ev.pep.y = ev.originalEvent.touches[0].pageY;
            ev.pep.type = ev.type;
        } else if (this.isPointerEventCompatible() || !this.isTouch(ev)) {
            if (ev.pageX) {
                ev.pep.x = ev.pageX;
                ev.pep.y = ev.pageY;
            } else {
                ev.pep.x = ev.originalEvent.pageX;
                ev.pep.y = ev.originalEvent.pageY;
            }
            ev.pep.type = ev.type;
        }
        return ev;
    };
    Pep.prototype.resetVelocityQueue = function() {
        this.velocityQueue = new Array(5);
    };
    Pep.prototype.moveTo = function(x, y, animate) {
        this.log({
            type: "delta",
            x: x,
            y: y
        });
        if (animate) {
            this.$el.animate({
                top: y,
                left: x
            }, 0, "easeOutQuad", {
                queue: false
            });
        } else {
            this.$el.stop(true, false).css({
                top: y,
                left: x
            });
        }
    };
    Pep.prototype.moveToUsingTransforms = function(x, y) {
        var matrixArray = this.matrixToArray(this.matrixString());
        if (!this.cssX) this.cssX = this.xTranslation(matrixArray);
        if (!this.cssY) this.cssY = this.yTranslation(matrixArray);
        this.cssX = this.cssX + x;
        this.cssY = this.cssY + y;
        this.log({
            type: "delta",
            x: x,
            y: y
        });
        matrixArray[4] = this.cssX;
        matrixArray[5] = this.cssY;
        this.translation = this.arrayToMatrix(matrixArray);
        this.transform(this.translation);
    };
    Pep.prototype.transform = function(value) {
        this.$el.css({
            "-webkit-transform": value,
            "-moz-transform": value,
            "-ms-transform": value,
            "-o-transform": value,
            transform: value
        });
    };
    Pep.prototype.xTranslation = function(matrixArray) {
        matrixArray = matrixArray || this.matrixToArray(this.matrixString());
        return parseInt(matrixArray[4], 10);
    };
    Pep.prototype.yTranslation = function(matrixArray) {
        matrixArray = matrixArray || this.matrixToArray(this.matrixString());
        return parseInt(matrixArray[5], 10);
    };
    Pep.prototype.matrixString = function() {
        var validMatrix = function validMatrix(o) {
            return !(!o || o === "none" || o.indexOf("matrix") < 0);
        };
        var matrix = "matrix(1, 0, 0, 1, 0, 0)";
        if (validMatrix(this.$el.css("-webkit-transform"))) matrix = this.$el.css("-webkit-transform");
        if (validMatrix(this.$el.css("-moz-transform"))) matrix = this.$el.css("-moz-transform");
        if (validMatrix(this.$el.css("-ms-transform"))) matrix = this.$el.css("-ms-transform");
        if (validMatrix(this.$el.css("-o-transform"))) matrix = this.$el.css("-o-transform");
        if (validMatrix(this.$el.css("transform"))) matrix = this.$el.css("transform");
        return matrix;
    };
    Pep.prototype.matrixToArray = function(str) {
        return str.split("(")[1].split(")")[0].split(",");
    };
    Pep.prototype.arrayToMatrix = function(array) {
        return "matrix(" + array.join(",") + ")";
    };
    Pep.prototype.addToLIFO = function(val) {
        var arr = this.velocityQueue;
        arr = arr.slice(1, arr.length);
        arr.push(val);
        this.velocityQueue = arr;
    };
    Pep.prototype.velocity = function() {
        var sumX = 0;
        var sumY = 0;
        for (var i = 0; i < this.velocityQueue.length - 1; i++) {
            if (this.velocityQueue[i]) {
                sumX += this.velocityQueue[i + 1].x - this.velocityQueue[i].x;
                sumY += this.velocityQueue[i + 1].y - this.velocityQueue[i].y;
                this.dt = this.velocityQueue[i + 1].time - this.velocityQueue[i].time;
            }
        }
        return {
            x: sumX * this.options.velocityMultiplier,
            y: sumY * this.options.velocityMultiplier
        };
    };
    Pep.prototype.revert = function() {
        if (this.shouldUseCSSTranslation()) {
            this.moveToUsingTransforms(-this.xTranslation(), -this.yTranslation());
        }
        if (this.options.place) {
            this.moveTo(this.initialPosition.left, this.initialPosition.top);
        }
    };
    Pep.prototype.requestAnimationFrame = function(callback) {
        return window.requestAnimationFrame && window.requestAnimationFrame(callback) || window.webkitRequestAnimationFrame && window.webkitRequestAnimationFrame(callback) || window.mozRequestAnimationFrame && window.mozRequestAnimationFrame(callback) || window.oRequestAnimationFrame && window.mozRequestAnimationFrame(callback) || window.msRequestAnimationFrame && window.msRequestAnimationFrame(callback) || window.setTimeout(callback, 1e3 / 60);
    };
    Pep.prototype.positionParent = function() {
        if (!this.options.constrainTo || this.parentPositioned) return;
        this.parentPositioned = true;
        if (this.options.constrainTo === "parent") {
            this.$container.css({
                position: "relative"
            });
        } else if (this.options.constrainTo === "window" && this.$container.get(0).nodeName !== "#document" && this.$container.css("position") !== "static") {
            this.$container.css({
                position: "static"
            });
        }
    };
    Pep.prototype.placeObject = function() {
        if (this.objectPlaced) return;
        this.objectPlaced = true;
        this.offset = this.options.constrainTo === "parent" || this.hasNonBodyRelative() ? this.$el.position() : this.$el.offset();
        if (parseInt(this.$el.css("left"), 10)) this.offset.left = this.$el.css("left");
        if (typeof this.options.startPos.left === "number") this.offset.left = this.options.startPos.left;
        if (parseInt(this.$el.css("top"), 10)) this.offset.top = this.$el.css("top");
        if (typeof this.options.startPos.top === "number") this.offset.top = this.options.startPos.top;
        if (this.options.removeMargins) this.$el.css({
            margin: 0
        });
        this.$el.css({
            position: "absolute",
            top: this.offset.top,
            left: this.offset.left
        });
    };
    Pep.prototype.hasNonBodyRelative = function() {
        return this.$el.parents().filter(function() {
            var $this = $(this);
            return $this.is("body") || $this.css("position") === "relative";
        }).length > 1;
    };
    Pep.prototype.setScale = function(val) {
        this.scale = val;
    };
    Pep.prototype.setMultiplier = function(val) {
        this.options.multiplier = val;
    };
    Pep.prototype.removeCSSEasing = function() {
        if (this.cssAnimationsSupported()) this.$el.css(this.getCSSEaseHash(true));
    };
    Pep.prototype.disableSelect = function() {
        this.$el.css({
            "-webkit-touch-callout": "none",
            "-webkit-user-select": "none",
            "-khtml-user-select": "none",
            "-moz-user-select": "none",
            "-ms-user-select": "none",
            "user-select": "none"
        });
    };
    Pep.prototype.removeActiveClass = function() {
        this.$el.removeClass([ this.options.activeClass, this.options.easeClass ].join(" "));
    };
    Pep.prototype.handleConstraint = function(dx, dy, accountForTranslation) {
        var pos = this.$el.position();
        this.pos.x = pos.left;
        this.pos.y = pos.top;
        var hash = {
            x: false,
            y: false
        };
        var upperYLimit, upperXLimit, lowerXLimit, lowerYLimit;
        this.log({
            type: "pos-coords",
            x: this.pos.x,
            y: this.pos.y
        });
        if ($.isArray(this.options.constrainTo)) {
            if (this.options.constrainTo[3] !== undefined && this.options.constrainTo[1] !== undefined) {
                upperXLimit = this.options.constrainTo[1] === false ? Infinity : this.options.constrainTo[1];
                lowerXLimit = this.options.constrainTo[3] === false ? -Infinity : this.options.constrainTo[3];
            }
            if (this.options.constrainTo[0] !== false && this.options.constrainTo[2] !== false) {
                upperYLimit = this.options.constrainTo[2] === false ? Infinity : this.options.constrainTo[2];
                lowerYLimit = this.options.constrainTo[0] === false ? -Infinity : this.options.constrainTo[0];
            }
            if (this.pos.x + dx < lowerXLimit) hash.x = lowerXLimit;
            if (this.pos.y + dy < lowerYLimit) hash.y = lowerYLimit;
        } else if (typeof this.options.constrainTo === "string") {
            lowerXLimit = 0;
            lowerYLimit = 0;
            upperXLimit = this.$container.width() - (this.options.useBoundingClientRect ? this.$el[0].getBoundingClientRect().width : this.$el.outerWidth());
            upperYLimit = this.$container.height() - (this.options.useBoundingClientRect ? this.$el[0].getBoundingClientRect().height : this.$el.outerHeight());
            if (this.pos.x + dx < 0) hash.x = 0;
            if (this.pos.y + dy < 0) hash.y = 0;
        }
        if (this.pos.x + dx > upperXLimit) hash.x = upperXLimit;
        if (this.pos.y + dy > upperYLimit) hash.y = upperYLimit;
        if (this.shouldUseCSSTranslation() && accountForTranslation) {
            if (hash.x === lowerXLimit && this.xTranslation()) hash.x = lowerXLimit - this.xTranslation();
            if (hash.x === upperXLimit && this.xTranslation()) hash.x = upperXLimit - this.xTranslation();
            if (hash.y === lowerYLimit && this.yTranslation()) hash.y = lowerYLimit - this.yTranslation();
            if (hash.y === upperYLimit && this.yTranslation()) hash.y = upperYLimit - this.yTranslation();
        }
        return hash;
    };
    Pep.prototype.getCSSEaseHash = function(reset) {
        if (typeof reset === "undefined") reset = false;
        var cssEaseString;
        if (reset) {
            cssEaseString = "";
        } else if (this.CSSEaseHash) {
            return this.CSSEaseHash;
        } else {
            cssEaseString = [ "all", this.options.cssEaseDuration + "ms", this.options.cssEaseString ].join(" ");
        }
        return {
            "-webkit-transition": cssEaseString,
            "-moz-transition": cssEaseString,
            "-ms-transition": cssEaseString,
            "-o-transition": cssEaseString,
            transition: cssEaseString
        };
    };
    Pep.prototype.calculateActiveDropRegions = function() {
        var self = this;
        this.activeDropRegions.length = 0;
        $.each($(this.options.droppable), function(idx, el) {
            var $el = $(el);
            if (self.isOverlapping($el, self.$el)) {
                $el.addClass(self.options.droppableActiveClass);
                self.activeDropRegions.push($el);
            } else {
                $el.removeClass(self.options.droppableActiveClass);
            }
        });
    };
    Pep.prototype.isOverlapping = function($a, $b) {
        if (this.options.overlapFunction) {
            return this.options.overlapFunction($a, $b);
        }
        var rect1 = $a[0].getBoundingClientRect();
        var rect2 = $b[0].getBoundingClientRect();
        return !(rect1.right < rect2.left || rect1.left > rect2.right || rect1.bottom < rect2.top || rect1.top > rect2.bottom);
    };
    Pep.prototype.isTouch = function(ev) {
        return ev.type.search("touch") > -1;
    };
    Pep.prototype.isPointerEventCompatible = function() {
        return "MSPointerEvent" in window;
    };
    Pep.prototype.applyMSDefaults = function(first_argument) {
        this.$el.css({
            "-ms-touch-action": "none",
            "touch-action": "none",
            "-ms-scroll-chaining": "none",
            "-ms-scroll-limit": "0 0 0 0"
        });
    };
    Pep.prototype.isValidMoveEvent = function(ev) {
        return !this.isTouch(ev) || this.isTouch(ev) && ev.originalEvent && ev.originalEvent.touches && ev.originalEvent.touches.length === 1;
    };
    Pep.prototype.shouldUseCSSTranslation = function() {
        if (this.options.forceNonCSS3Movement) return false;
        if (typeof this.useCSSTranslation !== "undefined") return this.useCSSTranslation;
        var useCSSTranslation = false;
        if (!this.options.useCSSTranslation || typeof Modernizr !== "undefined" && !Modernizr.csstransforms) {
            useCSSTranslation = false;
        } else {
            useCSSTranslation = true;
        }
        this.useCSSTranslation = useCSSTranslation;
        return useCSSTranslation;
    };
    Pep.prototype.cssAnimationsSupported = function() {
        if (typeof this.cssAnimationsSupport !== "undefined") {
            return this.cssAnimationsSupport;
        }
        if (typeof Modernizr !== "undefined" && Modernizr.cssanimations) {
            this.cssAnimationsSupport = true;
            return true;
        }
        var animation = false, elm = document.createElement("div"), animationstring = "animation", keyframeprefix = "", domPrefixes = "Webkit Moz O ms Khtml".split(" "), pfx = "";
        if (elm.style.animationName) {
            animation = true;
        }
        if (animation === false) {
            for (var i = 0; i < domPrefixes.length; i++) {
                if (elm.style[domPrefixes[i] + "AnimationName"] !== undefined) {
                    pfx = domPrefixes[i];
                    animationstring = pfx + "Animation";
                    keyframeprefix = "-" + pfx.toLowerCase() + "-";
                    animation = true;
                    break;
                }
            }
        }
        this.cssAnimationsSupport = animation;
        return animation;
    };
    Pep.prototype.hardwareAccelerate = function() {
        this.$el.css({
            "-webkit-perspective": 1e3,
            perspective: 1e3,
            "-webkit-backface-visibility": "hidden",
            "backface-visibility": "hidden"
        });
    };
    Pep.prototype.getMovementValues = function() {
        return {
            ev: this.ev,
            pos: this.pos,
            velocity: this.velocity()
        };
    };
    Pep.prototype.buildDebugDiv = function() {
        var $debugDiv;
        if ($("#pep-debug").length === 0) {
            $debugDiv = $("<div></div>");
            $debugDiv.attr("id", "pep-debug").append("<div style='font-weight:bold; background: red; color: white;'>DEBUG MODE</div>").append("<div id='pep-debug-event'>no event</div>").append("<div id='pep-debug-ev-coords'>event coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-pos-coords'>position coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-velocity'>velocity: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-delta'>&Delta; movement: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").css({
                position: "fixed",
                bottom: 5,
                right: 5,
                zIndex: 99999,
                textAlign: "right",
                fontFamily: "Arial, sans",
                fontSize: 10,
                border: "1px solid #DDD",
                padding: "3px",
                background: "white",
                color: "#333"
            });
        }
        var self = this;
        setTimeout(function() {
            self.debugElements = {
                $event: $("#pep-debug-event"),
                $velocityX: $("#pep-debug-velocity .pep-x"),
                $velocityY: $("#pep-debug-velocity .pep-y"),
                $dX: $("#pep-debug-delta .pep-x"),
                $dY: $("#pep-debug-delta .pep-y"),
                $evCoordsX: $("#pep-debug-ev-coords .pep-x"),
                $evCoordsY: $("#pep-debug-ev-coords .pep-y"),
                $posCoordsX: $("#pep-debug-pos-coords .pep-x"),
                $posCoordsY: $("#pep-debug-pos-coords .pep-y")
            };
        }, 0);
        $("body").append($debugDiv);
    };
    Pep.prototype.log = function(opts) {
        if (!this.options.debug) return;
        switch (opts.type) {
          case "event":
            this.debugElements.$event.text(opts.event);
            break;

          case "pos-coords":
            this.debugElements.$posCoordsX.text(opts.x);
            this.debugElements.$posCoordsY.text(opts.y);
            break;

          case "event-coords":
            this.debugElements.$evCoordsX.text(opts.x);
            this.debugElements.$evCoordsY.text(opts.y);
            break;

          case "delta":
            this.debugElements.$dX.text(opts.x);
            this.debugElements.$dY.text(opts.y);
            break;

          case "velocity":
            var vel = this.velocity();
            this.debugElements.$velocityX.text(Math.round(vel.x));
            this.debugElements.$velocityY.text(Math.round(vel.y));
            break;
        }
    };
    Pep.prototype.toggle = function(on) {
        if (typeof on === "undefined") {
            this.disabled = !this.disabled;
        } else {
            this.disabled = !on;
        }
    };
    $.extend($.easing, {
        easeOutQuad: function easeOutQuad(x, t, b, c, d) {
            return -c * (t /= d) * (t - 2) + b;
        },
        easeOutCirc: function easeOutCirc(x, t, b, c, d) {
            return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
        },
        easeOutExpo: function easeOutExpo(x, t, b, c, d) {
            return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
        }
    });
    $.fn[pluginName] = function(options) {
        return this.each(function() {
            if (!$.data(this, "plugin_" + pluginName)) {
                var pepObj = new Pep(this, options);
                $.data(this, "plugin_" + pluginName, pepObj);
                $.pep.peps.push(pepObj);
            }
        });
    };
    $.pep = {};
    $.pep.peps = [];
    $.pep.toggleAll = function(on) {
        $.each(this.peps, function(index, pepObj) {
            pepObj.toggle(on);
        });
    };
    $.pep.unbind = function($obj) {
        $.each($obj, function(index, pepObj) {
            pepObj = $(pepObj);
            var pep = pepObj.data("plugin_" + pluginName);
            if (typeof pep === "undefined") return;
            pep.toggle(false);
            pep.unsubscribe();
            pepObj.removeData("plugin_" + pluginName);
        });
    };
})(jQuery, window);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

(function($) {
    var settings = {
        sort: false,
        "sort-attr": "data-priority",
        "sort-desc": false,
        autoselect: true,
        "alternative-spellings": true,
        "alternative-spellings-attr": "data-alternative-spellings",
        "remove-valueless-options": true,
        "copy-attributes-to-text-field": true,
        "autocomplete-plugin": "jquery_ui",
        "relevancy-sorting": true,
        "relevancy-sorting-partial-match-value": 1,
        "relevancy-sorting-strict-match-value": 5,
        "relevancy-sorting-booster-attr": "data-relevancy-booster",
        minLength: 0,
        delay: 0,
        autoFocus: true,
        handle_invalid_input: function handle_invalid_input(context) {
            var selected_finder = "option:selected:first";
            if (context.settings["remove-valueless-options"]) {
                selected_finder = 'option:selected[value!=""]:first';
            }
            context.$text_field.val(context.$select_field.find(selected_finder).text());
        },
        handle_select_field: function handle_select_field($select_field) {
            return $select_field.hide();
        },
        insert_text_field: function insert_text_field(context) {
            var $text_field = $('<input type="text" data-initialized="true"></input>');
            if (settings["copy-attributes-to-text-field"]) {
                var attrs = {};
                var raw_attrs = context.$select_field[0].attributes;
                for (var i = 0; i < raw_attrs.length; i++) {
                    var key = raw_attrs[i].nodeName;
                    var value = raw_attrs[i].nodeValue;
                    if (key !== "name" && typeof context.$select_field.attr(key) !== "undefined") {
                        attrs[key] = key === "id" ? value + "-clone" : value;
                    }
                }
                $text_field.attr(attrs);
            }
            $text_field.blur(function() {
                var valid_values = context.$select_field.find("option").map(function(i, option) {
                    return $(option).text();
                });
                if ($.inArray($text_field.val(), valid_values) < 0 && typeof settings["handle_invalid_input"] === "function") {
                    settings["handle_invalid_input"](context);
                }
            });
            if (context.settings["autoselect"]) {
                $text_field.click(function() {
                    this.select();
                });
            }
            var selected_finder = "option:selected:first";
            if (context.settings["remove-valueless-options"]) {
                selected_finder = 'option:selected[value!=""]:first';
            }
            return $text_field.val(context.$select_field.find(selected_finder).text()).insertAfter(context.$select_field);
        },
        extract_options: function extract_options($select_field) {
            var options = [];
            var $options = $select_field.find("option");
            var number_of_options = $options.length;
            $options.each(function() {
                var $option = $(this);
                var option = {
                    "real-value": $option.attr("value"),
                    label: $option.text()
                };
                if (settings["remove-valueless-options"] && option["real-value"] === "") {} else {
                    option["matches"] = option["label"];
                    var alternative_spellings = $option.attr(settings["alternative-spellings-attr"]);
                    if (alternative_spellings) {
                        option["matches"] += " " + alternative_spellings;
                    }
                    if (settings["sort"]) {
                        var weight = parseInt($option.attr(settings["sort-attr"]), 10);
                        if (weight) {
                            option["weight"] = weight;
                        } else {
                            option["weight"] = number_of_options;
                        }
                    }
                    if (settings["relevancy-sorting"]) {
                        option["relevancy-score"] = 0;
                        option["relevancy-score-booster"] = 1;
                        var boost_by = parseFloat($option.attr(settings["relevancy-sorting-booster-attr"]));
                        if (boost_by) {
                            option["relevancy-score-booster"] = boost_by;
                        }
                    }
                    options.push(option);
                }
            });
            if (settings["sort"]) {
                if (settings["sort-desc"]) {
                    options.sort(function(a, b) {
                        return b["weight"] - a["weight"];
                    });
                } else {
                    options.sort(function(a, b) {
                        return a["weight"] - b["weight"];
                    });
                }
            }
            return options;
        }
    };
    var public_methods = {
        init: function init(customizations) {
            if (/msie/.test(navigator.userAgent.toLowerCase()) && parseInt(navigator.appVersion, 10) <= 6) {
                return this;
            } else {
                settings = $.extend(settings, customizations);
                return this.each(function() {
                    var $select_field = $(this);
                    if (!$select_field.attr("data-initialized")) {
                        var context = {
                            $select_field: $select_field,
                            options: settings["extract_options"]($select_field),
                            settings: settings
                        };
                        context["$text_field"] = settings["insert_text_field"](context);
                        settings["handle_select_field"]($select_field);
                        if (typeof settings["autocomplete-plugin"] === "string") {
                            adapters[settings["autocomplete-plugin"]](context);
                        } else {
                            settings["autocomplete-plugin"](context);
                        }
                        $select_field.attr("data-initialized", true);
                    }
                });
            }
        }
    };
    var adapters = {
        jquery_ui: function jquery_ui(context) {
            var filter_options = function filter_options(term) {
                var split_term = term.split(" ");
                var matchers = [];
                for (var i = 0; i < split_term.length; i++) {
                    if (split_term[i].length > 0) {
                        var matcher = {};
                        matcher["partial"] = new RegExp($.ui.autocomplete.escapeRegex(split_term[i]), "i");
                        if (context.settings["relevancy-sorting"]) {
                            matcher["strict"] = new RegExp("^" + $.ui.autocomplete.escapeRegex(split_term[i]), "i");
                        }
                        matchers.push(matcher);
                    }
                }
                return $.grep(context.options, function(option) {
                    var partial_matches = 0;
                    if (context.settings["relevancy-sorting"]) {
                        var strict_match = false;
                        var split_option_matches = option.matches.split(" ");
                    }
                    for (var i = 0; i < matchers.length; i++) {
                        if (matchers[i]["partial"].test(option.matches)) {
                            partial_matches++;
                        }
                        if (context.settings["relevancy-sorting"]) {
                            for (var q = 0; q < split_option_matches.length; q++) {
                                if (matchers[i]["strict"].test(split_option_matches[q])) {
                                    strict_match = true;
                                    break;
                                }
                            }
                        }
                    }
                    if (context.settings["relevancy-sorting"]) {
                        var option_score = 0;
                        option_score += partial_matches * context.settings["relevancy-sorting-partial-match-value"];
                        if (strict_match) {
                            option_score += context.settings["relevancy-sorting-strict-match-value"];
                        }
                        option_score = option_score * option["relevancy-score-booster"];
                        option["relevancy-score"] = option_score;
                    }
                    return !term || matchers.length === partial_matches;
                });
            };
            var update_select_value = function update_select_value(option) {
                if (option) {
                    if (context.$select_field.val() !== option["real-value"]) {
                        context.$select_field.val(option["real-value"]);
                        context.$select_field.change();
                    }
                } else {
                    var option_name = context.$text_field.val().toLowerCase();
                    var matching_option = {
                        "real-value": false
                    };
                    for (var i = 0; i < context.options.length; i++) {
                        if (option_name === context.options[i]["label"].toLowerCase()) {
                            matching_option = context.options[i];
                            break;
                        }
                    }
                    if (context.$select_field.val() !== matching_option["real-value"]) {
                        context.$select_field.val(matching_option["real-value"] || "");
                        context.$select_field.change();
                    }
                    if (matching_option["real-value"]) {
                        context.$text_field.val(matching_option["label"]);
                    }
                    if (typeof context.settings["handle_invalid_input"] === "function" && context.$select_field.val() === "") {
                        context.settings["handle_invalid_input"](context);
                    }
                }
            };
            context.$text_field.autocomplete({
                minLength: context.settings["minLength"],
                delay: context.settings["delay"],
                autoFocus: context.settings["autoFocus"],
                source: function source(request, response) {
                    var filtered_options = filter_options(request.term);
                    if (context.settings["relevancy-sorting"]) {
                        filtered_options = filtered_options.sort(function(a, b) {
                            if (b["relevancy-score"] == a["relevancy-score"]) {
                                return b["label"] < a["label"] ? 1 : -1;
                            } else {
                                return b["relevancy-score"] - a["relevancy-score"];
                            }
                        });
                    }
                    response(filtered_options);
                },
                select: function select(event, ui) {
                    update_select_value(ui.item);
                },
                change: function change(event, ui) {
                    update_select_value(ui.item);
                }
            });
            context.$text_field.parents("form:first").submit(function() {
                update_select_value();
            });
            update_select_value();
        }
    };
    $.fn.selectToAutocomplete = function(method) {
        if (public_methods[method]) {
            return public_methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if ((typeof method === "undefined" ? "undefined" : _typeof(method)) === "object" || !method) {
            return public_methods.init.apply(this, arguments);
        } else {
            $.error("Method " + method + " does not exist on jQuery.fn.selectToAutocomplete");
        }
    };
})(jQuery);

"use strict";

var offCanvas = function() {
    var $html = $("html");
    var $body = $("body");
    var $canvasWrap = $(".canvas-wrap");
    var $offCanvas = $(".off-canvas");
    function _setChaptchaChallengePosition(position) {
        var $challenges = $("[title='recaptcha challenge']");
        $challenges.each(function() {
            var $this = $(this);
            var $parent = $this.parent();
            var $ancestor = $this.parent().parent();
            if (position === "fixed") {
                $parent.addClass("center-img-challenge");
            } else {
                $parent.removeClass("center-img-challenge");
            }
        });
    }
    function _closeCanvas() {
        if ($body.hasClass("in")) {
            $(".off-canvas").removeClass("out");
            $body.removeClass("in").css({
                position: "relative"
            }).addClass("out");
            $html.removeClass("in").css({
                position: "relative"
            }).addClass("out");
            $canvasWrap.hide();
            setTimeout(function() {
                $body.removeClass("out left right");
                $html.removeClass("out left right");
            }, 50);
            _setChaptchaChallengePosition("absolute");
        }
    }
    function _toggleNavbar() {
        var $this = $(this);
        var $canvasTarget = $($this.attr("data-target"));
        var dataSide = $this.attr("data-side");
        $canvasWrap.addClass(dataSide);
        if ($canvasTarget.hasClass("out")) {
            _closeCanvas();
        } else {
            $offCanvas.removeClass("out");
            $body.addClass("in").css("position", "relative").removeClass("left right").addClass(dataSide);
            $html.addClass("in").removeClass("left right").addClass(dataSide);
            $canvasTarget.addClass("out");
            $canvasWrap.show().css("height", "100%");
            _setChaptchaChallengePosition("fixed");
        }
    }
    function toggleNavbarOnBodyClick(e) {
        var $this = $(this);
        var hcanvas;
        var lcanvas;
        if ($("#off-canvas-left-mob:visible").length > 0) {
            hcanvas = $("#off-canvas-left-mob").outerWidth();
        } else {
            hcanvas = $("#off-canvas-menuLeft").outerWidth();
        }
        if ($("#off-canvas-right-mob:visible").length > 0) {
            lcanvas = $("#off-canvas-right-mob").outerWidth();
        } else {
            lcanvas = $("#off-canvas-right").outerWidth();
        }
        if ($this.hasClass("in") && $this.hasClass("left")) {
            if (e.pageX > hcanvas) {
                $('.navbar-toggle:visible[data-side="left"]').trigger("click");
            }
        }
        if ($this.hasClass("in") && $this.hasClass("right")) {
            var margen = parseInt($(window).width(), 10) - lcanvas;
            if (e.pageX < margen) {
                $('.navbar-toggle:visible[data-side="right"]').trigger("click");
            }
        }
    }
    function init() {
        $body.on("click touchend", toggleNavbarOnBodyClick);
        $("button.navbar-toggle").on("click", _toggleNavbar);
        $(".canvas-wrap").click("click touchend", _closeCanvas);
        $('.off-canvas [data-toggle="close"]').click("click touchend", _closeCanvas);
        $(window).on("resize", function() {
            if (globalConfig.windowWidth > globalConfig.smBreak) {
                _setChaptchaChallengePosition("absolute");
            }
        });
    }
    return {
        init: init
    };
}();

$(function() {
    offCanvas.init();
});

"use strict";

(function($) {
    $.paginateMe = function(element, options) {
        var defaults = {
            itemsPerPage: 5,
            showPrevNext: true,
            hidePageNumbers: false,
            paginateElement: ".paginate",
            prevLinkText: "Previous",
            nextLinkText: "Next"
        };
        var plugin = this;
        var $element = $(element), element = element;
        var $elementToPaginate = null;
        var pagination = {
            $container: null,
            $prev: null,
            $next: null,
            $pages: null
        };
        var config = {
            items: null,
            itemsNumber: 0,
            pages: 0,
            currentPage: 1
        };
        plugin.settings = {};
        plugin.init = function() {
            plugin.settings = $.extend({}, defaults, options);
            $elementToPaginate = $element.find("" + plugin.settings.paginateElement);
            config = {
                items: $elementToPaginate.children(),
                get itemsNumber() {
                    return this.items.size();
                },
                get pages() {
                    return Math.ceil(this.itemsNumber / plugin.settings.itemsPerPage);
                },
                currentPage: 0
            };
            _buildPagination();
            pagination.$pages.click(function(ev) {
                var $this = $(this);
                var selectedPage = $this.data("page") - 1;
                ev.preventDefault();
                $element.trigger("pg.init");
                if (!$this.hasClass("active")) {
                    _goToPage(selectedPage);
                }
            });
            pagination.$prev.click(_goToPreviousPage);
            pagination.$next.click(_goToNextPage);
            pagination.$pages.eq(0).trigger("click");
        };
        var _goToPage = function _goToPage(selectedPage) {
            var startAt = selectedPage * plugin.settings.itemsPerPage;
            var endOn = startAt + plugin.settings.itemsPerPage;
            config.currentPage = selectedPage;
            config.items.hide().slice(startAt, endOn).show();
            pagination.$prev.toggleClass("disabled", selectedPage < 1);
            pagination.$next.toggleClass("disabled", selectedPage >= config.pages - 1);
            pagination.$pages.removeClass("active").eq(selectedPage).addClass("active");
            $element.trigger("pg.end");
        };
        var _goToPreviousPage = function _goToPreviousPage(ev) {
            ev.preventDefault();
            if (config.currentPage > 0) {
                _goToPage(config.currentPage - 1);
            }
        };
        var _goToNextPage = function _goToNextPage(ev) {
            ev.preventDefault();
            if (config.currentPage < config.pages - 1) {
                _goToPage(config.currentPage + 1);
            }
        };
        var _buildPagination = function _buildPagination() {
            pagination.$container = $('<div class="m-pagination"><ul class="pagination">' + _getPrevNexButton("prev") + _getPagesButtons() + _getPrevNexButton("next") + "</ul></div>");
            pagination.$prev = pagination.$container.find(".prev-link");
            pagination.$next = pagination.$container.find(".next-link");
            pagination.$pages = pagination.$container.find(".page-link");
            $element.append(pagination.$container);
        };
        var _getPrevNexButton = function _getPrevNexButton(type) {
            var template = "";
            if (plugin.settings.showPrevNext) {
                template = '<li><a href="#" role="button" class="' + type + '-link"><span aria-hidden="true">' + plugin.settings[type + "LinkText"] + "</span></a></li>";
            }
            return template;
        };
        var _getPagesButtons = function _getPagesButtons() {
            var template = "";
            if (plugin.settings.hidePageNumbers === false) {
                for (var x = 0; x < config.pages; x++) {
                    template += '<li><a href="#" role="button" class="page-link" data-page="' + (x + 1) + '" aria-label="Página ' + (x + 1) + '">' + (x + 1) + "</a></li>";
                }
            }
            return template;
        };
        plugin.init();
    };
    $.fn.paginateMe = function(options) {
        return this.each(function() {
            if (undefined == $(this).data("paginateMe")) {
                var plugin = new $.paginateMe(this, options);
                $(this).data("paginateMe", plugin);
            }
        });
    };
    globalConfig.elements.$paginateElements.paginateMe();
})(jQuery);

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

function getCurrentDate() {
    var currentDate = {
        date: new Date(),
        year: null,
        month: null
    };
    currentDate.year = currentDate.date.getFullYear();
    currentDate.month = currentDate.date.getMonth();
    return currentDate;
}

function isNavigateToPastDatesAllowed(selectedMonth, selectedYear, isPastCalendar) {
    var currentDate = getCurrentDate();
    var allowed = false;
    if (isPastCalendar) {
        allowed = true;
    } else if (selectedYear > currentDate.year) {
        allowed = true;
    } else if (selectedYear === currentDate.year && selectedMonth >= currentDate.month) {
        allowed = true;
    }
    return allowed;
}

function isNavigateToFutureDatesAllowed(selectedMonth, selectedYear, isPastCalendar) {
    var currentDate = getCurrentDate();
    var allowed = true;
    if (selectedYear > currentDate.year && isPastCalendar) {
        allowed = false;
    } else if (selectedYear === currentDate.year && selectedMonth >= currentDate.month && isPastCalendar) {
        allowed = false;
    }
    return allowed;
}

function togglePrevButton(month, year, isPastCalendar, prevButton) {
    var enableButton;
    var previousMonth = month - 1;
    var selectedYear = year;
    if (previousMonth < 0) {
        selectedYear = year - 1;
        previousMonth = 11;
    } else {
        previousMonth = month - 1;
    }
    enableButton = isNavigateToPastDatesAllowed(previousMonth, selectedYear, isPastCalendar);
    prevButton.toggleClass("disabled", !enableButton);
}

function toggleNextButton(month, year, isPastCalendar, nextButton) {
    var enableButton = isNavigateToFutureDatesAllowed(month, year, isPastCalendar);
    nextButton.toggleClass("disabled", !enableButton);
}

function toggleNavigationButtons(data) {
    console.log("data", data);
    togglePrevButton(data.currentMonth, data.currentYear, data.isPastCalendar, data.prevButton);
    toggleNextButton(data.currentMonth, data.currentYear, data.isPastCalendar, data.nextButton);
}

function resetRanges(cal) {
    cal.find(".range-start").removeClass("range-start");
    cal.find(".range-end").removeClass("range-end");
    cal.find(".range-in").removeClass("range-in");
}

function batchPaintRange(cal) {
    resetRanges(cal);
    if (cal.attr("data-range-start") && cal.attr("data-range-start") != "" && cal.attr("data-range-end") && cal.attr("data-range-end") != "") {
        var rangeStart = parseInt(cal.attr("data-range-start"));
        var rangeEnd = parseInt(cal.attr("data-range-end"));
        var dateStart = moment(rangeStart);
        var dateEnd = moment(rangeEnd);
        cal.find('[data-day="' + dateStart.date() + '"][data-month="' + (dateStart.month() + 1) + '"][data-year="' + dateStart.year() + '"]').addClass("range-start");
        cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
        while (!dateStart.isAfter(dateEnd)) {
            var currentDay = cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]");
            if (!currentDay.hasClass("range-start") && !currentDay.hasClass("range-end")) {
                currentDay.addClass("range-in");
            }
            dateStart.add(1, "day");
        }
    } else {
        if (cal.attr("data-range-start") && cal.attr("data-range-start") != "") {
            var rangeStart = parseInt(cal.attr("data-range-start"));
            var dateStart = moment(rangeStart);
            cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]").addClass("range-start");
        } else {
            var rangeEnd = parseInt(cal.attr("data-range-end"));
            var dateEnd = moment(rangeEnd);
            cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
        }
    }
}

function applyCurrentDay() {
    var now = new Date();
    $("[data-day=" + parseInt(now.getDate()) + "][data-month=" + parseInt(now.getMonth() + 1) + "][data-year=" + now.getFullYear() + "]").addClass("currentDay");
}

function shadowDays() {
    var diasMes = $(".myDay");
    var now = new Date();
    var day = now.getDate();
    var month = now.getMonth();
    month++;
    var year = now.getFullYear();
    var hoy = new Date(year, month - 1, day);
    var one_day = 1e3 * 60 * 60 * 24;
    for (var i = 0; i < diasMes.length; i++) {
        var diaSel = parseInt($(diasMes[i]).attr("data-day"), 10);
        var mesSel = parseInt($(diasMes[i]).attr("data-month"), 10);
        var anioSel = parseInt($(diasMes[i]).attr("data-year"), 10);
        var myDay = new Date(anioSel, mesSel - 1, diaSel);
        var diferencia = Math.floor((myDay.getTime() - hoy.getTime()) / one_day);
        if (diferencia < 0) {
            $(diasMes[i]).addClass("shadow");
            $(diasMes[i]).attr("onclick", "");
        }
    }
}

function isValidDay(obj) {
    var valid = false;
    if (!obj.parent(".day").hasClass("past") && !obj.hasClass("disabled-date")) {
        valid = true;
    }
    return valid;
}

function rangeSelectDay(obj) {
    var dateInput = obj.closest(".responsive-calendar-wrap").attr("data-date-input");
    var dateInputStart = obj.closest(".responsive-calendar").attr("data-date-input-from");
    var dateInputEnd = obj.closest(".responsive-calendar").attr("data-date-input-to");
    var rangeType = obj.closest(".responsive-calendar-wrap").attr("data-range-type");
    var curCalendar = obj.closest(".responsive-calendar-wrap");
    var curCalendarIn = $($(obj.closest(".responsive-calendar").attr("data-date-input-from")).attr("data-calendar"));
    var curCalendarOut = $($(obj.closest(".responsive-calendar").attr("data-date-input-to")).attr("data-calendar"));
    var minDays = obj.closest(".responsive-calendar").attr("data-min-nights") || 1;
    var maxDays = obj.closest(".responsive-calendar").attr("data-max-nights") || 99;
    var errNights = obj.closest(".responsive-calendar").attr("data-error-nights");
    var errBlacks = obj.closest(".responsive-calendar").attr("data-error-blackout");
    var initRange = obj.closest(".responsive-calendar").attr("data-first-valid-date");
    var endRange = obj.closest(".responsive-calendar").attr("data-last-valid-date");
    if (initRange && endRange) {
        initRange = initRange.split("/");
        endRange = endRange.split("/");
        var objInitRange = moment({
            year: parseInt(initRange[2]),
            month: parseInt(initRange[1]) - 1,
            day: parseInt(initRange[0])
        });
        var objEndRange = moment({
            year: parseInt(endRange[2]),
            month: parseInt(endRange[1]) - 1,
            day: parseInt(endRange[0])
        });
        var rangeNights = objEndRange.diff(objInitRange, "days");
        if (rangeNights < minDays) {
            minDays = rangeNights;
        }
    }
    var gDay = obj.attr("data-day");
    var gMonth = obj.attr("data-month");
    var gYear = obj.attr("data-year");
    var selectedDate = fillZeros(gDay, 2, "left") + "/" + fillZeros(gMonth, 2, "left") + "/" + gYear;
    var currentDate = moment({
        year: gYear,
        month: gMonth - 1,
        day: gDay
    });
    var todayDate = moment();
    var numDays = 0;
    var newDate;
    curCalendar.find(".selected-day").removeClass("selected-day");
    if (rangeType == "start") {
        if (curCalendar.attr("data-range-end") && curCalendar.attr("data-range-end") != "") {
            var currentEnd = moment(parseInt(curCalendar.attr("data-range-end")));
            if (!validateBlackOuts(currentDate, currentEnd)) {
                $("#error-modal").modal();
                return false;
            }
            numDays = currentEnd.diff(currentDate, "days");
            if (numDays > parseInt(maxDays, 10)) {
                $("#error-modal").modal();
                return false;
            }
            if (currentDate.isAfter(currentEnd)) {
                if (initRange && endRange) {
                    currentDate.add(minDays, "day");
                    if (!currentDate.isAfter(objEndRange)) {
                        currentDate.subtract(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
                        curCalendarIn.attr("data-range-start", currentDate);
                        curCalendarOut.attr("data-range-start", currentDate);
                        currentDate.add(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", currentDate);
                        curCalendarOut.attr("data-range-end", currentDate);
                    }
                } else {
                    updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
                    curCalendarIn.attr("data-range-start", currentDate);
                    curCalendarOut.attr("data-range-start", currentDate);
                    currentDate.add(minDays, "day");
                    updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                    curCalendarIn.attr("data-range-end", currentDate);
                    curCalendarOut.attr("data-range-end", currentDate);
                }
            } else {
                if (initRange && endRange) {
                    currentDate.add(minDays, "day");
                    if (currentDate.isAfter(objEndRange)) {
                        updateDate(curCalendarIn, curCalendarOut, objEndRange, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", objEndRange);
                        curCalendarOut.attr("data-range-end", objEndRange);
                        objEndRange.subtract(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, objEndRange, "range-start", dateInputStart);
                        curCalendarIn.attr("data-range-start", objEndRange);
                        curCalendarOut.attr("data-range-start", objEndRange);
                    } else {
                        currentDate.subtract(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
                        curCalendarIn.attr("data-range-start", currentDate);
                        curCalendarOut.attr("data-range-start", currentDate);
                        numDays = currentEnd.diff(currentDate, "days");
                        if (numDays < minDays) {
                            currentDate.add(minDays, "day");
                            updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                            curCalendarIn.attr("data-range-end", currentDate);
                            curCalendarOut.attr("data-range-end", currentDate);
                        }
                    }
                } else {
                    updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
                    curCalendarIn.attr("data-range-start", currentDate);
                    curCalendarOut.attr("data-range-start", currentDate);
                    if (numDays < minDays) {
                        currentDate.add(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", currentDate);
                        curCalendarOut.attr("data-range-end", currentDate);
                    }
                }
            }
        } else {
            updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
            curCalendarIn.attr("data-range-start", currentDate);
            curCalendarOut.attr("data-range-start", currentDate);
            currentDate.add(minDays, "day");
            updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
            curCalendarIn.attr("data-range-end", currentDate);
            curCalendarOut.attr("data-range-end", currentDate);
        }
    } else {
        if (curCalendar.attr("data-range-start") && curCalendar.attr("data-range-start") != "") {
            var currentStart = moment(parseInt(curCalendar.attr("data-range-start")));
            numDays = currentDate.diff(currentStart, "days");
            if (!validateBlackOuts(currentStart, currentDate)) {
                $("#error-modal").modal();
                return false;
            }
            if (numDays > parseInt(maxDays, 10)) {
                $("#error-modal").modal();
                return false;
            }
            if (currentDate.isBefore(currentStart)) {
                currentDate.subtract(minDays, "day");
                if (initRange && endRange) {
                    todayDate = objInitRange;
                }
                if (currentDate.isBefore(todayDate)) {
                    updateDate(curCalendarIn, curCalendarOut, todayDate, "range-start", dateInputStart);
                    curCalendarIn.attr("data-range-start", todayDate);
                    curCalendarOut.attr("data-range-start", todayDate);
                    todayDate.add(minDays, "day");
                    updateDate(curCalendarIn, curCalendarOut, todayDate, "range-end", dateInputEnd);
                    curCalendarIn.attr("data-range-end", todayDate);
                    curCalendarOut.attr("data-range-end", todayDate);
                } else {
                    currentDate.add(minDays, "day");
                    updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                    curCalendarIn.attr("data-range-end", currentDate);
                    curCalendarOut.attr("data-range-end", currentDate);
                    currentDate.subtract(minDays, "day");
                    updateDate(curCalendarIn, curCalendarOut, currentDate, "range-start", dateInputStart);
                    curCalendarIn.attr("data-range-start", currentDate);
                    curCalendarOut.attr("data-range-start", currentDate);
                }
            } else {
                if (initRange && endRange) {
                    currentDate.subtract(minDays, "day");
                    if (currentDate.isBefore(objInitRange)) {
                        updateDate(curCalendarIn, curCalendarOut, objInitRange, "range-start", dateInputStart);
                        curCalendarIn.attr("data-range-start", objInitRange);
                        curCalendarOut.attr("data-range-start", objInitRange);
                        objInitRange.add(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, objInitRange, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", objInitRange);
                        curCalendarOut.attr("data-range-end", objInitRange);
                    } else {
                        currentDate.add(minDays, "day");
                        if (numDays >= minDays) {
                            updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                            curCalendarIn.attr("data-range-end", currentDate);
                            curCalendarOut.attr("data-range-end", currentDate);
                        } else {
                            currentStart.add(minDays, "day");
                            updateDate(curCalendarIn, curCalendarOut, currentStart, "range-end", dateInputEnd);
                            curCalendarIn.attr("data-range-end", currentStart);
                            curCalendarOut.attr("data-range-end", currentStart);
                        }
                    }
                } else {
                    if (numDays >= minDays) {
                        updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", currentDate);
                        curCalendarOut.attr("data-range-end", currentDate);
                    } else {
                        currentStart.add(minDays, "day");
                        updateDate(curCalendarIn, curCalendarOut, currentStart, "range-end", dateInputEnd);
                        curCalendarIn.attr("data-range-end", currentStart);
                        curCalendarOut.attr("data-range-end", currentStart);
                    }
                }
            }
        } else {
            updateDate(curCalendarIn, curCalendarOut, currentDate, "range-end", dateInputEnd);
            curCalendarIn.attr("data-range-end", currentDate);
            curCalendarOut.attr("data-range-end", currentDate);
            var curEndDate = moment(parseInt(curCalendar.attr("data-range-end")));
            $(curCalendarIn).find(".responsive-calendar").responsiveCalendar(curEndDate.format("YYYY-MM"));
        }
    }
    paintRange(curCalendarIn);
    paintRange(curCalendarOut);
    obj.closest(".responsive-calendar-wrap").removeClass("active");
}

function validateBlackOuts(date1, date2) {
    var blacks = getBlackOuts();
    for (i = 0; i < blacks.length; i++) {
        var ab = blacks[i].split("-");
        var black = moment(blacks[i]);
        if (moment(blacks[i]).isBetween(date1, date2)) {
            return false;
        }
    }
    return true;
}

function paintBlackOuts() {
    var blacks = getBlackOuts();
    for (i = 0; i < blacks.length; i++) {
        var ab = blacks[i].split("-");
        var month = ab[1];
        $("[data-day=" + ab[2] + "][data-month=" + month + "][data-year=" + ab[0] + "]").parent().removeClass("future");
        $("[data-day=" + ab[2] + "][data-month=" + month + "][data-year=" + ab[0] + "]").parent().addClass("past");
    }
}

function getBlackOuts() {
    if (typeof dateString != "undefined") {
        var aDates = dateString.split("*");
    } else {
        var aDates = "";
    }
    return aDates;
}

function updateDate(calIn, calOut, currentDate, newClass, dateInput) {
    var day = currentDate.date();
    var month = currentDate.month() + 1;
    var year = currentDate.year();
    var inputYear = year.toString();
    calIn.find("[data-day=" + day + "][data-month=" + month + "][data-year=" + year + "]").addClass(newClass);
    calOut.find("[data-day=" + day + "][data-month=" + month + "][data-year=" + year + "]").addClass(newClass);
    if ($(dateInput).attr("data-short-year")) {
        inputYear = inputYear.substring(2, 4);
    }
    $(dateInput).val(fillZeros(day.toString(), 2, "left") + "/" + fillZeros(month.toString(), 2, "left") + "/" + inputYear).change();
}

function paintRange(cal) {
    resetRanges(cal);
    if (cal.attr("data-range-start") && cal.attr("data-range-start") != "" && cal.attr("data-range-end") && cal.attr("data-range-end") != "") {
        var rangeStart = parseInt(cal.attr("data-range-start"));
        var rangeEnd = parseInt(cal.attr("data-range-end"));
        var dateStart = moment(rangeStart);
        var dateEnd = moment(rangeEnd);
        cal.find('[data-day="' + dateStart.date() + '"][data-month="' + (dateStart.month() + 1) + '"][data-year="' + dateStart.year() + '"]').addClass("range-start");
        cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
        while (!dateStart.isAfter(dateEnd)) {
            var currentDay = cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]");
            if (!currentDay.hasClass("range-start") && !currentDay.hasClass("range-end")) {
                currentDay.addClass("range-in");
            }
            dateStart.add(1, "day");
        }
    } else {
        if (cal.attr("data-range-start") && cal.attr("data-range-start") != "") {
            var rangeStart = parseInt(cal.attr("data-range-start"));
            var dateStart = moment(rangeStart);
            cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]").addClass("range-start");
        } else {
            var rangeEnd = parseInt(cal.attr("data-range-end"));
            var dateEnd = moment(rangeEnd);
            cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
        }
    }
}

function muestraDias(elemento) {
    $(".currentDay").removeClass("currentDay");
    var one_day = 1e3 * 60 * 60 * 24;
    var meses = new Array("None", "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre");
    var aDias = new Array("Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo");
    var idPadre = $(elemento).parent().parent().attr("id");
    if (idPadre == "diasIda") {
        $(".myDay").attr("style", "");
        $("#hideSal").show();
        $("#diaLlegada").val($(elemento).attr("data-day"));
        $("#mesLlegada").val($(elemento).attr("data-month"));
        $("#mesLlegadav").val(meses[$(elemento).attr("data-month")]);
        $("#anioLlegada").val($(elemento).attr("data-year"));
        var diaSet = parseInt($("#diaLlegada").val(), 10);
        var mesSet = parseInt($("#mesLlegada").val(), 10);
        var anoSet = parseInt($("#anioLlegada").val(), 10);
        var iFechaSet = new Date(anoSet, mesSet - 1, diaSet);
        var fechaSet = new Date(anoSet, mesSet - 1, diaSet + 1);
        var fechaSetDays = fechaSet.getTime();
        fechaSetDays = fechaSetDays + one_day;
        var firstDay = iFechaSet.getDay();
        var lastDay = fechaSet.getDay();
        $("#nameDiaLlegada").val(aDias[firstDay]);
        $("#nameDiaSalida").val(aDias[lastDay]);
        $("#diaSalida").val(parseInt(fechaSet.getDate()));
        $("#mesSalida").val(parseInt(fechaSet.getMonth() + 1));
        $("#mesSalidav").val(meses[parseInt(fechaSet.getMonth() + 1)]);
        $("#anioSalida").val(fechaSet.getFullYear());
        paintRange();
        $("[data-day=" + $(elemento).attr("data-day") + "][data-month=" + $(elemento).attr("data-month") + "][data-year=" + $(elemento).attr("data-year") + "]");
        $("[data-day=" + parseInt(fechaSet.getDate()) + "][data-month=" + parseInt(fechaSet.getMonth() + 1) + "][data-year=" + fechaSet.getFullYear() + "]");
        $("#nNoches").html("1");
    } else {
        $(".myDay").attr("style", "");
        $("#diaSalida").val($(elemento).attr("data-day"));
        $("#mesSalida").val($(elemento).attr("data-month"));
        $("#mesSalidav").val(meses[$(elemento).attr("data-month")]);
        $("#anioSalida").val($(elemento).attr("data-year"));
        var diaIni = parseInt($("#diaLlegada").val(), 10);
        var mesIni = parseInt($("#mesLlegada").val(), 10);
        var anoIni = parseInt($("#anioLlegada").val(), 10);
        var diaFin = parseInt($("#diaSalida").val(), 10);
        var mesFin = parseInt($("#mesSalida").val(), 10);
        var anoFin = parseInt($("#anioSalida").val(), 10);
        var inicialb = new Date(anoIni, mesIni - 1, diaIni);
        var inicialf = new Date(anoIni, mesIni - 1, diaIni);
        var finalf = new Date(anoFin, mesFin - 1, diaFin);
        var diasSum = parseInt(1, 10);
        var diferencia = Math.floor((finalf.getTime() - inicialf.getTime()) / one_day);
        $("#nNoches").html(diferencia);
        if (diferencia <= 0) {
            $("#nNoches").html("1");
            $(".myDay").attr("style", "");
            $("#diaSalida").val($("#diaLlegada").val());
            $("#mesSalida").val($("#mesLlegada").val());
            $("#anioSalida").val($("#anioLlegada").val());
            $("[data-day=" + parseInt(inicialb.getDate()) + "][data-month=" + parseInt(inicialb.getMonth() + 1) + "][data-year=" + inicialb.getFullYear() + "]").attr("style", "background-color:#002a92; color:#fff;");
            var solveDate = new Date(anoFin, mesFin - 1, parseInt(diaFin, 10) + 1);
            var firstDay = inicialb.getDay();
            var lastDay = solveDate.getDay();
            $("#nameDiaLlegada").val(aDias[firstDay]);
            $("#nameDiaSalida").val(aDias[lastDay]);
            alert("La fecha de salida debe ser mayor a la de llegada.");
            $("[data-day=" + parseInt(solveDate.getDate()) + "][data-month=" + parseInt(solveDate.getMonth() + 1) + "][data-year=" + solveDate.getFullYear() + "]").attr("style", "background-color:#002a92; color:#fff;");
            $("#diaSalida").val(parseInt(solveDate.getDate()));
            $("#mesSalida").val(parseInt(solveDate.getMonth() + 1));
            $("#mesSalidav").val(meses[parseInt(solveDate.getMonth() + 1)]);
            $("#anioSalida").val($(elemento).attr(solveDate.getFullYear()));
            var diaFin = parseInt($("#diaSalida").val(), 10);
            var mesFin = parseInt($("#mesSalida").val(), 10);
            var anoFin = parseInt($("#anioSalida").val(), 10);
            return false;
        }
        while (diferencia > -1) {
            var trueMonth = inicialf.getMonth() + 1;
            $("[data-day=" + inicialf.getDate() + "][data-month=" + trueMonth + "][data-year=" + inicialf.getFullYear() + "]").attr("style", "background-color:#e9efff;");
            inicialf.setDate(inicialf.getDate() + 1);
            diferencia--;
        }
        var firstDay = inicialb.getDay();
        var lastDay = finalf.getDay();
        $("#nameDiaLlegada").val(aDias[firstDay]);
        $("#nameDiaSalida").val(aDias[lastDay]);
        $("[data-day=" + parseInt(inicialb.getDate()) + "][data-month=" + parseInt(inicialb.getMonth() + 1) + "][data-year=" + inicialb.getFullYear() + "]").attr("style", "background-color:#002a92; color:#fff;");
        $("[data-day=" + parseInt(finalf.getDate()) + "][data-month=" + parseInt(finalf.getMonth() + 1) + "][data-year=" + finalf.getFullYear() + "]").attr("style", "background-color:#002a92; color:#fff;");
    }
}

(function() {
    (function($) {
        "use strict";
        var Calendar, opts, spy;
        Calendar = function Calendar(element, options) {
            var time;
            this.$element = element;
            this.options = options;
            this.weekDays = [ "sun", "mon", "tue", "wed", "thu", "fri", "sat", "sun" ];
            this.time = new Date();
            this.currentYear = this.time.getYear();
            this.currentMonth = this.time.getMonth();
            this.prevButton = this.$element.find(".go-prev-month");
            this.nextButton = this.$element.find(".go-next-month");
            this.isPastCalendar = this.$element.data("past-calendar");
            if (this.options.time) {
                time = this.splitDateString(this.options.time);
                this.currentYear = time.year;
                this.currentMonth = time.month;
            }
            this.initialDraw();
            return null;
        };
        Calendar.prototype = {
            addLeadingZero: function addLeadingZero(num) {
                if (num < 10) {
                    return "0" + num;
                } else {
                    return "" + num;
                }
            },
            applyTransition: function applyTransition($el, transition) {
                $el.css("transition", transition);
                $el.css("-ms-transition", "-ms-" + transition);
                $el.css("-moz-transition", "-moz-" + transition);
                return $el.css("-webkit-transition", "-webkit-" + transition);
            },
            applyBackfaceVisibility: function applyBackfaceVisibility($el) {
                $el.css("backface-visibility", "hidden");
                $el.css("-ms-backface-visibility", "hidden");
                $el.css("-moz-backface-visibility", "hidden");
                return $el.css("-webkit-backface-visibility", "hidden");
            },
            applyTransform: function applyTransform($el, transform) {
                $el.css("transform", transform);
                $el.css("-ms-transform", transform);
                $el.css("-moz-transform", transform);
                return $el.css("-webkit-transform", transform);
            },
            splitDateString: function splitDateString(dateString) {
                var day, month, time, year;
                time = dateString.split("-");
                year = parseInt(time[0]);
                month = parseInt(time[1] - 1);
                day = parseInt(time[2]);
                return time = {
                    year: year,
                    month: month,
                    day: day
                };
            },
            initialDraw: function initialDraw() {
                togglePrevButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.prevButton);
                toggleNextButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.nextButton);
                return this.drawDays(this.currentYear, this.currentMonth);
            },
            editDays: function editDays(events) {
                var dateString, day, dayEvents, time, _results;
                _results = [];
                for (dateString in events) {
                    dayEvents = events[dateString];
                    this.options.events[dateString] = events[dateString];
                    time = this.splitDateString(dateString);
                    day = this.$element.find('[data-year="' + time.year + '"][data-month="' + (time.month + 1) + '"][data-day="' + time.day + '"]').parent(".day");
                    day.removeClass("active");
                    day.find(".badge").remove();
                    day.find("a").removeAttr("href");
                    if (this.currentMonth === time.month || this.options.activateNonCurrentMonths) {
                        _results.push(this.makeActive(day, dayEvents));
                    } else {
                        _results.push(void 0);
                    }
                }
                return _results;
            },
            clearDays: function clearDays(days) {
                var dateString, day, time, _i, _len, _results;
                _results = [];
                for (_i = 0, _len = days.length; _i < _len; _i++) {
                    dateString = days[_i];
                    delete this.options.events[dateString];
                    time = this.splitDateString(dateString);
                    day = this.$element.find('[data-year="' + time.year + '"][data-month="' + (time.month + 1) + '"][data-day="' + time.day + '"]').parent(".day");
                    day.removeClass("active");
                    day.find(".badge").remove();
                    _results.push(day.find("a").removeAttr("href"));
                }
                return _results;
            },
            clearAll: function clearAll() {
                var day, days, i, _i, _len, _results;
                this.options.events = {};
                days = this.$element.find('[data-group="days"] .day');
                _results = [];
                for (i = _i = 0, _len = days.length; _i < _len; i = ++_i) {
                    day = days[i];
                    $(day).removeClass("active");
                    $(day).find(".badge").remove();
                    _results.push($(day).find("a").removeAttr("href"));
                }
                return _results;
            },
            setMonth: function setMonth(dateString) {
                var time;
                time = this.splitDateString(dateString);
                return this.currentMonth = this.drawDays(time.year, time.month);
            },
            setYear: function setYear(dateString) {
                var time;
                time = this.splitDateString(dateString);
                return this.currentYear = time.year;
            },
            prev: function prev() {
                var goToPast = null;
                var selectedYear = this.currentYear;
                var selectedMonth = this.currentMonth;
                if (this.currentMonth - 1 < 0) {
                    this.currentYear = this.currentYear - 1;
                    this.currentMonth = 11;
                } else {
                    this.currentMonth = this.currentMonth - 1;
                }
                goToPast = isNavigateToPastDatesAllowed(this.currentMonth, this.currentYear, this.isPastCalendar);
                togglePrevButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.prevButton);
                toggleNextButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.nextButton);
                if (goToPast) {
                    this.drawDays(this.currentYear, this.currentMonth);
                } else {
                    this.currentYear = selectedYear;
                    this.currentMonth = selectedMonth;
                }
                return null;
            },
            next: function next() {
                var goToFuture = null;
                var selectedMonth = this.currentMonth;
                var selectedYear = this.currentYear;
                if (this.currentMonth + 1 > 11) {
                    this.currentYear = this.currentYear + 1;
                    this.currentMonth = 0;
                } else {
                    this.currentMonth = this.currentMonth + 1;
                }
                goToFuture = isNavigateToFutureDatesAllowed(selectedMonth, selectedYear, this.isPastCalendar);
                toggleNextButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.nextButton);
                togglePrevButton(this.currentMonth, this.currentYear, this.isPastCalendar, this.prevButton);
                if (goToFuture) {
                    this.drawDays(this.currentYear, this.currentMonth);
                } else {
                    this.currentYear = selectedYear;
                    this.currentMonth = selectedMonth;
                }
                return null;
            },
            setNewDate: function setNewDate(myDate) {
                var aDate = myDate.split("-");
                this.currentYear = parseInt(aDate[1], 10);
                this.currentMonth = parseInt(aDate[0], 10) - 1;
                this.drawDays(this.currentYear, this.currentMonth);
                if (this.options.onMonthChange) {
                    this.options.onMonthChange.call(this);
                }
                return null;
            },
            getCurrentDate: function getCurrentDate() {
                var visualMonth = this.currentMonth + 1;
                var sDate = visualMonth + "-" + this.currentYear;
                return sDate;
            },
            addOthers: function addOthers(day, dayEvents) {
                if ((typeof dayEvents === "undefined" ? "undefined" : _typeof(dayEvents)) === "object") {
                    if (dayEvents.number != null && dayEvents.badgeClass != null) {
                        day.append($("<span></span>").html(dayEvents.number).addClass("badge").addClass(dayEvents.badgeClass));
                    }
                    if (dayEvents.url) {
                        day.find("a").attr("href", dayEvents.url);
                    }
                }
                return day;
            },
            makeActive: function makeActive(day, dayEvents) {
                var classes, eventClass, i, _i, _len;
                if (dayEvents) {
                    if (dayEvents["class"]) {
                        classes = dayEvents["class"].split(" ");
                        for (i = _i = 0, _len = classes.length; _i < _len; i = ++_i) {
                            eventClass = classes[i];
                            day.addClass(eventClass);
                        }
                    } else {
                        day.addClass("active");
                    }
                    day = this.addOthers(day, dayEvents);
                }
                return day;
            },
            getDaysInMonth: function getDaysInMonth(year, month) {
                return new Date(year, month + 1, 0).getDate();
            },
            drawDay: function drawDay(lastDayOfMonth, yearNum, monthNum, dayNum, i) {
                var calcDate, dateNow, dateString, day, dayDate, pastFutureClass;
                day = $("<div></div>").addClass("day");
                dateNow = new Date();
                dateNow.setHours(0, 0, 0, 0);
                dayDate = new Date(yearNum, monthNum - 1, dayNum);
                if (dayDate.getTime() < dateNow.getTime()) {
                    pastFutureClass = this.isPastCalendar ? "allowed-past" : "past";
                } else if (dayDate.getTime() === dateNow.getTime()) {
                    pastFutureClass = this.isPastCalendar ? "today past" : "today";
                } else {
                    pastFutureClass = this.isPastCalendar ? "past" : "future";
                }
                day.addClass(this.weekDays[i % 7]);
                day.addClass(pastFutureClass);
                dateString = yearNum + "-" + this.addLeadingZero(monthNum) + "-" + this.addLeadingZero(dayNum);
                if (dayNum <= 0 || dayNum > lastDayOfMonth) {
                    calcDate = new Date(yearNum, monthNum - 1, dayNum);
                    dayNum = calcDate.getDate();
                    monthNum = calcDate.getMonth() + 1;
                    yearNum = calcDate.getFullYear();
                    day.addClass("not-current").addClass(pastFutureClass);
                    if (this.options.activateNonCurrentMonths) {
                        dateString = yearNum + "-" + this.addLeadingZero(monthNum) + "-" + this.addLeadingZero(dayNum);
                    }
                }
                day.append($("<a class='myDay'>" + dayNum + "</a>").attr("data-day", dayNum).attr("data-month", monthNum).attr("data-year", yearNum));
                this.applyTransform(day, "rotateY(0deg)");
                this.applyBackfaceVisibility(day);
                day = this.makeActive(day, this.options.events[dateString]);
                return this.$element.find('[data-group="days"]').append(day);
            },
            drawDays: function drawDays(year, month) {
                var currentMonth, day, dayBase, days, delay, draw, firstDayOfMonth, i, lastDayOfMonth, loopBase, monthNum, multiplier, thisRef, time, timeout, yearNum, _i, _len;
                thisRef = this;
                time = new Date(year, month);
                currentMonth = time.getMonth();
                monthNum = time.getMonth() + 1;
                yearNum = time.getFullYear();
                time.setDate(1);
                firstDayOfMonth = this.options.startFromSunday ? time.getDay() + 1 : time.getDay() || 7;
                lastDayOfMonth = this.getDaysInMonth(year, month);
                if (this.options.monthChangeAnimation) {
                    timeout = 0;
                    days = this.$element.find('[data-group="days"] .day');
                    for (i = _i = 0, _len = days.length; _i < _len; i = ++_i) {
                        day = days[i];
                        delay = i * .01;
                        this.applyTransition($(day), "transform .5s ease " + delay + "s");
                        this.applyTransform($(day), "rotateY(0deg)");
                        this.applyBackfaceVisibility($(day));
                        timeout = (delay + .1) * 1e3;
                    }
                }
                dayBase = 2;
                if (this.options.allRows) {
                    loopBase = 42;
                } else {
                    multiplier = Math.ceil((firstDayOfMonth - (dayBase - 1) + lastDayOfMonth) / 7);
                    loopBase = multiplier * 7;
                }
                this.$element.find(".timeInfo").html(time.getFullYear() + " " + this.options.translateMonths[time.getMonth()]);
                draw = function draw() {
                    var dayNum;
                    thisRef.$element.find('[data-group="days"]').empty();
                    dayNum = dayBase - firstDayOfMonth;
                    i = thisRef.options.startFromSunday ? 0 : 1;
                    while (dayNum < loopBase - firstDayOfMonth + dayBase) {
                        thisRef.drawDay(lastDayOfMonth, yearNum, monthNum, dayNum, i);
                        dayNum = dayNum + 1;
                        i = i + 1;
                    }
                    paintRange(thisRef.$element);
                    delay = function delay() {
                        var _j, _len1;
                        days = thisRef.$element.find('[data-group="days"] .day');
                        for (i = _j = 0, _len1 = days.length; _j < _len1; i = ++_j) {
                            day = days[i];
                            thisRef.applyTransition($(day), "transform .5s ease " + i * .01 + "s");
                            thisRef.applyTransform($(day), "rotateY(0deg)");
                        }
                        if (thisRef.options.onDayClick) {
                            thisRef.$element.find('[data-group="days"] .day a').click(function() {
                                return thisRef.options.onDayClick.call(this, thisRef.options.events);
                            });
                        }
                        if (thisRef.options.onDayHover) {
                            thisRef.$element.find('[data-group="days"] .day a').hover(function() {
                                return thisRef.options.onDayHover.call(this, thisRef.options.events);
                            });
                        }
                        if (thisRef.options.onActiveDayClick) {
                            thisRef.$element.find('[data-group="days"] .day.active a').click(function() {
                                return thisRef.options.onActiveDayClick.call(this, thisRef.options.events);
                            });
                        }
                        if (thisRef.options.onActiveDayHover) {
                            return thisRef.$element.find('[data-group="days"] .day.active a').hover(function() {
                                return thisRef.options.onActiveDayHover.call(this, thisRef.options.events);
                            });
                        }
                        shadowDays();
                    };
                    return setTimeout(delay, 0);
                };
                setTimeout(draw, timeout);
                return currentMonth;
            }
        };
        $.fn.responsiveCalendar = function(option, params) {
            var init, options, publicFunc;
            if (params == null) {
                params = void 0;
            }
            options = $.extend({}, $.fn.responsiveCalendar.defaults, (typeof option === "undefined" ? "undefined" : _typeof(option)) === "object" && option);
            publicFunc = {
                next: "next",
                prev: "prev",
                edit: "editDays",
                clear: "clearDays",
                clearAll: "clearAll",
                setNewDate: "setNewDate",
                getCurrentDate: "getCurrentDate"
            };
            init = function init($this) {
                var data;
                options = $.metadata ? $.extend({}, options, $this.metadata()) : options;
                $this.data("calendar", data = new Calendar($this, options));
                if (options.onInit) {
                    options.onInit.call(this);
                }
                return $this.find("[data-go]").click(function() {
                    if ($(this).data("go") === "prev") {
                        data.prev();
                    }
                    if ($(this).data("go") === "next") {
                        data.next();
                    }
                    if (options.onMonthChange) {
                        return options.onMonthChange.call(this);
                    }
                });
            };
            return this.each(function() {
                var $this, data;
                $this = $(this);
                data = $this.data("calendar");
                if (!data) {
                    init($this);
                } else if (typeof option === "string") {
                    if (publicFunc[option] != null) {
                        data[publicFunc[option]](params);
                    } else {
                        data.setMonth(option);
                        data.setYear(option);
                        toggleNavigationButtons(data);
                    }
                } else if (typeof option === "number") {
                    data.jump(Math.abs(option) + 1);
                }
                return null;
            });
        };
        $.fn.responsiveCalendar.defaults = {
            translateMonths: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
            events: {},
            time: void 0,
            allRows: true,
            startFromSunday: false,
            activateNonCurrentMonths: false,
            monthChangeAnimation: false,
            onInit: void 0,
            onDayClick: void 0,
            onDayHover: void 0,
            onActiveDayClick: void 0,
            onActiveDayHover: void 0,
            onMonthChange: void 0
        };
        spy = $('[data-spy="responsive-calendar"]');
        if (spy.length) {
            opts = {};
            if (spy.data("translate-months") != null) {
                opts.translateMonths = spy.data("translate-months").split(",");
            }
            if (spy.data("time") != null) {
                opts.time = spy.data("time");
            }
            if (spy.data("all-rows") != null) {
                opts.allRows = spy.data("all-rows");
            }
            if (spy.data("start-from-sunday") != null) {
                opts.startFromSunday = spy.data("start-from-sunday");
            }
            if (spy.data("activate-non-current-months") != null) {
                opts.activateNonCurrentMonths = spy.data("activate-non-current-months");
            }
            if (spy.data("month-change-animation") != null) {
                opts.monthChangeAnimation = spy.data("month-change-animation");
            }
            return spy.responsiveCalendar(opts);
        }
    })(jQuery);
    $(document).on("mouseup touchend keyup", {
        className: ".js-close-blur"
    }, closeElementOnEvent).on("keyup", {
        className: ".js-close-esc"
    }, closeElementOnEvent);
    function closeElementOnEvent(ev) {
        var data;
        $(ev.data.className).each(function() {
            data = {
                container: $(this),
                get linked() {
                    return $(this.container.attr("data-linked-element"));
                }
            };
            if (ev.keyCode && ev.keyCode === 27) {
                hideElement(data);
            } else if (!data.container.is(ev.target) && data.container.has(ev.target).length === 0 && !data.linked.is(ev.target) && data.linked.has(ev.target).length === 0) {
                closeElementOnMouseup(ev, data);
            }
        });
    }
    function closeElementOnMouseup(ev, data) {
        if (!data.container.is(ev.target) && data.container.has(ev.target).length === 0 && !data.linked.is(ev.target) && data.linked.has(ev.target).length === 0) {
            hideElement(data);
        }
    }
    function hideElement(data) {
        if (data.container.is(":visible")) {
            data.linked.trigger("blur");
            data.container.removeClass("active");
        }
    }
}).call(undefined);

"use strict";

$(function() {
    function isMobile() {
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
            return true;
        }
    }
    var weekDays = [ "sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday" ];
    if ($(".responsive-calendar").length) {
        $.each($(".responsive-calendar"), function() {
            var $curCalendar = $(this);
            var dateInput = $($curCalendar.attr("data-date-input"));
            if (!dateInput.hasClass("prevent-mobile") || dateInput.hasClass("prevent-mobile") && !isMobile()) {
                var calType = $curCalendar.attr("data-calendar-type");
                var isPastCalendar = $curCalendar.data("past-calendar");
                var rangeType = $($curCalendar.closest(".responsive-calendar-wrap").attr("data-linked-element")).attr("data-range-type");
                var now = new Date();
                var tday = now.getDate();
                var tmonth = now.getMonth() + 1;
                var tyear = now.getFullYear();
                var strFormt = tyear + "-" + tmonth;
                var x = "";
                var monthsDefaults = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];
                var firstValidDate;
                var firstWeeklyDay;
                if (dateInput.length) {
                    dateInput.attr("type", "text").prop("readonly", true);
                }
                if ($(this).data("translate-months") != null) {
                    var monthsArray = $(this).data("translate-months").split(",");
                }
                if ($curCalendar.attr("data-first-valid-date") && calType == "range") {
                    firstValidDate = $curCalendar.attr("data-first-valid-date").split("/");
                    firstWeeklyDay = $curCalendar.attr("data-first-weekly-day");
                    if (!firstValidDate && firstWeeklyDay) {
                        firstValidDate = setFirstWeekAvailableDay(firstWeeklyDay, moment().format("DD/MM/YYYY"));
                    } else if (firstValidDate && firstWeeklyDay) {
                        firstValidDate = setFirstWeekAvailableDay(firstWeeklyDay, firstValidDate).split("/");
                    }
                    if (strFormt < parseInt(firstValidDate[2]) + "-" + parseInt(firstValidDate[1])) {
                        strFormt = parseInt(firstValidDate[2]) + "-" + parseInt(firstValidDate[1]);
                    }
                }
                $curCalendar.responsiveCalendar({
                    time: strFormt,
                    translateMonths: typeof monthsArray !== "undefined" ? monthsArray : monthsArray,
                    allRows: false,
                    onDayClick: function onDayClick(events) {
                        var $dayClicked = $(this);
                        if (isValidDay($dayClicked)) {
                            switch (calType) {
                              case "simple":
                                simpleSelectDay($dayClicked);
                                break;

                              case "multiselect":
                                multiSelectDay($dayClicked);
                                break;

                              case "range":
                                rangeSelectDay($dayClicked, isPastCalendar);
                                break;

                              default:
                                simpleSelectDay($dayClicked);
                            }
                        }
                    },
                    onInit: function onInit() {
                        if (rangeType == "end") {
                            setTimeout(function() {
                                $curCalendar.find(".today").addClass("past");
                            }, 50);
                        }
                    }
                });
            }
        });
    }
    $(".responsive-calendar[data-calendar-type='range'] .go-prev-month").click(function() {
        var curCalendar = $(this).closest(".responsive-calendar-wrap");
        var self = $(this);
        setTimeout(function() {
            if (curCalendar.attr("data-range-end") && curCalendar.attr("data-range-end") != "" && curCalendar.attr("data-range-start") && curCalendar.attr("data-range-start") != "") {
                paintRange(curCalendar);
            }
            disableDates("#" + self.closest(".responsive-calendar-wrap").attr("id"));
            paintBlackOuts();
        }, 10);
    });
    $(".responsive-calendar[data-calendar-type='range'] .go-next-month").click(function(e) {
        e.preventDefault();
        var curCalendar = $(this).closest(".responsive-calendar-wrap");
        var self = $(this);
        setTimeout(function() {
            if (curCalendar.attr("data-range-end") && curCalendar.attr("data-range-end") != "" && curCalendar.attr("data-range-start") && curCalendar.attr("data-range-start") != "") {
                paintRange(curCalendar);
            }
            disableDates("#" + self.closest(".responsive-calendar-wrap").attr("id"));
            paintBlackOuts();
        }, 10);
    });
    function simpleSelectDay(obj) {
        var dateInput = obj.closest(".responsive-calendar[data-calendar-type='simple']").attr("data-date-input");
        var gDay = fillZeros(obj.attr("data-day"), 2, "left");
        var gMonth = fillZeros(obj.attr("data-month"), 2, "left");
        var gYear = obj.attr("data-year");
        var selectedDateText = gDay + "/" + gMonth + "/" + gYear;
        var selectedDate = gYear + "-" + gMonth + "-" + gDay;
        obj.closest(".responsive-calendar-wrap").find(".selected-day").removeClass("selected-day");
        obj.addClass("selected-day");
        if ($(dateInput).is("input[type='date']")) {
            $(dateInput).val(selectedDate).change();
        } else {
            $(dateInput).val(selectedDateText).change();
        }
        obj.closest(".responsive-calendar-wrap").removeClass("active");
    }
    function multiSelectDay(obj) {
        var dateInput = obj.closest(".responsive-calendar[data-calendar-type='multiselect']").attr("data-date-input");
        var selectedDates = $(dateInput).val().split(", ");
        var gDay = fillZeros(obj.attr("data-day"), 2, "left");
        var gMonth = fillZeros(obj.attr("data-month"), 2, "left");
        var gYear = obj.attr("data-year");
        var selectedDate = gDay + "/" + gMonth + "/" + gYear;
        if (obj.hasClass("selected-day")) {
            obj.removeClass("selected-day");
            if (selectedDates.length == 1) {
                $(dateInput).val("").change();
            } else {
                $.each(selectedDates, function(key, value) {
                    if (value == selectedDate) {
                        selectedDates.splice(key, 1);
                        newValue = selectedDates.join(", ");
                    }
                });
            }
        } else {
            obj.addClass("selected-day");
            if ($(dateInput).val() == "") {
                var newValue = selectedDate;
            } else {
                var newValue = $(dateInput).val() + ", " + selectedDate;
            }
        }
        $(dateInput).val(newValue).change();
    }
    function getSelectedDate($day) {
        var selectedDay = $day.attr("data-day");
        var selectedMonth = $day.attr("data-month");
        var selectedYear = $day.attr("data-year");
        var selectedDate = {
            day: parseInt(selectedDay),
            month: parseInt(selectedMonth),
            year: parseInt(selectedYear),
            stringDate: fillZeros(selectedDay, 2, "left") + "/" + fillZeros(selectedMonth, 2, "left") + "/" + selectedYear,
            date: moment({
                year: selectedYear,
                month: selectedMonth - 1,
                day: selectedDay
            })
        };
        return selectedDate;
    }
    function getEndDate(selectedDate, minDaysAllowed) {
        var date = moment({
            year: selectedDate.year,
            month: selectedDate.month - 1,
            day: selectedDate.day
        });
        date.add(minDaysAllowed, "day");
        return date;
    }
    function getStartDate(selectedDate, minDaysAllowed) {
        var date = moment({
            year: selectedDate.year,
            month: selectedDate.month - 1,
            day: selectedDate.day
        });
        date.subtract(minDaysAllowed, "day");
        return date;
    }
    function isValidRangeDates(rangeData, isPastCalendar) {
        var isInvalidStartDate = false;
        var isInvalidEndDate = false;
        var lastValidDay = moment().subtract(1, "d");
        if (rangeData.start.validRangeDate) {
            isInvalidStartDate = rangeData.start.date.isBefore(rangeData.start.validRangeDate);
        }
        if (rangeData.end.validRangeDate) {
            isInvalidEndDate = rangeData.end.date.isAfter(rangeData.end.validRangeDate);
            if (isPastCalendar) {
                isInvalidEndDate = rangeData.end.date.isAfter(lastValidDay);
            }
        }
        return !isInvalidStartDate && !isInvalidEndDate;
    }
    function isValidRange(rangeData, isPastCalendar) {
        var isValidRange = true;
        var isValidDays = rangeData.numDaysSelected >= rangeData.minDaysAllowed && rangeData.numDaysSelected <= rangeData.maxDaysAllowed;
        if (!isValidRangeDates(rangeData, isPastCalendar) || !validateBlackOuts(rangeData.start.date, rangeData.end.date) || !isValidDays) {
            isValidRange = false;
        }
        return isValidRange;
    }
    function getValidInitRangeDate($currentCalendar) {
        var initRangeDate = $currentCalendar.data("first-valid-date");
        var firstWeeklyDay = $currentCalendar.data("first-weekly-day");
        if (!initRangeDate && firstWeeklyDay) {
            initRangeDate = setFirstWeekAvailableDay(firstWeeklyDay, moment().format("DD/MM/YYYY"));
        } else if (initRangeDate && firstWeeklyDay) {
            initRangeDate = setFirstWeekAvailableDay(firstWeeklyDay, initRangeDate);
        }
        return initRangeDate;
    }
    function getMinDaysAllowed($currentCalendar, rangeData) {
        var minDaysAllowed = $currentCalendar.data("min-nights") || 1;
        var rangeNights = 0;
        if (rangeData.start.validRangeDate && rangeData.end.validRangeDate) {
            rangeNights = rangeData.end.validRangeDate.diff(rangeData.start.validRangeDate, "days");
        }
        if (rangeNights < minDaysAllowed) {
            minDaysAllowed = rangeNights;
        }
        return minDaysAllowed;
    }
    function getValidRangeDate(date) {
        date = date ? date.split("/") : "";
        return moment({
            year: parseInt(date[2]),
            month: parseInt(date[1]) - 1,
            day: parseInt(date[0])
        });
    }
    function getCalendarData($day) {
        var $currentCalendarWrap = $day.closest(".responsive-calendar-wrap");
        var $currentCalendar = $currentCalendarWrap.find(".responsive-calendar");
        var dateInputStartId = $currentCalendar.data("date-input-from");
        var dateInputEndId = $currentCalendar.data("date-input-to");
        var $dateInputStart = $(dateInputStartId);
        var $dateInputEnd = $(dateInputEndId);
        var calendarStartId = $dateInputStart.data("calendar");
        var calendarEndId = $dateInputEnd.data("calendar");
        return {
            $wrapper: $currentCalendarWrap,
            $currentCalendar: $currentCalendar,
            $calendarStart: $(calendarStartId),
            $calendarEnd: $(calendarEndId),
            $inputStart: $dateInputStart,
            $inputEnd: $dateInputEnd,
            inClass: "range-start",
            outClass: "range-end",
            startValidRangeDate: getValidInitRangeDate($currentCalendar),
            endValidRangeDate: $currentCalendar.data("last-valid-date")
        };
    }
    function getOldDate(dateData) {
        var date = null;
        if (dateData && dateData !== "") {
            return moment(parseInt(dateData, 10));
        }
        return date;
    }
    function rangeSelectDay($day, isPastCalendar) {
        var calendarData = getCalendarData($day);
        var $errorModal = calendarData.$currentCalendar.data("max-nights") ? $("#modal-range-error") : $("#modal-max-days");
        var selectedDate = getSelectedDate($day);
        var rangeData = {
            start: {
                validRangeDate: getValidRangeDate(calendarData.startValidRangeDate),
                date: null,
                oldDate: getOldDate(calendarData.$wrapper.attr("data-range-start"))
            },
            end: {
                validRangeDate: getValidRangeDate(calendarData.endValidRangeDate),
                date: null,
                oldDate: getOldDate(calendarData.$wrapper.attr("data-range-end"))
            },
            rangeType: calendarData.$wrapper.data("range-type"),
            minDaysAllowed: 0,
            numDaysSelected: 0,
            maxDaysAllowed: parseInt(calendarData.$currentCalendar.data("max-nights"), 10) || 15
        };
        rangeData.minDaysAllowed = getMinDaysAllowed(calendarData.$currentCalendar, rangeData);
        if (rangeData.rangeType === "start") {
            rangeData.start.date = selectedDate.date;
            rangeData.end.date = getEndDate(selectedDate, rangeData.minDaysAllowed);
            rangeData.numDaysSelected = rangeData.end.date.diff(rangeData.start.date, "days");
            if (!isValidRange(rangeData, isPastCalendar)) {
                $erroModal.modal();
                return false;
            }
            rangeData.end.oldDate = rangeData.end.oldDate ? rangeData.end.oldDate : moment();
            if (rangeData.end.date.get("month") !== rangeData.end.oldDate.get("month") || rangeData.end.date.get("year") !== rangeData.end.oldDate.get("year")) {
                calendarData.$calendarEnd.find(".responsive-calendar").responsiveCalendar(rangeData.end.date.format("YYYY-MM"));
            }
        } else {
            rangeData.end.date = selectedDate.date;
            if (rangeData.start.oldDate) {
                if (rangeData.end.date.isBefore(rangeData.start.oldDate)) {
                    rangeData.start.date = getStartDate(selectedDate, rangeData.minDaysAllowed);
                    rangeData.numDaysSelected = rangeData.end.date.diff(rangeData.start.date, "days");
                    if (!isValidRange(rangeData)) {
                        $errorModal.modal();
                        return false;
                    }
                    if (rangeData.start.date.get("month") !== rangeData.start.oldDate.get("month") || rangeData.start.date.get("year") !== rangeData.start.oldDate.get("year")) {
                        calendarData.$calendarStart.find(".responsive-calendar").responsiveCalendar(rangeData.start.date.format("YYYY-MM"));
                    }
                } else {
                    rangeData.start.date = rangeData.start.oldDate;
                    rangeData.numDaysSelected = rangeData.end.date.diff(rangeData.start.date, "days");
                    if (!isValidRange(rangeData, isPastCalendar)) {
                        $errorModal.modal();
                        return false;
                    }
                }
            } else {
                if (moment().get("month") !== rangeData.end.date.get("month") || rangeData.end.date.get("year") !== rangeData.end.date.get("year")) {
                    calendarData.$calendarStart.find(".responsive-calendar").responsiveCalendar(rangeData.end.date.format("YYYY-MM"));
                }
            }
        }
        setTimeout(function() {
            updateDate(calendarData.$calendarStart, calendarData.$calendarEnd, rangeData.start.date, "range-start", calendarData.$inputStart);
            updateDate(calendarData.$calendarStart, calendarData.$calendarEnd, rangeData.end.date, "range-end", calendarData.$inputEnd);
            calendarData.$calendarStart.attr({
                "data-range-start": rangeData.start.date,
                "data-range-end": rangeData.end.date
            });
            calendarData.$calendarEnd.attr({
                "data-range-start": rangeData.start.date,
                "data-range-end": rangeData.end.date
            });
            paintRange(calendarData.$calendarStart);
            paintRange(calendarData.$calendarEnd);
        }, 100);
        calendarData.$wrapper.removeClass("active");
    }
    $(".js-date-select").on("focus", function(e) {
        if (!$(this).hasClass("prevent-mobile") || $(this).hasClass("prevent-mobile") && !isMobile()) {
            var calendar = $(this).attr("data-calendar");
            var rangeType = $(this).attr("data-range-type");
            calendarPosition(calendar, $(this));
            $(".responsive-calendar-wrap.active").removeClass("active");
            if ($(calendar).find(".responsive-calendar").attr("data-calendar-type") == "range") {
                $(calendar).attr("data-range-type", $(this).attr("data-range-type"));
                disableDates(calendar);
                paintBlackOuts();
            }
            $(calendar).addClass("active").attr("data-date-input", "#" + $(this).attr("id"));
        }
    });
    function disableDates(calendar) {
        var initRange = $(calendar).find(".responsive-calendar").attr("data-first-valid-date");
        var endRange = $(calendar).find(".responsive-calendar").attr("data-last-valid-date");
        var firstWeeklyDay = $(calendar).find(".responsive-calendar").attr("data-first-weekly-day");
        if (!initRange && firstWeeklyDay) {
            initRange = setFirstWeekAvailableDay(firstWeeklyDay, moment().format("DD/MM/YYYY"));
        } else if (initRange && firstWeeklyDay) {
            initRange = setFirstWeekAvailableDay(firstWeeklyDay, initRange);
        }
        if (initRange || endRange) {
            initRange = initRange ? initRange.split("/") : "";
            endRange = endRange ? endRange.split("/") : "";
            var objInitRange = moment({
                year: parseInt(initRange[2]),
                month: parseInt(initRange[1]) - 1,
                day: parseInt(initRange[0])
            });
            var objEndRange = moment({
                year: parseInt(endRange[2]),
                month: parseInt(endRange[1]) - 1,
                day: parseInt(endRange[0])
            });
            var objCurDate = "";
            $.each($(calendar).find(".days").find(".day"), function(index) {
                var self = $(this).find(".myDay");
                objCurDate = moment({
                    year: parseInt(self.attr("data-year")),
                    month: parseInt(self.attr("data-month")) - 1,
                    day: parseInt(self.attr("data-day"))
                });
                if (objCurDate.isBefore(objInitRange) || objCurDate.isAfter(objEndRange)) {
                    $(this).addClass("past").removeClass("future").removeClass("today");
                }
            });
        }
    }
    function setFirstWeekAvailableDay(firstWeeklyDay, date) {
        var dateMoment = moment(date, "DD/MM/YYYY");
        var firstWeeklyDayNumber = weekDays.indexOf(firstWeeklyDay);
        if (firstWeeklyDayNumber > dateMoment.day()) {
            dateMoment.day(firstWeeklyDayNumber);
        } else if (firstWeeklyDayNumber < dateMoment.day()) {
            dateMoment.day(firstWeeklyDayNumber + 7);
        }
        return dateMoment.format("DD/MM/YYYY");
    }
    function isValidDay(obj) {
        var valid = false;
        if (!obj.parent(".day").hasClass("past") && !obj.hasClass("disabled-date")) {
            valid = true;
        }
        return valid;
    }
    $(".js-close-calendar").on("click", function(e) {
        $(this).closest(".responsive-calendar-wrap").removeClass("active");
    });
    function calendarPosition(calendar, dateInput) {
        var relativeY = dateInput.offset().top - dateInput.closest(".form-group").offset().top;
        var topPosition = dateInput.outerHeight() + relativeY - 1;
        topPosition = topPosition + "px";
        if ($(calendar).find(".responsive-calendar").attr("data-fit-to-input")) {
            $(calendar).closest(".responsive-calendar-wrap").css("top", topPosition).css("width", dateInput.closest(".form-group").outerWidth());
        }
        if ($(calendar).find(".responsive-calendar").attr("data-fit-to-range-input")) {
            var inputPadding = dateInput.closest('[class^="col-"]').css("padding-left");
            inputPadding = parseInt(inputPadding.replace("px", ""));
            var posRight = inputPadding;
            if (dateInput.closest(".form-group").hasClass("js-input-wrapper")) {
                inputPadding = 0;
                posRight = inputPadding;
            }
            var widthToSet = dateInput.closest(".form-group")[0].getBoundingClientRect().width * 2;
            if (dateInput.attr("data-range-type") == "start") {
                $(calendar).closest(".responsive-calendar-wrap").css("top", topPosition).css("width", widthToSet + inputPadding * 2);
            } else {
                if (dateInput.attr("data-range-type") == "end") {
                    $(calendar).closest(".responsive-calendar-wrap").css("top", topPosition).css("width", widthToSet + inputPadding * 2).css("right", posRight + "px");
                }
            }
        }
        $(calendar).closest(".responsive-calendar-wrap").css("top", topPosition);
    }
    $(window).resize(function() {
        var activeCal = $(".responsive-calendar-wrap.active");
        var inputReference = activeCal.attr("data-date-input");
        if (activeCal.length) {
            calendarPosition("#" + activeCal.attr("id"), $(inputReference));
        }
    });
    function updateDate(calIn, calOut, currentDate, newClass, dateInput) {
        var day;
        var month;
        var year;
        var inputYear;
        if (currentDate) {
            day = currentDate.date();
            month = currentDate.month() + 1;
            year = currentDate.year();
            inputYear = year.toString();
            calIn.find("[data-day=" + day + "][data-month=" + month + "][data-year=" + year + "]").addClass(newClass);
            calOut.find("[data-day=" + day + "][data-month=" + month + "][data-year=" + year + "]").addClass(newClass);
            if (dateInput.attr("data-short-year")) {
                inputYear = inputYear.substring(2, 4);
            }
            dateInput.val(fillZeros(day.toString(), 2, "left") + "/" + fillZeros(month.toString(), 2, "left") + "/" + inputYear).change();
        }
    }
    function resetRanges(cal) {
        cal.find(".range-start").removeClass("range-start");
        cal.find(".range-end").removeClass("range-end");
        cal.find(".range-in").removeClass("range-in");
    }
    function paintRange(cal) {
        resetRanges(cal);
        if (cal.attr("data-range-start") && cal.attr("data-range-start") != "" && cal.attr("data-range-end") && cal.attr("data-range-end") != "") {
            var rangeStart = parseInt(cal.attr("data-range-start"));
            var rangeEnd = parseInt(cal.attr("data-range-end"));
            var dateStart = moment(rangeStart);
            var dateEnd = moment(rangeEnd);
            cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]").addClass("range-start");
            cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
            while (!dateStart.isAfter(dateEnd)) {
                var currentDay = cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]");
                if (!currentDay.hasClass("range-start") && !currentDay.hasClass("range-end")) {
                    currentDay.addClass("range-in");
                }
                dateStart.add(1, "day");
            }
        } else {
            if (cal.attr("data-range-start") && cal.attr("data-range-start") != "") {
                var rangeStart = parseInt(cal.attr("data-range-start"));
                var dateStart = moment(rangeStart);
                cal.find("[data-day=" + dateStart.date() + "][data-month=" + (dateStart.month() + 1) + "][data-year=" + dateStart.year() + "]").addClass("range-start");
            } else {
                var rangeEnd = parseInt(cal.attr("data-range-end"));
                var dateEnd = moment(rangeEnd);
                cal.find("[data-day=" + dateEnd.date() + "][data-month=" + (dateEnd.month() + 1) + "][data-year=" + dateEnd.year() + "]").addClass("range-end");
            }
        }
    }
    function fillZeros(val, len, dir) {
        if (dir == "left") {
            while (val.length < len) {
                val = "0" + val;
            }
        } else {
            while (val.length < len) {
                val = val + "0";
            }
        }
        return val;
    }
    function paintBlackOuts() {
        var blacks = getBlackOuts();
        for (var i = 0; i < blacks.length; i++) {
            var ab = blacks[i].split("-");
            var month = ab[1];
            $("[data-day=" + ab[2] + "][data-month=" + month + "][data-year=" + ab[0] + "]").parent().removeClass("future");
            $("[data-day=" + ab[2] + "][data-month=" + month + "][data-year=" + ab[0] + "]").parent().addClass("past");
        }
    }
    function getBlackOuts() {
        if (typeof dateString != "undefined") {
            var aDates = dateString.split("*");
        } else {
            var aDates = "";
        }
        return aDates;
    }
    function validateBlackOuts(date1, date2) {
        var blacks = getBlackOuts();
        var blackDay = null;
        var black = null;
        var blackDate = null;
        for (var i = 0; i < blacks.length; i++) {
            blackDay = blacks[i].split("-");
            black = moment(blacks[i]);
            blackDate = moment({
                year: parseInt(blackDay[0]),
                month: parseInt(blackDay[1]) - 1,
                day: parseInt(blackDay[2])
            });
            if (blackDate.isBetween(date1, date2) || blackDate.isSame(date1) || blackDate.isSame(date2)) {
                return false;
            }
        }
        return true;
    }
});

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

(function(factory) {
    "use strict";
    if (typeof define === "function" && define.amd) {
        define([ "jquery" ], factory);
    } else if (typeof exports !== "undefined") {
        module.exports = factory(require("jquery"));
    } else {
        factory(jQuery);
    }
})(function($) {
    "use strict";
    var Slick = window.Slick || {};
    Slick = function() {
        var instanceUid = 0;
        function Slick(element, settings) {
            var _ = this, dataSettings;
            _.defaults = {
                accessibility: true,
                adaptiveHeight: false,
                appendArrows: $(element),
                appendDots: $(element),
                arrows: true,
                asNavFor: null,
                prevArrow: '<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',
                nextArrow: '<button class="slick-next" aria-label="Next" type="button">Next</button>',
                autoplay: false,
                autoplaySpeed: 3e3,
                centerMode: false,
                centerPadding: "50px",
                cssEase: "ease",
                customPaging: function customPaging(slider, i) {
                    return $('<button type="button" />').text(i + 1);
                },
                dots: false,
                dotsClass: "slick-dots",
                draggable: true,
                easing: "linear",
                edgeFriction: .35,
                fade: false,
                focusOnSelect: false,
                focusOnChange: false,
                infinite: true,
                initialSlide: 0,
                lazyLoad: "ondemand",
                mobileFirst: false,
                pauseOnHover: true,
                pauseOnFocus: true,
                pauseOnDotsHover: false,
                respondTo: "window",
                responsive: null,
                rows: 1,
                rtl: false,
                slide: "",
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: true,
                swipeToSlide: false,
                touchMove: true,
                touchThreshold: 5,
                useCSS: true,
                useTransform: true,
                variableWidth: false,
                vertical: false,
                verticalSwiping: false,
                waitForAnimate: true,
                zIndex: 1e3
            };
            _.initials = {
                animating: false,
                dragging: false,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                scrolling: false,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: false,
                slideOffset: 0,
                swipeLeft: null,
                swiping: false,
                $list: null,
                touchObject: {},
                transformsEnabled: false,
                unslicked: false
            };
            $.extend(_, _.initials);
            _.activeBreakpoint = null;
            _.animType = null;
            _.animProp = null;
            _.breakpoints = [];
            _.breakpointSettings = [];
            _.cssTransitions = false;
            _.focussed = false;
            _.interrupted = false;
            _.hidden = "hidden";
            _.paused = true;
            _.positionProp = null;
            _.respondTo = null;
            _.rowCount = 1;
            _.shouldClick = true;
            _.$slider = $(element);
            _.$slidesCache = null;
            _.transformType = null;
            _.transitionType = null;
            _.visibilityChange = "visibilitychange";
            _.windowWidth = 0;
            _.windowTimer = null;
            dataSettings = $(element).data("slick") || {};
            _.options = $.extend({}, _.defaults, settings, dataSettings);
            _.currentSlide = _.options.initialSlide;
            _.originalSettings = _.options;
            if (typeof document.mozHidden !== "undefined") {
                _.hidden = "mozHidden";
                _.visibilityChange = "mozvisibilitychange";
            } else if (typeof document.webkitHidden !== "undefined") {
                _.hidden = "webkitHidden";
                _.visibilityChange = "webkitvisibilitychange";
            }
            _.autoPlay = $.proxy(_.autoPlay, _);
            _.autoPlayClear = $.proxy(_.autoPlayClear, _);
            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);
            _.changeSlide = $.proxy(_.changeSlide, _);
            _.clickHandler = $.proxy(_.clickHandler, _);
            _.selectHandler = $.proxy(_.selectHandler, _);
            _.setPosition = $.proxy(_.setPosition, _);
            _.swipeHandler = $.proxy(_.swipeHandler, _);
            _.dragHandler = $.proxy(_.dragHandler, _);
            _.keyHandler = $.proxy(_.keyHandler, _);
            _.instanceUid = instanceUid++;
            _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;
            _.registerBreakpoints();
            _.init(true);
        }
        return Slick;
    }();
    Slick.prototype.activateADA = function() {
        var _ = this;
        _.$slideTrack.find(".slick-active").attr({
            "aria-hidden": "false"
        }).find("a, input, button, select").attr({
            tabindex: "0"
        });
    };
    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {
        var _ = this;
        if (typeof index === "boolean") {
            addBefore = index;
            index = null;
        } else if (index < 0 || index >= _.slideCount) {
            return false;
        }
        _.unload();
        if (typeof index === "number") {
            if (index === 0 && _.$slides.length === 0) {
                $(markup).appendTo(_.$slideTrack);
            } else if (addBefore) {
                $(markup).insertBefore(_.$slides.eq(index));
            } else {
                $(markup).insertAfter(_.$slides.eq(index));
            }
        } else {
            if (addBefore === true) {
                $(markup).prependTo(_.$slideTrack);
            } else {
                $(markup).appendTo(_.$slideTrack);
            }
        }
        _.$slides = _.$slideTrack.children(this.options.slide);
        _.$slideTrack.children(this.options.slide).detach();
        _.$slideTrack.append(_.$slides);
        _.$slides.each(function(index, element) {
            $(element).attr("data-slick-index", index);
        });
        _.$slidesCache = _.$slides;
        _.reinit();
    };
    Slick.prototype.animateHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.animate({
                height: targetHeight
            }, _.options.speed);
        }
    };
    Slick.prototype.animateSlide = function(targetLeft, callback) {
        var animProps = {}, _ = this;
        _.animateHeight();
        if (_.options.rtl === true && _.options.vertical === false) {
            targetLeft = -targetLeft;
        }
        if (_.transformsEnabled === false) {
            if (_.options.vertical === false) {
                _.$slideTrack.animate({
                    left: targetLeft
                }, _.options.speed, _.options.easing, callback);
            } else {
                _.$slideTrack.animate({
                    top: targetLeft
                }, _.options.speed, _.options.easing, callback);
            }
        } else {
            if (_.cssTransitions === false) {
                if (_.options.rtl === true) {
                    _.currentLeft = -_.currentLeft;
                }
                $({
                    animStart: _.currentLeft
                }).animate({
                    animStart: targetLeft
                }, {
                    duration: _.options.speed,
                    easing: _.options.easing,
                    step: function step(now) {
                        now = Math.ceil(now);
                        if (_.options.vertical === false) {
                            animProps[_.animType] = "translate(" + now + "px, 0px)";
                            _.$slideTrack.css(animProps);
                        } else {
                            animProps[_.animType] = "translate(0px," + now + "px)";
                            _.$slideTrack.css(animProps);
                        }
                    },
                    complete: function complete() {
                        if (callback) {
                            callback.call();
                        }
                    }
                });
            } else {
                _.applyTransition();
                targetLeft = Math.ceil(targetLeft);
                if (_.options.vertical === false) {
                    animProps[_.animType] = "translate3d(" + targetLeft + "px, 0px, 0px)";
                } else {
                    animProps[_.animType] = "translate3d(0px," + targetLeft + "px, 0px)";
                }
                _.$slideTrack.css(animProps);
                if (callback) {
                    setTimeout(function() {
                        _.disableTransition();
                        callback.call();
                    }, _.options.speed);
                }
            }
        }
    };
    Slick.prototype.getNavTarget = function() {
        var _ = this, asNavFor = _.options.asNavFor;
        if (asNavFor && asNavFor !== null) {
            asNavFor = $(asNavFor).not(_.$slider);
        }
        return asNavFor;
    };
    Slick.prototype.asNavFor = function(index) {
        var _ = this, asNavFor = _.getNavTarget();
        if (asNavFor !== null && (typeof asNavFor === "undefined" ? "undefined" : _typeof(asNavFor)) === "object") {
            asNavFor.each(function() {
                var target = $(this).slick("getSlick");
                if (!target.unslicked) {
                    target.slideHandler(index, true);
                }
            });
        }
    };
    Slick.prototype.applyTransition = function(slide) {
        var _ = this, transition = {};
        if (_.options.fade === false) {
            transition[_.transitionType] = _.transformType + " " + _.options.speed + "ms " + _.options.cssEase;
        } else {
            transition[_.transitionType] = "opacity " + _.options.speed + "ms " + _.options.cssEase;
        }
        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }
    };
    Slick.prototype.autoPlay = function() {
        var _ = this;
        _.autoPlayClear();
        if (_.slideCount > _.options.slidesToShow) {
            _.autoPlayTimer = setInterval(_.autoPlayIterator, _.options.autoplaySpeed);
        }
    };
    Slick.prototype.autoPlayClear = function() {
        var _ = this;
        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }
    };
    Slick.prototype.autoPlayIterator = function() {
        var _ = this, slideTo = _.currentSlide + _.options.slidesToScroll;
        if (!_.paused && !_.interrupted && !_.focussed) {
            if (_.options.infinite === false) {
                if (_.direction === 1 && _.currentSlide + 1 === _.slideCount - 1) {
                    _.direction = 0;
                } else if (_.direction === 0) {
                    slideTo = _.currentSlide - _.options.slidesToScroll;
                    if (_.currentSlide - 1 === 0) {
                        _.direction = 1;
                    }
                }
            }
            _.slideHandler(slideTo);
        }
    };
    Slick.prototype.buildArrows = function() {
        var _ = this;
        if (_.options.arrows === true) {
            _.$prevArrow = $(_.options.prevArrow).addClass("slick-arrow");
            _.$nextArrow = $(_.options.nextArrow).addClass("slick-arrow");
            if (_.slideCount > _.options.slidesToShow) {
                _.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");
                _.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");
                if (_.htmlExpr.test(_.options.prevArrow)) {
                    _.$prevArrow.prependTo(_.options.appendArrows);
                }
                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.appendTo(_.options.appendArrows);
                }
                if (_.options.infinite !== true) {
                    _.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true");
                }
            } else {
                _.$prevArrow.add(_.$nextArrow).addClass("slick-hidden").attr({
                    "aria-disabled": "true",
                    tabindex: "-1"
                });
            }
        }
    };
    Slick.prototype.buildDots = function() {
        var _ = this, i, dot;
        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            _.$slider.addClass("slick-dotted");
            dot = $("<ul />").addClass(_.options.dotsClass);
            for (i = 0; i <= _.getDotCount(); i += 1) {
                dot.append($("<li />").append(_.options.customPaging.call(this, _, i)));
            }
            _.$dots = dot.appendTo(_.options.appendDots);
            _.$dots.find("li").first().addClass("slick-active");
        }
    };
    Slick.prototype.buildOut = function() {
        var _ = this;
        _.$slides = _.$slider.children(_.options.slide + ":not(.slick-cloned)").addClass("slick-slide");
        _.slideCount = _.$slides.length;
        _.$slides.each(function(index, element) {
            $(element).attr("data-slick-index", index).data("originalStyling", $(element).attr("style") || "");
        });
        _.$slider.addClass("slick-slider");
        _.$slideTrack = _.slideCount === 0 ? $('<div class="slick-track"/>').appendTo(_.$slider) : _.$slides.wrapAll('<div class="slick-track"/>').parent();
        _.$list = _.$slideTrack.wrap('<div class="slick-list"/>').parent();
        _.$slideTrack.css("opacity", 0);
        if (_.options.centerMode === true || _.options.swipeToSlide === true) {
            _.options.slidesToScroll = 1;
        }
        $("img[data-lazy]", _.$slider).not("[src]").addClass("slick-loading");
        _.setupInfinite();
        _.buildArrows();
        _.buildDots();
        _.updateDots();
        _.setSlideClasses(typeof _.currentSlide === "number" ? _.currentSlide : 0);
        if (_.options.draggable === true) {
            _.$list.addClass("draggable");
        }
    };
    Slick.prototype.buildRows = function() {
        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides, slidesPerSection;
        newSlides = document.createDocumentFragment();
        originalSlides = _.$slider.children();
        if (_.options.rows > 0) {
            slidesPerSection = _.options.slidesPerRow * _.options.rows;
            numOfSlides = Math.ceil(originalSlides.length / slidesPerSection);
            for (a = 0; a < numOfSlides; a++) {
                var slide = document.createElement("div");
                for (b = 0; b < _.options.rows; b++) {
                    var row = document.createElement("div");
                    for (c = 0; c < _.options.slidesPerRow; c++) {
                        var target = a * slidesPerSection + (b * _.options.slidesPerRow + c);
                        if (originalSlides.get(target)) {
                            row.appendChild(originalSlides.get(target));
                        }
                    }
                    slide.appendChild(row);
                }
                newSlides.appendChild(slide);
            }
            _.$slider.empty().append(newSlides);
            _.$slider.children().children().children().css({
                width: 100 / _.options.slidesPerRow + "%",
                display: "inline-block"
            });
        }
    };
    Slick.prototype.checkResponsive = function(initial, forceUpdate) {
        var _ = this, breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
        var sliderWidth = _.$slider.width();
        var windowWidth = window.innerWidth || $(window).width();
        if (_.respondTo === "window") {
            respondToWidth = windowWidth;
        } else if (_.respondTo === "slider") {
            respondToWidth = sliderWidth;
        } else if (_.respondTo === "min") {
            respondToWidth = Math.min(windowWidth, sliderWidth);
        }
        if (_.options.responsive && _.options.responsive.length && _.options.responsive !== null) {
            targetBreakpoint = null;
            for (breakpoint in _.breakpoints) {
                if (_.breakpoints.hasOwnProperty(breakpoint)) {
                    if (_.originalSettings.mobileFirst === false) {
                        if (respondToWidth < _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    } else {
                        if (respondToWidth > _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    }
                }
            }
            if (targetBreakpoint !== null) {
                if (_.activeBreakpoint !== null) {
                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                        _.activeBreakpoint = targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === "unslick") {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings, _.breakpointSettings[targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    _.activeBreakpoint = targetBreakpoint;
                    if (_.breakpointSettings[targetBreakpoint] === "unslick") {
                        _.unslick(targetBreakpoint);
                    } else {
                        _.options = $.extend({}, _.originalSettings, _.breakpointSettings[targetBreakpoint]);
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                    }
                    triggerBreakpoint = targetBreakpoint;
                }
            } else {
                if (_.activeBreakpoint !== null) {
                    _.activeBreakpoint = null;
                    _.options = _.originalSettings;
                    if (initial === true) {
                        _.currentSlide = _.options.initialSlide;
                    }
                    _.refresh(initial);
                    triggerBreakpoint = targetBreakpoint;
                }
            }
            if (!initial && triggerBreakpoint !== false) {
                _.$slider.trigger("breakpoint", [ _, triggerBreakpoint ]);
            }
        }
    };
    Slick.prototype.changeSlide = function(event, dontAnimate) {
        var _ = this, $target = $(event.currentTarget), indexOffset, slideOffset, unevenOffset;
        if ($target.is("a")) {
            event.preventDefault();
        }
        if (!$target.is("li")) {
            $target = $target.closest("li");
        }
        unevenOffset = _.slideCount % _.options.slidesToScroll !== 0;
        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;
        switch (event.data.message) {
          case "previous":
            slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
            if (_.slideCount > _.options.slidesToShow) {
                _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
            }
            break;

          case "next":
            slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
            if (_.slideCount > _.options.slidesToShow) {
                _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
            }
            break;

          case "index":
            var index = event.data.index === 0 ? 0 : event.data.index || $target.index() * _.options.slidesToScroll;
            _.slideHandler(_.checkNavigable(index), false, dontAnimate);
            $target.children().trigger("focus");
            break;

          default:
            return;
        }
    };
    Slick.prototype.checkNavigable = function(index) {
        var _ = this, navigables, prevNavigable;
        navigables = _.getNavigableIndexes();
        prevNavigable = 0;
        if (index > navigables[navigables.length - 1]) {
            index = navigables[navigables.length - 1];
        } else {
            for (var n in navigables) {
                if (index < navigables[n]) {
                    index = prevNavigable;
                    break;
                }
                prevNavigable = navigables[n];
            }
        }
        return index;
    };
    Slick.prototype.cleanUpEvents = function() {
        var _ = this;
        if (_.options.dots && _.$dots !== null) {
            $("li", _.$dots).off("click.slick", _.changeSlide).off("mouseenter.slick", $.proxy(_.interrupt, _, true)).off("mouseleave.slick", $.proxy(_.interrupt, _, false));
            if (_.options.accessibility === true) {
                _.$dots.off("keydown.slick", _.keyHandler);
            }
        }
        _.$slider.off("focus.slick blur.slick");
        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow && _.$prevArrow.off("click.slick", _.changeSlide);
            _.$nextArrow && _.$nextArrow.off("click.slick", _.changeSlide);
            if (_.options.accessibility === true) {
                _.$prevArrow && _.$prevArrow.off("keydown.slick", _.keyHandler);
                _.$nextArrow && _.$nextArrow.off("keydown.slick", _.keyHandler);
            }
        }
        _.$list.off("touchstart.slick mousedown.slick", _.swipeHandler);
        _.$list.off("touchmove.slick mousemove.slick", _.swipeHandler);
        _.$list.off("touchend.slick mouseup.slick", _.swipeHandler);
        _.$list.off("touchcancel.slick mouseleave.slick", _.swipeHandler);
        _.$list.off("click.slick", _.clickHandler);
        $(document).off(_.visibilityChange, _.visibility);
        _.cleanUpSlideEvents();
        if (_.options.accessibility === true) {
            _.$list.off("keydown.slick", _.keyHandler);
        }
        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().off("click.slick", _.selectHandler);
        }
        $(window).off("orientationchange.slick.slick-" + _.instanceUid, _.orientationChange);
        $(window).off("resize.slick.slick-" + _.instanceUid, _.resize);
        $("[draggable!=true]", _.$slideTrack).off("dragstart", _.preventDefault);
        $(window).off("load.slick.slick-" + _.instanceUid, _.setPosition);
    };
    Slick.prototype.cleanUpSlideEvents = function() {
        var _ = this;
        _.$list.off("mouseenter.slick", $.proxy(_.interrupt, _, true));
        _.$list.off("mouseleave.slick", $.proxy(_.interrupt, _, false));
    };
    Slick.prototype.cleanUpRows = function() {
        var _ = this, originalSlides;
        if (_.options.rows > 0) {
            originalSlides = _.$slides.children().children();
            originalSlides.removeAttr("style");
            _.$slider.empty().append(originalSlides);
        }
    };
    Slick.prototype.clickHandler = function(event) {
        var _ = this;
        if (_.shouldClick === false) {
            event.stopImmediatePropagation();
            event.stopPropagation();
            event.preventDefault();
        }
    };
    Slick.prototype.destroy = function(refresh) {
        var _ = this;
        _.autoPlayClear();
        _.touchObject = {};
        _.cleanUpEvents();
        $(".slick-cloned", _.$slider).detach();
        if (_.$dots) {
            _.$dots.remove();
        }
        if (_.$prevArrow && _.$prevArrow.length) {
            _.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", "");
            if (_.htmlExpr.test(_.options.prevArrow)) {
                _.$prevArrow.remove();
            }
        }
        if (_.$nextArrow && _.$nextArrow.length) {
            _.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", "");
            if (_.htmlExpr.test(_.options.nextArrow)) {
                _.$nextArrow.remove();
            }
        }
        if (_.$slides) {
            _.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function() {
                $(this).attr("style", $(this).data("originalStyling"));
            });
            _.$slideTrack.children(this.options.slide).detach();
            _.$slideTrack.detach();
            _.$list.detach();
            _.$slider.append(_.$slides);
        }
        _.cleanUpRows();
        _.$slider.removeClass("slick-slider");
        _.$slider.removeClass("slick-initialized");
        _.$slider.removeClass("slick-dotted");
        _.unslicked = true;
        if (!refresh) {
            _.$slider.trigger("destroy", [ _ ]);
        }
    };
    Slick.prototype.disableTransition = function(slide) {
        var _ = this, transition = {};
        transition[_.transitionType] = "";
        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }
    };
    Slick.prototype.fadeSlide = function(slideIndex, callback) {
        var _ = this;
        if (_.cssTransitions === false) {
            _.$slides.eq(slideIndex).css({
                zIndex: _.options.zIndex
            });
            _.$slides.eq(slideIndex).animate({
                opacity: 1
            }, _.options.speed, _.options.easing, callback);
        } else {
            _.applyTransition(slideIndex);
            _.$slides.eq(slideIndex).css({
                opacity: 1,
                zIndex: _.options.zIndex
            });
            if (callback) {
                setTimeout(function() {
                    _.disableTransition(slideIndex);
                    callback.call();
                }, _.options.speed);
            }
        }
    };
    Slick.prototype.fadeSlideOut = function(slideIndex) {
        var _ = this;
        if (_.cssTransitions === false) {
            _.$slides.eq(slideIndex).animate({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            }, _.options.speed, _.options.easing);
        } else {
            _.applyTransition(slideIndex);
            _.$slides.eq(slideIndex).css({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            });
        }
    };
    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {
        var _ = this;
        if (filter !== null) {
            _.$slidesCache = _.$slides;
            _.unload();
            _.$slideTrack.children(this.options.slide).detach();
            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);
            _.reinit();
        }
    };
    Slick.prototype.focusHandler = function() {
        var _ = this;
        _.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick", "*", function(event) {
            event.stopImmediatePropagation();
            var $sf = $(this);
            setTimeout(function() {
                if (_.options.pauseOnFocus) {
                    _.focussed = $sf.is(":focus");
                    _.autoPlay();
                }
            }, 0);
        });
    };
    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {
        var _ = this;
        return _.currentSlide;
    };
    Slick.prototype.getDotCount = function() {
        var _ = this;
        var breakPoint = 0;
        var counter = 0;
        var pagerQty = 0;
        if (_.options.infinite === true) {
            if (_.slideCount <= _.options.slidesToShow) {
                ++pagerQty;
            } else {
                while (breakPoint < _.slideCount) {
                    ++pagerQty;
                    breakPoint = counter + _.options.slidesToScroll;
                    counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
                }
            }
        } else if (_.options.centerMode === true) {
            pagerQty = _.slideCount;
        } else if (!_.options.asNavFor) {
            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);
        } else {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        }
        return pagerQty - 1;
    };
    Slick.prototype.getLeft = function(slideIndex) {
        var _ = this, targetLeft, verticalHeight, verticalOffset = 0, targetSlide, coef;
        _.slideOffset = 0;
        verticalHeight = _.$slides.first().outerHeight(true);
        if (_.options.infinite === true) {
            if (_.slideCount > _.options.slidesToShow) {
                _.slideOffset = _.slideWidth * _.options.slidesToShow * -1;
                coef = -1;
                if (_.options.vertical === true && _.options.centerMode === true) {
                    if (_.options.slidesToShow === 2) {
                        coef = -1.5;
                    } else if (_.options.slidesToShow === 1) {
                        coef = -2;
                    }
                }
                verticalOffset = verticalHeight * _.options.slidesToShow * coef;
            }
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                    if (slideIndex > _.slideCount) {
                        _.slideOffset = (_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth * -1;
                        verticalOffset = (_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight * -1;
                    } else {
                        _.slideOffset = _.slideCount % _.options.slidesToScroll * _.slideWidth * -1;
                        verticalOffset = _.slideCount % _.options.slidesToScroll * verticalHeight * -1;
                    }
                }
            }
        } else {
            if (slideIndex + _.options.slidesToShow > _.slideCount) {
                _.slideOffset = (slideIndex + _.options.slidesToShow - _.slideCount) * _.slideWidth;
                verticalOffset = (slideIndex + _.options.slidesToShow - _.slideCount) * verticalHeight;
            }
        }
        if (_.slideCount <= _.options.slidesToShow) {
            _.slideOffset = 0;
            verticalOffset = 0;
        }
        if (_.options.centerMode === true && _.slideCount <= _.options.slidesToShow) {
            _.slideOffset = _.slideWidth * Math.floor(_.options.slidesToShow) / 2 - _.slideWidth * _.slideCount / 2;
        } else if (_.options.centerMode === true && _.options.infinite === true) {
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
        } else if (_.options.centerMode === true) {
            _.slideOffset = 0;
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
        }
        if (_.options.vertical === false) {
            targetLeft = slideIndex * _.slideWidth * -1 + _.slideOffset;
        } else {
            targetLeft = slideIndex * verticalHeight * -1 + verticalOffset;
        }
        if (_.options.variableWidth === true) {
            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                targetSlide = _.$slideTrack.children(".slick-slide").eq(slideIndex);
            } else {
                targetSlide = _.$slideTrack.children(".slick-slide").eq(slideIndex + _.options.slidesToShow);
            }
            if (_.options.rtl === true) {
                if (targetSlide[0]) {
                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                } else {
                    targetLeft = 0;
                }
            } else {
                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
            }
            if (_.options.centerMode === true) {
                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children(".slick-slide").eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children(".slick-slide").eq(slideIndex + _.options.slidesToShow + 1);
                }
                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft = 0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }
                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
            }
        }
        return targetLeft;
    };
    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {
        var _ = this;
        return _.options[option];
    };
    Slick.prototype.getNavigableIndexes = function() {
        var _ = this, breakPoint = 0, counter = 0, indexes = [], max;
        if (_.options.infinite === false) {
            max = _.slideCount;
        } else {
            breakPoint = _.options.slidesToScroll * -1;
            counter = _.options.slidesToScroll * -1;
            max = _.slideCount * 2;
        }
        while (breakPoint < max) {
            indexes.push(breakPoint);
            breakPoint = counter + _.options.slidesToScroll;
            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
        }
        return indexes;
    };
    Slick.prototype.getSlick = function() {
        return this;
    };
    Slick.prototype.getSlideCount = function() {
        var _ = this, slidesTraversed, swipedSlide, centerOffset;
        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;
        if (_.options.swipeToSlide === true) {
            _.$slideTrack.find(".slick-slide").each(function(index, slide) {
                if (slide.offsetLeft - centerOffset + $(slide).outerWidth() / 2 > _.swipeLeft * -1) {
                    swipedSlide = slide;
                    return false;
                }
            });
            slidesTraversed = Math.abs($(swipedSlide).attr("data-slick-index") - _.currentSlide) || 1;
            return slidesTraversed;
        } else {
            return _.options.slidesToScroll;
        }
    };
    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {
        var _ = this;
        _.changeSlide({
            data: {
                message: "index",
                index: parseInt(slide)
            }
        }, dontAnimate);
    };
    Slick.prototype.init = function(creation) {
        var _ = this;
        if (!$(_.$slider).hasClass("slick-initialized")) {
            $(_.$slider).addClass("slick-initialized");
            _.buildRows();
            _.buildOut();
            _.setProps();
            _.startLoad();
            _.loadSlider();
            _.initializeEvents();
            _.updateArrows();
            _.updateDots();
            _.checkResponsive(true);
            _.focusHandler();
        }
        if (creation) {
            _.$slider.trigger("init", [ _ ]);
        }
        if (_.options.accessibility === true) {
            _.initADA();
        }
        if (_.options.autoplay) {
            _.paused = false;
            _.autoPlay();
        }
    };
    Slick.prototype.initADA = function() {
        var _ = this, numDotGroups = Math.ceil(_.slideCount / _.options.slidesToShow), tabControlIndexes = _.getNavigableIndexes().filter(function(val) {
            return val >= 0 && val < _.slideCount;
        });
        _.$slides.add(_.$slideTrack.find(".slick-cloned")).attr({
            "aria-hidden": "true",
            tabindex: "-1"
        }).find("a, input, button, select").attr({
            tabindex: "-1"
        });
        if (_.$dots !== null) {
            _.$slides.not(_.$slideTrack.find(".slick-cloned")).each(function(i) {
                var slideControlIndex = tabControlIndexes.indexOf(i);
                $(this).attr({
                    role: "tabpanel",
                    id: "slick-slide" + _.instanceUid + i,
                    tabindex: -1
                });
                if (slideControlIndex !== -1) {
                    var ariaButtonControl = "slick-slide-control" + _.instanceUid + slideControlIndex;
                    if ($("#" + ariaButtonControl).length) {
                        $(this).attr({
                            "aria-describedby": ariaButtonControl
                        });
                    }
                }
            });
            _.$dots.attr("role", "tablist").find("li").each(function(i) {
                var mappedSlideIndex = tabControlIndexes[i];
                $(this).attr({
                    role: "presentation"
                });
                $(this).find("button").first().attr({
                    role: "tab",
                    id: "slick-slide-control" + _.instanceUid + i,
                    "aria-controls": "slick-slide" + _.instanceUid + mappedSlideIndex,
                    "aria-label": i + 1 + " of " + numDotGroups,
                    "aria-selected": null,
                    tabindex: "-1"
                });
            }).eq(_.currentSlide).find("button").attr({
                "aria-selected": "true",
                tabindex: "0"
            }).end();
        }
        for (var i = _.currentSlide, max = i + _.options.slidesToShow; i < max; i++) {
            if (_.options.focusOnChange) {
                _.$slides.eq(i).attr({
                    tabindex: "0"
                });
            } else {
                _.$slides.eq(i).removeAttr("tabindex");
            }
        }
        _.activateADA();
    };
    Slick.prototype.initArrowEvents = function() {
        var _ = this;
        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow.off("click.slick").on("click.slick", {
                message: "previous"
            }, _.changeSlide);
            _.$nextArrow.off("click.slick").on("click.slick", {
                message: "next"
            }, _.changeSlide);
            if (_.options.accessibility === true) {
                _.$prevArrow.on("keydown.slick", _.keyHandler);
                _.$nextArrow.on("keydown.slick", _.keyHandler);
            }
        }
    };
    Slick.prototype.initDotEvents = function() {
        var _ = this;
        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            $("li", _.$dots).on("click.slick", {
                message: "index"
            }, _.changeSlide);
            if (_.options.accessibility === true) {
                _.$dots.on("keydown.slick", _.keyHandler);
            }
        }
        if (_.options.dots === true && _.options.pauseOnDotsHover === true && _.slideCount > _.options.slidesToShow) {
            $("li", _.$dots).on("mouseenter.slick", $.proxy(_.interrupt, _, true)).on("mouseleave.slick", $.proxy(_.interrupt, _, false));
        }
    };
    Slick.prototype.initSlideEvents = function() {
        var _ = this;
        if (_.options.pauseOnHover) {
            _.$list.on("mouseenter.slick", $.proxy(_.interrupt, _, true));
            _.$list.on("mouseleave.slick", $.proxy(_.interrupt, _, false));
        }
    };
    Slick.prototype.initializeEvents = function() {
        var _ = this;
        _.initArrowEvents();
        _.initDotEvents();
        _.initSlideEvents();
        _.$list.on("touchstart.slick mousedown.slick", {
            action: "start"
        }, _.swipeHandler);
        _.$list.on("touchmove.slick mousemove.slick", {
            action: "move"
        }, _.swipeHandler);
        _.$list.on("touchend.slick mouseup.slick", {
            action: "end"
        }, _.swipeHandler);
        _.$list.on("touchcancel.slick mouseleave.slick", {
            action: "end"
        }, _.swipeHandler);
        _.$list.on("click.slick", _.clickHandler);
        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));
        if (_.options.accessibility === true) {
            _.$list.on("keydown.slick", _.keyHandler);
        }
        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on("click.slick", _.selectHandler);
        }
        $(window).on("orientationchange.slick.slick-" + _.instanceUid, $.proxy(_.orientationChange, _));
        $(window).on("resize.slick.slick-" + _.instanceUid, $.proxy(_.resize, _));
        $("[draggable!=true]", _.$slideTrack).on("dragstart", _.preventDefault);
        $(window).on("load.slick.slick-" + _.instanceUid, _.setPosition);
        $(_.setPosition);
    };
    Slick.prototype.initUI = function() {
        var _ = this;
        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow.show();
            _.$nextArrow.show();
        }
        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            _.$dots.show();
        }
    };
    Slick.prototype.keyHandler = function(event) {
        var _ = this;
        if (!event.target.tagName.match("TEXTAREA|INPUT|SELECT")) {
            if (event.keyCode === 37 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? "next" : "previous"
                    }
                });
            } else if (event.keyCode === 39 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? "previous" : "next"
                    }
                });
            }
        }
    };
    Slick.prototype.lazyLoad = function() {
        var _ = this, loadRange, cloneRange, rangeStart, rangeEnd;
        function loadImages(imagesScope) {
            $("img[data-lazy]", imagesScope).each(function() {
                var image = $(this), imageSource = $(this).attr("data-lazy"), imageSrcSet = $(this).attr("data-srcset"), imageSizes = $(this).attr("data-sizes") || _.$slider.attr("data-sizes"), imageToLoad = document.createElement("img");
                imageToLoad.onload = function() {
                    image.animate({
                        opacity: 0
                    }, 100, function() {
                        if (imageSrcSet) {
                            image.attr("srcset", imageSrcSet);
                            if (imageSizes) {
                                image.attr("sizes", imageSizes);
                            }
                        }
                        image.attr("src", imageSource).animate({
                            opacity: 1
                        }, 200, function() {
                            image.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading");
                        });
                        _.$slider.trigger("lazyLoaded", [ _, image, imageSource ]);
                    });
                };
                imageToLoad.onerror = function() {
                    image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");
                    _.$slider.trigger("lazyLoadError", [ _, image, imageSource ]);
                };
                imageToLoad.src = imageSource;
            });
        }
        if (_.options.centerMode === true) {
            if (_.options.infinite === true) {
                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                rangeEnd = rangeStart + _.options.slidesToShow + 2;
            } else {
                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
            }
        } else {
            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);
            if (_.options.fade === true) {
                if (rangeStart > 0) rangeStart--;
                if (rangeEnd <= _.slideCount) rangeEnd++;
            }
        }
        loadRange = _.$slider.find(".slick-slide").slice(rangeStart, rangeEnd);
        if (_.options.lazyLoad === "anticipated") {
            var prevSlide = rangeStart - 1, nextSlide = rangeEnd, $slides = _.$slider.find(".slick-slide");
            for (var i = 0; i < _.options.slidesToScroll; i++) {
                if (prevSlide < 0) prevSlide = _.slideCount - 1;
                loadRange = loadRange.add($slides.eq(prevSlide));
                loadRange = loadRange.add($slides.eq(nextSlide));
                prevSlide--;
                nextSlide++;
            }
        }
        loadImages(loadRange);
        if (_.slideCount <= _.options.slidesToShow) {
            cloneRange = _.$slider.find(".slick-slide");
            loadImages(cloneRange);
        } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
            cloneRange = _.$slider.find(".slick-cloned").slice(0, _.options.slidesToShow);
            loadImages(cloneRange);
        } else if (_.currentSlide === 0) {
            cloneRange = _.$slider.find(".slick-cloned").slice(_.options.slidesToShow * -1);
            loadImages(cloneRange);
        }
    };
    Slick.prototype.loadSlider = function() {
        var _ = this;
        _.setPosition();
        _.$slideTrack.css({
            opacity: 1
        });
        _.$slider.removeClass("slick-loading");
        _.initUI();
        if (_.options.lazyLoad === "progressive") {
            _.progressiveLazyLoad();
        }
    };
    Slick.prototype.next = Slick.prototype.slickNext = function() {
        var _ = this;
        _.changeSlide({
            data: {
                message: "next"
            }
        });
    };
    Slick.prototype.orientationChange = function() {
        var _ = this;
        _.checkResponsive();
        _.setPosition();
    };
    Slick.prototype.pause = Slick.prototype.slickPause = function() {
        var _ = this;
        _.autoPlayClear();
        _.paused = true;
    };
    Slick.prototype.play = Slick.prototype.slickPlay = function() {
        var _ = this;
        _.autoPlay();
        _.options.autoplay = true;
        _.paused = false;
        _.focussed = false;
        _.interrupted = false;
    };
    Slick.prototype.postSlide = function(index) {
        var _ = this;
        if (!_.unslicked) {
            _.$slider.trigger("afterChange", [ _, index ]);
            _.animating = false;
            if (_.slideCount > _.options.slidesToShow) {
                _.setPosition();
            }
            _.swipeLeft = null;
            if (_.options.autoplay) {
                _.autoPlay();
            }
            if (_.options.accessibility === true) {
                _.initADA();
                if (_.options.focusOnChange) {
                    var $currentSlide = $(_.$slides.get(_.currentSlide));
                    $currentSlide.attr("tabindex", 0).focus();
                }
            }
        }
    };
    Slick.prototype.prev = Slick.prototype.slickPrev = function() {
        var _ = this;
        _.changeSlide({
            data: {
                message: "previous"
            }
        });
    };
    Slick.prototype.preventDefault = function(event) {
        event.preventDefault();
    };
    Slick.prototype.progressiveLazyLoad = function(tryCount) {
        tryCount = tryCount || 1;
        var _ = this, $imgsToLoad = $("img[data-lazy]", _.$slider), image, imageSource, imageSrcSet, imageSizes, imageToLoad;
        if ($imgsToLoad.length) {
            image = $imgsToLoad.first();
            imageSource = image.attr("data-lazy");
            imageSrcSet = image.attr("data-srcset");
            imageSizes = image.attr("data-sizes") || _.$slider.attr("data-sizes");
            imageToLoad = document.createElement("img");
            imageToLoad.onload = function() {
                if (imageSrcSet) {
                    image.attr("srcset", imageSrcSet);
                    if (imageSizes) {
                        image.attr("sizes", imageSizes);
                    }
                }
                image.attr("src", imageSource).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading");
                if (_.options.adaptiveHeight === true) {
                    _.setPosition();
                }
                _.$slider.trigger("lazyLoaded", [ _, image, imageSource ]);
                _.progressiveLazyLoad();
            };
            imageToLoad.onerror = function() {
                if (tryCount < 3) {
                    setTimeout(function() {
                        _.progressiveLazyLoad(tryCount + 1);
                    }, 500);
                } else {
                    image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");
                    _.$slider.trigger("lazyLoadError", [ _, image, imageSource ]);
                    _.progressiveLazyLoad();
                }
            };
            imageToLoad.src = imageSource;
        } else {
            _.$slider.trigger("allImagesLoaded", [ _ ]);
        }
    };
    Slick.prototype.refresh = function(initializing) {
        var _ = this, currentSlide, lastVisibleIndex;
        lastVisibleIndex = _.slideCount - _.options.slidesToShow;
        if (!_.options.infinite && _.currentSlide > lastVisibleIndex) {
            _.currentSlide = lastVisibleIndex;
        }
        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }
        currentSlide = _.currentSlide;
        _.destroy(true);
        $.extend(_, _.initials, {
            currentSlide: currentSlide
        });
        _.init();
        if (!initializing) {
            _.changeSlide({
                data: {
                    message: "index",
                    index: currentSlide
                }
            }, false);
        }
    };
    Slick.prototype.registerBreakpoints = function() {
        var _ = this, breakpoint, currentBreakpoint, l, responsiveSettings = _.options.responsive || null;
        if ($.type(responsiveSettings) === "array" && responsiveSettings.length) {
            _.respondTo = _.options.respondTo || "window";
            for (breakpoint in responsiveSettings) {
                l = _.breakpoints.length - 1;
                if (responsiveSettings.hasOwnProperty(breakpoint)) {
                    currentBreakpoint = responsiveSettings[breakpoint].breakpoint;
                    while (l >= 0) {
                        if (_.breakpoints[l] && _.breakpoints[l] === currentBreakpoint) {
                            _.breakpoints.splice(l, 1);
                        }
                        l--;
                    }
                    _.breakpoints.push(currentBreakpoint);
                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;
                }
            }
            _.breakpoints.sort(function(a, b) {
                return _.options.mobileFirst ? a - b : b - a;
            });
        }
    };
    Slick.prototype.reinit = function() {
        var _ = this;
        _.$slides = _.$slideTrack.children(_.options.slide).addClass("slick-slide");
        _.slideCount = _.$slides.length;
        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
            _.currentSlide = _.currentSlide - _.options.slidesToScroll;
        }
        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }
        _.registerBreakpoints();
        _.setProps();
        _.setupInfinite();
        _.buildArrows();
        _.updateArrows();
        _.initArrowEvents();
        _.buildDots();
        _.updateDots();
        _.initDotEvents();
        _.cleanUpSlideEvents();
        _.initSlideEvents();
        _.checkResponsive(false, true);
        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on("click.slick", _.selectHandler);
        }
        _.setSlideClasses(typeof _.currentSlide === "number" ? _.currentSlide : 0);
        _.setPosition();
        _.focusHandler();
        _.paused = !_.options.autoplay;
        _.autoPlay();
        _.$slider.trigger("reInit", [ _ ]);
    };
    Slick.prototype.resize = function() {
        var _ = this;
        if ($(window).width() !== _.windowWidth) {
            clearTimeout(_.windowDelay);
            _.windowDelay = window.setTimeout(function() {
                _.windowWidth = $(window).width();
                _.checkResponsive();
                if (!_.unslicked) {
                    _.setPosition();
                }
            }, 50);
        }
    };
    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {
        var _ = this;
        if (typeof index === "boolean") {
            removeBefore = index;
            index = removeBefore === true ? 0 : _.slideCount - 1;
        } else {
            index = removeBefore === true ? --index : index;
        }
        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
            return false;
        }
        _.unload();
        if (removeAll === true) {
            _.$slideTrack.children().remove();
        } else {
            _.$slideTrack.children(this.options.slide).eq(index).remove();
        }
        _.$slides = _.$slideTrack.children(this.options.slide);
        _.$slideTrack.children(this.options.slide).detach();
        _.$slideTrack.append(_.$slides);
        _.$slidesCache = _.$slides;
        _.reinit();
    };
    Slick.prototype.setCSS = function(position) {
        var _ = this, positionProps = {}, x, y;
        if (_.options.rtl === true) {
            position = -position;
        }
        x = _.positionProp == "left" ? Math.ceil(position) + "px" : "0px";
        y = _.positionProp == "top" ? Math.ceil(position) + "px" : "0px";
        positionProps[_.positionProp] = position;
        if (_.transformsEnabled === false) {
            _.$slideTrack.css(positionProps);
        } else {
            positionProps = {};
            if (_.cssTransitions === false) {
                positionProps[_.animType] = "translate(" + x + ", " + y + ")";
                _.$slideTrack.css(positionProps);
            } else {
                positionProps[_.animType] = "translate3d(" + x + ", " + y + ", 0px)";
                _.$slideTrack.css(positionProps);
            }
        }
    };
    Slick.prototype.setDimensions = function() {
        var _ = this;
        if (_.options.vertical === false) {
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: "0px " + _.options.centerPadding
                });
            }
        } else {
            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: _.options.centerPadding + " 0px"
                });
            }
        }
        _.listWidth = _.$list.width();
        _.listHeight = _.$list.height();
        if (_.options.vertical === false && _.options.variableWidth === false) {
            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
            _.$slideTrack.width(Math.ceil(_.slideWidth * _.$slideTrack.children(".slick-slide").length));
        } else if (_.options.variableWidth === true) {
            _.$slideTrack.width(5e3 * _.slideCount);
        } else {
            _.slideWidth = Math.ceil(_.listWidth);
            _.$slideTrack.height(Math.ceil(_.$slides.first().outerHeight(true) * _.$slideTrack.children(".slick-slide").length));
        }
        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
        if (_.options.variableWidth === false) _.$slideTrack.children(".slick-slide").width(_.slideWidth - offset);
    };
    Slick.prototype.setFade = function() {
        var _ = this, targetLeft;
        _.$slides.each(function(index, element) {
            targetLeft = _.slideWidth * index * -1;
            if (_.options.rtl === true) {
                $(element).css({
                    position: "relative",
                    right: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            } else {
                $(element).css({
                    position: "relative",
                    left: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            }
        });
        _.$slides.eq(_.currentSlide).css({
            zIndex: _.options.zIndex - 1,
            opacity: 1
        });
    };
    Slick.prototype.setHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.css("height", targetHeight);
        }
    };
    Slick.prototype.setOption = Slick.prototype.slickSetOption = function() {
        var _ = this, l, item, option, value, refresh = false, type;
        if ($.type(arguments[0]) === "object") {
            option = arguments[0];
            refresh = arguments[1];
            type = "multiple";
        } else if ($.type(arguments[0]) === "string") {
            option = arguments[0];
            value = arguments[1];
            refresh = arguments[2];
            if (arguments[0] === "responsive" && $.type(arguments[1]) === "array") {
                type = "responsive";
            } else if (typeof arguments[1] !== "undefined") {
                type = "single";
            }
        }
        if (type === "single") {
            _.options[option] = value;
        } else if (type === "multiple") {
            $.each(option, function(opt, val) {
                _.options[opt] = val;
            });
        } else if (type === "responsive") {
            for (item in value) {
                if ($.type(_.options.responsive) !== "array") {
                    _.options.responsive = [ value[item] ];
                } else {
                    l = _.options.responsive.length - 1;
                    while (l >= 0) {
                        if (_.options.responsive[l].breakpoint === value[item].breakpoint) {
                            _.options.responsive.splice(l, 1);
                        }
                        l--;
                    }
                    _.options.responsive.push(value[item]);
                }
            }
        }
        if (refresh) {
            _.unload();
            _.reinit();
        }
    };
    Slick.prototype.setPosition = function() {
        var _ = this;
        _.setDimensions();
        _.setHeight();
        if (_.options.fade === false) {
            _.setCSS(_.getLeft(_.currentSlide));
        } else {
            _.setFade();
        }
        _.$slider.trigger("setPosition", [ _ ]);
    };
    Slick.prototype.setProps = function() {
        var _ = this, bodyStyle = document.body.style;
        _.positionProp = _.options.vertical === true ? "top" : "left";
        if (_.positionProp === "top") {
            _.$slider.addClass("slick-vertical");
        } else {
            _.$slider.removeClass("slick-vertical");
        }
        if (bodyStyle.WebkitTransition !== undefined || bodyStyle.MozTransition !== undefined || bodyStyle.msTransition !== undefined) {
            if (_.options.useCSS === true) {
                _.cssTransitions = true;
            }
        }
        if (_.options.fade) {
            if (typeof _.options.zIndex === "number") {
                if (_.options.zIndex < 3) {
                    _.options.zIndex = 3;
                }
            } else {
                _.options.zIndex = _.defaults.zIndex;
            }
        }
        if (bodyStyle.OTransform !== undefined) {
            _.animType = "OTransform";
            _.transformType = "-o-transform";
            _.transitionType = "OTransition";
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.MozTransform !== undefined) {
            _.animType = "MozTransform";
            _.transformType = "-moz-transform";
            _.transitionType = "MozTransition";
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.webkitTransform !== undefined) {
            _.animType = "webkitTransform";
            _.transformType = "-webkit-transform";
            _.transitionType = "webkitTransition";
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.msTransform !== undefined) {
            _.animType = "msTransform";
            _.transformType = "-ms-transform";
            _.transitionType = "msTransition";
            if (bodyStyle.msTransform === undefined) _.animType = false;
        }
        if (bodyStyle.transform !== undefined && _.animType !== false) {
            _.animType = "transform";
            _.transformType = "transform";
            _.transitionType = "transition";
        }
        _.transformsEnabled = _.options.useTransform && _.animType !== null && _.animType !== false;
    };
    Slick.prototype.setSlideClasses = function(index) {
        var _ = this, centerOffset, allSlides, indexOffset, remainder;
        allSlides = _.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden", "true");
        _.$slides.eq(index).addClass("slick-current");
        if (_.options.centerMode === true) {
            var evenCoef = _.options.slidesToShow % 2 === 0 ? 1 : 0;
            centerOffset = Math.floor(_.options.slidesToShow / 2);
            if (_.options.infinite === true) {
                if (index >= centerOffset && index <= _.slideCount - 1 - centerOffset) {
                    _.$slides.slice(index - centerOffset + evenCoef, index + centerOffset + 1).addClass("slick-active").attr("aria-hidden", "false");
                } else {
                    indexOffset = _.options.slidesToShow + index;
                    allSlides.slice(indexOffset - centerOffset + 1 + evenCoef, indexOffset + centerOffset + 2).addClass("slick-active").attr("aria-hidden", "false");
                }
                if (index === 0) {
                    allSlides.eq(allSlides.length - 1 - _.options.slidesToShow).addClass("slick-center");
                } else if (index === _.slideCount - 1) {
                    allSlides.eq(_.options.slidesToShow).addClass("slick-center");
                }
            }
            _.$slides.eq(index).addClass("slick-center");
        } else {
            if (index >= 0 && index <= _.slideCount - _.options.slidesToShow) {
                _.$slides.slice(index, index + _.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false");
            } else if (allSlides.length <= _.options.slidesToShow) {
                allSlides.addClass("slick-active").attr("aria-hidden", "false");
            } else {
                remainder = _.slideCount % _.options.slidesToShow;
                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;
                if (_.options.slidesToShow == _.options.slidesToScroll && _.slideCount - index < _.options.slidesToShow) {
                    allSlides.slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder).addClass("slick-active").attr("aria-hidden", "false");
                } else {
                    allSlides.slice(indexOffset, indexOffset + _.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false");
                }
            }
        }
        if (_.options.lazyLoad === "ondemand" || _.options.lazyLoad === "anticipated") {
            _.lazyLoad();
        }
    };
    Slick.prototype.setupInfinite = function() {
        var _ = this, i, slideIndex, infiniteCount;
        if (_.options.fade === true) {
            _.options.centerMode = false;
        }
        if (_.options.infinite === true && _.options.fade === false) {
            slideIndex = null;
            if (_.slideCount > _.options.slidesToShow) {
                if (_.options.centerMode === true) {
                    infiniteCount = _.options.slidesToShow + 1;
                } else {
                    infiniteCount = _.options.slidesToShow;
                }
                for (i = _.slideCount; i > _.slideCount - infiniteCount; i -= 1) {
                    slideIndex = i - 1;
                    $(_.$slides[slideIndex]).clone(true).attr("id", "").attr("data-slick-index", slideIndex - _.slideCount).prependTo(_.$slideTrack).addClass("slick-cloned");
                }
                for (i = 0; i < infiniteCount + _.slideCount; i += 1) {
                    slideIndex = i;
                    $(_.$slides[slideIndex]).clone(true).attr("id", "").attr("data-slick-index", slideIndex + _.slideCount).appendTo(_.$slideTrack).addClass("slick-cloned");
                }
                _.$slideTrack.find(".slick-cloned").find("[id]").each(function() {
                    $(this).attr("id", "");
                });
            }
        }
    };
    Slick.prototype.interrupt = function(toggle) {
        var _ = this;
        if (!toggle) {
            _.autoPlay();
        }
        _.interrupted = toggle;
    };
    Slick.prototype.selectHandler = function(event) {
        var _ = this;
        var targetElement = $(event.target).is(".slick-slide") ? $(event.target) : $(event.target).parents(".slick-slide");
        var index = parseInt(targetElement.attr("data-slick-index"));
        if (!index) index = 0;
        if (_.slideCount <= _.options.slidesToShow) {
            _.slideHandler(index, false, true);
            return;
        }
        _.slideHandler(index);
    };
    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {
        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null, _ = this, navTarget;
        sync = sync || false;
        if (_.animating === true && _.options.waitForAnimate === true) {
            return;
        }
        if (_.options.fade === true && _.currentSlide === index) {
            return;
        }
        if (sync === false) {
            _.asNavFor(index);
        }
        targetSlide = index;
        targetLeft = _.getLeft(targetSlide);
        slideLeft = _.getLeft(_.currentSlide);
        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;
        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > _.slideCount - _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        }
        if (_.options.autoplay) {
            clearInterval(_.autoPlayTimer);
        }
        if (targetSlide < 0) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = _.slideCount - _.slideCount % _.options.slidesToScroll;
            } else {
                animSlide = _.slideCount + targetSlide;
            }
        } else if (targetSlide >= _.slideCount) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = 0;
            } else {
                animSlide = targetSlide - _.slideCount;
            }
        } else {
            animSlide = targetSlide;
        }
        _.animating = true;
        _.$slider.trigger("beforeChange", [ _, _.currentSlide, animSlide ]);
        oldSlide = _.currentSlide;
        _.currentSlide = animSlide;
        _.setSlideClasses(_.currentSlide);
        if (_.options.asNavFor) {
            navTarget = _.getNavTarget();
            navTarget = navTarget.slick("getSlick");
            if (navTarget.slideCount <= navTarget.options.slidesToShow) {
                navTarget.setSlideClasses(_.currentSlide);
            }
        }
        _.updateDots();
        _.updateArrows();
        if (_.options.fade === true) {
            if (dontAnimate !== true) {
                _.fadeSlideOut(oldSlide);
                _.fadeSlide(animSlide, function() {
                    _.postSlide(animSlide);
                });
            } else {
                _.postSlide(animSlide);
            }
            _.animateHeight();
            return;
        }
        if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
            _.animateSlide(targetLeft, function() {
                _.postSlide(animSlide);
            });
        } else {
            _.postSlide(animSlide);
        }
    };
    Slick.prototype.startLoad = function() {
        var _ = this;
        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow.hide();
            _.$nextArrow.hide();
        }
        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
            _.$dots.hide();
        }
        _.$slider.addClass("slick-loading");
    };
    Slick.prototype.swipeDirection = function() {
        var xDist, yDist, r, swipeAngle, _ = this;
        xDist = _.touchObject.startX - _.touchObject.curX;
        yDist = _.touchObject.startY - _.touchObject.curY;
        r = Math.atan2(yDist, xDist);
        swipeAngle = Math.round(r * 180 / Math.PI);
        if (swipeAngle < 0) {
            swipeAngle = 360 - Math.abs(swipeAngle);
        }
        if (swipeAngle <= 45 && swipeAngle >= 0) {
            return _.options.rtl === false ? "left" : "right";
        }
        if (swipeAngle <= 360 && swipeAngle >= 315) {
            return _.options.rtl === false ? "left" : "right";
        }
        if (swipeAngle >= 135 && swipeAngle <= 225) {
            return _.options.rtl === false ? "right" : "left";
        }
        if (_.options.verticalSwiping === true) {
            if (swipeAngle >= 35 && swipeAngle <= 135) {
                return "down";
            } else {
                return "up";
            }
        }
        return "vertical";
    };
    Slick.prototype.swipeEnd = function(event) {
        var _ = this, slideCount, direction;
        _.dragging = false;
        _.swiping = false;
        if (_.scrolling) {
            _.scrolling = false;
            return false;
        }
        _.interrupted = false;
        _.shouldClick = _.touchObject.swipeLength > 10 ? false : true;
        if (_.touchObject.curX === undefined) {
            return false;
        }
        if (_.touchObject.edgeHit === true) {
            _.$slider.trigger("edge", [ _, _.swipeDirection() ]);
        }
        if (_.touchObject.swipeLength >= _.touchObject.minSwipe) {
            direction = _.swipeDirection();
            switch (direction) {
              case "left":
              case "down":
                slideCount = _.options.swipeToSlide ? _.checkNavigable(_.currentSlide + _.getSlideCount()) : _.currentSlide + _.getSlideCount();
                _.currentDirection = 0;
                break;

              case "right":
              case "up":
                slideCount = _.options.swipeToSlide ? _.checkNavigable(_.currentSlide - _.getSlideCount()) : _.currentSlide - _.getSlideCount();
                _.currentDirection = 1;
                break;

              default:
            }
            if (direction != "vertical") {
                _.slideHandler(slideCount);
                _.touchObject = {};
                _.$slider.trigger("swipe", [ _, direction ]);
            }
        } else {
            if (_.touchObject.startX !== _.touchObject.curX) {
                _.slideHandler(_.currentSlide);
                _.touchObject = {};
            }
        }
    };
    Slick.prototype.swipeHandler = function(event) {
        var _ = this;
        if (_.options.swipe === false || "ontouchend" in document && _.options.swipe === false) {
            return;
        } else if (_.options.draggable === false && event.type.indexOf("mouse") !== -1) {
            return;
        }
        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ? event.originalEvent.touches.length : 1;
        _.touchObject.minSwipe = _.listWidth / _.options.touchThreshold;
        if (_.options.verticalSwiping === true) {
            _.touchObject.minSwipe = _.listHeight / _.options.touchThreshold;
        }
        switch (event.data.action) {
          case "start":
            _.swipeStart(event);
            break;

          case "move":
            _.swipeMove(event);
            break;

          case "end":
            _.swipeEnd(event);
            break;
        }
    };
    Slick.prototype.swipeMove = function(event) {
        var _ = this, edgeWasHit = false, curLeft, swipeDirection, swipeLength, positionOffset, touches, verticalSwipeLength;
        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;
        if (!_.dragging || _.scrolling || touches && touches.length !== 1) {
            return false;
        }
        curLeft = _.getLeft(_.currentSlide);
        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;
        _.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));
        verticalSwipeLength = Math.round(Math.sqrt(Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));
        if (!_.options.verticalSwiping && !_.swiping && verticalSwipeLength > 4) {
            _.scrolling = true;
            return false;
        }
        if (_.options.verticalSwiping === true) {
            _.touchObject.swipeLength = verticalSwipeLength;
        }
        swipeDirection = _.swipeDirection();
        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
            _.swiping = true;
            event.preventDefault();
        }
        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
        if (_.options.verticalSwiping === true) {
            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
        }
        swipeLength = _.touchObject.swipeLength;
        _.touchObject.edgeHit = false;
        if (_.options.infinite === false) {
            if (_.currentSlide === 0 && swipeDirection === "right" || _.currentSlide >= _.getDotCount() && swipeDirection === "left") {
                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                _.touchObject.edgeHit = true;
            }
        }
        if (_.options.vertical === false) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        } else {
            _.swipeLeft = curLeft + swipeLength * (_.$list.height() / _.listWidth) * positionOffset;
        }
        if (_.options.verticalSwiping === true) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        }
        if (_.options.fade === true || _.options.touchMove === false) {
            return false;
        }
        if (_.animating === true) {
            _.swipeLeft = null;
            return false;
        }
        _.setCSS(_.swipeLeft);
    };
    Slick.prototype.swipeStart = function(event) {
        var _ = this, touches;
        _.interrupted = true;
        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
            _.touchObject = {};
            return false;
        }
        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
            touches = event.originalEvent.touches[0];
        }
        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;
        _.dragging = true;
    };
    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {
        var _ = this;
        if (_.$slidesCache !== null) {
            _.unload();
            _.$slideTrack.children(this.options.slide).detach();
            _.$slidesCache.appendTo(_.$slideTrack);
            _.reinit();
        }
    };
    Slick.prototype.unload = function() {
        var _ = this;
        $(".slick-cloned", _.$slider).remove();
        if (_.$dots) {
            _.$dots.remove();
        }
        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
            _.$prevArrow.remove();
        }
        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
            _.$nextArrow.remove();
        }
        _.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden", "true").css("width", "");
    };
    Slick.prototype.unslick = function(fromBreakpoint) {
        var _ = this;
        _.$slider.trigger("unslick", [ _, fromBreakpoint ]);
        _.destroy();
    };
    Slick.prototype.updateArrows = function() {
        var _ = this, centerOffset;
        centerOffset = Math.floor(_.options.slidesToShow / 2);
        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow && !_.options.infinite) {
            _.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false");
            _.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false");
            if (_.currentSlide === 0) {
                _.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true");
                _.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false");
            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {
                _.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true");
                _.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false");
            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {
                _.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true");
                _.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false");
            }
        }
    };
    Slick.prototype.updateDots = function() {
        var _ = this;
        if (_.$dots !== null) {
            _.$dots.find("li").removeClass("slick-active").end();
            _.$dots.find("li").eq(Math.floor(_.currentSlide / _.options.slidesToScroll)).addClass("slick-active");
        }
    };
    Slick.prototype.visibility = function() {
        var _ = this;
        if (_.options.autoplay) {
            if (document[_.hidden]) {
                _.interrupted = true;
            } else {
                _.interrupted = false;
            }
        }
    };
    $.fn.slick = function() {
        var _ = this, opt = arguments[0], args = Array.prototype.slice.call(arguments, 1), l = _.length, i, ret;
        for (i = 0; i < l; i++) {
            if ((typeof opt === "undefined" ? "undefined" : _typeof(opt)) == "object" || typeof opt == "undefined") _[i].slick = new Slick(_[i], opt); else ret = _[i].slick[opt].apply(_[i].slick, args);
            if (typeof ret != "undefined") return ret;
        }
        return _;
    };
});

"use strict";

var virtualKeyboardDetector = function(window, undefined) {
    var previousViewportWidth;
    var previousViewportHeight;
    var viewportWidthWithoutVirtualKeyboard;
    var viewportHeightWithoutVirtualKeyboard;
    var recentlyFocusedTimeoutDuration = 3e3;
    var currentViewportWidth = previousViewportWidth = viewportWidthWithoutVirtualKeyboard = window.innerWidth;
    var currentViewportHeight = previousViewportHeight = viewportHeightWithoutVirtualKeyboard = window.innerHeight;
    var virtualKeyboardVisible = false;
    var recentlyFocused = false;
    var recentlyFocusedTimeout = null;
    var validFocusableElements = [ "INPUT", "TEXTAREA" ];
    var subscriptions = {};
    function init(options) {
        if (typeof options !== "undefined") {
            if (typeof options.recentlyFocusedTimeoutDuration !== "undefined") recentlyFocusedTimeoutDuration = options.recentlyFocusedTimeoutDuration;
        }
        resetViewportSizes();
        initFocusListener();
        initResizeListener();
    }
    function isVirtualKeyboardVisible() {
        return virtualKeyboardVisible;
    }
    function getVirtualKeyboardSize() {
        if (!virtualKeyboardVisible) return false;
        return {
            width: currentViewportWidth,
            height: viewportHeightWithoutVirtualKeyboard - currentViewportHeight
        };
    }
    function on(eventName, fn) {
        if (typeof subscriptions[eventName] === "undefined") subscriptions[eventName] = [];
        subscriptions[eventName].push(fn);
    }
    function off(eventName, fn) {
        if (typeof subscriptions[eventName] === "undefined") return;
        if (typeof fn === "undefined") {
            subscriptions[eventName] = [];
        } else {
            var i = subscriptions[eventName].length;
            while (i--) {
                if (subscriptions[eventName][i] == fn) subscriptions[eventName].splice(i, 1);
            }
        }
    }
    function trigger(eventName, args) {
        for (i in subscriptions[eventName]) {
            if (typeof subscriptions[eventName][i] === "function") subscriptions[eventName][i](args);
        }
    }
    function resetViewportSizes() {
        currentViewportWidth = previousViewportWidth = viewportWidthWithoutVirtualKeyboard = window.innerWidth;
        currentViewportHeight = previousViewportHeight = viewportHeightWithoutVirtualKeyboard = window.innerHeight;
    }
    function initFocusListener() {
        document.addEventListener("focus", documentFocusHandler, true);
    }
    function documentFocusHandler(e) {
        if (typeof e.target !== "undefined" && typeof e.target.nodeName !== "undefined") {
            if (validFocusableElements.indexOf(e.target.nodeName) != -1) elementFocusHandler(e);
        }
    }
    function elementFocusHandler(e) {
        if (recentlyFocusedTimeout != null) {
            window.clearTimeout(recentlyFocusedTimeout);
            recentlyFocusedTimeout = null;
        }
        recentlyFocused = true;
        recentlyFocusedTimeout = window.setTimeout(expireRecentlyFocused, recentlyFocusedTimeoutDuration);
    }
    function expireRecentlyFocused() {
        recentlyFocused = false;
    }
    function initResizeListener() {
        window.addEventListener("resize", resizeHandler);
    }
    function resizeHandler() {
        currentViewportWidth = window.innerWidth;
        currentViewportHeight = window.innerHeight;
        if (virtualKeyboardVisible && currentViewportWidth == previousViewportWidth && currentViewportHeight >= viewportHeightWithoutVirtualKeyboard) {
            virtualKeyboardHiddenHandler();
        }
        if (currentViewportWidth != previousViewportWidth) {
            if ("activeElement" in document) document.activeElement.blur();
            virtualKeyboardHiddenHandler();
        }
        if (!virtualKeyboardVisible && recentlyFocused && currentViewportWidth == previousViewportWidth && currentViewportHeight < previousViewportHeight) {
            virtualKeyboardVisibleHandler();
        }
        if (virtualKeyboardVisible == false) {
            viewportWidthWithoutVirtualKeyboard = currentViewportWidth;
            viewportHeightWithoutVirtualKeyboard = currentViewportHeight;
        }
        previousViewportWidth = currentViewportWidth;
        previousViewportHeight = currentViewportHeight;
    }
    function virtualKeyboardVisibleHandler() {
        virtualKeyboardVisible = true;
        var eventData = {
            virtualKeyboardVisible: virtualKeyboardVisible,
            sizes: getSizesData()
        };
        trigger("virtualKeyboardVisible", eventData);
    }
    function virtualKeyboardHiddenHandler() {
        virtualKeyboardVisible = false;
        var eventData = {
            virtualKeyboardVisible: virtualKeyboardVisible,
            sizes: getSizesData()
        };
        trigger("virtualKeyboardHidden", eventData);
    }
    function getSizesData() {
        return {
            viewportWithoutVirtualKeyboard: {
                width: viewportWidthWithoutVirtualKeyboard,
                height: viewportHeightWithoutVirtualKeyboard
            },
            currentViewport: {
                width: currentViewportWidth,
                height: currentViewportHeight
            },
            virtualKeyboard: {
                width: currentViewportWidth,
                height: viewportHeightWithoutVirtualKeyboard - currentViewportHeight
            }
        };
    }
    return {
        init: init,
        isVirtualKeyboardVisible: isVirtualKeyboardVisible,
        getVirtualKeyboardSize: getVirtualKeyboardSize,
        on: on,
        addEventListener: on,
        subscribe: on,
        off: off,
        removeEventListener: off,
        unsubscribe: off,
        trigger: trigger,
        publish: trigger,
        dispatchEvent: trigger
    };
}(window);

"use strict";

$(".js-toggle-basic").click(function(event) {
    var idToggle = $(this).attr("data-id-toggle");
    $(this).toggleClass("active");
    if ($(idToggle).is(":visible")) {
        $(idToggle).hide();
    } else {
        $(idToggle).show();
    }
});

$(document).mouseup(function(e) {
    var container = $($(".js-toggle-basic").attr("data-id-toggle"));
    if (!$(".js-toggle-basic").is(e.target) && !container.is(e.target) && container.has(e.target).length === 0 && $(".js-toggle-basic").length) {
        container.hide();
        $(".js-toggle-basic").removeClass("active");
    }
});

$(".header-mob-v2 .btn-ico-user-nav").click(function() {
    $("body").toggleClass("logged");
});

if (!$(".js-rewards-submenu").is(":visible")) {
    $("header.space").addClass("not-logged");
}

$(function() {
    $(".lazy").Lazy();
});

if (!Object.entries) {
    Object.entries = function(obj) {
        var ownProps = Object.keys(obj), i = ownProps.length, resArray = new Array(i);
        while (i--) {
            resArray[i] = [ ownProps[i], obj[ownProps[i]] ];
        }
        return resArray;
    };
}

if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, "find", {
        value: function value(predicate) {
            if (this == null) {
                throw new TypeError('"this" is null or not defined');
            }
            var o = Object(this);
            var len = o.length >>> 0;
            if (typeof predicate !== "function") {
                throw new TypeError("predicate must be a function");
            }
            var thisArg = arguments[1];
            var k = 0;
            while (k < len) {
                var kValue = o[k];
                if (predicate.call(thisArg, kValue, k, o)) {
                    return kValue;
                }
                k++;
            }
            return undefined;
        },
        configurable: true,
        writable: true
    });
}

"use strict";

var lastSearch = {
    fini: null,
    fout: null,
    occupancy: [],
    numRooms: null,
    numNights: null,
    numTotalAdults: null,
    numTotalChildren: null,
    numTotalBabies: null
};

var actualDivisa = "";

var selectedDivisa = "";

var divisaAnterior2;

var LandingUtag = function() {
    var init = function init() {
        if (typeof utag_data != "undefined") {
            getSearchData();
            setUtagData();
        }
    };
    var getSearchData = function getSearchData() {
        lastSearch.fini = getURLParameter("fini");
        lastSearch.fout = getURLParameter("fout");
        if (getURLParameter("nadults1")) {
            lastSearch.occupancy[0] = {
                adults: getURLParameter("nadults1"),
                children: getURLParameter("nchilds1"),
                babies: getURLParameter("nbabies1") || 0
            };
        }
        if (getURLParameter("nadults2")) {
            lastSearch.occupancy[1] = {
                adults: getURLParameter("nadults2"),
                children: getURLParameter("nchilds2"),
                babies: getURLParameter("nbabies2") || 0
            };
        }
        if (getURLParameter("nadults3")) {
            lastSearch.occupancy[2] = {
                adults: getURLParameter("nadults3"),
                children: getURLParameter("nchilds3"),
                babies: getURLParameter("nbabies3") || 0
            };
        }
        if (getURLParameter("nadults4")) {
            lastSearch.occupancy[3] = {
                adults: getURLParameter("nadults4"),
                children: getURLParameter("nchilds4"),
                babies: getURLParameter("nbabies4") || 0
            };
        }
        if (getURLParameter("nadults5")) {
            lastSearch.occupancy[4] = {
                adults: getURLParameter("nadults5"),
                children: getURLParameter("nchilds5"),
                babies: getURLParameter("nbabies5") || 0
            };
        }
        lastSearch.numRooms = lastSearch.occupancy.length;
        if (lastSearch.fini && lastSearch.fout) {
            lastSearch.numNights = getDiffDays(lastSearch.fini, lastSearch.fout);
        }
        if (!$.isEmptyObject(lastSearch.occupancy)) {
            lastSearch.numTotalAdults = 0;
            lastSearch.numTotalChildren = 0;
            lastSearch.numTotalBabies = 0;
            $.each(lastSearch.occupancy, function(i, room) {
                var lazyRoomItem = {
                    numberOfAdults: room.adults,
                    numberOfChildren: room.children,
                    numberOfBabies: room.babies
                };
                lastSearch.numTotalAdults += parseInt(room.adults);
                lastSearch.numTotalChildren += parseInt(room.children);
                lastSearch.numTotalBabies += parseInt(room.babies);
            });
        }
    };
    var setUtagData = function setUtagData() {
        if (lastSearch.fini && lastSearch.fout) {
            var dateIniSplit = lastSearch.fini.split("/");
            var dateOutSplit = lastSearch.fout.split("/");
            var dateIni = dateIniSplit[2] + "/" + dateIniSplit[1] + "/" + dateIniSplit[0];
            var dateOut = dateOutSplit[2] + "/" + dateOutSplit[1] + "/" + dateOutSplit[0];
            utag_data.busqFecha = dateIni + " - " + dateOut;
            utag_data.search.date = dateIni + " - " + dateOut;
            if (lastSearch.numRooms && lastSearch.numNights) {
                var products_quantity = parseInt(lastSearch.numRooms) * parseInt(lastSearch.numNights) + "";
                if (products_quantity) {
                    utag_data.products_quantity.push(products_quantity.toString());
                }
            }
            utag_data.search.nights = lastSearch.numNights;
            var occupancy = lastSearch.numRooms + "," + lastSearch.numTotalAdults + "," + lastSearch.numTotalChildren + "," + lastSearch.numTotalBabies;
            utag_data.busqOcupacion = occupancy;
            utag_data.search.occupation = occupancy;
            utag_data.search.adults = lastSearch.numTotalAdults;
            utag_data.search.children = lastSearch.numTotalChildren;
            utag_data.search.babies = lastSearch.numTotalBabies;
        }
    };
    var getURLParameter = function getURLParameter(name, url) {
        var urlT = url ? url : window.location.href;
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(urlT);
        if (results == null) {
            return null;
        } else {
            try {
                return decodeURIComponent(results[1].replace(/\+/g, " "));
            } catch (error1) {
                try {
                    return unescape(results[1].replace(/\+/g, " "));
                } catch (error2) {
                    return null;
                }
            }
        }
    };
    var getDiffDays = function getDiffDays(date1, date2) {
        date1 = new Date(date1.split("/")[2], date1.split("/")[1] - 1, date1.split("/")[0]);
        date2 = new Date(date2.split("/")[2], date2.split("/")[1] - 1, date2.split("/")[0]);
        var timeDiff = Math.abs(date1.getTime() - date2.getTime());
        var diffDays = Math.ceil(timeDiff / (1e3 * 3600 * 24));
        return diffDays;
    };
    return {
        init: init,
        getURLParameter: getURLParameter
    };
}();

"use strict";

$(function() {
    validateCard();
    validateCard2();
    $(".js-validate-card .js-month").keyup(function() {
        cardInput = $(this);
        cardMonth = $(this).val();
        $(".custom-card .expired-date-card .month").text(cardMonth);
        if ($(".custom-card .expired-date-card .month").text() < 1) {
            $(".custom-card .expired-date-card .month").text("12");
        }
    });
    $(".js-validate-card .js-year").keyup(function() {
        cardInput = $(this);
        cardMonth = $(this).val();
        $(".custom-card .expired-date-card .year").text(cardMonth);
        if ($(".custom-card .expired-date-card .year").text() < 1) {
            $(".custom-card .expired-date-card .year").text("15");
        }
    });
    $(".js-validate-card-2 .js-month").keyup(function() {
        cardInput = $(this);
        cardMonth = $(this).val();
        $(".custom-card-2 .expired-date-card .month").text(cardMonth);
        if ($(".custom-card-2 .expired-date-card .month").text() < 1) {
            $(".custom-card-2 .expired-date-card .month").text("12");
        }
    });
    $(".js-validate-card-2 .js-year").keyup(function() {
        cardInput = $(this);
        cardMonth = $(this).val();
        $(".custom-card-2 .expired-date-card .year").text(cardMonth);
        if ($(".custom-card-2 .expired-date-card .year").text() < 1) {
            $(".custom-card-2 .expired-date-card .year").text("15");
        }
    });
    $(".js-validate-card input").focus(function() {
        $(".card-container").removeClass("hover");
        if ($(this).hasClass("js-cvv") && $(this).hasClass("no-amex")) {
            $(".card-container").addClass("hover");
        }
    });
    $(".js-validate-card-2 input").focus(function() {
        $(".card-container-2").removeClass("hover");
        if ($(this).hasClass("js-cvv") && $(this).hasClass("no-amex")) {
            $(".card-container-2").addClass("hover");
        }
    });
    $(".js-validate-card .js-name").keyup(function() {
        cardName = $(this).val();
        $(".custom-card .name-card").text(cardName);
        if ($(".custom-card .name-card").text().length < 1) {
            $(".custom-card .name-card").text("NOMBRE DEL TITULAR");
        }
    });
    $(".js-cvv").keyup(function() {
        if (parseInt($(".js-cvv").val(), 10) >= 3 && $(".js-cvv").hasClass("no-amex")) {
            $(".js-cvv").val($(".js-cvv").val().slice(0, 3));
        } else {
            $(".js-cvv").val($(".js-cvv").val().slice(0, 4));
        }
        $(".custom-card .cvv-number").text($(this).val());
        if ($(".custom-card .cvv-number").text() < 1) {
            $(".custom-card .cvv-number").text("000");
        }
    });
    $("#booking-step-4-card-9").change(function() {
        $(".month").html($("#booking-step-4-card-9").val());
        $(".month").removeClass("active");
    });
    $("#booking-step-4-card-4").change(function() {
        $(".year").html($("#booking-step-4-card-4").val());
        $(".year").removeClass("active");
    });
    $("#garantee-expiration-month").change(function() {
        $(".month-2").html($("#garantee-expiration-month").val());
        $(".month-2").removeClass("active");
    });
    $("#garantee-expiration-year").change(function() {
        $(".year-2").html($("#garantee-expiration-year").val());
        $(".year-2").removeClass("active");
    });
    $("#booking-step-4-card-1").focusin(function() {
        $(".number-card").addClass("active");
    });
    $("#booking-step-4-card-1").focusout(function() {
        $(".number-card").removeClass("active");
    });
    $("#booking-step-4-card-2").focusin(function() {
        $(".name-card").addClass("active");
    });
    $("#booking-step-4-card-2").focusout(function() {
        $(".name-card").removeClass("active");
    });
    $("#garantee-payment-method").focusin(function() {
        $(".number-card-2").addClass("active");
    });
    $("#garantee-payment-method").focusout(function() {
        $(".number-card-2").removeClass("active");
    });
    $("[data-id='booking-step-4-card-9']").click(function() {
        $(".month").addClass("active");
        $(".card-container").removeClass("hover");
    });
    $("[data-id='booking-step-4-card-9']").focusout(function() {
        $(".month").removeClass("active");
    });
    $("[data-id='booking-step-4-card-4']").click(function() {
        $(".year").addClass("active");
        $(".card-container").removeClass("hover");
    });
    $("[data-id='booking-step-4-card-4']").focusout(function() {
        $(".year").removeClass("active");
    });
    $("[data-id='garantee-expiration-month']").click(function() {
        $(".month-2").addClass("active");
        $(".card-container-2").removeClass("hover");
    });
    $("[data-id='garantee-expiration-month']").focusout(function() {
        $(".month-2").removeClass("active");
    });
    $("[data-id='garantee-expiration-year']").click(function() {
        $(".year-2").addClass("active");
        $(".card-container-2").removeClass("hover");
    });
    $("[data-id='garantee-expiration-year']").focusout(function() {
        $(".year-2").removeClass("active");
    });
    $("#booking-step-4-card-5").focusin(function() {
        $(".cvv-number").addClass("active");
    });
    $("#booking-step-4-card-5").focusout(function() {
        $(".cvv-number").removeClass("active");
    });
});

function isNumberKey(evt) {
    var charCode = evt.which ? evt.which : event.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }
    return true;
}

function validateCard() {
    if (globalConfig.windowWidth > globalConfig.smBreak) {
        $(".js-validate-card .js-number-key").removeAttr("pattern inputmode").attr("type", "text").removeClass("only-phone");
        $(".js-validate-card .js-number-key").keyup(function(ev) {
            if (ev.which != 37 && ev.which != 39) {
                cardInput = $(this);
                cardNumber = $(this).val();
                cardImg = $(".brand-card span");
                var ccMethods = $(this).data("methods").split(",");
                ccDefinitions = {
                    "ic-card-visa": /^4/,
                    "ic-card-disc": /^(6011|65|64[4-9]|622)/,
                    "ic-card-american": /^3(4|7)/,
                    "ic-card-master": /^(5|2)[1-5]/,
                    "ic-card-unionpay": /^62/,
                    "ic-card-diners": /^(36|38|30[0-5])/
                };
                if (ccMethods && ccMethods.length > 0) {
                    ccDefinitionsNew = {};
                    for (metodo in ccDefinitions) {
                        if (ccMethods.indexOf(metodo) > -1) {
                            ccDefinitionsNew[metodo] = ccDefinitions[metodo];
                        }
                    }
                    ccDefinitions = ccDefinitionsNew;
                }
                $.each(ccDefinitions, function(i, value) {
                    if (value.test(cardNumber)) {
                        cardType = i;
                        cardImg.addClass(i);
                        cardInput.removeClass("invalidType");
                        return false;
                    } else {
                        cardType = i;
                        cardImg.removeClass();
                        cardInput.addClass("invalidType");
                    }
                });
                if (cardType === "ic-card-american") {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 999999 99999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                    $(".front .custom-card .cvv").removeClass("hide");
                    $(".js-validate-card .js-cvv").removeClass("no-amex");
                } else if (cardType === "ic-card-diners") {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 999999 9999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                    $(".front .custom-card .cvv").addClass("hide");
                    $(".js-validate-card .js-cvv").addClass("no-amex");
                } else {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 9999 9999 9999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                    $(".front .custom-card .cvv").addClass("hide");
                    $(".js-validate-card .js-cvv").addClass("no-amex");
                }
                $(".custom-card .number-card").text($(this).val());
                if ($(".custom-card .number-card").text() < 1) {
                    $(".custom-card .number-card").text("1234 5678 1234 5678");
                }
            }
        });
    } else {
        $(".js-validate-card .js-number-key").attr({
            pattern: "[0-9]*",
            inputmode: "numeric",
            maxlength: "16",
            type: "number"
        }).keypress(function(e) {
            return isNumberKey(e);
        });
        $(".js-validate-card .js-number-key").keyup(function(ev) {
            if (ev.which != 37 && ev.which != 39) {
                cardInput = $(this);
                cardNumber = $(this).val();
                cardImg = $(".brand-card span");
                var ccMethods = $(this).data("methods").split(",");
                ccDefinitions = {
                    "ic-card-visa": /^4/,
                    "ic-card-disc": /^(6011|65|64[4-9]|622)/,
                    "ic-card-american": /^3(4|7)/,
                    "ic-card-master": /^(5|2)[1-5]/,
                    "ic-card-unionpay": /^62/,
                    "ic-card-diners": /^(36|38|30[0-5])/
                };
                if (ccMethods && ccMethods.length > 0) {
                    ccDefinitionsNew = {};
                    for (metodo in ccDefinitions) {
                        if (ccMethods.indexOf(metodo) > -1) {
                            ccDefinitionsNew[metodo] = ccDefinitions[metodo];
                        }
                    }
                    ccDefinitions = ccDefinitionsNew;
                }
                $.each(ccDefinitions, function(i, value) {
                    if (value.test(cardNumber)) {
                        cardType = i;
                        cardImg.addClass(i);
                        cardInput.removeClass("invalidType");
                        return false;
                    } else {
                        cardType = i;
                        cardImg.removeClass();
                        cardInput.addClass("invalidType");
                    }
                });
                if (cardType === "ic-card-american") {
                    $(".front .custom-card .cvv").removeClass("hide");
                    $(".js-validate-card .js-cvv").removeClass("no-amex");
                    var actualCvv = parseInt($(".js-validate-card .js-cvv").attr("data-callback-num"), 10);
                    if (actualCvv != 4) {
                        $(".js-validate-card .js-cvv").attr("data-callback-num", "4").val("");
                    }
                    $(".js-validate-card .js-number-key").attr({
                        pattern: "[0-9]*",
                        inputmode: "numeric",
                        maxlength: "15",
                        type: "number"
                    }).addClass("only-phone");
                    var max = 15;
                    if ($(".js-number-key").val().length > max) {
                        $(".js-number-key").val($(".js-number-key").val().substr(0, max));
                    }
                    $(this).attr("maxlength", "15");
                } else if (cardType === "ic-card-diners") {
                    $(".front .custom-card .cvv").addClass("hide");
                    $(".js-validate-card .js-cvv").addClass("no-amex");
                    var actualCvv = parseInt($(".js-validate-card .js-cvv").attr("data-callback-num"), 10);
                    if (actualCvv != 3) {
                        $(".js-validate-card .js-cvv").attr("data-callback-num", "3").val("");
                    }
                    $(".js-validate-card .js-number-key").attr({
                        pattern: "[0-9]*",
                        inputmode: "numeric",
                        maxlength: "14",
                        type: "number"
                    }).addClass("only-phone");
                    var max = 14;
                    if ($(".js-number-key").val().length > max) {
                        $(".js-number-key").val($(".js-number-key").val().substr(0, max));
                    }
                    $(this).attr("maxlength", "14");
                } else {
                    $(".front .custom-card .cvv").addClass("hide");
                    $(".js-validate-card .js-cvv").addClass("no-amex");
                    var actualCvv = parseInt($(".js-validate-card .js-cvv").attr("data-callback-num"), 10);
                    if (actualCvv != 3) {
                        $(".js-validate-card .js-cvv").attr("data-callback-num", "3").val("");
                    }
                    $(".js-validate-card .js-number-key").attr({
                        pattern: "[0-9]*",
                        inputmode: "numeric",
                        maxlength: "16",
                        type: "number"
                    }).addClass("only-phone");
                    var max = 16;
                    if ($(".js-number-key").val().length > max) {
                        $(".js-number-key").val($(".js-number-key").val().substr(0, max));
                    }
                    $(this).attr("maxlength", "16");
                }
                $(".custom-card .number-card").text($(this).val());
                if ($(".custom-card .number-card").text() < 1) {
                    $(".custom-card .number-card").text("1234 5678 1234 5678");
                }
            }
        });
    }
    $(".js-form-checkout input, .js-form-checkout select, .js-form-checkout textarea").not("[type=submit]").jqBootstrapValidation("destroy");
    $(".js-form-checkout input, .js-form-checkout select, .js-form-checkout textarea").not("[type=submit]").jqBootstrapValidation({
        bindEvents: [ "change", "blur", "focus" ],
        filter: function filter() {
            return $(this).is(":visible") || $(this).is(".callback_date");
        },
        submitError: function submitError($form, event, errors) {
            toggleLoadingButton($form, true);
            scrollToFistError($form);
        },
        submitSuccess: function submitSuccess($form, event) {
            toggleLoadingButton($form, true);
        }
    });
}

function validateCard2() {
    if (globalConfig.windowWidth > globalConfig.smBreak) {
        $(".js-validate-card-2 .js-number-key").removeAttr("pattern inputmode").attr("type", "text").removeClass("only-phone");
        $(".js-validate-card-2 .js-number-key").keyup(function(ev) {
            if (ev.which != 37 && ev.which != 39) {
                cardInput = $(this);
                cardNumber = $(this).val();
                cardImg = $(".brand-card span");
                var ccMethods = $(this).data("methods").split(",");
                ccDefinitions = {
                    "ic-card-visa": /^4/,
                    "ic-card-disc": /^(6011|65|64[4-9]|622)/,
                    "ic-card-american": /^3(4|7)/,
                    "ic-card-master": /^(5|2)[1-5]/,
                    "ic-card-unionpay": /^62/,
                    "ic-card-diners": /^(36|38|30[0-5])/
                };
                if (ccMethods && ccMethods.length > 0) {
                    ccDefinitionsNew = {};
                    for (metodo in ccDefinitions) {
                        if (ccMethods.indexOf(metodo) > -1) {
                            ccDefinitionsNew[metodo] = ccDefinitions[metodo];
                        }
                    }
                    ccDefinitions = ccDefinitionsNew;
                }
                $.each(ccDefinitions, function(i, value) {
                    if (value.test(cardNumber)) {
                        cardType = i;
                        cardImg.addClass(i);
                        cardInput.removeClass("invalidType");
                        return false;
                    } else {
                        cardType = i;
                        cardImg.removeClass();
                        cardInput.addClass("invalidType");
                    }
                });
                if (cardType === "ic-card-american") {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 999999 99999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                } else if (cardType === "ic-card-diners") {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 999999 9999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                } else {
                    if (ev.which != 8 && ev.which != 46) {
                        $(this).inputmask("9999 9999 9999 9999", {
                            oncomplete: function oncomplete() {}
                        });
                    }
                }
                $(".custom-card-2 .number-card-2").text($(this).val());
                if ($(".custom-card-2 .number-card-2").text() < 1) {
                    $(".custom-card-2 .number-card-2").text("1234 5678 1234 5678");
                }
            }
        });
    } else {
        $(".js-validate-card-2 .js-number-key").attr({
            pattern: "[0-9]*",
            inputmode: "numeric",
            maxlength: "16",
            type: "number"
        }).addClass("only-phone");
        $(".js-validate-card-2 .js-number-key").keyup(function(ev) {
            $(".custom-card-2 .number-card-2").text($(this).val());
            if ($(".custom-card-2 .number-card-2").text() < 1) {
                $(".custom-card-2 .number-card-2").text("1234 5678 1234 5678");
            }
        });
    }
    $(".js-form-checkout input, .js-form-checkout select, .js-form-checkout textarea").not("[type=submit]").jqBootstrapValidation("destroy");
    $(".js-form-checkout input, .js-form-checkout select, .js-form-checkout textarea").not("[type=submit]").jqBootstrapValidation({
        bindEvents: [ "change", "blur", "focus" ],
        filter: function filter() {
            return $(this).is(":visible") || $(this).is(".callback_date");
        },
        submitError: function submitError($form, event, errors) {
            toggleLoadingButton($form, true);
            scrollToFistError($form);
        },
        submitSuccess: function submitSuccess($form, event) {
            toggleLoadingButton($form, true);
        }
    });
}

$(window).on("resize", function() {
    validateCard();
    validateCard2();
});

function valida(e) {}

"use strict";

var _createClass = function() {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

var Navigator = function() {
    function Navigator(viewElement, initState, cssSelector, onNavCompleteCallback) {
        _classCallCheck(this, Navigator);
        this.$viewElement = $(viewElement);
        this.cssSelector = cssSelector;
        this._initState = initState;
        this._actualState;
        this._prevState;
        this._onNavCompleteCallback = onNavCompleteCallback;
        this.$viewElement.htmlInject();
    }
    _createClass(Navigator, [ {
        key: "getActualState",
        value: function getActualState() {
            return this._actualState;
        }
    }, {
        key: "getPrevState",
        value: function getPrevState() {
            return this._prevState;
        }
    }, {
        key: "getViewElement",
        value: function getViewElement() {
            return this.$viewElement;
        }
    }, {
        key: "setViewElement",
        value: function setViewElement(el) {
            this.$viewElement = $(el);
        }
    }, {
        key: "initViewElementState",
        value: function initViewElementState(callback) {
            this.navigate(this._initState, callback);
        }
    }, {
        key: "navigate",
        value: function navigate(tplUrl, customCallback) {
            var callback = this._onNavCompleteCallback;
            if (typeof customCallback === "function") {
                callback = customCallback;
            }
            this.$viewElement.htmlInject("injectHTMLByUrl", this.cssSelector, tplUrl, callback);
            this._prevState = this._actualState;
            this._actualState = tplUrl;
        }
    }, {
        key: "goBackHandler",
        value: function goBackHandler(callback) {
            this.navigate(this._prevState, callback);
        }
    } ]);
    return Navigator;
}();

"use strict";

(function($, window) {
    "use strict";
    var MultiModal = function MultiModal(element) {
        this.$element = $(element);
        this.modalCount = 0;
    };
    MultiModal.BASE_ZINDEX = 1062;
    MultiModal.prototype.show = function(target) {
        var that = this;
        var $target = $(target);
        var modalIndex = that.modalCount++;
        var $form;
        $target.css("z-index", MultiModal.BASE_ZINDEX + modalIndex * 20 + 10);
        this.adjustCurrentModalBackdrop($target, modalIndex);
        window.setTimeout(function() {
            that.adjustBackdrop();
        });
        if ($target.hasClass("modal-GDPR")) {
            $form = $target.find("form");
            $form.on("submit", function() {
                that.setBackDropSize($target);
            });
        }
    };
    MultiModal.prototype.setBackDropSize = function($target) {
        var $modalBackdrop = $target.find(".modal-backdrop");
        var $modalDialog = $target.find(".modal-dialog");
        $modalBackdrop.css("height", $modalDialog.outerHeight(true));
    };
    MultiModal.prototype.adjustCurrentModalBackdrop = function($target, modalIndex) {
        var previousModalBackdrop = $(".modal-backdrop").eq(modalIndex - 1);
        var currentModalBackdrop;
        var previousModalBackdropOpacity;
        var actualModalIndex = modalIndex;
        if (previousModalBackdrop.length) {
            setTimeout(function() {
                currentModalBackdrop = $(".modal-backdrop").eq(actualModalIndex);
                previousModalBackdropOpacity = previousModalBackdrop.css("opacity");
                currentModalBackdrop.css({
                    opacity: previousModalBackdropOpacity < 1 ? 0 : previousModalBackdropOpacity
                });
            });
        }
    };
    MultiModal.prototype.hidden = function(target) {
        var $target = $(target);
        var $gdprPanels;
        var $gdprPanelsTriggers;
        this.modalCount--;
        if (this.modalCount) {
            this.adjustBackdrop();
            $("body").addClass("modal-open");
        }
        if ($target.hasClass("modal-GDPR")) {
            $gdprPanels = $target.find(".m-panel-info-GDPR");
            $gdprPanelsTriggers = $target.find("[data-toggle-gdpr-panel]");
            $gdprPanels.addClass("is_close");
            $gdprPanelsTriggers.removeClass("is_active");
        }
    };
    MultiModal.prototype.adjustBackdrop = function() {
        var modalIndex = this.modalCount - 1;
        $(".modal-backdrop").css("z-index", MultiModal.BASE_ZINDEX + modalIndex * 20);
    };
    function Plugin(method, target) {
        return this.each(function() {
            var $this = $(this);
            var data = $this.data("multi-modal-plugin");
            if (!data) $this.data("multi-modal-plugin", data = new MultiModal(this));
            if (method) data[method](target);
        });
    }
    $.fn.multiModal = Plugin;
    $.fn.multiModal.Constructor = MultiModal;
    $(document).on("show.bs.modal", function(e) {
        $(document).multiModal("show", e.target);
    });
    $(document).on("hidden.bs.modal", function(e) {
        $(document).multiModal("hidden", e.target);
    });
})(jQuery, window);

"use strict";

var login = function() {
    var defaultErrorMsg = null;
    var $changePasswordSuccesModal = $("#change-password-success");
    var $changePasswordFailedModal = $("#change-password-failed");
    var recaptchaV2Fields = null;
    var recaptchaV3Fields = null;
    var recaptchaTimeout = null;
    var $challenges;
    var checkChallengesTimes = 0;
    function init() {
        $("#logout, .js-logout").on("click", _logout);
        $("#js-reset-password").on("click", _resetPassword);
        _showLoggedMenu();
        _forgotPassword();
    }
    function checkUserLogged() {
        var action = "/auth/consultarUsuarioLogado.do";
        var message = null;
        var isLogged = false;
        var deferred = $.Deferred();
        var promise = $.ajax({
            dataType: "json",
            url: action,
            cache: false
        });
        return promise.then(function(response) {
            isLogged = response.username && response.username !== "anonymous";
            if (isLogged) {
                return {
                    isLogged: isLogged,
                    userData: response,
                    message: message
                };
            } else {
                _removeLoginCookies();
                message = "Username is anonymous /auth/consultarUsuarioLogado.do";
                response = null;
                return deferred.reject({
                    isLogged: isLogged,
                    userData: response,
                    message: message
                });
            }
        }, function(error) {
            _removeLoginCookies();
            return {
                isLogged: isLogged,
                userData: null,
                message: error
            };
        });
    }
    function handleLoginAnalytics(rol, user, action) {
        var eventCategory = _getLoginForm(user);
        var eventLabel = _getUserType(rol, user);
        trackLogin(eventCategory, eventLabel, action);
    }
    function handleLoginErrorAnalytics(page, action) {
        var eventCategory = _getLoginPage(page);
        var eventLabel = "userName/pass";
        trackLogin(eventCategory, eventLabel, "form analysys error");
    }
    function loginSSO(loginData) {
        var ssoUrl = typeof Globals.ssoUrl !== "undefined" ? Globals.ssoUrl : null;
        var ssoService = typeof Globals.ssoService !== "undefined" ? Globals.ssoService : null;
        var url;
        var deferred = $.Deferred();
        var errorMessage;
        var promise;
        defaultErrorMsg = loginData.defaultErrorMsg;
        var ssoData = {
            service: ssoService,
            username: loginData.user,
            password: loginData.password
        };
        if (loginData.user && loginData.password && ssoService && ssoUrl) {
            promise = $.ajax({
                method: "POST",
                contentType: "application/json",
                data: JSON.stringify(ssoData),
                url: ssoUrl,
                async: false,
                dataType: "json"
            });
            return promise.then(function(res) {
                if (res.data && res.data.ticketGrantingTicket) {
                    var result = $.ajax({
                        method: "POST",
                        url: ssoUrl + "validate/?ticketGrantingTicket=" + res.data.ticketGrantingTicket + "&service=" + ssoService,
                        dataType: "jsonp",
                        async: false
                    });
                    return _checkLoginTicket(res.data.ticketGrantingTicket);
                } else if (res.response.resultCode) {
                    return $.ajax({
                        method: "GET",
                        url: "/auth/loginErrorMessage.do?resultCode=" + res.response.resultCode
                    }).then(function(response) {
                        return deferred.reject({
                            message: response
                        });
                    }, function() {
                        return {
                            message: "Login Error"
                        };
                    });
                }
            }, function(jqXHR, exception) {
                if (jqXHR.status === 0) {
                    errorMessage = "Not connect.\n Verify Network.";
                } else if (jqXHR.status == 404) {
                    errorMessage = "Requested page not found. [404]";
                } else if (jqXHR.status == 500) {
                    errorMessage = "Internal Server Error [500].";
                } else if (exception === "parsererror") {
                    errorMessage = "Requested JSON parse failed.";
                } else if (exception === "timeout") {
                    errorMessage = "Time out error.";
                } else if (exception === "abort") {
                    errorMessage = "Ajax request aborted.";
                } else {
                    errorMessage = "Login Error";
                }
                return {
                    message: errorMessage
                };
            });
        } else {
            console.log("One of this params are empty: user, password, Globals.ssoService or Globals.ssoUrl");
            errorMessage = loginData.user && loginData.password ? defaultErrorMsg : "One of this fields are empty: user, password";
            deferred.reject({
                message: errorMessage
            });
            return deferred.promise();
        }
    }
    function submitRecoverPasswordEmail() {
        var $form = $(this);
        var url = urlGlobalConfig.host + urlGlobalConfig.resetPassword;
        var errorMessage;
        var promise = $.ajax({
            type: "POST",
            url: url,
            data: "email=" + $form.find("#email").val() + "&cmp=" + $form.find("#cmp").val() + +"&cmpView=" + $form.find("#cmpView").val(),
            async: true,
            dataType: "json"
        });
        return promise.then(function(response) {
            return response;
        }, function(error) {
            errorMessage = '<ul class="list-unstyled"><li>' + error.response + "</li></ul>";
            $email.val("");
            $email.closest(".form-group").addClass("has-error");
            $email.closest(".help-block").html(errorMessage);
        });
    }
    function initLoginRecaptcha(form) {
        recaptchaV2Fields = form.find(".g-recaptcha");
        recaptchaV3Fields = form.find(".response-recaptcha");
        if (recaptchaV2Fields.length) {
            _loginV2OnloadCallback();
        }
        if (recaptchaV3Fields.length) {
            _loginV3OnloadCallback();
        }
    }
    function removeLoginRecaptcha(form) {
        var recaptchaId;
        recaptchaV2Fields = form.find(".g-recaptcha");
        if (recaptchaV2Fields.length) {
            recaptchaId = recaptchaV2Fields.eq(0).data("widget-index");
            grecaptcha.reset(recaptchaId);
        }
    }
    function _loginV2OnloadCallback() {
        if (grecaptcha.render) {
            recaptchaV2Fields.each(function(index, el) {
                var widgetId = grecaptcha.render(el, {
                    sitekey: recaptchaV2Key
                });
                $(this).attr({
                    "data-widget-id": "g-recaptcha-" + widgetId,
                    "data-widget-index": widgetId
                });
                if ($("body").hasClass("right") || $("body").hasClass("left")) {
                    $challenges = $("[title='recaptcha challenge']");
                    $("body").data("challenges", $challenges.length);
                    recaptchaTimeout = setInterval(fixCaptchaPosition, 1e3);
                }
            });
        }
    }
    function fixCaptchaPosition() {
        var $challenges = $("[title='recaptcha challenge']");
        var $currentChallenge = $challenges.eq($challenges.length - 1);
        var $parent = $currentChallenge.parent();
        checkChallengesTimes++;
        if ($challenges.length > $("body").data("challenges")) {
            $parent.addClass("center-img-challenge pFixed");
            clearInterval(recaptchaTimeout);
        } else if (checkChallengesTimes === 10) {
            clearInterval(recaptchaTimeout);
        }
    }
    function _loginV3OnloadCallback() {
        $("body").addClass("show-grecaptcha-badge");
        recaptchaV3Fields.each(function() {
            var $this = $(this);
            grecaptcha.ready(function() {
                grecaptcha.execute(recaptchaV3Key, {
                    action: "login"
                }).then(function(token) {
                    $this.val(token);
                });
            });
        });
    }
    function _checkLoginTicket(ticket) {
        var action = "/j_spring_cas_security_check?ticket=" + ticket;
        var deferred = $.Deferred();
        var targetUrl = location.href;
        var date;
        var promise = $.post(action);
        promise.then(function(res) {
            if (res && res.user) {
                delete res.user;
            }
            if (res && res.user) {
                targetUrl = res.targetUrl ? res.targetUrl : targetUrl;
                if (targetUrl.search("roldispacher") !== -1) {
                    date = new Date();
                    targetUrl = targetUrl + "&_=" + date.getTime();
                }
                return {
                    targetUrl: targetUrl
                };
            } else if (res.response && res.response.resultCode === "KO") {
                return deferred.reject({
                    message: defaultErrorMsg,
                    type: res.response.result === "RESTORE-PASS" ? "blocked-user" : "login-failed"
                });
            }
        }, function(error) {
            if (error.responseText === "") {
                return deferred.reject({
                    message: defaultErrorMsg
                });
            } else {
                var errorResponse = JSON.parse(error.responseText);
                var messageError = errorResponse.errorCode || defaultErrorMsg;
                return deferred.reject({
                    message: messageError
                });
            }
        });
        return promise;
    }
    function _forgotPassword() {
        var $forgotPasswordForm = $("#recoverPasswordForm");
        $forgotPasswordForm.validator({
            disable: false
        }).on("submit", _onForgotFormSubmit).off("input.bs.validator focusout.bs.validator");
    }
    function _getB2bClientType(b2bType) {
        if (!b2bType) {
            return "agency|business";
        }
        return b2bType == "AG" ? "agency" : "business";
    }
    function _getLoginForm(user) {
        var loginForm = user.b2bAgentAgencyLogin || user.b2bAgentBusinessLogin ? "loginb2bForm" : "loginRewardsForm";
        return loginForm;
    }
    function _getLoginPage(page) {
        var loginPage = "";
        var pageName = page ? page.toLowerCase() : "";
        switch (pageName) {
          case "home":
            loginPage = "loginRewardsForm";
            break;

          case "travel guides":
          case "agencies":
          case "business":
            loginPage = "loginb2bForm";
            break;

          default:
            break;
        }
        return loginPage;
    }
    function _getUserType(rol, user) {
        var userType = "";
        switch (rol) {
          case "B2B_HOME":
            userType = _getB2bClientType(user.b2bType);
            break;

          case "B2B_ADMIN":
            userType = "b2bAdmin";
            break;

          case "B2E_EMPLEADO":
          case "B2E_FRIENDS":
            userType = "employee";
            break;

          case "REWARDS_HOME":
          case "CORPORATE":
          case "NH_MEDIA":
          case "TRAVEL_PARTNER":
          case "PLATINUM_VIP":
            userType = "rewards";
            break;

          default:
            break;
        }
        return userType;
    }
    function _logout(ev) {
        var action = "/j_spring_security_logout";
        ev.preventDefault();
        $.ajaxSetup({
            cache: false
        });
        $.getJSON(action, null, function(data) {
            if (typeof data.exitCode !== "undefined") {
                if ($("main").hasClass("p-landings")) {
                    window.location.reload();
                } else {
                    window.location = location.protocol + "//" + location.host;
                }
            }
        });
        _removeLoginCookies();
    }
    function _onForgotFormSubmit(ev) {
        var $form = $(this);
        var defaultProtocol = location.host.search("webint") !== -1 ? "http://" : "https://";
        var secureDomain = defaultProtocol + location.host;
        var formData = {
            email: $form.find("#emailRecover").val(),
            cmp: $form.find("#cmp").val(),
            cmpView: $form.find("#cmpView").val(),
            url: secureDomain + "/nhrewards/reset-password"
        };
        toggleLoadingButton($form, true);
        if (ev.isDefaultPrevented()) {
            toggleLoadingButton($form, false);
        } else {
            ev.preventDefault();
            _sendForgotPasswordForm($form, formData);
        }
    }
    function _resetPassword(ev) {
        var defaultProtocol = location.host.search("webint") != -1 ? "http://" : "https://";
        var secureDomain = defaultProtocol + location.host;
        var url = secureDomain + "/nhrewards/reset-password-user";
        ev.preventDefault();
        $.ajax({
            type: "POST",
            url: url,
            data: "email=" + $("#email").val(),
            async: true,
            dataType: "json"
        }).done(function(data) {
            if (data && data.success === "true") {
                $changePasswordSuccesModal.modal("show");
            } else {
                $changePasswordFailedModal.modal("show");
            }
        }).fail(function(jqXHR, textStatus) {
            console.log("fail reset password: ", jqXHR, textStatus);
            $changePasswordFailedModal.modal("show");
        });
    }
    function _sendForgotPasswordForm($form, formData) {
        $("#recover-password").find(".js-error-message").empty();
        $.ajax({
            type: "POST",
            url: formData.url,
            data: "email=" + formData.email + "&cmp=" + formData.cmp + "&cmpView=" + formData.cmpView,
            async: true,
            dataType: "json"
        }).done(function(data) {
            if (data && data.success == "true") {
                $("#recover-content").hide();
                $("#recover-password").find("#confirmation-msg").removeClass("hide");
            } else {
                $(".js-error-message").text(data.response);
            }
        }).fail(function(data) {
            $(".js-error-message").text(data.response);
        }).always(function() {
            toggleLoadingButton($form, false);
        });
    }
    function _showLoggedMenu() {
        checkUserLogged(true).then(function(response) {
            if (response.isLogged) {
                $("body").addClass("logged");
                $("header .goMenuRight").off("click").removeAttr("data-toggle");
                $("#undefined-holder").show();
                $("header").removeClass("not-logged");
                $(".boxLoginMob.row").hide();
                $(".boxLogado.Mob.row").show();
                $(".logged-mode").show();
            }
        });
    }
    function _removeLoginCookies() {
        sessionStorage.removeItem("userLoggedData");
        $.cookie("rememberme", null, {
            path: "/"
        });
    }
    return {
        checkUserLogged: checkUserLogged,
        init: init,
        loginSSO: loginSSO,
        handleLoginAnalytics: handleLoginAnalytics,
        submitRecoverPasswordEmail: submitRecoverPasswordEmail,
        initLoginRecaptcha: initLoginRecaptcha,
        removeLoginRecaptcha: removeLoginRecaptcha
    };
}();

$(function() {
    login.init();
});

"use strict";

$.widget("nh.selectorDatepicker", {
    options: {
        format: "DD/MM/YYYY",
        initYear: "1920",
        monthTranslations: monthsArray,
        invalidDateMessage: Labels.lblInvalidDate,
        underAgeMessage: "You must be 18 and up",
        allowUnderAge: true,
        fillZeros: false, // Ey añadir 0 a enteros
        dateDefault : false // Ey, fechas por defecto 
    },
    _create: function _create() {       
        this.options.allowUnderAge = this.element.data("forbide-under-age") ? false : true;
        this.options.fillZeros = this.element.data("fill-zeros") ? true : false;// Ey añadir 0 a enteros
        this.options.dateDefault = this.element.data("date-default") ?  this.element.data("date-default") : false; // Ey, fechas por defecto 
        this.daySelector = this.element.find("select.js-day-selector");
        this.monthSelector = this.element.find("select.js-month-selector");
        this.yearSelector = this.element.find("select.js-year-selector");
        this.daySelectorWrapper = this.element.find("div.js-day-selector");
        this.monthSelectorWrapper = this.element.find("div.js-month-selector");
        this.yearSelectorWrapper = this.element.find("div.js-year-selector");
        this.invalidDateBlock = this.element.find(".js-selector-datepicker-invalid-date");
        if (this.element.hasClass("widget-initialized")) {
            return;
        }
        this._on(this.daySelector, {
            change: this._onDateChange
        });
        this._on(this.monthSelector, {
            change: this._onDateChange
        });
        this._on(this.yearSelector, {
            change: this._onDateChange
        });
        this._on(this.daySelectorWrapper, {
            click: this._onDateTouch
        });
        this._on(this.monthSelectorWrapper, {
            click: this._onDateTouch
        });
        this._on(this.yearSelectorWrapper, {
            click: this._onDateTouch
        });
        this._initDays();
        this._initYears();
        this._initMonth();
        this._initInvalidDateBlock();
        this._addClass("widget-initialized");
    },
    _initDays: function _initDays() {
        for (var i = 0; i < 31; i++) {
            var value = this.options.fillZeros ? this._fillZero(i + 1) : i + 1;
            var selected = (this.options.dateDefault) ? this._dateDefault(0,value) : ""; // Ey, fechas por defecto 
            var option = '<option role="option" value="' + value + '" '+selected+'>' + value + "</option>"; // Ey, fechas por defecto 
            this.daySelector.append(option);
        }
        if (this.daySelector.hasClass("selectpicker")) {
            this.daySelector.selectpicker("refresh");
        }
    },
    _initMonth: function _initMonth() {
        for (var i = 0; i < 12; i++) {
            var value = this.options.fillZeros ? this._fillZero(i) : i;
            var monthTranslation = this.options.monthTranslations[i];
            var selected = (this.options.dateDefault) ? this._dateDefault(1,value) : ""; // Ey, fechas por defecto 
            var option = '<option role="option" value="' + value + '" '+selected+'>' + monthTranslation + "</option>"; // Ey, fechas por defecto 
            this.monthSelector.append(option);
        }
        if (this.monthSelector.hasClass("selectpicker")) {
            this.monthSelector.selectpicker("refresh");
        }
    },
    _initYears: function _initYears() {
        var numberOfYears = new Date().getFullYear() - this.options.initYear;
        if (this.element.data("forbiden-under-age")) {
            numberOfYears = numberOfYears - 18;
        }
        for (var i = numberOfYears; i >= 0; i--) {
            var value = parseInt(this.options.initYear) + i;
            var selected = (this.options.dateDefault) ? this._dateDefault(2,value) : ""; // Ey, fechas por defecto 
            var option = '<option role="option" value="' + value + '" '+selected+'>' + value + "</option>"; // Ey, fechas por defecto 
            this.yearSelector.append(option);
        }
        if (this.yearSelector.hasClass("selectpicker")) {
            this.yearSelector.selectpicker("refresh");
        }
    },
    _initInvalidDateBlock: function _initInvalidDateBlock() {
        this._toggleInvalidDate(false);
        var invalidMessage = '<ul role="alert"><li>' + this.options.invalidDateMessage + "</li></ul>";
        this.invalidDateBlock.append(invalidMessage);
    },
    isUnderAge: function isUnderAge() {
        var birthday = this.getMomentDate(), now = moment(), difference = now.diff(birthday, "years");
        return difference < 18 ? true : false;
    },
    _onDateChange: function _onDateChange(e) {
        var formattedDate = this.getDate();
        this._trigger("change", e, {
            value: formattedDate
        });
        this._toggleInvalidDate(!this.checkIsValidDate());
    },
    _isDateTouched: function _isDateTouched() {
        return this.daySelectorWrapper.data("touched") === true && this.monthSelectorWrapper.data("touched") === true && this.yearSelectorWrapper.data("touched") === true;
    },
    _isFieldsFilled: function _isFieldsFilled() {
        return !!this.daySelector.val() && !!this.monthSelector.val() && !!this.yearSelector.val();
    },
    _onDateTouch: function _onDateTouch(e) {
        var $selector = $(e.currentTarget);
        if (!$selector.data("touched")) {
            $selector.data("touched", true);
        }
    },
    getMomentDate: function getMomentDate() {
        var dayValue = this.daySelector.val();
        var monthValue = this.monthSelector.val();
        var yearValue = this.yearSelector.val();
        return moment({
            year: yearValue,
            month: monthValue,
            day: dayValue
        });
    },
    getDate: function getDate() {
        var momentDate = this.getMomentDate();
        return momentDate.format(this.options.format);
    },
    setDate: function setDate(date) {
        var momentDate = moment(date, this.options.format);
        if (momentDate.isValid()) {
            this.daySelector.selectpicker("val", momentDate.date());
            this.monthSelector.selectpicker("val", momentDate.month());
            this.yearSelector.selectpicker("val", momentDate.year());
        } else {
            this.daySelector.selectpicker("val", "");
            this.monthSelector.selectpicker("val", "");
            this.yearSelector.selectpicker("val", "");
        }
    },
    hasValue: function hasValue() {
        var hasValue = true;
        if (!this.yearSelector.val() || !this.monthSelector.val() || !this.daySelector.val()) {
            hasValue = false;
        }
        return hasValue;
    },
    validateOnSubmit: function validateOnSubmit() {
        if (this.element.data("validate") === false) {
            return true;
        }
        this._toggleInvalidDate(!this.checkIsValidDate(true));
        return this.checkIsValidDate(true);
    },
    checkIsValidDate: function checkIsValidDate(submitForm) {
        var validateDate;
        var isValid;
        var date = this.daySelector.val() + "/" + (parseInt(this.monthSelector.val()) + 1) + "/" + this.yearSelector.val();
        if (!submitForm) {
            validateDate = this._isDateTouched() && this._isFieldsFilled();
        } else {
            validateDate = this._isFieldsFilled();
        }
        if (validateDate) {
            isValid = moment(date, "DD/MM/YYYY").isValid();
            if (this.element.data("forbidenUnderAge") === true) {
                var isUnderAge = this.isUnderAge();
                isValid = !isUnderAge;
                if (isUnderAge) {
                    this.invalidDateBlock.find("ul").html("<li>" + this.options.underAgeMessage + "</li>");
                } else {
                    this.invalidDateBlock.find("ul").html("<li>" + this.options.invalidDateMessage + "</li>");
                }
            }
            return isValid;
        } else if (this._isDateTouched() && !this._isFieldsFilled()) {
            return false;
        } else if (submitForm && !this._isFieldsFilled()) {
            return false;
        } else if (!submitForm) {
            return true;
        }
    },
    checkTimelineDate: function checkTimelineDate() {
        var selectedDate = this.getMomentDate();
        var now = moment();
        var timeline;
        var difference = selectedDate.diff(now, "days");
        if (difference < 0) {
            timeline = -1;
        } else if (difference === 0) {
            timeline = 0;
        } else if (difference > 0) {
            timeline = 1;
        }
        return timeline;
    },
    _toggleInvalidDate: function _toggleInvalidDate(visible) {
        if (visible) {
            this.invalidDateBlock.show();
            this._addClass("has-invalid-datepicker-error");
            this._addClass("has-error");
            this._removeClass("has-success");
        } else {
            this.invalidDateBlock.hide();
            this._removeClass("has-invalid-datepicker-error");
            this._removeClass("has-error");
            if ($(this.element).hasClass("has-error")) this._addClass("has-success");
        }
    },
    // Ey, fechas por defecto 
    _fillZero: function _fillZero(value) {
        return value > 0 && value < 10 ? "0" + value : value;
    },
    // Ey, fechas por defecto 
    _dateDefault: function _dateDefault(type, value){
        var date = moment(this.options.dateDefault,'DD/MM/YYYY', true);     
        return (date.isValid()) ? ((this.options.dateDefault).split("/")[type] == value) ? "selected" : "" : ""
    },
    _destroy: function _destroy() {
        this._removeClass("widget-initialized");
    }
});

"use strict";

var headerLoginForm = function() {
    var headerLoginFormView = $(".boxLogin");
    var loginFormMobView = $(".boxLoginMob");
    function init() {
        var jqBootstrapConfig = {
            bindEvents: [ "blur", "change" ],
            preventSubmit: true,
            submitError: function submitError($form, event, errors) {
                validationError($form, event, errors);
            },
            submitSuccess: function submitSuccess($form, event) {
                validationSuccess($form, event);
            },
            filter: function filter() {
                return !$(this).is(":visible") && $(this).hasClass("force-validation") || $(this).is(":visible") || $(this).hasClass("force-validation") || !$(this).is(".no-validation") || $(this).is(".callback_date");
            }
        };
        headerLoginFormView.find("input, textarea, select, button").not("[type=submit]").jqBootstrapValidation(jqBootstrapConfig);
        loginFormMobView.find("input, textarea, select, button").not("[type=submit]").jqBootstrapValidation(jqBootstrapConfig);
    }
    function validationError($form, event, errors) {
        var bottonsubmit = $form.find("button[type=submit]");
        var koModal = $form.attr("data-ko-modal");
        bottonsubmit.prop("disabled", true);
        if (koModal) {
            $(koModal).modal("show");
        }
        if ($form.find("div.has-error:not(.js-no-scroll):visible").length > 0) {
            moveToOffset = $form.find("div.has-error:not(.js-no-scroll):visible").eq(0).offset().top - 90;
            $("html, body").animate({
                scrollTop: moveToOffset,
                useTranslate3d: true
            }, 200, "linear", function() {
                bottonsubmit.prop("disabled", false);
            });
        }
    }
    function validationSuccess($form, event) {
        var okModal = $form.attr("data-ok-modal");
        var currentModal = $form.attr("data-target-modal");
        var okMsg = $form.attr("data-ok-msg");
        var hideInputs = $form.attr("data-hide-inputs");
        if (okModal) {
            if (!$form.hasClass("ready-to-submit")) {
                event.preventDefault();
                $(okModal).modal("show");
                $form.addClass("ready-to-submit");
                $(okModal).on("hidden.bs.modal", function() {
                    $form.submit();
                });
            }
        }
        if (okMsg) {
            if (!$form.hasClass("ready-to-submit")) {
                event.preventDefault();
                $(okMsg).removeClass("hide");
                $(hideInputs).addClass("hide");
                $form.addClass("ready-to-submit");
                $(currentModal).on("hidden.bs.modal", function() {
                    $form.submit();
                });
            }
        }
    }
    return {
        init: init
    };
}();

$(function() {
    headerLoginForm.init();
});

"use strict";

var GDPR = function() {
    var gdprTogglers;
    var gdprHelpPanels;
    var gdprHelpPanelCloseBtn;
    var IS_ACTIVE_TOGGLER_CLASS = "is_active";
    var IS_CLOSE_PANEL_CLASS = "is_close";
    function init() {
        gdprTogglers = $("[data-toggle-gdpr-panel]");
        gdprHelpPanels = $(".m-panel-info-GDPR");
        gdprHelpPanelCloseBtn = gdprHelpPanels.find(".js-close-gdpr-panel");
        gdprTogglers.on("click", _toggleGDPRPanel);
        gdprHelpPanelCloseBtn.on("click", _handlerCloseGDPRPanel);
        gdprPageWithAnchor();
        $("#GDPR_flag_5").change(function() {
            if ($("#GDPR_flag_5").is(":checked")) {
                $("#subscribeRewards").attr("value", true);
            } else {
                $("#subscribeRewards").attr("value", false);
            }
        });
    }
    function _toggleGDPRPanel() {
        var panelVisibility = _toggleActive(this);
        gdprHelpPanels.addClass(IS_CLOSE_PANEL_CLASS);
        _toggleHelpPanelVisibility(panelVisibility, this);
    }
    function _toggleActive(toggleElement) {
        var $this = $(toggleElement);
        var panelVisible = true;
        gdprTogglers.each(function(index, toggle) {
            var $toggle = $(toggle);
            if (!$toggle.is($this)) {
                $toggle.removeClass(IS_ACTIVE_TOGGLER_CLASS);
            }
        });
        if ($this.hasClass(IS_ACTIVE_TOGGLER_CLASS)) {
            $this.removeClass(IS_ACTIVE_TOGGLER_CLASS);
            panelVisible = false;
        } else {
            $this.addClass(IS_ACTIVE_TOGGLER_CLASS);
        }
        return panelVisible;
    }
    function _toggleHelpPanelVisibility(panelVisibility, toggleElement) {
        var $toggleElement = $(toggleElement);
        var helpPanelSelector = $toggleElement.data("toggle-gdpr-panel");
        var helpPanel = $(helpPanelSelector);
        if (panelVisibility) {
            helpPanel.removeClass(IS_CLOSE_PANEL_CLASS);
        } else {
            helpPanel.addClass(IS_CLOSE_PANEL_CLASS);
        }
    }
    function _handlerCloseGDPRPanel(e) {
        gdprHelpPanels.addClass(IS_CLOSE_PANEL_CLASS);
        gdprTogglers.removeClass(IS_ACTIVE_TOGGLER_CLASS);
    }
    function getGDPRPanels() {
        return gdprHelpPanels;
    }
    function gdprPageWithAnchor() {
        $(".js-gdpr-anchor-page").each(function() {
            var linkHref = $(this).find("a").attr("href");
            var anchor = $(this).data("page-anchor");
            var finalLink = linkHref + "#" + anchor;
            $(this).find("a").attr("href", finalLink);
        });
    }
    return {
        init: init,
        getGDPRPanels: getGDPRPanels
    };
}();

$(function() {
    GDPR.init();
});

"use strict";

var mModals = function() {
    var MODAL_UPDATE_CONTENT_EVENT = "modal.update.content";
    var gdprHelpPanels;
    var $recoverPasswordModal;
    function init() {
        var modals = $(".modal");
        $recoverPasswordModal = modals.filter("#m-modal-login");
        var $externalModalsTriggers = $('[data-toggle="external-modal"], [data-href][data-toggle="modal"]');
        gdprHelpPanels = GDPR.getGDPRPanels();
        modals.each(function(index, modalView) {
            var $modalView = $(modalView);
            attachModalEventsBehaviour($modalView);
        });
        $externalModalsTriggers.on("click", _loadExternalModal);
    }
    function _handlerModalShow() {}
    function _handlerModalShown() {}
    function _handlerModalHide() {}
    function _scrollToModalElement(anchorElement, $modal) {
        var modalOffsetTop;
        var targetOffsetTop;
        if (anchorElement.length) {
            modalOffsetTop = $modal.offset().top;
            targetOffsetTop = anchorElement.offset().top;
            $modal.animate({
                scrollTop: targetOffsetTop - modalOffsetTop
            });
        }
    }
    function _loadExternalModal(ev) {
        var $modalTrigger = $(this);
        var modalContentPath = $modalTrigger.data("href");
        var modalTargetId = $modalTrigger.data("target");
        var modalScrollTo = $modalTrigger.data("modal-scrollto");
        var $modal;
        var $modalContent;
        ev.preventDefault();
        ev.stopPropagation();
        if (!modalTargetId) {
            return;
        }
        $modal = $(modalTargetId);
        $modalContent = $modal.find(".modal-content");
        if (modalContentPath) {
            $modal.data("scrollto", modalScrollTo);
            $modalContent.html("").load(modalContentPath, function() {
                $modal.modal("show");
            });
        }
    }
    function attachModalEventsBehaviour($modal) {
        var eventData = {
            windowScroll: null
        };
        $modal.on("show.bs.modal", eventData, _handleShowModal).on("shown.bs.modal", _handleShownModal).on(MODAL_UPDATE_CONTENT_EVENT, _setModalPosition).on("hidden.bs.modal", eventData, _handleHiddenModal);
    }
    function handleDinamicModals($modals) {
        $modals.each(function() {
            var $this = $(this);
            var $modal = $($this.data("target"));
            attachModalEventsBehaviour($modal);
        });
    }
    function _handleShowModal(ev) {
        var $this = $(this);
        var $modalContent = $this.find(".modal-content");
        var scrollWidth = getScrollBarWidth();
        ev.data.windowScroll = $(window).scrollTop();
        if ($this.attr("id") !== "m-modal-login") {
            $("body").css({
                position: "fixed",
                "margin-top": ev.data.windowScroll * -1
            });
            $modalContent.parent(".modal-dialog").addClass("prevent-show");
        }
        if (scrollWidth > 0 && gdprHelpPanels) {
            gdprHelpPanels.css({
                "padding-right": scrollWidth
            });
        }
    }
    function _handleShownModal() {
        var $modal = $(this);
        var anchorSelector = $modal.data("scrollto");
        var anchorElement;
        _setModalPosition($modal);
        if (anchorSelector) {
            anchorElement = $modal.find(anchorSelector);
            _scrollToModalElement(anchorElement, $modal);
        }
        if ($modal.attr("id") === "modal-iframe") {
            var $modalIframe = $modal.find("iframe");
            $modalIframe.css({
                width: "100%",
                height: $modalIframe.contents().height() + "px"
            });
        }
    }
    function _setModalPosition($modal) {
        var $this = $modal.length ? $modal : $(this);
        var $modalContent = $this.find(".modal-content");
        var $modalContentParent = $modalContent.parent(".modal-dialog");
        setTimeout(function() {
            if ($modalContent.outerHeight() < globalConfig.windowHeight) {
                $modalContentParent.addClass("center-modal");
            } else {
                $modalContentParent.removeClass("center-modal");
            }
            $modalContentParent.removeClass("prevent-show");
        }, 100);
    }
    function _handleHiddenModal(ev) {
        var $this = $(this);
        var position = "static";
        if ($("body").hasClass("right") || $("body").hasClass("left")) {
            position = "relative";
        }
        $("body").css({
            position: position,
            "margin-top": 0
        });
        $(window).scrollTop(ev.data.windowScroll);
        gdprHelpPanels.css({
            "padding-right": 0
        });
    }
    return {
        init: init,
        attachModalEventsBehaviour: attachModalEventsBehaviour,
        handleDinamicModals: handleDinamicModals,
        MODAL_UPDATE_CONTENT_EVENT: MODAL_UPDATE_CONTENT_EVENT
    };
}();

$(function() {
    if (globalConfig.elements.$openModal.length) {
        mModals.init();
    }
});

"use strict";

var collapsePanel = function() {
    var collapsePanelModule;
    var collapseLink;
    function init() {
        collapsePanelModule = $(".js-collapse-panel");
        collapseLink = collapsePanelModule.find(".panel-heading");
        collapsePanelModule.on("show.bs.collapse", _onExpandPanel);
        collapsePanelModule.on("hide.bs.collapse", _onCollapsePanel);
    }
    function _onExpandPanel() {
        var $this = $(this);
        var toggleElement = $this.find('a[data-toggle="collapse"]');
        var openText = toggleElement.data("open-header-text");
        if (openText && openText.length > 0) {
            toggleElement.html(openText);
        }
    }
    function _onCollapsePanel() {
        var $this = $(this);
        var toggleElement = $this.find('a[data-toggle="collapse"]');
        var closeText = toggleElement.data("closed-header-text");
        if (closeText && closeText.length > 0) {
            toggleElement.html(closeText);
        }
    }
    return {
        init: init
    };
}();

$(function() {
    collapsePanel.init();
});

"use strict";

$.widget("nh.floorSelector", {
    options: {
        hotelInfo: {},
        floorTranslation: typeof pageData !== "undefined" ? pageData.labelFloor : "",
        buildingLabel: typeof pageData !== "undefined" ? pageData.labelBuilding + " " : ""
    },
    selectedFloor: {},
    _create: function _create() {
        this.floorList = this.element.find(".m-floor-selector-list");
        this.selectedFloorDescription = this.element.find(".js-selected-floor");
        this.selectedBuildingDescription = this.element.find(".js-selected-building");
        this.selectedFloorAvailableRooms = this.element.find(".js-selected-floor-available-rooms");
        this.selectedFloorUpsellingRooms = this.element.find(".js-selected-floor-upselling-rooms");
        this._renderFloorList();
        this._on(this.element.find(".dropdown"), {
            "shown.bs.dropdown": this._onDropdownShown
        });
    },
    _renderFloorList: function _renderFloorList() {
        var _this = this;
        var hotelInfo = this.options.hotelInfo;
        var buildings = hotelInfo.buildings;
        if (!buildings || buildings.length === 0) {
            return;
        }
        buildings.forEach(function(buildingInfo) {
            var buildName = isNaN(parseInt(buildingInfo.name)) ? buildingInfo.name : parseInt(buildingInfo.name);
            _this.floorList.append(_this._renderLineSeparator(_this.options.buildingLabel + buildName));
            var buildingFloors = buildingInfo.floors.sort(_this._sortByFloor);
            buildingFloors.forEach(function(floorInfo) {
                _this.floorList.append(_this._renderFloorLine(floorInfo, _this.options.buildingLabel + buildName, buildingInfo.name));
                if (floorInfo.selected) {
                    _this.setSelectedFloor(floorInfo, buildName, buildingFloors);
                }
            });
        });
        this._addFloorLineListeners();
    },
    _renderLineSeparator: function _renderLineSeparator(separatorText) {
        return '\n      <li class="floor-selector-separator">\n        <span>' + separatorText + "</span>\n      </li>\n    ";
    },
    _renderFloorLine: function _renderFloorLine(floorInfo, building, buildingName) {
        var floorInfoIdFloor = isNaN(parseInt(floorInfo.idFloor)) ? floorInfo.idFloor : parseInt(floorInfo.idFloor);
        return '\n      <li class="floor-selector-item" id="#' + floorInfo.idFloor + "-" + building + '" data-id="#' + floorInfo.idFloor + "-" + buildingName + '">\n        <div class="floor-selector-item-text">\n          <span>' + this.options.floorTranslation + " " + floorInfoIdFloor + '</span>\n        </div>\n        <div class="floor-selector-item-rooms">\n        ' + (floorInfo.upsellings !== null && floorInfo.upsellings > 0 ? '<div class="floor-room room-upselling">\n          <div class="room-content"><span>' + floorInfo.upsellings + "</span></div>\n          </div>" : "") + '\n          <div class="floor-room room-available">\n            <div class="room-content"><span>' + floorInfo.rooms + "</span></div>\n          </div>\n        </div>\n      </li>\n    ";
    },
    _addFloorLineListeners: function _addFloorLineListeners() {
        this._on(this.floorList.find(".floor-selector-item"), {
            click: this._onFloorClick
        });
    },
    _sortByFloor: function _sortByFloor(a, b) {
        if (a.idFloor < b.idFloor) return 1;
        if (a.idFloor > b.idFloor) return -1;
        return 0;
    },
    _setOption: function _setOption(key, value) {
        this._super(key, value);
        if (key === "hotelInfo") {
            this.floorList.empty();
            this._renderFloorList();
        }
    },
    _onFloorClick: function _onFloorClick(e) {
        var $selectedFloorId = $(e.currentTarget).attr("data-id");
        var floorNumber = this._getFloorNumber($selectedFloorId);
        var buildingName = $selectedFloorId.slice($selectedFloorId.indexOf("-") + 1, $selectedFloorId.length);
        var buildingFloors;
        var selectedFloorInfo;
        this.options.hotelInfo.buildings.some(function(buildingInfo) {
            if (buildingInfo.name == buildingName) {
                buildingFloors = buildingInfo;
            }
        });
        buildingFloors.floors.some(function(info) {
            if (info.idFloor == floorNumber) {
                selectedFloorInfo = info;
            }
        });
        this.setSelectedFloor(selectedFloorInfo, buildingName, buildingFloors);
    },
    _getFloorNumber: function _getFloorNumber(id) {
        var floorId = id.slice(1, id.length);
        if (floorId.slice(0, 1) === "-") {
            floorId = id.slice(1, floorId.length);
            floor = floorId.split("-");
            return "-" + floor[0];
        } else {
            floor = floorId.split("-");
            return floor[0];
        }
    },
    setSelectedFloor: function setSelectedFloor(selectedFloorInfo, buildingDescription, buildingFloors) {
        if (!selectedFloorInfo) {
            return;
        }
        var selectedFloorInfoIdFloor = isNaN(parseInt(selectedFloorInfo.idFloor)) ? selectedFloorInfo.idFloor : parseInt(selectedFloorInfo.idFloor);
        this.selectedFloorDescription.html(this.options.floorTranslation + " " + selectedFloorInfoIdFloor);
        var buildingDescriptiontext = isNaN(parseInt(buildingDescription)) ? buildingDescription : parseInt(buildingDescription);
        this.selectedBuildingDescription.html(this.options.buildingLabel + buildingDescriptiontext);
        this.selectedFloorAvailableRooms.html(selectedFloorInfo.rooms ? selectedFloorInfo.rooms : 0);
        if (selectedFloorInfo.upsellings && selectedFloorInfo.upsellings > 0) {
            this.selectedFloorUpsellingRooms.html(selectedFloorInfo.upsellings ? selectedFloorInfo.upsellings : 0);
        } else {
            $(this.selectedFloorUpsellingRooms).parent().parent().hide();
        }
        this.selectedFloor = {
            selectedFloorInfo: selectedFloorInfo,
            buildingDescription: buildingDescription,
            buildingFloors: buildingFloors
        };
        this._trigger("change", {}, this.selectedFloor);
    },
    setFloorListHeight: function setFloorListHeight(height) {
        this.floorList.css("max-height", height);
    },
    _onDropdownShown: function _onDropdownShown(e) {
        this.floorList.focus();
    },
    _destroy: function _destroy() {}
});

"use strict";

(function() {
    $.widget("nh.autocompleteGroup", {
        options: {
            timeout: 300,
            timer: null
        },
        types: {
            0: "nearme",
            1: "destination",
            2: "airport",
            3: "poi",
            4: "hotel"
        },
        results: {
            nearme: {
                label: [ Labels.autocompleteResultsHotel, Labels.autocompleteResultsHotels ],
                html: "",
                items: [],
                count: 0,
                iconClass: "nh-ic-compass"
            },
            destination: {
                label: [ Labels.autocompleteResultsHotel, Labels.autocompleteResultsHotels ],
                html: "",
                items: [],
                count: 0,
                iconClass: "nh-ic-building"
            },
            hotel: {
                label: [ Labels.autocompleteResultsHotel, Labels.autocompleteResultsHotels ],
                html: "",
                items: [],
                count: 0,
                iconClass: "nh-ic-hotel"
            },
            airport: {
                label: [ Labels.autocompleteResultsHotel, Labels.autocompleteResultsHotels ],
                html: "",
                items: [],
                count: 0,
                iconClass: "nh-ic-airport"
            },
            poi: {
                label: [ Labels.autocompleteResultsHotel, Labels.autocompleteResultsHotels ],
                html: "",
                items: [],
                count: 0,
                iconClass: "nh-ic-position"
            }
        },
        isMobile: null,
        emptyResult: {
            df: "",
            code: "",
            CountryName: "",
            locality: "",
            City: "",
            url: "",
            Name: Labels.autocompleteNearme,
            Type: 0,
            vh: "",
            ebp: false,
            num_hotels: "",
            typeSearch: "",
            tcm: ""
        },
        _create: function _create() {
            var widget = this;
            this.config = {
                sourceFile: null,
                $resultsElement: null,
                showPoisResults: true,
                minTexSearchLength: typeof Globals.autocompleteParam !== "undefined" ? Globals.autocompleteParam : 3,
                $hiddenFields: null,
                $parentForm: null,
                initialValue: null,
                labels: {
                    destination: Labels.autocompleteCities,
                    hotel: Labels.autocompleteHotels,
                    noMatches: Labels.autocompleteNoMatches,
                    airport: Labels.autocompleteAirports,
                    poi: Labels.autocompletePois,
                    results: [ Labels.autocompleteResult, Labels.autocompleteResults ],
                    serverProblem: Labels.autocompleteServerProblem
                }
            };
            this._setWidgetConfig(widget);
            if (this.config.isPromoForm && this.config.formActionData) {
                this.config.$parentForm.attr("action", this.config.formActionData.current);
            }
            if (this.config.initialValue) {
                this.element.data("selected", this.emptyResult);
            }
            this._on(this.element, {
                keyup: this._eventKeyup
            });
            this._on(this.element, {
                focusin: this._onInputFocus
            });
            this._on(this.config.$resultsElement, {
                "click li": this._onResultsItemClick
            });
            this._on(document, {
                mouseup: this._onDocumentMouseup
            });
            this._on(this.element.closest(".location").find(".js-input-clear"), {
                click: function click() {
                    this.config.$resultsElement.hide();
                    this.element.data("selected", this.emptyResult);
                }
            });
            this.element.data("selected", this.emptyResult);
            this.config.$resultsElement.hide();
            this._setMobile();
            $(window).resize(function() {
                widget._setMobile();
            });
        },
        _setMobile: function _setMobile() {
            window.matchMedia("(max-width: 767px)").matches ? this.isMobile = true : this.isMobile = false;
        },
        _positionResults: function _positionResults() {
            var searchBar = $(this.element).closest(".m-search-bar");
            searchBar.length && !this.isMobile ? dropdownPosition($(this.element), this.config.$resultsElement, 20) : $(this.config.$resultsElement).removeAttr("style");
            var alertLanguage = $(".m-language-edition");
            if (searchBar.length && alertLanguage.length) $(alertLanguage).hide();
        },
        _onDocumentMouseup: function _onDocumentMouseup(e) {
            if (!this.config.$resultsElement.is(e.target) && this.config.$resultsElement.has(e.target).length === 0) {
                this.config.$resultsElement.hide();
            }
        },
        _onInputFocus: function _onInputFocus(e) {
            if (this.config.$resultsElement.find("[data-type='nearme']").data("value") === this.element.val()) {
                this.config.$resultsElement.hide();
                this.element.val("");
                this.element.data("selected", this.emptyResult);
            }
        },
        _onResultsItemClick: function _onResultsItemClick(e) {
            var widget = this;
            var $this = $(e.currentTarget);
            var eleIndex = $this.data("index");
            var eleType = $this.data("type");
            var eleGroupType = $this.data("group-type");
            var item = this.results[eleGroupType].items[eleIndex];
            var target;
            var inputs = this.config.$hiddenFields.filter("[data-target]");
            var $searchType = $("[data-id='tipoBuscador']");
            var value = $this.data("value").replace(/\b(NH Collection |NH )\b/g, "");
            this.element.val(value).data({
                selected: item,
                search: value
            });
            sessionStorage.setItem("listSearch", JSON.stringify(item));
            if (this.element.closest(".m-search-bar").length) {
                var inputOffset = $(this.element).offset().top;
                if (window.scrollY > inputOffset) {
                    $("html, body").animate({
                        scrollTop: inputOffset - 10
                    }, 200);
                }
            }
            $.each(inputs, function() {
                var $this = $(this);
                var inputId = $this.attr("id") || $this.data("id");
                target = $this.data("target");
                value = target ? item[target] : null;
                if (inputId === "locationLcv") {
                    $this.val("" + (value && eleType === "destination" ? value : value ? "true" : "false"));
                } else if (inputId === "name") {
                    value = utils.decodeHtmlEntities(value);
                    $this.val("" + (value ? value : ""));
                } else {
                    $this.val("" + (value ? value : ""));
                }
                if ($searchType.length > 0 && inputId === "code") {
                    if (eleType === "destination" || eleType === "hotel" || eleType === "poi") {
                        $this.attr("name", eleType + "Id");
                    } else if (eleType === "nearme") {
                        $this.attr("name", "nearMe");
                    } else {
                        $this.removeAttr("name");
                    }
                    if (eleType === "destination") {
                        if (widget.config.isPromoForm && widget.config.formActionData) {
                            widget.config.$parentForm.attr("action", widget.config.formActionData.promodestino);
                        }
                    }
                }
                if (inputId === "locationCode" || inputId === "locationCodeMobile") {
                    $this.attr("name", "");
                    if (eleType === "destination" || eleType === "hotel" || eleType === "poi") {
                        $this.attr("name", eleType + "Id");
                    }
                }
            });
            this.config.$resultsElement.hide();
        },
        _resetData: function _resetData() {
            this.config.$resultsElement.empty();
            $.each(this.results, function(key, value) {
                value.html = "";
                value.items = [];
                value.count = 0;
            });
        },
        _eventKeyup: function _eventKeyup(e) {
            var _this = this;
            var query = this.element.val();
            clearTimeout(this.options.timer);
            this.options.timer = setTimeout(function() {
                if (query.length >= _this.config.minTexSearchLength) {
                    _this._getData();
                } else if (query.length === 0) {
                    _this.config.$resultsElement.hide();
                    _this.element.data("selected", _this.emptyResult);
                    _this.element.val("");
                }
            }, this.options.timeout);
        },
        _getData: function _getData() {
            var query = this.element.val();
            var language = typeof Globals.lang != "undefined" && Globals.lang != "" ? Globals.lang : "en";
            var widget = this;
            var promise;
            var url = "" + widget.config.sourceFile + query;
            var ajaxConfig = {
                type: "GET",
                url: url,
                async: true,
                dataType: "json",
                crossDomain: true,
                cache: true
            };
            if (this.config.dataObj) {
                ajaxConfig.type = "POST";
                ajaxConfig.url = widget.config.sourceFile;
                ajaxConfig.data = {
                    idioma: language,
                    json: JSON.stringify(this.config.dataObj),
                    term: query
                };
            }
            this._resetData();
            if (query.length >= this.config.minTexSearchLength) {
                promise = $.ajax(ajaxConfig);
                promise.then(function(response) {
                    widget._getFilteredResults(response[0]);
                }, function() {
                    _buildSimpleResults(widget.config.labels.serverProblem);
                }).always(function() {
                    widget.config.$resultsElement.show();
                    widget._positionResults();
                });
            }
        },
        _getFilteredResults: function _getFilteredResults(response) {
            var widget = this;
            var type;
            response.push(this.emptyResult);
            if (response.length > 0) {
                $.each(response, function(index, value) {
                    type = widget.types[value.Type];
                    widget.results[type].items.push(value);
                    widget.results[type].count++;
                });
                if (!widget.config.showPoisResults) {
                    delete widget.results.poi;
                }
                this._buildResults();
            } else {
                this._buildSimpleResults(widget.config.labels.noMatches);
            }
            this.config.$resultsElement.show();
            this._positionResults();
        },
        _buildSimpleResults: function _buildSimpleResults(msg) {
            if (!this.results["nearme"].items.length) this.results["nearme"].items.push(this.emptyResult);
            var html = '<div class="autocomplete-results-group nearme">\n                      <ul class="autocomplete-results-list">\n                      <li data-value="' + Labels.autocompleteNearme + '" data-type="nearme" data-index="0">\n                        <span class="result-icon nh-ic-compass"></span>\n                        <span class="result-name">' + Labels.autocompleteNearme + '</span>\n                      </li>\n                      </ul>\n                  </div>\n\n                  <div class="autocomplete-results-group">\n                    <ul class="autocomplete-results-list">\n                      <li>' + msg + "</li>\n                    </ul>\n                  </div>";
            this.config.$resultsElement.append(html);
        },
        _buildResults: function _buildResults() {
            var widget = this;
            $.each(this.results, function(key, value) {
                widget._buildResultsGroups(key, value);
                widget.config.$resultsElement.append(value.html);
            });
        },
        _buildResultsGroups: function _buildResultsGroups(name, results) {
            var widget = this;
            var html = "";
            var data = null;
            if (results.items.length > 0) {
                results.html += '<div class="autocomplete-results-group ' + name + '">';
                if (name !== "nearme") {
                    results.html += "<p>" + this.config.labels[name] + " (" + results.count + " " + (results.count > 1 ? this.config.labels.results[1] : this.config.labels.results[0]) + ")</p>";
                }
                results.html += '<ul class="autocomplete-results-list">';
                $.each(results.items, function(index, value) {
                    data = {
                        results: results,
                        item: value,
                        index: index
                    };
                    html += widget._getResultsItem(data);
                });
                results.html += html + "</ul></div>";
            }
        },
        _getResultsItem: function _getResultsItem(data) {
            var numHotels = data.item.typeSearch && data.item.typeSearch !== "hotel" ? "<span>" + data.item.num_hotels + " " + (data.item.num_hotels > 1 ? data.results.label[1] : data.results.label[0]) + "</span>" : "";
            var name = data.item.typeSearch !== "destination" ? data.item.Name : "";
            var locality = data.item.typeSearch !== "hotel" ? data.item.locality : ", " + data.item.locality;
            return '<li data-value="' + name + locality + '" data-type="' + (data.item.typeSearch ? data.item.typeSearch : "nearme") + '" data-group-type="' + this._getItemGroupType(data.item) + '" data-index="' + data.index + '"><span class="result-icon ' + data.results.iconClass + '"></span><span class="result-name">' + data.item.Name + "</span>" + numHotels + "</li>";
        },
        _getItemGroupType: function _getItemGroupType(item) {
            var type = "nearme";
            if (item.typeSearch) {
                type = item.Type === 2 ? "airport" : item.typeSearch;
            }
            console.log("group type", item.code, type);
            return type;
        },
        _setWidgetConfig: function _setWidgetConfig(widget) {
            this.config.hotelLabels = this.element.data("hotel-label");
            this.config.sourceFile = this.element.data("source");
            this.config.dataObj = this.element.data("obj");
            this.config.$resultsElement = this.element.siblings(".autocomplete-results");
            this.config.showPoisResults = this.element.data("poi") ? this.element.data("poi") : true;
            this.config.filteredItems = this.config.$resultsElement.find("li");
            this.config.$parentForm = this.element.parents("form");
            this.config.isPromoForm = this.config.$parentForm.hasClass("js-promo-form");
            this.config.formActionData = this.config.$parentForm.data("action");
            this.config.$hiddenFields = this.config.$parentForm.find('input[type="hidden"]');
            this.config.initialValue = this.element.data("initial-value");
        },
        _destroy: function _destroy() {}
    });
})();

"use strict";

$.widget("nh.calendarBooking", {
    options: {
        classes: {},
        monthsNames: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
        daysNames: [ "Monday", "Tuesday", "Wednesday", "Thusday", "Friday", "Saturday", "Sunday" ],
        monthsToShow: 18,
        countDays: 1,
        startDay: 1,
        bookingModal: null,
        elements: {
            $triggerContainer: null,
            $dropdown: null,
            $monthsContainer: null,
            $allDays: null,
            $days: null,
            $provRangeSelected: null,
            $rangeSelected: null
        }
    },
    config: {
        translateMonths: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
        translateDays: [ "Monday", "Tuesday", "Wednesday", "Thusday", "Friday", "Saturday", "Sunday" ],
        blackOuts: {
            data: typeof dateString !== "undefined" ? dateString : "",
            get stringList() {
                var list = [];
                if (this.data) {
                    return this.data.split("*");
                }
                return list;
            },
            get dateList() {
                var list = [];
                var date;
                if (this.stringList) {
                    for (var x = 0; x < this.stringList.length; x++) {
                        date = this.stringList[x].split("-");
                        list.push(moment({
                            year: parseInt(date[0]),
                            month: parseInt(date[1]) - 1,
                            day: parseInt(date[2])
                        }));
                    }
                }
                return list;
            }
        },
        firstValidDate: null,
        lastValidDate: null,
        firstWeeklyDay: null,
        maxNights: 15,
        minNights: 1,
        validDates: {
            first: null,
            last: null
        },
        checkinDate: null,
        checkoutDate: null,
        msgCheckin: null,
        msgCheckout: null,
        msgNovalid: null,
        msgNight: null,
        msgNights: null,
        msgMaxmonths: null
    },
    created: false,
    selectedDate: {
        checkin: {
            date: null,
            day: null,
            month: null,
            year: null,
            setDate: function setDate(date) {
                this.date = date;
                this.day = date.getDate();
                this.month = date.getMonth();
                this.year = date.getFullYear();
            },
            initDate: function initDate() {
                this.date = null;
                this.day = null;
                this.month = null;
                this.year = null;
            }
        },
        checkout: {
            date: null,
            day: null,
            month: null,
            year: null,
            setDate: function setDate(date) {
                this.date = date;
                this.day = date.getDate();
                this.month = date.getMonth();
                this.year = date.getFullYear();
            },
            initDate: function initDate() {
                this.date = null;
                this.day = null;
                this.month = null;
                this.year = null;
            }
        }
    },
    currentDate: {
        date: new Date(new Date().setHours(0, 0, 0, 0)),
        get day() {
            return this.date.getDate();
        },
        get month() {
            return this.date.getMonth();
        },
        get year() {
            return this.date.getFullYear();
        }
    },
    action: "checkin",
    initialDayIndex: null,
    isMobile: null,
    msgInfo: null,
    _create: function _create() {
        var calendar = this;
        this._getExternalConfig();
        if (this.config.firstValidDate || this.config.lastValidDate) {
            this._setValidDates();
        }
        this.options.elements.$dropdown = this.element.find(".js-calendar-booking-dropdown");
        this.options.elements.$triggerContainer = this.element.find(".js-calendar-booking-input");
        this.options.elements.$dropdown = this.element.find(".js-calendar-booking-dropdown");
        this.options.elements.$monthsContainer = this.element.find(".calendar-booking-months");
        this.options.elements.$selectedDateHeader = {
            $container: this.element.find(".calendar-booking-header"),
            get $checkin() {
                return this.$container.find(".calendar-booking-checkin");
            },
            get $checkout() {
                return this.$container.find(".calendar-booking-checkout");
            }
        };
        this._createWeekDaysHeader();
        this._createMonths();
        this.options.elements.$allDays = this.element.find(".day");
        this.options.elements.$days = this.element.find(".day").not(".empty");
        this._on(this.options.elements.$days, {
            click: this._onClickInDay
        });
        var infoDropdown = $(this.options.elements.$dropdown).find(".calendar-booking-info");
        if (this.config.checkinDate && this.config.checkoutDate) {
            var rangeDate = moment(this.config.checkoutDate).diff(moment(this.config.checkinDate), "days");
            if (moment(this.config.checkinDate).isBefore(this.currentDate.date)) {
                this.config.checkinDate = this.currentDate.date;
                this.config.checkoutDate = moment(this.config.checkinDate).add("days", rangeDate);
            }
            this._selectDate(this.config.checkinDate);
            this._selectDate(this.config.checkoutDate);
            $(this.options.elements.$triggerContainer).find(".form-group").addClass("is-active");
            $(this.options.elements.$dropdown).find(".js-calendar-booking-button").removeAttr("disabled");
            var msg = null;
            rangeDate < 2 ? msg = this.config.msgNight : msg = this.config.msgNights;
            $(infoDropdown).html(rangeDate + " " + msg);
            this.msgInfo = rangeDate + " " + msg;
        } else {
            $(infoDropdown).html(this.config.msgCheckin);
            this.msgInfo = this.config.msgCheckin;
        }
        this._setMobile();
        $(window).resize(function() {
            calendar._setMobile();
            calendar._mobileBottom();
            !calendar.isMobile ? dropdownPosition(calendar.element.find(".js-calendar-booking-input"), calendar.options.elements.$dropdown, 20) : $(calendar.options.elements.$dropdown).css("top", "0");
            if (!calendar.isMobile) {
                calendar._arrowNavigation();
            } else {
                var monthsHidden = calendar.options.elements.$monthsContainer.find(".calendar-booking-month.is-hidden");
                if (monthsHidden.length > 0) $(monthsHidden).removeClass("is-hidden");
            }
        });
        $(this.options.elements.$triggerContainer).add(this.element.find(".js-calendar-booking-input input")).on("click", function(e) {
            var isOpen = $(calendar.options.elements.$dropdown).hasClass("is-open");
            var alertLanguage = $(".m-language-edition");
            var targetElement = $(calendar.options.elements.$dropdown)[0].querySelector(".calendar-booking-months");
            $(".js-calendar-booking-dropdown").removeClass("is-open");
            if (!isOpen) {
                $(calendar.options.elements.$dropdown).addClass("is-open");
                if (alertLanguage.length) $(alertLanguage).hide();
                if (calendar.isMobile) {
                    this.blur();
                    bodyScrollLock.disableBodyScroll(targetElement);
                }
                calendar._mobileBottom();
                if (this.bookingModal && this.bookingModal.length) {
                    this.bookingModal.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
                } else {
                    !calendar.isMobile ? dropdownPosition(calendar.element.find(".js-calendar-booking-input"), calendar.options.elements.$dropdown, 20) : $(calendar.options.elements.$dropdown).css("top", "0");
                }
            } else {
                if (calendar.isMobile) {
                    bodyScrollLock.enableBodyScroll(targetElement);
                }
            }
        });
        $(document).on("click", function(e) {
            var isOpen = $(calendar.options.elements.$dropdown).hasClass("is-open");
            var inDropdown = $(e.target).closest(".js-calendar-booking-dropdown").length;
            var inTrigger = $(e.target).closest(".js-calendar-booking-input").length;
            var idModalError = [ "modal-max-days", "modal-range-error" ];
            var isErrorModal = idModalError.includes($(e.target).closest(".modal").attr("id"));
            if (isOpen && !inTrigger && !inDropdown && !isErrorModal) {
                calendar._returnDates();
            }
            if (isErrorModal) {
                var checkinButton = calendar.element.find("button.day[data-day=" + calendar.selectedDate.checkin.day + "][data-month=" + calendar.selectedDate.checkin.month + "][data-year=" + calendar.selectedDate.checkin.year + "]");
                var checkinMonth = $(checkinButton).closest(".calendar-booking-month");
                if (!calendar.isMobile && $(checkinMonth).hasClass("is-hidden")) {
                    $(calendar.element).find(".calendar-booking-month").addClass("is-hidden");
                    $(checkinMonth).removeClass("is-hidden");
                    $(checkinMonth).next().removeClass("is-hidden");
                } else if (calendar.isMobile && $(checkinMonth).offset().top < 0) {
                    var checkinText = $(checkinMonth).find(".month-name").text() + " " + $(checkinMonth).find(".year-name").text();
                    $(checkinMonth).find(".month-content")[0].scrollIntoView();
                    setTimeout(function() {
                        $(calendar.element).find(".calendar-booking-month-fixed").text(checkinText);
                    }, 0);
                }
            }
        });
        $(this.options.elements.$dropdown.find(".nh-ic-close")).click(function(e) {
            var dropdownButton = $(calendar.options.elements.$dropdown).find(".js-calendar-booking-button");
            var targetElement = $(calendar.options.elements.$dropdown)[0].querySelector(".calendar-booking-months");
            bodyScrollLock.enableBodyScroll(targetElement);
            calendar._returnDates();
            calendar.config.checkinDate ? $(dropdownButton).removeAttr("disabled") : $(dropdownButton).attr("disabled", true);
        });
        $(this.options.elements.$dropdown.find(".js-calendar-booking-button")).click(function(e) {
            var targetElement = $(calendar.options.elements.$dropdown)[0].querySelector(".calendar-booking-months");
            $(calendar.options.elements.$dropdown).removeClass("is-open");
            bodyScrollLock.enableBodyScroll(targetElement);
            calendar.config.checkinDate = calendar.selectedDate.checkin.date;
            calendar.config.checkoutDate = calendar.selectedDate.checkout.date;
        });
        var monthFixed = $(this.options.elements.$dropdown).find(".calendar-booking-month-fixed");
        $(this.options.elements.$dropdown).find(".calendar-booking-months").scroll(function(e) {
            var monthHeaders = $(calendar.options.elements.$monthsContainer).find(".month-header");
            var lastMonthDay = null;
            var firstMonthDay = $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month[data-index=0]").find(".month-content .month-day").last();
            var nextMonth = $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month[data-index=1]");
            $(monthHeaders).each(function(index, monthHeader) {
                lastMonthDay = $(this).closest(".calendar-booking-month").find(".month-content .month-day").last();
                nextMonth = $(this).closest(".calendar-booking-month").next().find(".month-header");
                if ($(monthFixed).position().top + $(lastMonthDay).innerHeight() > $(lastMonthDay).position().top) {
                    var month = $(nextMonth).find(".month-name").html();
                    var year = $(nextMonth).find(".year-name").html();
                    $(nextMonth).fadeOut();
                    $(monthFixed).html(month + " " + year);
                } else {
                    $(nextMonth).fadeIn();
                    if ($(monthFixed).position().top < $(firstMonthDay).position().top - $(firstMonthDay).innerHeight()) {
                        var _month = $(firstMonthDay).closest(".calendar-booking-month").find(".month-name").html();
                        var _year = $(firstMonthDay).closest(".calendar-booking-month").find(".year-name").html();
                        $(monthFixed).html(_month + " " + _year);
                    }
                }
            });
            $(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight ? $(infoDropdown).html(calendar.config.msgMaxmonths) : $(infoDropdown).html(calendar.msgInfo);
        });
        if (!this.isMobile) this._arrowNavigation();
    },
    _returnDates: function _returnDates() {
        var trigger = this.options.elements.$triggerContainer;
        var dropdown = this.options.elements.$dropdown;
        if (this.config.checkinDate) {
            this._selectDate(this.config.checkinDate);
            this._selectDate(this.config.checkoutDate);
            $(this.options.elements.$triggerContainer).find(".form-group").addClass("is-active");
        } else {
            this.selectedDate.checkin.initDate();
            this.selectedDate.checkout.initDate();
            $(trigger).find(".js-selected-checkin").val("").trigger("blur");
            $(trigger).find(".js-selected-checkout").val("").trigger("blur");
            $(dropdown).find(".js-selected-checkin").html("-");
            $(dropdown).find(".js-selected-checkout").html("-");
            this.options.elements.$provRangeSelected = null;
            this.options.elements.$rangeSelected = null;
            $(".day").removeClass("checkin checkout provisional selected");
            $(dropdown).find(".calendar-booking-info").html(this.config.msgCheckin);
            this.msgInfo = this.config.msgCheckin;
        }
        $(dropdown).removeClass("is-open");
    },
    _mobileBottom: function _mobileBottom() {
        var heightMonth = $(this.options.elements.$monthsContainer).find(".calendar-booking-month").last().innerHeight();
        var heightMobileFooter = $(this.options.elements.$dropdown).find(".calendar-booking-footer").innerHeight();
        this.isMobile ? $(this.options.elements.$monthsContainer).css("paddingBottom", heightMonth + heightMobileFooter) : $(this.options.elements.$monthsContainer).css("paddingBottom", "0");
    },
    _setMobile: function _setMobile() {
        window.matchMedia("(max-width: 767px)").matches ? this.isMobile = true : this.isMobile = false;
    },
    _arrowNavigation: function _arrowNavigation() {
        var calendar = this;
        var months = $(this.options.elements.$monthsContainer).find(".calendar-booking-month");
        var arrowBefore = $(this.options.elements.$dropdown).find(".calendar-booking-arrow.is-before");
        var arrowAfter = $(this.options.elements.$dropdown).find(".calendar-booking-arrow.is-after");
        $(months).addClass("is-hidden");
        var firstMonth = null;
        if (this.config.checkinDate) firstMonth = parseInt(moment(this.config.checkinDate).format("MM")); else if (this.config.firstValidDate) firstMonth = parseInt(moment(this.config.firstValidDate).format("MM"));
        if (firstMonth) {
            var firstMonthContainer = $(this.options.elements.$monthsContainer).find("[data-month=" + (firstMonth - 1) + "]").first().closest(".calendar-booking-month");
            $(firstMonthContainer).removeClass("is-hidden");
            $(firstMonthContainer).next().removeClass("is-hidden");
        } else {
            $(this.options.elements.$monthsContainer).find(".calendar-booking-month").slice(0, 2).removeClass("is-hidden");
        }
        this._hideArrowNavigation(arrowBefore, arrowAfter);
        $(arrowBefore).click(function(e) {
            var shownMonths = calendar._shownMonths(months);
            var beforeCurrentIndex = shownMonths[0] - 1;
            if (beforeCurrentIndex !== -1) {
                $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month:eq( " + beforeCurrentIndex + " )").removeClass("is-hidden");
                $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month:eq( " + shownMonths[1] + " )").addClass("is-hidden");
            }
            calendar._hideArrowNavigation(arrowBefore, arrowAfter);
        });
        $(arrowAfter).click(function(e) {
            var shownMonths = calendar._shownMonths(months);
            var afterCurrentIndex = shownMonths[1] + 1;
            if (afterCurrentIndex !== calendar.options.monthsToShow) {
                $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month:eq( " + shownMonths[0] + " )").addClass("is-hidden");
                $(calendar.options.elements.$monthsContainer).find(".calendar-booking-month:eq( " + afterCurrentIndex + " )").removeClass("is-hidden");
            }
            calendar._hideArrowNavigation(arrowBefore, arrowAfter);
        });
    },
    _shownMonths: function _shownMonths(months) {
        var shownMonths = [];
        $(months).each(function(index, month) {
            if (!$(month).hasClass("is-hidden")) shownMonths.push(index);
        });
        return shownMonths;
    },
    _hideArrowNavigation: function _hideArrowNavigation(arrowBefore, arrowAfter) {
        !$(this.options.elements.$monthsContainer).find(".calendar-booking-month").first().hasClass("is-hidden") ? $(arrowBefore).addClass("is-hidden") : $(arrowBefore).removeClass("is-hidden");
        !$(this.options.elements.$monthsContainer).find(".calendar-booking-month").last().hasClass("is-hidden") ? $(arrowAfter).addClass("is-hidden") : $(arrowAfter).removeClass("is-hidden");
    },
    _selectDate: function _selectDate(date) {
        var day = parseInt(moment(date).format("DD"));
        var month = parseInt(moment(date).format("MM"));
        var year = parseInt(moment(date).format("YYYY"));
        var button = this.element.find("button.day[data-day=" + day + "][data-month=" + (month - 1) + "][data-year=" + year + "]");
        if (button.hasClass("past")) {
            this.msgInfo = this.config.msgNovalid;
            $(this.options.elements.$dropdown).find(".calendar-booking-info").html(this.config.msgNovalid);
        } else {
            $(button).trigger("click");
        }
    },
    _createWeekDaysHeader: function _createWeekDaysHeader() {
        var $weekDaysHeader = this.element.find(".calendar-booking-weeks");
        var dayName = null;
        for (var x = 0; x < 7; x++) {
            dayName = this.config.translateDays[x].substr(0, 2);
            $weekDaysHeader.append('<div class="calendar-booking-week">' + dayName + "</div>");
        }
    },
    _createMonths: function _createMonths() {
        var dateToShow = this.config.firstValidDate ? this._getDateToShow() : this.currentDate;
        var yearToShow = dateToShow.date.year ? dateToShow.date.year() : dateToShow.year;
        var monthToShow = dateToShow.date.month ? dateToShow.date.month : dateToShow.month;
        for (var i = 0; i < this.options.monthsToShow; i++) {
            if (monthToShow >= 12) {
                monthToShow = 0;
                yearToShow++;
            }
            this._createMonth(monthToShow, yearToShow, i);
            monthToShow++;
        }
        var fixedMonth = this.config.translateMonths[dateToShow.month] + " " + dateToShow.year;
        $(this.options.elements.$dropdown).find(".calendar-booking-month-fixed").html(fixedMonth);
    },
    _createMonth: function _createMonth(month, year, index) {
        var monthTemplate = "";
        monthTemplate += '<div class="calendar-booking-month" data-index=' + index + ">\n                        " + this._getWeekDaysHeaderTpl() + "\n                        " + this._getMonthHeaderTpl(month, year) + "\n                        " + this._getMonthContentTpl(month, year) + "\n                      </div>";
        this.options.elements.$monthsContainer.append(monthTemplate);
    },
    _getWeekDaysHeaderTpl: function _getWeekDaysHeaderTpl() {
        var dayName = null;
        var template = '<div class="calendar-booking-weeks">';
        for (var x = 0; x < 7; x++) {
            dayName = this.config.translateDays[x].substr(0, 2);
            template += '<div class="calendar-booking-week">' + dayName + "</div>";
        }
        template += "</div>";
        return template;
    },
    _getMonthHeaderTpl: function _getMonthHeaderTpl(monthIndex, year) {
        var template = '<div class="month-header">\n        <span class="month-name">' + this.config.translateMonths[monthIndex] + '</span>\n        <span class="year-name">' + year + "</span>\n      </div>";
        return template;
    },
    _getMonthContentTpl: function _getMonthContentTpl(month, year) {
        var template = '<div class="month-content">';
        var firstDay = this._getDayWeek(year, month, 1);
        var lastDay = this._lastDay(month, year);
        var today = this.currentDate.date.getDate();
        var dayDate = {
            day: null,
            month: month,
            year: year,
            date: null
        };
        var isValidDay = true;
        var isPastDay = true;
        for (var x = 0; x < firstDay; x++) {
            template += '<div class="month-day"><button class="day empty"><span></span></button></div>';
        }
        for (var _x = 1; _x <= lastDay; _x++) {
            dayDate.day = _x;
            dayDate.date = moment({
                year: parseInt(year),
                month: parseInt(month),
                day: parseInt(_x)
            });
            isValidDay = this._isValidDay(dayDate);
            template += '<div class="month-day">\n                    <button class="day' + (isValidDay.past ? " past" : "") + (_x === today && month === this.currentDate.month && year === this.currentDate.year ? " today" : "") + (isValidDay.blackOut ? " blackOut" : "") + (!isValidDay.valid ? " disabled" : "") + '" type="button" data-day="' + _x + '" data-month="' + month + '" data-year="' + year + '" ' + (!isValidDay.valid ? "disabled" : "") + ">\n                      <span>" + _x + "</span>\n                    </button>\n                  </div>";
        }
        template += "</div>";
        return template;
    },
    _onClickInDay: function _onClickInDay(e) {
        var $this = $(e.currentTarget);
        var dayIndex = this.options.elements.$days.index($this);
        var day = $this.data("day");
        var month = {
            number: $this.data("month"),
            text: this.options.monthsNames[$this.data("month")]
        };
        var year = $this.data("year");
        var selectedDate = new Date(year, month.number, day);
        if (selectedDate < this.currentDate.date) {
            return;
        }
        if (this.action === "checkin" || selectedDate < this.selectedDate.checkin.date) {
            this._setCheckIn(dayIndex, selectedDate);
        } else if (this.action === "checkout" && !moment(this.selectedDate.checkin.date).isSame(selectedDate)) {
            this._setCheckOut(dayIndex, selectedDate);
        }
    },
    _getLastDayAvailable: function _getLastDayAvailable() {
        var lastDayButton = $(this.options.elements.$monthsContainer).find(".day").last();
        return moment($(lastDayButton).attr("data-year") + " / " + ($(lastDayButton).attr("data-month") + 1) + " / " + $(lastDayButton).attr("data-day"), "DD/MM/YYYY");
    },
    _setCheckIn: function _setCheckIn(dayIndex, selectedDate) {
        var provCheckoutDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate() + this.config.minNights);
        if (!this._isValidRange(selectedDate, provCheckoutDate)) {
            return false;
        }
        var triggerText = moment(selectedDate).format("DD/MM/YYYY");
        var triggerCheckin = this.options.elements.$triggerContainer.find(".js-selected-checkin");
        var triggerCheckout = this.options.elements.$triggerContainer.find(".js-selected-checkout");
        $(triggerCheckin).val(triggerText).trigger("focus");
        $(triggerCheckin).closest(".form-group").addClass("is-active");
        $(triggerCheckout).val("").trigger("blur");
        $(triggerCheckout).closest(".form-group").removeClass("is-active");
        var headerText = moment(selectedDate).format("dd, DD MMM YY");
        var headerCheckin = this.options.elements.$selectedDateHeader.$checkin;
        var headerCheckout = this.options.elements.$selectedDateHeader.$checkout;
        $(headerCheckin).find(".js-selected-checkin").html(headerText);
        $(headerCheckout).find(".js-selected-checkout").html("");
        if (this.options.elements.$provRangeSelected) {
            this.options.elements.$provRangeSelected.removeClass("checkin checkout provisional selected");
        }
        if (this.options.elements.$rangeSelected) {
            this.options.elements.$rangeSelected.removeClass("checkin checkout provisional selected");
        }
        this.initialDayIndex = dayIndex;
        this.options.elements.$provRangeSelected = this.options.elements.$days.slice(dayIndex, dayIndex + this.config.minNights + 1).addClass("selected");
        this.options.elements.$provRangeSelected.eq(0).addClass("checkin initial");
        this.options.elements.$provRangeSelected.slice(1, this.options.elements.$provRangeSelected.length).addClass("provisional");
        var lastDate = this._getLastDayAvailable();
        if (!moment(selectedDate).isSame(lastDate)) {
            this.options.elements.$provRangeSelected.eq(this.options.elements.$provRangeSelected.length - 1).addClass("checkout");
        }
        this.selectedDate.checkin.setDate(selectedDate);
        $(this.options.elements.$dropdown).find(".js-calendar-booking-button").attr("disabled", true);
        this.action = "checkout";
        var msgInfo = this.config.msgCheckout;
        if (moment(selectedDate).isSame(lastDate)) msgInfo = this.config.msgMaxmonths;
        this.msgInfo = msgInfo;
        $(this.options.elements.$dropdown).find(".calendar-booking-info").html(msgInfo);
    },
    _setCheckOut: function _setCheckOut(dayIndex, selectedDate) {
        var $checkOutDay = this.options.elements.$days.eq(dayIndex);
        if (!this._isValidRange(this.selectedDate.checkin.date, selectedDate)) {
            return false;
        }
        var triggerText = moment(selectedDate).format("DD/MM/YYYY");
        var triggerCheckin = this.options.elements.$triggerContainer.find(".js-selected-checkin");
        var triggerCheckout = this.options.elements.$triggerContainer.find(".js-selected-checkout");
        $(triggerCheckout).val(triggerText).trigger("focus");
        $(triggerCheckin).closest(".form-group").removeClass("is-active");
        $(triggerCheckout).closest(".form-group").addClass("is-active");
        var headerText = moment(selectedDate).format("dd, DD MMM YY");
        var headerCheckout = this.options.elements.$selectedDateHeader.$checkout;
        $(headerCheckout).find(".js-selected-checkout").html(headerText);
        this.options.elements.$provRangeSelected = null;
        this.options.elements.$rangeSelected = this.options.elements.$days.slice(this.initialDayIndex, dayIndex + 1).addClass("selected").removeClass("provisional checkout");
        this.options.elements.$rangeSelected.eq(this.options.elements.$rangeSelected.length - 1).addClass("checkout");
        this.options.elements.$rangeSelected.eq(0).removeClass("initial");
        this.selectedDate.checkout.setDate(selectedDate);
        this.action = "checkin";
        var contNights = moment(this.selectedDate.checkout.date).diff(moment(this.selectedDate.checkin.date), "days");
        var msg = null;
        contNights < 2 ? msg = this.config.msgNight : msg = this.config.msgNights;
        $(this.options.elements.$dropdown).find(".calendar-booking-info").html(contNights + " " + msg);
        this.msgInfo = contNights + " " + msg;
        $(this.options.elements.$dropdown).find(".js-calendar-booking-button").removeAttr("disabled");
        if (!this.isMobile) {
            this.options.elements.$triggerContainer.trigger("click");
            $(triggerCheckout).closest(".calendar-group").removeClass("is-active");
            $(headerCheckout).closest(".selected-checkout").removeClass("is-active");
        }
    },
    _getDayWeek: function _getDayWeek(year, month, day) {
        var paramDay = new Date(year, month, day);
        var dayNumber = paramDay.getDay();
        if (this.options.startDay === 1) {
            dayNumber === 0 ? dayNumber = 6 : dayNumber--;
        }
        return dayNumber;
    },
    _lastDay: function _lastDay(month, year) {
        var lastDay = 28;
        while (this._checkdate(year, month + 1, lastDay + 1)) {
            lastDay++;
        }
        return lastDay;
    },
    _checkdate: function _checkdate(year, month, day) {
        return month > 0 && month < 13 && year > 0 && year < 32768 && day > 0 && day <= new Date(year, month, 0).getDate();
    },
    _getExternalConfig: function _getExternalConfig() {
        var $self = this;
        var data = this.element.data();
        $.each(this.config, function(key, value) {
            $self.config[key] = data[key] ? data[key] : $self.config[key];
        });
        if (this.config.checkinDate) this.config.checkinDate = moment(this.config.checkinDate, "DD/MM/YYYY")._d;
        if (this.config.checkoutDate) this.config.checkoutDate = moment(this.config.checkoutDate, "DD/MM/YYYY")._d;
    },
    _setValidDates: function _setValidDates() {
        this.config.validDates.first = this._getValidDate(this.config.firstValidDate, this.config.firstWeeklyDay);
        this.config.validDates.last = this._getValidDate(this.config.lastValidDate);
    },
    _isValidRange: function _isValidRange(checkinDate, checkoutDate) {
        var checkindate = moment(checkinDate);
        var checkoutdate = moment(checkoutDate);
        var rangeDays = checkoutdate.diff(checkindate, "days");
        var isValidInitDate = true;
        var isValidEndDate = true;
        isValidInitDate = this._isValidDay({
            date: checkindate
        }).valid;
        isValidEndDate = this._isValidDay({
            date: checkoutdate
        }).valid;
        var isValidRangeDays = this.config.minNights <= rangeDays && rangeDays <= this.config.maxNights;
        var hasBlackOuts = this.config.blackOuts.dateList.some(function(blackDate) {
            if (blackDate.isBetween(checkindate, checkoutdate) || blackDate.isSame(checkindate)) {
                return true;
            }
        });
        if (!isValidInitDate || !isValidEndDate) $("#modal-range-error").modal(); else if (rangeDays > this.config.maxNights) $("#modal-max-days").modal(); else if (rangeDays < this.config.minNights) $("#modal-range-error").modal();
        return isValidRangeDays && !hasBlackOuts && isValidInitDate && isValidEndDate;
    },
    _isValidDay: function _isValidDay(dayDate) {
        var isPast = dayDate.date.isBefore(this.currentDate.date);
        var isBlackOutDay = this._isBlackOutDay(dayDate);
        var isValidDate = true;
        var isValid = {
            valid: true,
            past: isPast,
            blackOut: this._isBlackOutDay(dayDate)
        };
        if (this.config.validDates.first && this.config.validDates.last) {
            isValidDate = dayDate.date.isBetween(this.config.validDates.first.date, this.config.validDates.last.date, null, "[]");
        } else if (this.config.validDates.first && !this.config.validDates.last) {
            isValidDate = dayDate.date.isSameOrAfter(this.config.validDates.first.date);
        } else if (this.config.validDates.first && !this.config.validDates.first) {
            isValidDate = dayDate.date.isSameOrBefore(this.config.validDates.last.date);
        }
        isValid.valid = isValidDate && !isPast && !isBlackOutDay;
        return isValid;
    },
    _getDateToShow: function _getDateToShow() {
        var date = this.currentDate;
        if (this.config.validDates.first.date.isAfter(this.currentDate.date)) {
            date = this.config.validDates.first;
        }
        return date;
    },
    _isBlackOutDay: function _isBlackOutDay(dayDate) {
        var isBlackDay = this.config.blackOuts.dateList.some(function(blackDate) {
            if (dayDate.date.isSame(blackDate)) {
                return true;
            }
        });
        return isBlackDay;
    },
    close: function close() {
        if (this.element.hasClass("is-open")) {
            this.element.removeClass("is-open");
        }
    }
});

"use strict";

$.widget("nh.customSelector", {
    options: {
        multipleChoice: false
    },
    _create: function _create() {
        this.inputElements = this.element.find("input");
        this.inputElementsWrapper = this.inputElements.parent();
        $.each(this.inputElementsWrapper, function() {
            var $this = $(this);
            var $input = $this.find("input");
            if ($input.prop("disabled")) {
                $this.addClass("is_disabled");
            }
        });
        if (this.element.attr("data-multiple-choice") !== undefined) {
            this.options.multipleChoice = this.element.attr("data-multiple-choice") == "true";
        }
        this.element.find(".is_checked").addClass("temp_is_checked");
        this.element.removeClass("is_checked");
        this.inputElements.not("input[type='hidden']").each(function(index, el) {
            var $el = $(el);
            var $div = $el.parent();
            if ($el.prop("checked") || $div.hasClass("temp_is_checked")) {
                $div.addClass("is_checked");
            } else {
                $div.removeClass("is_checked");
            }
            $div.removeClass("temp_is_checked");
        });
        this._on(this.inputElements, {
            change: this._onInputChange
        });
        this._on(this.element.find(".custom-selector-item"), {
            mouseup: this._onInputFocusout
        });
    },
    _onInputChange: function _onInputChange(e) {
        var $radio = $(e.currentTarget);
        var containerRadio = $radio.parent();
        if (!$radio.prop("disabled")) {
            if ($radio.prop("checked")) {
                containerRadio.addClass("is_checked");
                if (!this.options.multipleChoice) {
                    containerRadio.siblings(".is_checked").removeClass("is_checked");
                }
            }
        }
    },
    _onInputFocusout: function _onInputFocusout(e) {
        var $this = $(e.currentTarget);
        var inputRadio = $this.find("input");
        if (!inputRadio.prop("disabled")) {
            if ($this.hasClass("is_checked")) {
                $this.removeClass("is_checked");
                inputRadio.prop("checked", false);
                inputRadio.trigger("change");
            }
        }
    },
    getValue: function getValue() {
        var _this = this;
        var checkedValue = null;
        this.inputElements.each(function(index, el) {
            var $el = $(el);
            if ($el.prop("checked")) {
                if (!_this.options.multipleChoice) {
                    checkedValue = $el.val();
                } else if ($el.val()) {
                    if (!checkedValue) {
                        checkedValue = [];
                    }
                    checkedValue.push($el.val());
                }
            }
        });
        return checkedValue;
    },
    _destroy: function _destroy() {}
});

"use strict";

$.widget("nh.formSteps", {
    options: {
        initStep: 0,
        validateStep: null
    },
    activeStep: 0,
    _create: function _create() {
        this.formSteps = this.element.find("[data-step]");
        this.stepIndicators = this.element.find("[data-active-step]");
        this.nextStepNavigators = this.element.find("[data-next-step]");
        this.prevStepNavigators = this.element.find("[data-prev-step]");
        this.form = this.element.find("form");
        this._initSteps();
        this._on(this.stepIndicators, {
            click: this._onStepIndicatorClick
        });
        this._on(this.nextStepNavigators, {
            click: this._onNextStepNavigatorClick
        });
        this._on(this.prevStepNavigators, {
            click: this._onPrevStepNavigatorClick
        });
    },
    _initSteps: function _initSteps() {
        this._navigateStep(this.options.initStep);
    },
    navTo: function navTo(stepToNav) {
        if (this.form.validator) {
            if (stepToNav > this.activeStep) {
                this.form.validator("validate");
                var errorElements = this.form.find(".has-error");
                if (errorElements.length === 0) {
                    this._navigateStep(stepToNav);
                }
            } else {
                this._navigateStep(stepToNav);
            }
        }
    },
    _navigateStep: function _navigateStep(stepToNav) {
        var _this = this;
        this.formSteps.each(function(index, step) {
            var $step = $(step);
            if ($step.data("step") == stepToNav) {
                $step.removeClass("hide");
                _this._setInputValidate($step, true);
                _this._setStepIndicator($step.data("step"));
                _this.activeStep = $step.data("step");
            } else {
                $step.addClass("hide");
                _this._setInputValidate($step, false);
            }
        });
        this.form.validator("update");
    },
    _setInputValidate: function _setInputValidate($step, validate) {
        var stepInputs = $step.find(":input:not(button)").add(":input[type='radio']:not(:visible)").add(".bootstrap-select button:visible");
        stepInputs.attr("data-validate", validate);
    },
    _setStepIndicator: function _setStepIndicator(activeStep) {
        this.stepIndicators.removeClass("is_active");
        this.stepIndicators.each(function(index, stepIndicator) {
            var $stepIndicator = $(stepIndicator);
            if ($stepIndicator.data("active-step") == activeStep) {
                $stepIndicator.addClass("is_active");
            }
        });
    },
    _onStepIndicatorClick: function _onStepIndicatorClick(e) {
        var $clickedStep = $(e.currentTarget);
        var stepToNav = $clickedStep.data("active-step");
        this.navTo(stepToNav);
    },
    _onNextStepNavigatorClick: function _onNextStepNavigatorClick(e) {
        this.navTo(this.activeStep + 1);
    },
    _onPrevStepNavigatorClick: function _onPrevStepNavigatorClick(e) {
        if (this.activeStep - 1 >= 0) {
            this.navTo(this.activeStep - 1);
        }
    },
    _destroy: function _destroy() {}
});

"use strict";

$.widget("nh.htmlInject", {
    options: {},
    HTML_INJECTED_EVENT: "html_injected_event",
    _create: function _create() {},
    injectHTMLByUrl: function injectHTMLByUrl(containerSelector, tplUrl, callback) {
        var _this = this;
        var $containerElement = this.element.find(containerSelector);
        if ($containerElement) {
            this.toggleLoading(true);
            $containerElement.load("" + tplUrl, function(response, status, xhr) {
                _this.toggleLoading(false);
                _this._trigger(_this.HTML_INJECTED_EVENT, {}, {
                    response: response,
                    status: status,
                    xhr: xhr
                });
                _this._onLoadComplete(response, status, xhr, callback);
            });
        }
    },
    injectHTMLByJson: function injectHTMLByJson(containerSelector, tplUrl, callback) {
        var $containerElement = this.element.find(containerSelector);
        if ($containerElement) {
            $containerElement.html(tplUrl);
            this.toggleLoading(false);
            this._trigger(this.HTML_INJECTED_EVENT, {}, {});
            if (typeof callback === "function") {
                callback();
            }
        }
    },
    _onLoadComplete: function _onLoadComplete(response, status, xhr, callback) {
        if (status === "error") {
            this._onLoadError();
        } else {
            if (typeof callback === "function") {
                callback(response, status, xhr);
            }
        }
    },
    toggleLoading: function toggleLoading(loadingVisible) {
        var capa = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        if (loadingVisible && capa) {
            var $capa = capa;
            $(".spinnerPanel").remove();
            var $spinner = $(".spinner:first").clone();
            $spinner.css({
                padding: "20%",
                "text-align": "center"
            }).addClass("spinnerPanel");
            $capa.html("").html($spinner);
            $(".spinnerPanel").show();
        } else {
            $(".spinnerPanel").remove();
        }
    },
    _onLoadError: function _onLoadError() {},
    _destroy: function _destroy() {}
});

"use strict";

$.widget("nh.limitCharacters", {
    options: {
        maxLenght: 250
    },
    _create: function _create() {
        this.counterBox = this.element.closest(".form-group").find(".rest-caracters");
        this.max = !this.element.data("maxlength") ? this.options.maxLenght : parseInt(this.element.data("maxlength"));
        this._countCharacters();
        this._on(this.element, {
            change: this._countCharacters,
            keyup: this._countCharacters
        });
    },
    _countCharacters: function _countCharacters(e) {
        var value = this.element.val();
        var remainingCharacters = this.max - value.length;
        var remainingCaracteresLabel = this.counterBox.data("label") || "";
        if (value && value.length > this.max) {
            this.element.val(value.substring(0, this.max));
            remainingCharacters = 0;
        }
        if (this.counterBox.length) {
            this.counterBox.html(remainingCharacters + " " + remainingCaracteresLabel);
        }
    },
    _destroy: function _destroy() {}
});

"use strict";

$.widget("nh.selectDestinations", {
    fields: null,
    querys: {
        data: null,
        country: "$..CountryList[*].name",
        city: "",
        hotel: "",
        setCity: function setCity(country) {
            this.city = "$..CountryList[?(@.name=='" + country + "')]..CityList[*].name";
        },
        setHotel: function setHotel(city) {
            this.hotel = "$..CityList[?(@.name=='" + city + "')].HotelList[*].name";
        }
    },
    countryData: {
        $field: null,
        $wrapper: null,
        query: null,
        data: null
    },
    cityData: {
        $field: null,
        $wrapper: null,
        query: null,
        data: null
    },
    hotelData: {
        $field: null,
        $wrapper: null,
        query: null,
        data: null
    },
    _create: function _create() {
        var destination = this;
        destination.fields = {
            country: {
                $field: destination.element.find("select.country"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            },
            city: {
                $field: destination.element.find("select.city"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            },
            hotel: {
                $field: destination.element.find("select.hotel"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            }
        };
        if (destination.fields.country.$field.length) destination._initializeCountries();
        destination.fields.country.$field.on("change", function() {
            var value = $(this).val().replace(/_/g, " ");
            destination.querys.setCity(value);
            destination._initializeCities();
            destination.fields.hotel.$field.find("option").remove();
            destination.fields.hotel.$field.selectpicker("refresh");
        });
        destination.fields.city.$field.on("change", function() {
            var value = $(this).val().replace(/_/g, " ");
            destination.querys.setHotel(value);
            if (value) destination._initializeHotels();
        });
    },
    _initializeCountries: function _initializeCountries() {
        var destination = this;
        var promise = $.getJSON("/resources/jsonDestinations.txt");
        this.countryData = {
            $field: this.fields.country.$field,
            $wrapper: this.fields.country.$wrapper,
            query: this.querys.country,
            data: this.querys.data
        };
        promise.then(function(response) {
            destination.querys.data = response;
            destination.countryData.data = response;
            destination._generateSelect(destination.countryData);
        });
    },
    _initializeCities: function _initializeCities() {
        this.cityData = {
            $field: this.fields.city.$field,
            $wrapper: this.fields.city.$wrapper,
            query: this.querys.city,
            data: this.querys.data
        };
        this._generateSelect(this.cityData);
    },
    _initializeHotels: function _initializeHotels() {
        this.hotelData = {
            $field: this.fields.hotel.$field,
            $wrapper: this.fields.hotel.$wrapper,
            query: this.querys.hotel,
            data: this.querys.data
        };
        this._generateSelect(this.hotelData);
    },
    _generateSelect: function _generateSelect(selectData) {
        var optionValue = null;
        var optionsValues = jsonPath(selectData.data, selectData.query).sort(function(a, b) {
            var aName = utils.removeDiacritics(a.toLowerCase());
            var bName = utils.removeDiacritics(b.toLowerCase());
            return aName < bName ? -1 : aName > bName ? 1 : 0;
        });
        selectData.$wrapper.removeClass("has-error has-success has-danger");
        selectData.$field.find("option").remove().append('<option value="">');
        $.each(optionsValues, function(index, value) {
            optionValue = value.replace(/\s+/g, "_");
            selectData.$field.append('<option value="' + optionValue + '">' + value + "</option>");
        });
        selectData.$field.prop("disabled", false).selectpicker("refresh");
    }
});

"use strict";

var commonFormSetup = function() {
    function init() {
        virtualKeyboardDetector.init({
            recentlyFocusedTimeoutDuration: 3e3
        });
        $('.ui-autocomplete-input[data-await="false"]').selectToAutocomplete();
        if ($(".ui-autocomplete-group").length > 0) {
            $(".ui-autocomplete-group").autocompleteGroup();
        }
        $(".labelup-select").on("change", _labelUpSelect);
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
            $(".selectpicker").not("[data-live-search='true']").selectpicker("mobile");
        }
        if (globalConfig.windowWidth < 992) {
            _initClearButton();
            _initToggleInputIcons();
        }
        $(".custom-selector").customSelector();
        $(".js-selector-datepicker").selectorDatepicker({
            format: "DD/MM/YYYY",
            initYear: "1920",
            monthTranslations: monthsArray,
            invalidDateMessage: Labels.lblInvalidDate
        });
        $(".js-count-maxlength").limitCharacters();
        $(".form-control").each(_labelAnimation);
        $("select.form-control-select").each(_labelAnimation);
    }
    function _labelUpSelect() {
        var selected = $(this).find("option:selected").val();
        if (selected) {
            $(".relative").addClass("labelup");
        }
    }
    function _labelAnimation() {
        var $this = $(this);
        if ($this.val()) {
            $this.closest(".form-group").find(".labelup-control").addClass("focus");
        }
        $this.on("focus change keyup", function() {
            $(this).closest(".form-group").find(".labelup-control").addClass("focus");
        }).on("focusout blur", function() {
            var $this = $(this);
            if ($this.is('input[type="number"]') && $this[0].validity && !$this[0].validity.valid) {
                return;
            }
            !$this.val() && !$this.attr("placeholder") ? $this.closest(".form-group").find(".labelup-control").removeClass("focus") : $this.closest(".form-group").find(".labelup-control").addClass("focus");
        });
    }
    function _initToggleInputIcons() {
        var $inputIcon = $(".container-icon");
        var $inputs = $inputIcon.siblings("input, textarea");
        $inputs.each(function(index, input) {
            var $icon = $(input).siblings(".container-icon");
            if ($(input).val()) {
                $icon.hide();
            } else {
                $icon.show();
            }
        });
        $inputs.on("keyup blur", function() {
            var $this = $(this);
            var $icon = $this.siblings(".container-icon");
            if ($this.val() !== "") {
                $icon.hide();
            } else {
                $icon.show();
            }
        });
    }
    function _initClearButton() {
        var $inputClearBtns = $(".js-input-clear");
        var $clearElements = $inputClearBtns.siblings("input, textarea");
        $clearElements.each(function(index, clearEl) {
            var clearBtn = $(clearEl).siblings(".js-input-clear");
            if ($(clearEl).val()) {
                clearBtn.show();
            } else {
                clearBtn.hide();
            }
        });
        $clearElements.on("keyup blur", function() {
            var $this = $(this);
            var clearBtn = $this.siblings(".js-input-clear");
            if ($this.val() !== "") {
                clearBtn.show();
            } else {
                clearBtn.hide();
            }
        });
        $inputClearBtns.on("click", function() {
            var $this = $(this);
            $this.siblings("textarea, input").val("").trigger("change");
            $this.siblings("textarea, input").trigger("blur");
            $this.hide();
            if (!$this.closest(".form-group.labelup").find("input").attr("placeholder")) {
                $this.closest(".form-group.labelup").find("label").removeClass("focus");
            }
        });
    }
    function validateNumberDocument(docType, docuNumber) {
        var isValid = false;
        var numero;
        var letter;
        var letra;
        var docTypeLowerCase = docType.toLowerCase();
        if (docTypeLowerCase === "dni" || docTypeLowerCase === "nie") {
            numero = docuNumber.substr(0, docuNumber.length - 1);
            numero = numero.replace("X", 0);
            numero = numero.replace("Y", 1);
            numero = numero.replace("Z", 2);
            letter = docuNumber.substr(docuNumber.length - 1, 1).toUpperCase();
            numero = numero % 23;
            letra = "TRWAGMYFPDXBNJZSQVHLCKET";
            letra = letra.substring(numero, numero + 1);
            isValid = letra !== letter ? false : true;
        } else {
            isValid = true;
        }
        return isValid;
    }
    function customCheckUnderAge($datepickerSelector) {
        return $datepickerSelector.selectorDatepicker("isUnderAge");
    }
    return {
        init: init,
        validateNumberDocument: validateNumberDocument,
        customCheckUnderAge: customCheckUnderAge
    };
}();

$(document).ready(function() {
    commonFormSetup.init();
});

function scrollToFistError($form) {
    var moveToOffset;
    if ($form.find("div.has-error:not(.js-no-scroll):visible").length > 0) {
        moveToOffset = $form.find("div.has-error:not(.js-no-scroll):visible").eq(0).offset().top - 90;
        $("html, body").animate({
            scrollTop: moveToOffset,
            useTranslate3d: true
        }, 200, "linear", function() {
            toggleLoadingButton($form, false);
        });
    }
}

function toggleLoadingButton($form, isDisabled) {
    var $bottonSubmit = $form.find("button[type=submit]");
    $bottonSubmit.prop("disabled", isDisabled);
}

function validateDate($el) {
    var $calendar = $el.parent().siblings(".responsive-calendar-wrap");
    var isValid;
    if (!$el.hasClass("readyValidate")) {
        setTimeout(function() {
            $el.addClass("readyValidate");
            if ($el.val().length < 1 && !$calendar.hasClass("active")) {
                $el.trigger("focusout");
            }
        }, 200);
    } else {
        $el.removeClass("readyValidate");
        isValid = $el.val() ? null : "error";
        return isValid;
    }
}

function validateMinCheckbox($el) {
    var fieldsetName = $el.data("fieldset");
    var fieldset = this.$element.find('[name="' + fieldsetName + '"]');
    var minCheckbox = parseInt($el.data("mincheckbox"));
    var checkedCheckboxes = fieldset.find('input[type="checkbox"]:checked:visible');
    if (isNaN(minCheckbox)) {
        return;
    }
    if (checkedCheckboxes.length < minCheckbox) {
        return "error";
    }
}

$.fn.validator.Constructor.prototype.focusError = function() {
    if (!this.options.focus) return;
    var $input = this.$element.find(".has-error :input:visible:not(button):first").add(".has-error :input[type='radio']:not(:visible):first").add(".has-invalid-datepicker-error:first").add(".has-error .bootstrap-select button:visible:first").first();
    if ($input.length === 0) return;
    $("html, body").animate({
        scrollTop: $input.offset().top - $.fn.validator.Constructor.FOCUS_OFFSET
    }, 250, function() {
        $input.focus();
    });
};

function validateMultipleEmails($el) {
    var isValid;
    var emailStrings = $el.val().split(",");
    var emailRegExp = new RegExp("[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$");
    emailStrings.forEach(function(emailString) {
        if (!emailRegExp.test(emailString)) {
            isValid = "error";
        }
    });
    return isValid;
}

function validateBookingRange($form) {
    var $checkin = $form.find("input.js-selected-checkin");
    var $checkout = $form.find("input.js-selected-checkout");
    var $rangeWrapper = $form.find(".js-calendar-booking-input");
    var $errorMessage = $rangeWrapper.siblings(".help-block");
    var isValidDate = function isValidDate($input) {
        var date = $input.val();
        var isValid = true;
        if (!date) {
            isValid = false;
        } else {
            isValid = moment(date, "DD/MM/YYYY").isValid();
        }
        return isValid;
    };
    var isValidInitialDate = isValidDate($checkin);
    var isValidFinalDate = isValidDate($checkout);
    var isError = void 0;
    if (isValidInitialDate && isValidFinalDate) {
        $errorMessage.hide();
        $rangeWrapper.removeClass("has-error").addClass("has-success");
        isError = false;
    } else {
        $errorMessage.show();
        $rangeWrapper.addClass("has-error has-warning").removeClass("has-success");
        isError = true;
    }
    return isError;
}

function validateLocation($el) {
    var isError = false;
    var matchValue = $el.data("search");
    var $locationWrapper = $el.parents(".form-group");
    var $errorMessage = $el.siblings(".help-block");
    var errorHtml = '<ul class="list-unstyled"><li>' + $el.data("search-error") + "</li></ul>";
    if ($el.val() && $el.val() !== matchValue) {
        if (!$errorMessage.length) {
            $errorMessage = $('<div class="help-block with-errors side">');
            $locationWrapper.append($errorMessage);
        }
        $errorMessage.html(errorHtml).show();
        $locationWrapper.addClass("has-error has-warning").removeClass("has-success");
        isError = true;
    } else {
        $errorMessage.html("").hide();
        $locationWrapper.removeClass("has-error").addClass("has-success");
        isError = false;
    }
    return isError;
}

$.fn.validator.Constructor.prototype.onInput = function(e) {
    var self = this;
    var $el = $(e.target);
    var deferErrors = e.type !== "focusout";
    if ($el.hasClass("dropdown-toggle")) {
        $el = $("#" + $el.data("id"));
    }
    if (!this.$inputs.is($el)) {
        return;
    }
    if (e.type === "focusout" || $el.data("validate-all-events")) {
        this.validateInput($el, deferErrors).done(function() {
            self.toggleSubmit();
        });
    }
};

$.fn.validator.Constructor.prototype.focusError = function(e) {
    var $modal;
    if ($("body").hasClass("modal-open")) {
        $modal = this.$element.parents(".modal");
    }
    var $inputWrapper = this.$element.find(".has-error:visible:first");
    var $input = $inputWrapper.find("input:not(.js-no-scroll):first");
    if (!this.options.focus) {
        return;
    }
    if (!$input || ($input.length && $input.length) === 0) {
        return;
    }
    if ($input && $input.length > 0) {
        if ($modal && $modal.length) {
            $modal.animate({
                scrollTop: {
                    scrollTop: $input.offset().top - 20
                }
            }, 250);
        } else {
            $("html, body").animate({
                scrollTop: $input.offset().top - 20
            }, 250);
        }
        if (!virtualKeyboardDetector.isVirtualKeyboardVisible()) {
            $input.focus();
        }
    }
};

"use strict";

var templatesRoom = function() {
    var _template = function _template(template, data) {
        var cursor = 0, code = "var r=[];\n", stack = [], re = /\{\{(.*?)\}\}/gim;
        var tpl = _parseTemplate(template);
        var variable = function variable(line, obj) {
            return line == "." ? obj : eval("try{obj." + line + ";} catch(e){try{this." + line + ";} catch(e){}}");
        };
        var block = function block(obj) {
            var args = Array.prototype.slice.call(arguments, 1), out = "";
            if (Array.isArray(obj)) {
                for (var i = 0, len = obj.length; i < len; i++) {
                    var el = obj[i];
                    for (var i2 = 0, len2 = args.length; i2 < len2; i2++) {
                        out += typeof args[i2] === "function" ? args[i2].call(null, el) : args[i2];
                    }
                }
            } else if (obj) {
                for (var i = 0, len = args.length; i < len; i++) {
                    out += typeof args[i] === "function" ? args[i].call(null, obj) : args[i];
                }
            }
            return out;
        };
        var add = function add(line, tag) {
            if (tag) {
                if (line.charAt(0) === "#") {
                    code += stack.length ? ", block(data." + stack + "." + line.slice(1) : "r.push(block(data." + line.slice(1);
                    stack.push(line.slice(1));
                } else if (line.charAt(0) === "/") {
                    stack.pop();
                    code += stack.length ? ")" : "));\n";
                } else {
                    if (stack.length) code += ', variable.bind(data, "' + line + '")'; else code += line === "." ? "r.push(el || data);\n" : "r.push(data." + line + ");\n";
                }
            } else {
                if (stack.length) code += ', "' + line.replace(/"/g, '"') + '"'; else code += line != "" ? 'r.push("' + line.replace(/"/g, '"') + '");\n' : "";
            }
        };
        while (match = re.exec(tpl)) {
            add(tpl.slice(cursor, match.index));
            add(match[1], true);
            cursor = match.index + match[0].length;
        }
        add(tpl.substr(cursor, tpl.length - cursor));
        code += 'return r.join("");';
        try {
            result = eval("(function(data){" + code + "})");
        } catch (err) {
            console.error("'" + err.message + "'", " in \n\nCode:\n", code, "\n");
        }
        return result;
    };
    var _parseTemplate = function _parseTemplate(template) {
        tpl = template.replace(new RegExp("\x3c!--[\\s\\S]*?(?:--\x3e)?" + "\x3c!---+>?" + "|<!(?![dD][oO][cC][tT][yY][pP][eE]|\\[CDATA\\[)[^>]*>?" + "|<[?][^>]*>?", "g"), "");
        tpl = tpl.replace(new RegExp('"', "g"), "'");
        tpl = tpl.replace(new RegExp(/\r?\n|\r/g, "g"), "");
        return tpl;
    };
    var getTemplate = function getTemplate(tpl, data) {
        return _template(tpl)(data);
    };
    return {
        getTemplate: getTemplate
    };
}();

"use strict";

var mArrival = function() {
    var mArrivalView = $(".m-arrival");
    function init() {
        mArrivalView.find("form").validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
    }
    return {
        init: init
    };
}();

$(function() {
    mArrival.init();
});

"use strict";

var mCioRoomSelected = function() {
    var mCioRoomSelectedModal = $("#modal-room-selected");
    var mCioRoomModalHeader = mCioRoomSelectedModal.find(".modal-header");
    var mCioRoomBackButton = mCioRoomSelectedModal.find("a.btn-back");
    var ROOM_TEMPLATE_SELECTOR = $(".sidebar-panel").find(".sidebar-panel-body");
    var ROOM_TEMPLATE = ROOM_TEMPLATE_SELECTOR.html();
    ROOM_TEMPLATE_SELECTOR.html("");
    var ROOM_TEMPLATE_SELECTOR_MODAL = $("#modal-room-selected").find(".modal-body");
    var ROOM_TEMPLATE_MODAL = ROOM_TEMPLATE_SELECTOR_MODAL.html();
    ROOM_TEMPLATE_SELECTOR_MODAL.html("");
    var hotelBackCode, reservationId;
    var ROOM_INFO_URL = "i-cio-room-selected.html";
    var ROOM_UPSELLING_INFO_URL = "i-cio-room-selected-upselling.html";
    var ROOM_MORE_INFO_URL = "i-cio-room-selected-info.html";
    var BTN_PREV_CLS = "with-btn-black";
    var MODAL_TITLE_CLS = "modal-title";
    var MODAL_BODY_CLS = "modal-body";
    var MORE_INFO_BUTTON_CLS = "js-more-info-button";
    var DEFAULT_MODAL_TITLE = mCioRoomModalHeader.find("." + MODAL_TITLE_CLS).html();
    var MODAL_CLOSE_EVENT = "modal.close";
    var roomData = {
        description: ""
    };
    var modalState;
    var prevState;
    var roomDefault = null;
    var selectedModalTemplate = ROOM_INFO_URL;
    function init() {
        hotelBackCode = displayObj.hotelBackCode;
        reservationId = displayObj.reservationId;
        mCioRoomSelectedModal.htmlInject();
        mCioRoomSelectedModal.on("shown.bs.modal", _initialRoomModalState);
        mCioRoomSelectedModal.on("hide.bs.modal", _onCloseSelectedRoomModal);
        mCioRoomBackButton.on("click", goBackHandler);
    }
    function setModalSelectedTemplate(roomType, tplUrl) {
        selectedModalTemplate = roomType ? roomType === "upselling" ? ROOM_UPSELLING_INFO_URL : ROOM_INFO_URL : ROOM_MORE_INFO_URL;
    }
    function setModalSelectedTemplateByTpl(tplUrl) {
        selectedModalTemplate = tplUrl;
    }
    function _initialRoomModalState() {
        navigate(selectedModalTemplate);
    }
    function navigate(tplUrl) {
        mCioRoomSelectedModal.htmlInject("toggleLoading", true, $("#modal-room-selected").find(".modal-body"));
        var roomSelect = $(".is-selected").find(".room-content").data("room");
        mChooseRoom.hiddenForm.val(roomSelect);
        var url = apiUrlPath + "/OCI/" + reservationId + "/" + hotelBackCode + "/room/" + roomSelect + "?origin=" + (isMobile.any() ? "" : "desktop") + "&language=" + language;
        promise = $.ajax({
            type: "GET",
            url: url,
            crosdomain: false,
            async: true,
            dataType: "json"
        });
        promise.then(function(response) {
            var floorbuilding = mChooseRoom.getFloorBuilding();
            var txtFloor = isNaN(parseInt(floorbuilding[1])) ? floorbuilding[1] : parseInt(floorbuilding[1]);
            var txyBuilding = isNaN(parseInt(floorbuilding[0])) ? floorbuilding[0] : parseInt(floorbuilding[0]);
            var data = {
                lblOCIYSAltRoomImage: "<img src='" + response.image + "?output-quality=70&resize=1000:*&composite-to=center,center|1000:402&background-color=white' >",
                roomNumber: roomSelect,
                roomName: response.roomName,
                lblOCIYSFloor: txtFloor,
                lblOCIYSBuilding: txyBuilding,
                lblOCIYSAltPeople: response.features[0].description,
                lblOCIYSAltRoomSize: response.features[1].description,
                lblOCIYSAltBedType: response.features[2].description
            };
            var templateSel = ROOM_TEMPLATE;
            if (tplUrl == "i-cio-room-selected-info.html") {
                var tplroomicon = $(ROOM_TEMPLATE_MODAL);
                var lista = tplroomicon.find(".room-detail-features").find(".room-icons");
                var src = tplroomicon.find(".room-detail-features").find(".room-icons").attr("data-src");
                var listbullet = tplroomicon.find(".room-detail-more-features").find(".list-bullets");
                $.each(response.featuresHighlighted, function(index, value) {
                    lista.append('<li class="item-room-icons">\n            <div class="container-icon"><img src="' + src + value.iconFileName + '.svg"></div><span>' + value.description + "</span>\n            </li>");
                });
                $.each(response.services, function(index, value) {
                    listbullet.append("<li>" + value.text + "</li>");
                });
                templateSel = "<div class='m-cio-room-selected-info'>" + tplroomicon.html() + "</div>";
            }
            var output = templatesRoom.getTemplate(templateSel, data);
            mCioRoomSelectedModal.htmlInject("injectHTMLByJson", "." + MODAL_BODY_CLS, output, _onNavigationComplete);
        }, function(error) {}).always(function() {});
        prevState = modalState;
        modalState = tplUrl;
    }
    function _onNavigationComplete() {
        mCioRoomSelectedModal.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
        switch (modalState) {
          case ROOM_INFO_URL:
            _onRoomInfoShow();
            break;

          case ROOM_UPSELLING_INFO_URL:
            mCioRoomSelectedUpgrade.init();
            _onRoomInfoShow();
            break;

          case ROOM_MORE_INFO_URL:
            _onMoreInfoShow();
            break;
        }
    }
    function _handlerMoreInfoButton() {
        navigate(ROOM_MORE_INFO_URL);
    }
    function _onRoomInfoShow() {
        toggleNavigationHeader(DEFAULT_MODAL_TITLE, false);
        roomData.description = mCioRoomSelectedModal.find(".js-room-description").html();
        mCioRoomSelectedModal.find("." + MORE_INFO_BUTTON_CLS).on("click", _handlerMoreInfoButton);
    }
    function _onMoreInfoShow() {
        var roomDescription = void 0;
        toggleNavigationHeader(roomData.description, true);
    }
    function toggleNavigationHeader(headerText, prevButton) {
        if (prevButton) {
            mCioRoomModalHeader.addClass(BTN_PREV_CLS);
        } else {
            mCioRoomModalHeader.removeClass(BTN_PREV_CLS);
        }
        if (headerText && headerText.length > 0) {
            mCioRoomModalHeader.find("." + MODAL_TITLE_CLS).html(headerText);
        }
    }
    function setRoomData(room) {
        roomData = room;
    }
    function getRoomData() {
        return roomData;
    }
    function goBackHandler() {
        navigate(prevState);
    }
    function _onCloseSelectedRoomModal(e) {
        roomData = {};
        mCioRoomSelectedModal.trigger(MODAL_CLOSE_EVENT);
    }
    function getSlideTpl() {
        return ROOM_TEMPLATE;
    }
    return {
        init: init,
        getRoomData: getRoomData,
        setRoomData: setRoomData,
        goBackHandler: goBackHandler,
        toggleNavigationHeader: toggleNavigationHeader,
        setModalSelectedTemplate: setModalSelectedTemplate,
        navigate: navigate,
        selectedModalTemplate: selectedModalTemplate,
        MODAL_CLOSE_EVENT: MODAL_CLOSE_EVENT,
        ROOM_MORE_INFO_URL: ROOM_MORE_INFO_URL,
        setModalSelectedTemplateByTpl: setModalSelectedTemplateByTpl,
        mCioRoomBackButton: mCioRoomBackButton,
        getSlideTpl: getSlideTpl
    };
}();

$(function() {
    if (typeof displayObj !== "undefined" && displayObj) {}
});

"use strict";

var selectedRoomPanel = function() {
    var panel = $("#sidebar-panel");
    var panelHeader = panel.find(".sidebar-panel-header");
    var togglePanelElement = $('[data-toggle="sidebar-panel"]');
    var togglePanelButton = $('.sidebar-panel-toggle[data-toggle="sidebar-panel"]');
    var closePanelButton = $("#sidebar-panel .btn-ico");
    var mCioRoomSelectedModal = $("#modal-room-selected");
    var chooseOtherRoomButton = panel.find("button.js-choose-other-room");
    var hotelBackCode, reservationId;
    var panelTexts = {
        header: {
            preselected: panel.data("room-preselected-translation"),
            selected: panel.data("room-selected-translation")
        }
    };
    var roomStatus = "preselected";
    var panelState;
    var prevState;
    var ROOM_TEMPLATE = mCioRoomSelected.getSlideTpl();
    var ROOM_INFO_URL = "i-cio-room-selected.html";
    var ROOM_UPSELLING_INFO_URL = "i-cio-room-selected-upselling.html";
    var PANEL_TITLE_CLS = "sidebar-panel-header-title";
    var PANEL_BODY_CLS = "sidebar-panel-body";
    var MORE_INFO_BUTTON_CLS = "js-more-info-button";
    var PANEL_UPDATE_CONTENT_EVENT = "panel.update.content";
    var PANEL_CLOSE_EVENT = "panel.close";
    var selectedPanelTemplate = ROOM_INFO_URL;
    function init() {
        hotelBackCode = displayObj.hotelBackCode;
        reservationId = displayObj.reservationId;
        panel.htmlInject();
        mCioRoomSelectedModal.htmlInject();
        panel.on(PANEL_UPDATE_CONTENT_EVENT, _loadRoomPanel);
        togglePanelElement.on("click", _togglePanel);
        closePanelButton.on("click", closePanel);
        chooseOtherRoomButton.on("click", closePanel);
    }
    function _togglePanel() {
        panel.toggleClass("is-hidden");
    }
    function hidePanel() {
        panel.addClass("is-hidden");
    }
    function closePanel() {
        mChooseRoom.hiddenForm.val("");
        panel.addClass("is-hidden");
        togglePanelButton.addClass("hidden");
        panel.trigger(PANEL_CLOSE_EVENT);
    }
    function showPanel(roomType, status) {
        roomStatus = status;
        _setPanelSelectedTemplate(roomType);
        panel.trigger(PANEL_UPDATE_CONTENT_EVENT);
        togglePanelButton.removeClass("hidden");
    }
    function _loadRoomPanel() {
        panel.htmlInject("toggleLoading", true, $(".sidebar-panel").find(".sidebar-panel-body"));
        var roomSelect = $(".is-selected").find(".room-content").data("room");
        mChooseRoom.hiddenForm.val(roomSelect);
        var url = apiUrlPath + "/OCI/" + reservationId + "/" + hotelBackCode + "/room/" + roomSelect + "?origin=" + (isMobile.any() ? "" : "desktop") + "&language=" + language;
        promise = $.ajax({
            type: "GET",
            url: url,
            crosdomain: false,
            async: true,
            dataType: "json"
        });
        promise.then(function(response) {
            var floorbuilding = mChooseRoom.getFloorBuilding();
            var txtFloor = isNaN(parseInt(floorbuilding[1])) ? floorbuilding[1] : parseInt(floorbuilding[1]);
            var txyBuilding = isNaN(parseInt(floorbuilding[0])) ? floorbuilding[0] : parseInt(floorbuilding[0]);
            var data = {
                lblOCIYSAltRoomImage: "<img src='" + response.image + "?output-quality=70&amp;resize=870:*&amp;composite-to=center,center|870:350&amp;background-color=white'>",
                roomNumber: roomSelect,
                roomName: response.roomName,
                lblOCIYSFloor: txtFloor,
                lblOCIYSBuilding: txyBuilding,
                lblOCIYSAltPeople: response.features[0].description,
                lblOCIYSAltRoomSize: response.features[1].description,
                lblOCIYSAltBedType: response.features[2].description
            };
            var output = templatesRoom.getTemplate(ROOM_TEMPLATE, data);
            panel.htmlInject("injectHTMLByJson", "." + PANEL_BODY_CLS, output, _onNavigationComplete);
        }, function(error) {}).always(function() {});
        prevState = panelState;
        panelState = selectedPanelTemplate;
    }
    function _onNavigationComplete() {
        mCioRoomSelectedModal.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
        switch (panelState) {
          case ROOM_INFO_URL:
            _onRoomInfoShow();
            break;

          case ROOM_UPSELLING_INFO_URL:
            mCioRoomSelectedUpgrade.init();
            _onRoomInfoShow();
            break;
        }
    }
    function _onRoomInfoShow() {
        panel.find("." + PANEL_TITLE_CLS).html(panelTexts.header[roomStatus]);
        panel.find("." + MORE_INFO_BUTTON_CLS).on("click", _handlerMoreInfoButton);
        panel.removeClass("is-hidden");
    }
    function _handlerMoreInfoButton() {
        mCioRoomSelected.setModalSelectedTemplate();
        mCioRoomSelectedModal.modal("show");
        trackOCIZoomMoreAbout(Globals.page_section, reservationIdOci);
    }
    function _setPanelSelectedTemplate(roomType) {
        selectedPanelTemplate = roomType === "upselling" ? ROOM_UPSELLING_INFO_URL : ROOM_INFO_URL;
    }
    return {
        init: init,
        closePanel: closePanel,
        showPanel: showPanel,
        hidePanel: hidePanel,
        PANEL_CLOSE_EVENT: PANEL_CLOSE_EVENT
    };
}();

$(function() {
    if ($('[data-toggle="sidebar-panel"]').length && typeof displayObj !== "undefined" && displayObj) {}
});

"use strict";

$.widget("nh.floorMap", {
    options: {
        data: null,
        streetsSize: 140,
        defaultMargin: 150,
        ratio: 8,
        adjustWindow: false,
        offsetHeight: null,
        maxScreenWidth: null,
        showRoomDetail: null,
        scaleZoomOut: .5,
        scaleZoomIn: 1,
        zoomType: "In",
        initial: true
    },
    previousSelectedRoom: null,
    selectedRoomData: null,
    preselectedRoomInfo: null,
    mapContentMargin: {
        leftRight: 0,
        topBottom: 0
    },
    preferencesCoor: {
        x: null,
        y: null
    },
    centered: {
        top: 0,
        left: 0
    },
    keepPreselectedRoom: false,
    centerToPoint: false,
    newMapFetched: false,
    deselectRoom: function deselectRoom() {
        if (this.previousSelectedRoom) {
            this.previousSelectedRoom.removeClass("is-selected");
            this.previousSelectedRoom = null;
            this.selectedRoomData = null;
            this.preselectedRoomInfo.preselected = false;
            this.keepPreselectedRoom = false;
        }
    },
    getSelectedRoomData: function getSelectedRoomData() {
        return this.selectedRoomData;
    },
    renderMap: function renderMap() {
        var structureData;
        var zoomClass = this.options.zoomType.toLowerCase();
        this.setZoomMapSize(this.options.zoomType);
        structureData = this._getStructureData(this.options.data.floor.structure);
        this.floorMapCanvas = $(this._getMapStructure(structureData)).show();
        this.floorMap.css({
            height: structureData.height
        }).empty().append(this.floorMapCanvas);
        this._drawStreets(this.options.data.streets);
        this._drawRooms(this.options.data.rooms);
        this._setMapSize();
        this._applyInteractions();
        this.floorMap.trigger("onMapLoaded", [ this.keepPreselectedRoom ]);
        this.element.toggleClass(this._getZoomClass, zoomClass);
        this.newMapFetched = false;
        this.mapMoved = false;
        if (this.options.zoomType === "In") {
            this.floorMapContent.data("zoom-in-top", this.preferencesCoor.y);
            this.floorMapContent.data("zoom-in-left", this.preferencesCoor.x);
            this.floorMapContent.data("zoom-out-top", this.preferencesCoor.y * this.options.scaleZoomOut);
            this.floorMapContent.data("zoom-out-left", this.preferencesCoor.x * this.options.scaleZoomOut);
        } else {
            this.floorMapContent.data("zoom-in-top", this.preferencesCoor.y / this.options.scaleZoomOut);
            this.floorMapContent.data("zoom-in-left", this.preferencesCoor.x / this.options.scaleZoomOut);
            this.floorMapContent.data("zoom-out-top", this.preferencesCoor.y);
            this.floorMapContent.data("zoom-out-left", this.preferencesCoor.x);
        }
        this.preferencesCoor = {};
    },
    selectRoom: function selectRoom(ev) {
        var _this = this;
        var $this = $(ev.currentTarget);
        var isSelected = $this.hasClass("is-selected");
        if (this.selectedRoomData) {
            this.selectedRoomData.selected = false;
        }
        this.options.data.rooms.some(function(room) {
            if (room.id === $this.data("number") && !$this.hasClass("prevent-click")) {
                _this.selectedRoomData = room;
                return true;
            }
        });
        this.keepPreselectedRoom = true;
        this.preselectedRoomInfo.preselected = false;
        if ($this.hasClass("prevent-click")) {
            ev.preventDefault();
            ev.stopPropagation();
            $this.removeClass("prevent-click");
            return;
        } else {
            if (!isSelected) {
                $this.addClass("is-selected");
                this.selectedRoomData.selected = true;
                if (this.previousSelectedRoom) {
                    this.previousSelectedRoom.removeClass("is-selected");
                }
            }
            this.previousSelectedRoom = $this;
            this._trigger("onRoomSelected", ev, {
                roomTcm: $this.data("tcm"),
                roomNumber: $this.data("number"),
                isSelected: isSelected,
                type: $this.attr("class").indexOf("upselling") >= 0 ? "upselling" : "room"
            });
        }
    },
    setZoomMapSize: function setZoomMapSize(zoomType) {
        this._setSize(this.options.data.floor.structure, zoomType, "structure");
        this._setSize(this.options.data.rooms, zoomType, "room");
    },
    _applyInteractions: function _applyInteractions() {
        var widget = this;
        $.pep.unbind(this.floorMapContent);
        if (this.element.width() < this.floorMapContent.outerWidth(true) || this.element.height() < this.floorMapContent.outerHeight(true)) {
            this.floorMapContent.pep({
                constrainTo: this._getMapPosition(),
                startPos: this.centered,
                useCSSTranslation: false,
                shouldEase: false,
                debug: false,
                removeMargins: false,
                startThreshold: [ 10, 10 ],
                stop: this._endTouch,
                start: this._preventClickWhenDragging,
                drag: this._preventClickWhenDragging,
                widget: widget
            });
        } else {
            this.floorMapContent.css({
                top: this.centered.top,
                left: this.centered.left
            });
        }
    },
    _centerMap: function _centerMap(positionData) {
        positionData.top = positionData.topAvailable / 2;
        positionData.left = positionData.leftAvailable !== 0 ? positionData.leftAvailable / 2 : positionData.leftAvailable;
        this.centered = {
            top: positionData.top * -1,
            left: positionData.left * -1
        };
    },
    _centerMapInPoint: function _centerMapInPoint(positionData) {
        positionData.centeredX += this.preferencesCoor.x;
        positionData.centeredY += this.preferencesCoor.y;
        positionData.left = positionData.centeredX - this.element.width() / 2;
        positionData.top = positionData.centeredY - this.element.height() / 2;
        if (positionData.left < 0) {
            positionData.left = 0;
        } else if (positionData.left > positionData.leftAvailable) {
            this._setLeftMapPosition(positionData);
        }
        if (positionData.top < 0) {
            positionData.top = 0;
        } else if (positionData.top > positionData.topAvailable) {
            this._setTopMapPosition(positionData);
        }
        this.centered = {
            top: positionData.top * -1,
            left: positionData.left * -1
        };
    },
    _clearInteractions: function _clearInteractions() {
        $.pep.unbind(this.floorMapContent);
        this.element.css({
            height: this.floorMapContent.height()
        });
    },
    _create: function _create() {
        this.floorMapContent = this.element.find(".map-content");
        this.floorMap = this.floorMapContent.find(".map");
        this.floorMapCanvas = this.floorMap.find(".maps-canvas");
        this.zoomButton = this.element.find(".zoom-button");
        if (this.element.hasClass("widget-initialized")) {
            return;
        }
        this._on(this.zoomButton, {
            click: this._toggleZoom
        });
        this._addClass("widget-initialized");
    },
    _destroy: function _destroy() {
        this._removeClass("widget-initialized");
    },
    _drawStreets: function _drawStreets(streetsData) {
        var $floorMapContent = this.floorMapContent;
        var $streets = $floorMapContent.find("div.street");
        var $currentStreet = void 0;
        var streetHtml = void 0;
        $.each(streetsData, function(key, value) {
            $currentStreet = $streets.filter(".street-" + key);
            streetHtml = '<div class="street-info info-' + (value.type === "city" && value.name ? "poi" : value.type) + '">\n                      <p class="street-name">\n                        <span>' + (value.name && value.name.length > 0 && value.name !== "null" ? value.name : "") + '</span>\n                      </p>\n                      <span class="street-orientation ' + (value.type === "city" && value.name ? "poi" : value.type) + '"></span>\n                    </div>';
            $currentStreet.html(streetHtml);
        });
    },
    _drawRooms: function _drawRooms(roomsData) {
        var roomData;
        var roomContainer;
        var roomContent;
        var roomClass;
        var selectableRoomsList = [ "none", "room", "upselling", "duplex", "duplex-upsell", "duplex-upselling" ];
        this.keepPreselectedRoom = false;
        for (var x = 0; x < roomsData.length; x++) {
            roomContainer = $("<div></div>");
            roomContent = null;
            roomClass = "room ";
            roomData = roomsData[x];
            this._setUpRoomContainer(roomData, roomContainer);
            if (selectableRoomsList.indexOf(roomData.special) >= 0) {
                if (roomData.available) {
                    roomClass += "room-available";
                    roomContainer.off("click touchend");
                    if (this.options.zoomType === "In") {
                        roomContainer.on("click touchend", this.selectRoom.bind(this));
                    }
                } else {
                    roomClass += "room-noavailable";
                }
                roomClass += roomData.preferences ? "-preferences" : "";
                roomClass += roomData.special.indexOf("upselling") >= 0 ? "-upselling" : "";
                roomClass += roomData.special.indexOf("duplex") >= 0 ? " room-duplex" : "";
                if (roomData.door) {
                    roomClass += " door door-" + roomData.door;
                }
                if (this._isSelectedRoom(roomData)) {
                    roomData.selected = true;
                    this.keepPreselectedRoom = true;
                    roomClass += " is-selected";
                    this._saveRoomData(roomData, roomContainer);
                }
                roomContent = "<div data-room='" + (roomData.id || "") + "' class='room-content'><span>" + (roomData.id || "") + "</span><i></i></div>";
            } else {
                roomClass += "room-" + roomData.special.toLowerCase();
                roomContent = "<div class='room-content'><span>" + (roomData.description || "") + "</span></div>";
            }
            roomContainer.html(roomContent).addClass(roomClass);
            this.floorMap.append(roomContainer);
        }
    },
    _endTouch: function _endTouch(ev) {
        var pointerCoordinates = {
            top: ev.pageY || this.ev.y,
            left: ev.pageX || this.ev.x
        };
        if (!this.initPosition) {
            this.initPosition = {
                x: this.initialPosition.left,
                y: this.initialPosition.top
            };
        }
        if (this.options.widget._isClickEvent(this)) {
            this.options.widget._goToSelectedPointInZoomInMap(pointerCoordinates);
        }
        this.initPosition = {
            x: this.pos.x,
            y: this.pos.y
        };
    },
    _getAreaPosition: function _getAreaPosition() {
        var previousZoom = this.options.zoomType === "In" ? "out" : "in";
        var zoomType = this.mapMoved ? previousZoom : this.options.zoomType.toLowerCase();
        var zoomTypePosition = {
            left: this.floorMapContent.data("zoom-" + zoomType + "-left"),
            top: this.floorMapContent.data("zoom-" + zoomType + "-top")
        };
        if (this.mapMoved) {
            zoomTypePosition = {
                top: this.options.zoomType === "In" ? zoomTypePosition.top / this.options.scaleZoomOut : zoomTypePosition.top * this.options.scaleZoomOut,
                left: this.options.zoomType === "In" ? zoomTypePosition.left / this.options.scaleZoomOut : zoomTypePosition.left * this.options.scaleZoomOut
            };
        }
        return zoomTypePosition;
    },
    _goToSelectedPointInZoomInMap: function _goToSelectedPointInZoomInMap(pointerCoordinates) {
        var mapOffset = this.floorMap.offset();
        this.preferencesCoor.x = (pointerCoordinates.left - mapOffset.left) / this.options.scaleZoomOut;
        this.preferencesCoor.y = (pointerCoordinates.top - mapOffset.top) / this.options.scaleZoomOut;
        this.centerToPoint = true;
        this._toggleZoom();
    },
    _isClickEvent: function _isClickEvent(data) {
        data.options.widget.mapMoved = true;
        if ($.isEmptyObject(data.pos) || data.pos.x === data.initPosition.x && data.pos.y === data.initPosition.y) {
            data.options.widget.mapMoved = false;
            if (data.options.widget.options.zoomType === "Out") {
                return true;
            }
        }
        return false;
    },
    _isSelectedRoom: function _isSelectedRoom(roomData) {
        var isSelected = false;
        var isPreselected = roomData.hasOwnProperty("preselected") && roomData.preselected && this.options.initial;
        if (this.options.zoomType === "Out") {
            return false;
        }
        if (isPreselected || this.selectedRoomData && this.selectedRoomData.id === roomData.id) {
            isSelected = true;
        }
        return isSelected;
    },
    _getMapPosition: function _getMapPosition() {
        var wDiff = this.floorMapContent.outerWidth(true) - this.element.width(), hDiff = this.floorMapContent.outerHeight(true) - this.element.height();
        wDiff = wDiff < 0 ? 0 : -wDiff;
        hDiff = hDiff < 0 ? 0 : -hDiff;
        return [ hDiff, 0, 0, wDiff ];
    },
    _getMapStructure: function _getMapStructure(shapeData) {
        return '\n      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" mlns:xlink="http://www.w3.org/1999/xlink" class="maps-canvas" width="' + shapeData.width + '" height="' + shapeData.height + '">\n        <polyline points="' + shapeData.points + '" fill="#fff" stroke="#fff" stroke-width="1"></polyline>\n      </svg>\n    ';
    },
    _getPointerCoordinates: function _getPointerCoordinates() {
        var mapContainerOffset = this.element.offset();
        var pointerCoordinates = {
            top: mapContainerOffset.top + this.element.height() / 2,
            left: mapContainerOffset.left + this.element.width() / 2
        };
        return pointerCoordinates;
    },
    _getPreferencesCoordenates: function _getPreferencesCoordenates() {
        var pointerCoordinates = this._getPointerCoordinates();
        var mapOffset = this.floorMap.offset();
        return {
            x: this.options.zoomType === "In" ? (pointerCoordinates.left - mapOffset.left) / this.options.scaleZoomOut : (pointerCoordinates.left - mapOffset.left) * this.options.scaleZoomOut,
            y: this.options.zoomType === "In" ? (pointerCoordinates.top - mapOffset.top) / this.options.scaleZoomOut : (pointerCoordinates.top - mapOffset.top) * this.options.scaleZoomOut
        };
    },
    _getStructureData: function _getStructureData(structureData) {
        var canvasWidth = 0;
        var canvasHeight = 0;
        var coor = "";
        var data;
        for (var x = 0; x < structureData.length; x++) {
            data = structureData[x];
            canvasWidth = data.endX * this.options.ratio > canvasWidth ? data.endX * this.options.ratio : canvasWidth;
            canvasHeight = data.endY * this.options.ratio > canvasHeight ? data.endY * this.options.ratio : canvasHeight;
            coor += data.initX * this.options.ratio + "," + data.initY * this.options.ratio + " " + data.endX * this.options.ratio + "," + data.endY * this.options.ratio + " ";
        }
        return {
            points: coor,
            width: canvasWidth,
            height: canvasHeight
        };
    },
    _getZoomClass: function _getZoomClass(index, className, state) {
        var $this = $(this);
        var classList = this.classList;
        if (!classList.contains("zoom-" + state)) {
            if (!$this.hasClass("zoom-in") && !$this.hasClass("zoom-out")) {
                return "zoom-" + state;
            } else if ($this.hasClass("zoom-out") && !$this.hasClass("zoom-in")) {
                $this.removeClass("zoom-out");
                return "zoom-in";
            } else if ($this.hasClass("zoom-in")) {
                $this.removeClass("zoom-in");
                return "zoom-out";
            }
        } else {
            return classList;
        }
    },
    _hasToCenterMapInPoint: function _hasToCenterMapInPoint() {
        if (this.options.initial || !this.newMapFetched) {
            return true;
        } else {
            return false;
        }
    },
    _preventClickWhenDragging: function _preventClickWhenDragging(ev) {
        var target = $(ev.target);
        var targetParent = target.parents(".room");
        if (targetParent.length && !targetParent.hasClass("prevent-click")) {
            targetParent.addClass("prevent-click");
        }
    },
    _saveRoomData: function _saveRoomData(roomData, roomContainer) {
        if (!this.centerToPoint) {
            this.preferencesCoor = {
                x: roomData.x * this.options.ratio + roomData.hsize / 2 * this.options.ratio,
                y: roomData.y * this.options.ratio + roomData.vsize / 2 * this.options.ratio
            };
        }
        this.previousSelectedRoom = roomContainer;
        this.preselectedRoomInfo = roomData;
        this.selectedRoomData = roomData;
    },
    _setElementSize: function _setElementSize(elementData, zoomType, type) {
        var _this2 = this;
        var zoomSize = {};
        var test = {
            structure: {
                initX: "xst",
                initY: "yst",
                endX: "xend",
                endY: "yend"
            },
            room: {
                initX: "x",
                initY: "y",
                sizeX: "hsize",
                sizeY: "vsize"
            }
        };
        $.each(test[type], function(key, value) {
            zoomSize[key] = parseInt(elementData[value]) * _this2.options["scaleZoom" + zoomType];
        });
        $.extend(elementData, zoomSize);
    },
    _setMapSize: function _setMapSize() {
        var mapMargin = null;
        var initialMapSize = {
            outherHeight: this.floorMapCanvas.height() + this.options.streetsSize * 2 + this.options.defaultMargin * 2,
            outherWidth: this.floorMapCanvas.width() + this.options.streetsSize * 2 + this.options.defaultMargin * 2,
            height: this.floorMapCanvas.height() + this.options.streetsSize * 2,
            width: this.floorMapCanvas.width() + this.options.streetsSize * 2
        };
        this.mapContentMargin.leftRight = initialMapSize.outherWidth < this.element.width() ? (this.element.width() - initialMapSize.width) / 2 : this.options.defaultMargin;
        this.mapContentMargin.topBottom = initialMapSize.outherHeight < this.element.height() ? (this.element.height() - initialMapSize.height) / 2 : this.options.defaultMargin;
        mapMargin = this.mapContentMargin.topBottom === this.mapContentMargin.leftRight ? this.mapContentMargin.leftRight + "px" : this.mapContentMargin.topBottom + "px " + this.mapContentMargin.leftRight + "px";
        this.floorMapContent.css({
            width: this.floorMapCanvas.width() + this.options.streetsSize * 2,
            height: this.floorMapCanvas.height() + this.options.streetsSize * 2,
            margin: mapMargin
        });
        this._setMapContainerSize();
    },
    _setMapContainerSize: function _setMapContainerSize() {
        var hasAdjustToWindow = false;
        var height = window.innerHeight ? window.innerHeight : $(window).height();
        if ($(window).width() > this.options.maxScreenWidth && this.options.adjustWindow && !isMobile.any()) {
            hasAdjustToWindow = true;
        }
        this.element.css({
            height: hasAdjustToWindow ? "580px" : height - this.options.offsetHeight - 5 + "px"
        });
        this._setMapPosition();
    },
    _setMapSizeAndInteraction: function _setMapSizeAndInteraction(ev) {
        ev.data.widget._setMapContainerSize();
        ev.data.widget._applyInteractions();
    },
    _setSize: function _setSize(data, zoomType, type) {
        for (var x = 0; x < data.length; x++) {
            this._setElementSize(data[x], zoomType, type);
        }
    },
    _setMapPosition: function _setMapPosition() {
        var positionData = {
            leftAvailable: this.floorMapContent.outerWidth(true) - this.element.width(),
            topAvailable: this.floorMapContent.outerHeight(true) - this.element.height(),
            centeredX: this.options.streetsSize + this.options.defaultMargin,
            centeredY: this.options.streetsSize + this.options.defaultMargin,
            left: null,
            top: null
        };
        if (this.floorMapContent.outerWidth(true) <= this.element.width()) {
            positionData.centeredX = this.options.streetsSize + this.mapContentMargin.leftRight;
        }
        if (this._hasToCenterMapInPoint()) {
            this._centerMapInPoint(positionData);
        } else if (this.newMapFetched) {
            this._centerMap(positionData);
        }
    },
    _setLeftMapPosition: function _setLeftMapPosition(positionData) {
        if (this.floorMapContent.outerWidth(true) < this.element.width()) {
            positionData.left = positionData.left / 2;
        } else {
            positionData.left = positionData.leftAvailable;
        }
    },
    _setTopMapPosition: function _setTopMapPosition(positionData) {
        if (this.floorMapContent.outerHeight(true) < this.element.height()) {
            positionData.top = positionData.top / 2;
        } else {
            positionData.top = positionData.topAvailable;
        }
    },
    _setUpRoomContainer: function _setUpRoomContainer(roomData, roomContainer) {
        roomContainer.css({
            width: roomData.sizeX * this.options.ratio,
            height: roomData.sizeY * this.options.ratio,
            position: "absolute",
            top: roomData.initY * this.options.ratio,
            left: roomData.initX * this.options.ratio
        }).data("tcm", roomData.tcm).data("number", roomData.id);
    },
    _toggleZoom: function _toggleZoom() {
        this.options.zoomType = this.options.zoomType === "In" ? "Out" : "In";
        if (this.mapMoved) {
            this.preferencesCoor = this._getPreferencesCoordenates();
        } else {
            this.preferencesCoor = {
                y: !this.preferencesCoor.y ? this.floorMapContent.data("zoom-" + this.options.zoomType.toLowerCase() + "-top") : this.preferencesCoor.y,
                x: !this.preferencesCoor.x ? this.floorMapContent.data("zoom-" + this.options.zoomType.toLowerCase() + "-left") : this.preferencesCoor.x
            };
        }
        this.renderMap();
        this.floorMap.trigger("toggleZoom", [ this.options.zoomType ]);
        if (this.options.zoomType === "In") {
            trackOCIZoomOutRoom(Globals.page_section, reservationIdOci);
        } else {
            trackOCIZoomInRoom(Globals.page_section, reservationIdOci);
        }
    },
    _setOption: function _setOption(key, value) {
        this._super(key, value);
        if (key === "data") {
            this.newMapFetched = true;
            this.renderMap();
        } else if (key !== "initial") {
            this._setMapSize();
            this._applyInteractions();
        }
    }
});

"use strict";

var _slicedToArray = function() {
    function sliceIterator(arr, i) {
        var _arr = [];
        var _n = true;
        var _d = false;
        var _e = undefined;
        try {
            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
                _arr.push(_s.value);
                if (i && _arr.length === i) break;
            }
        } catch (err) {
            _d = true;
            _e = err;
        } finally {
            try {
                if (!_n && _i["return"]) _i["return"]();
            } finally {
                if (_d) throw _e;
            }
        }
        return _arr;
    }
    return function(arr, i) {
        if (Array.isArray(arr)) {
            return arr;
        } else if (Symbol.iterator in Object(arr)) {
            return sliceIterator(arr, i);
        } else {
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
    };
}();

function _toConsumableArray(arr) {
    if (Array.isArray(arr)) {
        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
            arr2[i] = arr[i];
        }
        return arr2;
    } else {
        return Array.from(arr);
    }
}

var mChooseRoom = function(window) {
    var $header = $(".header-mob-v2");
    var $headerTitle = $(".nh-header");
    var $pCioRoomMap = $(".p-cio-roommap");
    var $introText = $pCioRoomMap.find(".text-intro");
    var $mFloorMap = $pCioRoomMap.find(".m-floor-map");
    var $floorMapHeader = $mFloorMap.find(".floor-map-header");
    var $floorMapContainer = $mFloorMap.find(".maps-container");
    var $floorMapContent = $floorMapContainer.find(".map-content");
    var $floorMapCanvas = $floorMapContent.find(".maps-canvas");
    var $floorSelectorDropdown = $mFloorMap.find(".m-floor-selector-dropdown");
    var $floorLegend = $mFloorMap.find(".m-floor-legend");
    var $sidebarPanel = $("#sidebar-panel");
    var $modalRoomSelected = $("#modal-room-selected");
    var $preselectedRoomPanel = $mFloorMap.find(".m-cio-room-preselected");
    var $preselectedCloseButton = $preselectedRoomPanel.find("button.js-room-preselected-close");
    var $form = $("#roomNumber");
    var $hiddenForm = $form.find("input#hidden_roomNumber");
    var $loading = $mFloorMap.find(".spinner");
    var $footerMobile = $(".footer-mob");
    var isBigScreen;
    var isMobileDevice = isMobile.any();
    var initialFloor = true;
    var selectedFloor = null;
    var onceLoad = true;
    var hotelBackCode, reservationId, JsonBean, roomPreAssignedBean, floorPlanta, dataBuild, dataPreasigned, roomCategoryCode, roomPreferences;
    function init(building, floor, room) {
        hotelBackCode = displayObj.hotelBackCode;
        reservationId = displayObj.reservationId;
        JsonBean = displayObj.buildingAndFloorDataResponse;
        var buildings = JsonBean.buildings;
        roomPreAssignedBean = JsonBean.preAssignedRoom.roomPreAssigned;
        var roomPreAssigned = roomPreAssignedBean.floor;
        var buildingPreAssigned = roomPreAssignedBean.building;
        roomCategoryCode = roomPreAssignedBean.roomCategoryCode;
        roomPreferences = displayObj.preferences;
        var buildPre = buildings.filter(function(el) {
            return el.idBuilding == buildingPreAssigned;
        });
        var floorPre = (roomPreAssigned, buildPre[0].floors).filter(function(el) {
            return el.idFloor == roomPreAssigned;
        });
        floorPlanta = floorPre[0].jsonplanta;
        dataPreasigned = [ buildPre[0].idBuilding, floorPre[0].idFloor ];
        dataBuild = [ buildPre[0].idBuilding, floorPre[0].idFloor ];
        $loading.show();
        $footerMobile.hide();
        $mFloorMap.on("onMapLoaded", _loadPreselectedRoomData).on("toggleZoom", _toggleZoom);
        requestBuildingInfo();
        $floorMapContainer.floorMap({
            adjustWindow: true,
            offsetHeight: _getOffsetHeight(),
            maxScreenWidth: globalConfig.smBreak
        }).on("floormaponroomselected", _showRoomDetail);
        _setViewContent();
        $(window).on("resize", _setViewContent);
        $floorSelectorDropdown.on("floorselectorchange", _onSelectedFloor);
        $sidebarPanel.on(selectedRoomPanel.PANEL_CLOSE_EVENT, _onRoomInfoCloseHandler);
        $modalRoomSelected.on(mCioRoomSelected.MODAL_CLOSE_EVENT, _onRoomInfoCloseHandler);
        $preselectedCloseButton.on("click", _onClosePreselectedRoom);
        $(document).on("click", ".submitMap", _submitForm);
    }
    function _getOffsetHeight() {
        var offsetHeight = $headerTitle.outerHeight(true);
        isBigScreen = globalConfig.windowWidth > globalConfig.xsBreak;
        if (isBigScreen && isMobileDevice) {
            offsetHeight += $floorMapHeader.outerHeight() + 5;
        }
        if ($header.is(":visible")) {
            offsetHeight += $header.outerHeight();
        }
        return offsetHeight;
    }
    function requestBuildingInfo() {
        var promise = new Promise(function(resolve, reject) {
            resolve();
        });
        promise.then(function(response) {
            $floorSelectorDropdown.floorSelector("option", "hotelInfo", JsonBean);
        });
        $floorSelectorDropdown.floorSelector();
    }
    function getFloor(floorInfo, buildingDescription) {
        dataBuild[0] = buildingDescription;
        dataBuild[1] = floorInfo.idFloor;
        var url = apiUrlPath + "/OCI/" + reservationId + "/" + hotelBackCode + "/select/blueprint/" + buildingDescription + "/" + floorInfo.idFloor;
        url = url + "?language=" + language + "&origin=" + (isMobile.any() ? "" : "desktop");
        var promise = null;
        var data = roomPreferences;
        $floorMapCanvas.hide();
        $loading.show();
        if (onceLoad || JSON.stringify(dataPreasigned) === JSON.stringify(dataBuild)) {
            promise = new Promise(function(resolve, reject) {
                resolve(floorPlanta);
            });
            onceLoad = false;
        } else {
            promise = $.ajax({
                type: "POST",
                url: url,
                data: JSON.stringify(data),
                processData: false,
                async: true,
                dataType: "json",
                contentType: "application/json"
            });
        }
        promise.then(function(response) {
            $floorMapContainer.floorMap("option", "data", response);
            _setFloatElementsHeight();
            _displayLegend(response, roomPreferences);
            $loading.hide();
            trackOCIChangeFloor(Globals.page_section, hotelBackCode, dataBuild[1]);
        }, function(error) {
            $loading.hide();
            console.log("promesa incorrecta", error);
        });
    }
    function _displayLegend(dataFloor, roomPreferences) {
        var rooms = $floorMapContent.find("div.map").find(".room");
        var roomstype = [];
        var upselling = {
            "-preferences": ".room-available-preferences",
            "-upselling": ".room-upselling",
            "-duplex": ".room-duplex",
            "-lift": ".room-lift",
            "-stairs": ".room-stairs",
            "-gym": ".room-gym",
            "-spa": ".room-spa",
            "-swimming": ".room-swimming",
            "-breakfast": ".room-breakfast",
            "-courtyard": ".room-courtyard"
        };
        rooms.each(function(index, value) {
            roomClass = $(value).attr("class");
            if (roomClass.indexOf("-noavailable") >= 0) {
                roomstype.push(".room-noavailable");
            } else {
                if (roomClass.indexOf("-available") >= 0) roomstype.push(".room-available");
                Object.entries(upselling).forEach(function(_ref) {
                    var _ref2 = _slicedToArray(_ref, 2), key = _ref2[0], value = _ref2[1];
                    if (roomClass.indexOf(key) >= 0) {
                        roomstype.push(value);
                    }
                });
            }
        });
        var calles = [ "poi", "monument", "sea", "park" ];
        calles.forEach(function(element) {
            var cl = "." + element;
            if ($floorMapContent.find(cl).length) roomstype.push("." + element);
        });
        var lista = [].concat(_toConsumableArray(new Set(roomstype)));
        var preferences = typeof roomPreferences !== "undefined" && roomPreferences.features !== null ? roomPreferences.features.length : 0;
        if (preferences == 0) {
            if (!lista.includes(".room-available-preferences") && lista.includes(".room-available")) {
                $floorMapContent.find("div.map .room-available").toggleClass("room-available-preferences");
                lista.push(".room-available-preferences");
            }
        }
        $element = $(".legend-room > li");
        $element.addClass("hide");
        lista.forEach(function(element) {
            if (element == ".room-available") {
                $element.find(element).not(".room-duplex").closest("li").removeClass("hide").addClass("legendtrue");
            } else $element.find(element).closest("li").removeClass("hide").addClass("legendtrue");
        });
        var legend = $("ul.legend-room");
        legend.each(function() {
            if ($(this).find(".legendtrue").length > 0) {
                $(this).find("li").first().removeClass("hide");
            }
        });
    }
    function _loadPreselectedRoomData(ev, loadPreselectedRoomData) {
        if (initialFloor) {
            if (loadPreselectedRoomData) {
                var selectorPreselect = $(".m-cio-room-preselected");
                selectorPreselect.find(".room-content span").html(roomPreAssignedBean.roomNumber);
                selectorPreselect.find(".info-room").find(".h5").html(roomPreAssignedBean.roomName);
                var txtFloor = isNaN(parseInt(roomPreAssignedBean.floor)) ? roomPreAssignedBean.floor : parseInt(roomPreAssignedBean.floor);
                selectorPreselect.find("#txtFloor").html(txtFloor);
                var txyBuilding = isNaN(parseInt(roomPreAssignedBean.building)) ? roomPreAssignedBean.building : parseInt(roomPreAssignedBean.building);
                selectorPreselect.find("#txtBuilding").html(txyBuilding);
                selectedRoomPanel.showPanel("room", "preselected");
                $preselectedRoomPanel.removeClass("close");
            }
        }
        initialFloor = false;
    }
    function _toggleZoom() {
        selectedRoomPanel.hidePanel();
    }
    function _showRoomDetail(ev, data) {
        if (data.isSelected) {
            if (isBigScreen) {
                selectedRoomPanel.showPanel(data.type, "selected");
            } else {
                $preselectedRoomPanel.addClass("close");
                mCioRoomSelected.setModalSelectedTemplate(data.type);
                $("#modal-room-selected").modal("show");
            }
        } else {
            if (isBigScreen) {
                selectedRoomPanel.showPanel(data.type, "selected");
            } else {
                $preselectedRoomPanel.addClass("close");
                mCioRoomSelected.setModalSelectedTemplate(data.type);
                $("#modal-room-selected").modal("show");
            }
        }
    }
    function _setViewContent() {
        isBigScreen = globalConfig.windowWidth > globalConfig.xsBreak;
        $introText.toggle(isBigScreen && !isMobileDevice);
        $mFloorMap.css({
            "margin-bottom": isBigScreen ? "40px" : 0
        });
        $headerTitle.css({
            "margin-bottom": isBigScreen ? "30px" : 0
        });
        $floorMapContainer.floorMap("option", "offsetHeight", _getOffsetHeight());
        _setFloatElementsHeight();
    }
    function _setFloatElementsHeight() {
        if ($(window).outerWidth() >= 768) {
            var mapContainerHeight = $floorMapContainer.outerHeight();
            $floorSelectorDropdown.floorSelector("setFloorListHeight", mapContainerHeight);
            $floorLegend.find(".m-cio-room-legend").css("max-height", mapContainerHeight);
        } else {
            var floorSelectorDropdownHeight = $floorSelectorDropdown.outerHeight();
            var viewportHeight = $(window).outerHeight();
            $floorSelectorDropdown.floorSelector("setFloorListHeight", viewportHeight - floorSelectorDropdownHeight);
        }
    }
    function _onSelectedFloor(e, selectedFloor) {
        $floorMapContainer.floorMap("option", "initial", initialFloor);
        selectedRoomPanel.closePanel();
        getFloor(selectedFloor.selectedFloorInfo, selectedFloor.buildingDescription);
        window.scrollTo(0, 0);
    }
    function _onRoomInfoCloseHandler(e) {
        if ($(".m-cio-room-selected-info").length && isBigScreen) {} else $floorMapContainer.floorMap("deselectRoom");
        $("#modal-room-selected").find(".modal-body").html("");
    }
    function _onClosePreselectedRoom(e) {
        $preselectedRoomPanel.addClass("close");
        $floorMapContainer.floorMap("deselectRoom");
    }
    function _submitForm(e) {
        var roomSelected = mChooseRoom.hiddenForm.val();
        if (roomSelected.length) {
            $(".submitMap").prop("disabled", true);
            $form.submit();
        }
    }
    return {
        init: init,
        getFloor: getFloor,
        getFloorBuilding: function getFloorBuilding() {
            return dataBuild;
        },
        hiddenForm: $hiddenForm
    };
}(window);

$(function() {
    if ($(".p-cio-roommap").length && typeof displayObj !== "undefined" && displayObj) {
        mChooseRoom.init();
        mCioRoomSelected.init();
        selectedRoomPanel.init();
    }
});

"use strict";

var mCioRoomSelectedUpgrade = function() {
    var mCioUpgradeView;
    var mCioCurrencyChangeModal;
    var currencyConfirmationModal;
    var upsellingCurrencyChangeInfo;
    var currencySelect;
    var currencyChangeBtn;
    var isVisibleUpsellingCurrencyChangeInfo = false;
    function init() {
        mCioUpgradeView = $(".m-cio-room-selected-upgrade");
        mCioCurrencyChangeModal = $("#m-modal-cio-currency-selected");
        currencyConfirmationModal = $("#m-modal-cio-currency-confirmation");
        upsellingCurrencyChangeInfo = mCioUpgradeView.find(".js-currency-change-info");
        currencySelect = mCioUpgradeView.find("select.js-select-currency");
        currencyChangeBtn = mCioCurrencyChangeModal.find(".js-change-currency-btn");
        currencySelect.on("change", _onCurrencyChange);
        currencyChangeBtn.on("click", _onCurrencyChange);
        mModals.attachModalEventsBehaviour(mCioCurrencyChangeModal);
        mModals.attachModalEventsBehaviour(currencyConfirmationModal);
        if (isMobileTest()) {
            currencySelect.selectpicker("mobile");
        } else {
            currencySelect.selectpicker();
        }
        if (isVisibleUpsellingCurrencyChangeInfo) {
            upsellingCurrencyChangeInfo.show();
        } else {
            upsellingCurrencyChangeInfo.hide();
        }
    }
    function _onCurrencyChange(e) {
        if (globalConfig.windowWidth < globalConfig.smBreak) {
            $("#modal-room-selected").modal("hide");
            currencyConfirmationModal.modal("show");
            currencyConfirmationModal.on("hidden.bs.modal", function() {
                if (globalConfig.windowWidth < globalConfig.xsBreak) {
                    $("#modal-room-selected").modal("show");
                }
            });
        }
        isVisibleUpsellingCurrencyChangeInfo = true;
        upsellingCurrencyChangeInfo.show();
    }
    return {
        init: init
    };
}();

$(function() {
    mCioRoomSelectedUpgrade.init();
});

"use strict";

var mCioPreferences = function() {
    var mCioPreferencesView = $(".m-cio-preferences");
    var warningTooMuchOptions = mCioPreferencesView.find(".js-warning-chosen-options");
    var chooseWarningCounter = parseInt(mCioPreferencesView.attr("data-choose-warning-counter"));
    function init() {
        mCioPreferencesView.find("input").on("change", _onChooseInputChange);
        $("#btn-preferences").on("click", _submitForm);
    }
    function _onChooseInputChange(e) {
        if (getChoosenOptionsValue() >= chooseWarningCounter) {
            warningTooMuchOptions.show();
        } else {
            warningTooMuchOptions.hide();
        }
    }
    function getChoosenOptionsValue() {
        var inputs = mCioPreferencesView.find("input");
        var totalChosenCount = 0;
        inputs.each(function(index, input) {
            var $input = $(input);
            if ($input.is("checked") || $input.prop("checked") === true) {
                var inputCountValue = parseInt($input.attr("data-count-value")) > 0 ? parseInt($input.attr("data-count-value")) : 0;
                totalChosenCount += inputCountValue;
            }
        });
        return totalChosenCount;
    }
    function _submitForm(event) {
        event.preventDefault();
        var $selectedSimple = $("input[type=radio]").filter(":checked");
        var $selectedMultiple = $("input[type=checkbox]").filter(":checked");
        _fillSimpleHiddenElements($selectedSimple);
        _fillMultipleHiddenElements($selectedMultiple);
        $("button:submit").prop("disabled", true);
        $("#preferences").submit();
        trackOCIPreferences(Globals.page_section, reservationIdOci);
    }
    function _fillSimpleHiddenElements($element) {
        $element.each(function() {
            var $hiddenElement = $("#hidden-" + this.name);
            $hiddenElement.val(this.value);
        });
    }
    function _fillMultipleHiddenElements($element) {
        $element.each(function() {
            $hiddenElement = $("#hidden-" + this.id);
            $hiddenElement.val(this.value);
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-cio-preferences").length) {
        mCioPreferences.init();
    }
});

"use strict";

var mModalLogin = function() {
    var modalLoginView = $("#m-modal-login");
    var modalLoginHeader = modalLoginView.find(".modal-header");
    var navigator;
    var LOGIN_FORM = typeof pageData !== "undefined" ? pageData.loginForm : "";
    var RECOVER_PASSWORD = typeof pageData !== "undefined" ? pageData.recoverPassword : "";
    var RECOVER_PASSWORD_CONFIRMATION = typeof pageData !== "undefined" ? pageData.confirmationPassword : "";
    var LOGIN_SIGNUP_FORM = "i-login-form-signup.html";
    var MODAL_BODY_CLS = "modal-body";
    var MODAL_DIALOG = "modal-dialog";
    var MODAL_TITLE_CLS = "modal-title";
    var headerTranslations = {
        LOGIN_FORM: modalLoginView.attr("data-login-header-translation"),
        RECOVER_PASSWORD: modalLoginView.attr("data-login-recover-password-translation")
    };
    var modalStatus = {
        login: LOGIN_FORM,
        recover: RECOVER_PASSWORD,
        recoverConfirmation: RECOVER_PASSWORD_CONFIRMATION,
        signup: LOGIN_SIGNUP_FORM
    };
    var initStateView;
    var currentStateView;
    var nextStateView;
    function init() {
        navigator = new Navigator(modalLoginView, LOGIN_FORM, "." + MODAL_BODY_CLS, _onNavigationComplete);
        modalLoginView.on("shown.bs.modal", _setIntialModalState);
        modalLoginView.on("hide.bs.modal", _handleHideModal);
    }
    function _handleHideModal(ev) {
        var $form = $(this).find("form");
        login.removeLoginRecaptcha($form);
    }
    function getNavigator() {
        return navigator;
    }
    function _setIntialModalState(ev) {
        var $trigger = $(ev.relatedTarget);
        initStateView = $trigger.data("state") ? $trigger.data("state") : "login";
        currentStateView = initStateView;
        if (currentStateView !== nextStateView) {
            navigator.navigate(modalStatus[initStateView]);
            _initialLoginModalState();
        }
    }
    function _initialLoginModalState() {
        if (!initStateView || initStateView === "login") {
            navigator.initViewElementState();
        }
    }
    function _onNavigationComplete() {
        modalLoginView.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
        switch (navigator.getActualState()) {
          case LOGIN_FORM:
            currentStateView = "login";
            mLoginForm.init();
            _setModalSize("modal-xs");
            toggleNavigationHeader(headerTranslations.LOGIN_FORM);
            commonFormSetup.init();
            break;

          case RECOVER_PASSWORD:
            currentStateView = "recover";
            _setModalSize("modal-xs");
            mLoginRecoverPassword.init();
            toggleNavigationHeader(headerTranslations.RECOVER_PASSWORD);
            commonFormSetup.init();
            break;

          case RECOVER_PASSWORD_CONFIRMATION:
            currentStateView = "recover_confirmation";
            _setModalSize("modal-xs");
            mLoginRecoverPasswordConfirmation.init();
            break;

          case LOGIN_SIGNUP_FORM:
            currentStateView = "signup";
            mLoginForm.init();
            _setModalSize("modal-xs");
            toggleNavigationHeader(headerTranslations.LOGIN_FORM);
            commonFormSetup.init();
            break;
        }
    }
    function toggleNavigationHeader(headerText) {
        if (headerText && headerText.length > 0) {
            modalLoginHeader.find("." + MODAL_TITLE_CLS).html(headerText);
        }
    }
    function _setModalSize(modalSizeCls) {
        var modalDialog = modalLoginView.find("." + MODAL_DIALOG);
        modalDialog.removeClass("modal-xs modal-sm modal-lg");
        modalDialog.addClass(modalSizeCls);
    }
    function getModalView() {
        if (modalLoginView != "undefined") return modalLoginView;
    }
    function getInitialStateView() {
        return initStateView;
    }
    function setNextStateView(state) {
        nextStateView = state;
    }
    return {
        init: init,
        LOGIN_FORM: LOGIN_FORM,
        RECOVER_PASSWORD: RECOVER_PASSWORD,
        RECOVER_PASSWORD_CONFIRMATION: RECOVER_PASSWORD_CONFIRMATION,
        LOGIN_SIGNUP_FORM: LOGIN_SIGNUP_FORM,
        getNavigator: getNavigator,
        getModalView: getModalView,
        getInitialStateView: getInitialStateView,
        setNextStateView: setNextStateView
    };
}();

$(function() {
    if ($("#m-modal-login").length) {
        mModalLogin.init();
    }
});

"use strict";

var mLoginForm = function() {
    var mLoginFormView;
    var forgottenPassword;
    var wrongCredentials;
    var $loginForm;
    var $userInput;
    var $passwordInput;
    var $modalLogin;
    var $loginForm;
    var formInputs;
    var blockedUser;
    var unblockedUser;
    var selectedUser = {
        isBlocked: false,
        value: null
    };
    function init() {
        mLoginFormView = $(".m-login-form");
        forgottenPassword = mLoginFormView.find(".js-forgotten-password");
        wrongCredentials = mLoginFormView.find(".js-wrong-credentials");
        blockedUser = mLoginFormView.find(".blocked-user");
        unblockedUser = mLoginFormView.find(".unblocked-user");
        $loginForm = mLoginFormView.find("form");
        $userInput = $loginForm.find("input#username");
        $passwordInput = $loginForm.find("input#password");
        $modalLogin = mModalLogin.getModalView();
        _setupForm();
        forgottenPassword.on("click", _handlerForgottenPassword);
        $loginForm.validator({
            disable: false
        }).on("submit", _onLoginFormSubmit);
        $userInput.add($passwordInput).on("invalid.bs.validator", function() {
            wrongCredentials.addClass("hidden");
        });
        $userInput.on("change", _checkUserBlocked);
    }
    function _checkUserBlocked() {
        if (selectedUser.isBlocked && selectedUser.value !== $(this).val()) {
            blockedUser.hide();
            unblockedUser.show();
        } else if (selectedUser.isBlocked && selectedUser.value === $(this).val()) {
            blockedUser.show();
            unblockedUser.hide();
        }
    }
    function _setupForm() {
        var loginMessage;
        var loginCallback;
        if ($modalLogin.length) {
            loginMessage = $modalLogin.data("login-message-error");
            loginCallback = $modalLogin.data("login-callback");
            $loginForm.attr("data-login-message-error", loginMessage);
            $loginForm.attr("data-callback", loginCallback);
        }
    }
    function _handlerForgottenPassword(ev) {
        ev.preventDefault();
        if ($modalLogin.length && mModalLogin.getInitialStateView() !== "recover") {
            mLoginRecoverPassword.setDefaultEmail(getUsername());
            mModalLogin.getNavigator().navigate(mModalLogin.RECOVER_PASSWORD);
            mModalLogin.setNextStateView("recover");
        }
    }
    function _onLoginFormSubmit(ev) {
        var $form = $(this);
        var loginData = {
            user: $userInput.val(),
            password: $passwordInput.val(),
            defaultErrorMsg: $form.data("login-message-error") || ""
        };
        toggleLoadingButton($form, true);
        if (ev.isDefaultPrevented()) {
            toggleLoadingButton($form, false);
        } else {
            ev.preventDefault();
            if ($(".p-cio-guest-data").length) {
                Globals.ssoUrl = "/ci-online/guest-form/access";
                loginSSO(loginData).then(_onSubmitLoginSuccess_guest_form, _onSubmitLoginFailure);
            } else login.loginSSO(loginData).then(_onSubmitLoginSuccess, _onSubmitLoginFailure);
            window.onbeforeunload = null;
        }
    }
    function loginSSO(loginData) {
        var ssoUrl = typeof Globals.ssoUrl !== "undefined" ? Globals.ssoUrl : null;
        var ssoService = typeof Globals.ssoService !== "undefined" ? Globals.ssoService : null;
        var url;
        var deferred = $.Deferred();
        var errorMessage;
        var promise;
        defaultErrorMsg = loginData.defaultErrorMsg;
        url = ssoUrl;
        var params = {
            service: ssoService,
            username: loginData.user,
            password: encodeURIComponent(loginData.password)
        };
        if (loginData.user && loginData.password && ssoService && ssoUrl) {
            promise = $.ajax({
                method: "POST",
                url: url,
                data: JSON.stringify(params),
                async: false,
                dataType: "json",
                contentType: "application/json"
            });
            return promise.then(function(res) {
                if (res) {
                    return res;
                } else {
                    return {
                        message: "Login Error"
                    };
                }
            }, function(jqXHR, exception) {
                if (jqXHR.status === 0) {
                    errorMessage = "Not connect.\n Verify Network.";
                } else if (jqXHR.status == 404) {
                    errorMessage = "Requested page not found. [404]";
                } else if (jqXHR.status == 500) {
                    errorMessage = "Internal Server Error [500].";
                } else if (exception === "parsererror") {
                    errorMessage = "Requested JSON parse failed.";
                } else if (exception === "timeout") {
                    errorMessage = "Time out error.";
                } else if (exception === "abort") {
                    errorMessage = "Ajax request aborted.";
                } else {
                    errorMessage = "Login Error";
                }
                return {
                    message: errorMessage
                };
            });
        } else {
            console.log("One of this params are empty: user, password, Globals.ssoService or Globals.ssoUrl");
            errorMessage = loginData.user && loginData.password ? defaultErrorMsg : "One of this fields are empty: user, password";
            deferred.reject({
                message: errorMessage
            });
            return deferred.promise();
        }
    }
    function _onSubmitLoginSuccess(response) {
        var loginSuccessCallbackName = $loginForm.data("callback");
        var loginSuccessCallback = loginSuccessCallbackName ? getFunctionByName(loginSuccessCallbackName) : null;
        var isFunction = typeof loginSuccessCallback === "function";
        utils.callTrackForms("success", "loginRewardsForm", "success");
        if (isFunction) {
            loginSuccessCallback(response.targetUrl).then(function() {
                if ($modalLogin.length) {
                    window.location = response.targetUrl;
                }
            }, function(error) {
                _onSubmitLoginFailure(error);
            });
        } else {
            window.location = response.targetUrl;
        }
    }
    function _onSubmitLoginSuccess_guest_form(response) {
        var loginSuccessCallbackName = $loginForm.data("callback");
        var loginSuccessCallback = getFunctionByName(loginSuccessCallbackName);
        var isFunction = typeof loginSuccessCallback === "function";
        utils.callTrackForms("success", "loginRewardsForm", "success");
        if (isFunction) {
            loginSuccessCallback(response).then(function() {
                if ($modalLogin.length) {
                    if (typeof reservationIdOci !== "undefined") {
                        trackOCILogin(Globals.page_section, reservationIdOci);
                    }
                    $modalLogin.modal("hide");
                }
            }, function(error) {
                _onSubmitLoginFailure(error);
            });
        } else {
            window.location = response.targetUrl;
        }
    }
    function _onSubmitLoginFailure(error) {
        toggleLoadingButton($loginForm, false);
        $userInput.closest(".form-group").addClass("has-error");
        $passwordInput.closest(".form-group").addClass("has-error");
        $userInput.closest(".form-group").removeClass("has-success");
        $passwordInput.closest(".form-group").removeClass("has-success");
        selectedUser.value = $userInput.val();
        if (error.type === "blocked") {
            blockedUser.show();
            unblockedUser.hide();
            selectedUser.isBlocked = true;
        } else {
            wrongCredentials.find("p").html(error.message);
            wrongCredentials.removeClass("hidden");
            selectedUser.isBlocked = false;
        }
    }
    function _toggleWrongCredentials(visibility) {
        var userInput = mLoginFormView.find("form input#username");
        var passwordInput = mLoginFormView.find("form input#password");
        if (visibility) {
            userInput.closest(".form-group").addClass("has-error");
            passwordInput.closest(".form-group").addClass("has-error");
            userInput.on("change", _onWrongInputChanges);
            passwordInput.on("change", _onWrongInputChanges);
            wrongCredentials.removeClass("hidden");
        } else {
            wrongCredentials.addClass("hidden");
        }
    }
    function _onWrongInputChanges(e) {
        var $this = $(this);
        wrongCredentials.addClass("hidden");
        $this.off("change", _onWrongInputChanges);
    }
    function getUsername() {
        return mLoginFormView.find("form input#username").val();
    }
    return {
        init: init,
        getUsername: getUsername
    };
}();

$(function() {
    if ($(".m-login-form").length) {
        mLoginForm.init();
    }
});

"use strict";

var mLoginRecoverPassword = function() {
    var mLoginRecoverPasswordView;
    var backButton;
    var errorBlock;
    var errorMessage;
    var defaultEmail;
    var $recoverPasswordForm;
    var $email;
    var modalLoginView = null;
    function init() {
        modalLoginView = $("#m-modal-login");
        mLoginRecoverPasswordView = $(".m-login-recover-password");
        $recoverPasswordForm = mLoginRecoverPasswordView.find("form");
        $email = $recoverPasswordForm.find("#mail");
        backButton = mLoginRecoverPasswordView.find(".js-back-login-form");
        errorBlock = mLoginRecoverPasswordView.find(".help-block");
        errorMessage = errorBlock.find("li").eq(0);
        _setEmailValue();
        backButton.on("click", _backButtonHandler);
        mLoginRecoverPasswordView.find("form").validator({
            disable: false
        }).on("submit", _onRecoverPasswordFormSubmit);
    }
    function _setEmailValue() {
        if (defaultEmail && defaultEmail.length > 0) {
            var pattern = /[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;
            if (pattern.test(defaultEmail)) {
                mLoginRecoverPasswordView.find("form input#mail").val(defaultEmail);
                defaultEmail = "";
            }
        }
    }
    function _backButtonHandler() {
        if (mModalLogin.getInitialStateView() === "login") {
            mModalLogin.getNavigator().navigate(mModalLogin.LOGIN_FORM);
            mModalLogin.setNextStateView("login");
        } else if (mModalLogin.getInitialStateView() === "signup") {
            mModalLogin.getNavigator().navigate(mModalLogin.LOGIN_SIGNUP_FORM);
            mModalLogin.setNextStateView("signup");
        } else {
            mModalLogin.getModalView().modal("hide");
        }
    }
    function toggleEmailNonExistent(visibility) {
        var mailInput = mLoginRecoverPasswordView.find("form input#mail");
        if (visibility) {
            mailInput.closest(".form-group").addClass("has-error");
        } else {}
    }
    function _onRecoverPasswordFormSubmit(e) {
        var $form = $(this);
        toggleLoadingButton($form, true);
        if (e.isDefaultPrevented()) {
            toggleLoadingButton($form, false);
        } else {
            e.preventDefault();
            _submitRecoverPasswordEmail();
        }
    }
    function _submitRecoverPasswordEmail() {
        var url = "/nhrewards/reset-password";
        var errorMessage;
        $.ajax({
            type: "POST",
            url: url,
            data: "email=" + $email.val() + "&cmp=" + $recoverPasswordForm.find("#cmp").val() + "&cmpView=" + $recoverPasswordForm.find("#cmpView").val(),
            async: true,
            dataType: "json"
        }).then(function(response) {
            mModalLogin.getNavigator().navigate(mModalLogin.RECOVER_PASSWORD_CONFIRMATION);
            mModalLogin.setNextStateView("recover_confirmation");
        }, function(error) {
            errorMessage = '<ul class="list-unstyled"><li>' + error.response + "</li></ul>";
            $email.val("");
            $email.closest(".form-group").addClass("has-error");
            $email.closest(".help-block").html(errorMessage);
            toggleLoadingButton($recoverPasswordForm, false);
        });
    }
    function setDefaultEmail(email) {
        defaultEmail = email;
    }
    return {
        init: init,
        setDefaultEmail: setDefaultEmail
    };
}();

$(function() {
    if ($(".m-login-recover-password").length) {
        mLoginRecoverPassword.init();
    }
});

"use strict";

var mLoginRecoverPasswordConfirmation = function() {
    var mLoginRecoverPasswordConfirmationView;
    var goBackLoginCTA;
    var goBackCTA;
    function init() {
        mLoginRecoverPasswordConfirmationView = $(".m-login-recover-password-confirmation");
        goBackLoginCTA = mLoginRecoverPasswordConfirmationView.find(".js-go-back-login");
        goBackCTA = mLoginRecoverPasswordConfirmationView.find(".js-go-back");
        goBackLoginCTA.on("click", _goBackLoginCTAHandler);
        goBackCTA.on("click", _goBackCTAHandler);
    }
    function _goBackCTAHandler(ev) {
        ev.preventDefault();
        mModalLogin.getNavigator().goBackHandler();
        mModalLogin.setNextStateView("recover");
    }
    function _goBackLoginCTAHandler(ev) {
        ev.preventDefault();
        if (mModalLogin.getInitialStateView() === "login") {
            mModalLogin.getNavigator().navigate(mModalLogin.LOGIN_FORM);
            mModalLogin.setNextStateView("login");
        } else if (mModalLogin.getInitialStateView() === "signup") {
            mModalLogin.getNavigator().navigate(mModalLogin.LOGIN_SIGNUP_FORM);
            mModalLogin.setNextStateView("signup");
        } else {
            mModalLogin.getModalView().modal("hide");
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-login-recover-password-confirmation").length) {
        mLoginRecoverPasswordConfirmation.init();
    }
});

"use strict";

var modalSendReservation = function() {
    var modalSendReservationView = $("#modal-send-reservation");
    var modalSendReservationForm = modalSendReservationView.find("form");
    var modalSendReservationSuccess = modalSendReservationView.find(".modal-send-reservation-success-content");
    function init() {
        modalSendReservationForm.validator({
            disable: false,
            custom: {
                multipleemails: validateMultipleEmails
            }
        }).on("submit", function(e) {
            if (e.isDefaultPrevented()) {
                modalSendReservationSuccess.addClass("hide");
            } else {
                modalSendReservationForm.addClass("hide");
                modalSendReservationSuccess.removeClass("hide");
                e.preventDefault();
            }
        });
        modalSendReservationView.on("show.bs.modal", _onShowSendReservationModal);
        modalSendReservationView.on("hide.bs.modal", _onHideSendReservationModal);
    }
    function _onShowSendReservationModal(e) {
        modalSendReservationForm.removeClass("hide");
        modalSendReservationSuccess.addClass("hide");
    }
    function _onHideSendReservationModal(e) {
        modalSendReservationForm.addClass("hide");
        modalSendReservationSuccess.removeClass("hide");
    }
    return {
        init: init
    };
}();

$(function() {
    modalSendReservation.init();
});

"use strict";

var _createClass = function() {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

var CustomizeRoom = function() {
    function CustomizeRoom($room) {
        _classCallCheck(this, CustomizeRoom);
        this.$room = $room;
        this.hostsAmount = 1;
    }
    _createClass(CustomizeRoom, [ {
        key: "init",
        value: function init() {
            this.$addHostBtn = this.$room.find(".js-add-person");
            this.maxHostsAllowed = this.$addHostBtn.data("max-add");
            this.$hostData = this.$room.find(".host-data-new");
            this.$hosts = this.$hostData.find(".data");
            this.$removeHostBtn = this.$hostData.find(".btn-ico");
            this.$removeHostBtn.hide();
            this.$addHostBtn.on("click", {
                room: this
            }, this._addNewHost);
            this.$removeHostBtn.on("click", {
                room: this
            }, this._removeNewHost);
        }
    }, {
        key: "_addNewHost",
        value: function _addNewHost(ev) {
            var room = ev.data.room;
            var currentHost;
            if (room.hostsAmount < room.maxHostsAllowed) {
                currentHost = room.$hosts.eq(room.hostsAmount);
                currentHost.show();
                room.hostsAmount++;
                if (room.hostsAmount == room.maxHostsAllowed) {
                    room.$addHostBtn.hide();
                }
                currentHost.prev().find(".btn-ico").hide();
                currentHost.find(".btn-ico").show();
            }
        }
    }, {
        key: "_removeNewHost",
        value: function _removeNewHost(ev) {
            var room = ev.data.room;
            var currentHost = room.$hosts.eq(room.hostsAmount - 1);
            if (room.hostsAmount > 1) {
                currentHost.hide();
                currentHost.find("input").val("");
                room.$addHostBtn.show();
                currentHost.prev().find(".btn-ico").show();
                room.hostsAmount--;
                if (room.hostsAmount === 1) {
                    currentHost.prev().find(".btn-ico").hide();
                }
            }
        }
    } ]);
    return CustomizeRoom;
}();

var mCustomizeRoomDetail = function() {
    var $roomsContainer = $("#rooms-detail");
    var $rooms = $roomsContainer.find(".panel");
    var rooms = [];
    function init() {
        var $room;
        var room;
        $.each($rooms, function(index, element) {
            $room = $(this);
            room = new CustomizeRoom($room);
            room.init();
        });
    }
    return {
        init: init
    };
}();

$(function() {
    mCustomizeRoomDetail.init();
});

"use strict";

var mPaymentMethods = function() {
    var $paymentMethods = $(".m-payment-methods");
    var $paymentMethodsSelectsContainter = $paymentMethods.find(".js-payment-selector");
    var $paymentMethodOption = $paymentMethods.find(".payment-method-option");
    var $paymentMethodsSelects = $paymentMethodsSelectsContainter.find("select");
    var $needBillContainer = $paymentMethods.find("#info-bill");
    var infoBillElements = {
        $billTypeSelectors: $needBillContainer.find("input[type=radio]"),
        $copyReservationInfoCheck: $needBillContainer.find("#copy-info"),
        $companyFields: $needBillContainer.find("#company-name"),
        $personalFields: $("#name-surname-bill").add("#name-bill").add("#last-name-bill")
    };
    function init() {
        $paymentMethodsSelects.on("changed.bs.select", _onChangePaymentMethodOption);
        infoBillElements.$billTypeSelectors.on("change", _onBillTypeChange);
    }
    function _onChangePaymentMethodOption() {
        var $selectedOption = $(this).find("option:selected");
        _showPaymentMethodOptions($selectedOption);
    }
    function _onBillTypeChange() {
        var $this = $(this);
        var isPersonalChoice = true;
        if ($this.is(":checked")) {
            isPersonalChoice = $this.attr("id") === "personalInvoice";
            infoBillElements.$copyReservationInfoCheck.attr("checked", false);
            infoBillElements.$copyReservationInfoCheck.closest(".checkbox").toggle(isPersonalChoice);
            _toggleBillCompanyNameVisibility(!isPersonalChoice);
            _toggleBillUserNameVisiblity(isPersonalChoice);
        }
    }
    function _showPaymentMethodOptions($selectedOption) {
        $paymentMethodOption.hide();
        var $collapsibleTarget = $selectedOption.data("collapsible-target");
        var $parent = $selectedOption.parents(".m-payment-methods");
        var $collapsedOptions = $parent.find($collapsibleTarget);
        $collapsedOptions.find("input:checked").not("#need-bill, .type-invoice").prop("checked", false);
        $collapsedOptions.find(".payment-method-info").hide();
        $collapsedOptions.show();
    }
    function _toggleBillCompanyNameVisibility(isVisible) {
        infoBillElements.$companyFields.closest(".js-company-name-wrapper").toggle(isVisible);
        infoBillElements.$companyFields.attr("data-validation", isVisible).val("");
    }
    function _toggleBillUserNameVisiblity(isVisible) {
        infoBillElements.$personalFields.closest(".js-bill-user").toggle(isVisible);
        infoBillElements.$personalFields.attr("data-validation", isVisible).val("");
    }
    return {
        init: init
    };
}();

$(function() {
    mPaymentMethods.init();
});

"use strict";

var landingCarousel = function() {
    var landingCarouselModules = $(".m-landing-carousel");
    var commonOwlConfig = {
        items: 1,
        margin: 0,
        nav: false,
        loop: true,
        dots: false,
        autoHeight: false,
        responsive: {
            0: {
                items: 1,
                autoHeight: false,
                mouseDrag: false,
                touchDrag: true
            },
            600: {
                items: 1,
                autoHeight: false,
                mouseDrag: false,
                touchDrag: true
            }
        }
    };
    function init() {
        landingCarouselModules.each(function(index, landingCarousel) {
            var $landingCarousel = $(landingCarousel);
            _initOwlCarousel($landingCarousel);
        });
    }
    function _initOwlCarousel($landingCarousel) {
        var carouselChildren = $landingCarousel.find(".carousel-slide");
        var owlCustomOptions = $landingCarousel.data("owl-carousel-options") ? $landingCarousel.data("owl-carousel-options") : {};
        var owlConfig = _getMultipleSlideCarouselConfig(owlCustomOptions);
        if (carouselChildren.length === 1) {
            owlConfig = _getSingleSlideCarouselConfig(owlCustomOptions);
        }
        if (carouselChildren && carouselChildren.length > 0) {
            $landingCarousel.owlCarousel(owlConfig);
        }
    }
    function _getSingleSlideCarouselConfig(owlCustomOptions) {
        var owlConfig = {};
        owlConfig = $.extend(owlConfig, commonOwlConfig, {
            nav: false,
            loop: true,
            dots: false,
            mouseDrag: false,
            touchDrag: false
        }, owlCustomOptions);
        return owlConfig;
    }
    function _getMultipleSlideCarouselConfig(owlCustomOptions) {
        var owlConfig = {};
        owlConfig = $.extend(owlConfig, commonOwlConfig, {
            nav: true,
            navText: [ '<span class="owl-prev-icon nh-ic-chevron"></span>', '<span class="owl-next-icon nh-ic-chevron"></span>' ]
        }, owlCustomOptions);
        return owlConfig;
    }
    return {
        init: init
    };
}();

$(function() {
    landingCarousel.init();
});

"use strict";

var commonBookingHotel = function() {
    var formConstants = {
        CODE: "code",
        LOCALITY: "locality",
        LOCATION2: "location2",
        LOCATION_LCV: "locationLcv",
        LOCATION_TCM: "locationTCM",
        TIPO_BUSCADOR: "tipoBuscador",
        TYPE: "type",
        URL_HOTEL: "urlHotel",
        VIRTUAL_HOTEL: "virtualHotel",
        START_DATE: "start-date",
        END_DATE: "end-date",
        START_DATE_CALENDAR: "start-date-calendar",
        END_DATE_CALENDAR: "end-date-calendar"
    };
    var constantsWithHash = [];
    for (var i in formConstants) {
        constantsWithHash[i] = "#" + formConstants[i];
    }
    var initialVars = {
        initialSearch: {},
        initialTypeSearch: null,
        fields: {
            ids: [ formConstants.CODE, formConstants.LOCALITY, formConstants.LOCATION2, formConstants.LOCATION_LCV, formConstants.LOCATION_TCM, formConstants.TIPO_BUSCADOR, formConstants.TYPE, formConstants.URL_HOTEL, formConstants.VIRTUAL_HOTEL, formConstants.START_DATE, formConstants.END_DATE ],
            elements: {}
        },
        constants: formConstants,
        constantsWithHash: constantsWithHash
    }, $reservationForm = null, occupancyRange = {};
    var isValidDate = function isValidDate($input) {
        var date = $input.val();
        var isValid = true;
        if (!date) {
            isValid = false;
        } else {
            isValid = moment(date, "DD/MM/YYYY").isValid();
        }
        return isValid;
    };
    function _toggleInvalidRangeError($wrapper, isError) {
        var $helpBlock = $wrapper.find(".help-block");
        if (isError) {
            $helpBlock.show();
            $wrapper.addClass("has-invalid-datepicker-error has-error").removeClass("has-success-datepicker");
        } else {
            $helpBlock.hide();
            $wrapper.removeClass("has-invalid-datepicker-error has-error").addClass("has-success-datepicker");
        }
    }
    function _getFields() {
        var id = void 0;
        for (var x = 0; x < initialVars.fields.ids.length; x++) {
            id = "#" + initialVars.fields.ids[x];
            initialVars.fields.elements[id] = $reservationForm.find(id);
        }
    }
    function _isValidRange() {
        var isValidInitialDate = isValidDate(occupancyRange.$initRangeInput);
        var isValidFinalDate = isValidDate(occupancyRange.$endRangeInput);
        _toggleInvalidRangeError(occupancyRange.$initRangeWrapper, !isValidInitialDate);
        _toggleInvalidRangeError(occupancyRange.$endRangeWrapper, !isValidFinalDate);
        return isValidInitialDate && isValidFinalDate;
    }
    function _validateRangeDate($input, $wrapper) {
        var isError = validateDate($input);
        _toggleInvalidRangeError($wrapper, isError);
        return isError;
    }
    function _initValidateRange() {
        occupancyRange.$initRangeErrorBlock.append('<ul role="alert"><li>' + occupancyRange.$initRangeInput.data("error") + "</li></ul>");
        occupancyRange.$endRangeErrorBlock.append('<ul role="alert"><li>' + occupancyRange.$endRangeInput.data("error") + "</li></ul>");
        occupancyRange.$initRangeInput.add(occupancyRange.$endRangeInput).on("focusout", function(ev) {
            var $this = $(this);
            var $wrapper = this.id === "end-date" ? occupancyRange.$endRangeWrapper : occupancyRange.$initRangeWrapper;
            _validateRangeDate($this, $wrapper);
        });
        occupancyRange.$initRangeInput.on("change", function() {
            occupancyRange.$initRangeInput.trigger("focusout");
            occupancyRange.$endRangeInput.trigger("focusout");
        });
        occupancyRange.$endRangeInput.on("change", function() {
            occupancyRange.$endRangeInput.trigger("focusout");
        });
    }
    function _setFormSelectors($formSelector) {
        $reservationForm = $formSelector;
        occupancyRange = {
            $rangeSelector: $formSelector.find(".range-calendar"),
            get $initRangeWrapper() {
                return this.$rangeSelector.find(".init-range-calendar .js-input-wrapper");
            },
            get $endRangeWrapper() {
                return this.$rangeSelector.find(".end-range-calendar .js-input-wrapper");
            },
            get $initRangeInput() {
                return this.$initRangeWrapper.find("input.date-select");
            },
            get $endRangeInput() {
                return this.$endRangeWrapper.find("input.date-select");
            },
            get $initRangeErrorBlock() {
                return this.$initRangeWrapper.find(".help-block");
            },
            get $endRangeErrorBlock() {
                return this.$endRangeWrapper.find(".help-block");
            }
        };
    }
    function _getSelectors() {
        return {
            initialVars: initialVars,
            occupancyRange: occupancyRange
        };
    }
    function init($formSelector) {
        _setFormSelectors($formSelector);
        _getFields();
    }
    return {
        init: init,
        getSelectors: _getSelectors,
        isValidRange: _isValidRange,
        initValidateRange: _initValidateRange
    };
}();

"use strict";

var _createClass = function() {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

var reservationOccupancy = function() {
    var $reservationOccupancyView = $(".m-occupancy"), $roomsAmmountCounter = $reservationOccupancyView.find(".add-room-link"), $occupancyContainer = $reservationOccupancyView.find(".occupancy-content"), $roomMessage = $reservationOccupancyView.find(".room-message"), $ocupancyRooms = $occupancyContainer.find(".option-list"), $parentModal, $acceptOccupancyButton = $occupancyContainer.find("#acceptOccupancy");
    var occupancyInfoData = {
        adults: 0,
        children: 0,
        babies: 0
    };
    var roomsData = {
        $container: $ocupancyRooms,
        $rooms: null,
        $visibleRooms: [],
        roomsList: [],
        visibleRoomsList: [],
        $roomsInfo: null
    };
    var labelsData = $occupancyContainer.data("labels") || {
        rooms: "rooms",
        room: "room",
        adults: "adults",
        adult: "adult",
        children: "children",
        child: "child",
        babies: "babies",
        baby: "baby"
    };
    var $roomMessage = $reservationOccupancyView.find(".room-message");
    var roomsAllowed = {
        max: $roomsAmmountCounter.data("maxRooms") ? $roomsAmmountCounter.data("maxRooms") : 5,
        min: $roomsAmmountCounter.data("minRooms") ? $roomsAmmountCounter.data("minRooms") : 1
    };
    var visibleRooms = 1;
    function init() {
        var parentModal = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
        var $currentRoom = null;
        var availableRoom = null;
        var $currentRoomInfo = null;
        var isVisibleRoom = true;
        $parentModal = parentModal;
        extend(this, new Subject());
        roomsData.$rooms = roomsData.$container.find(".option");
        if (roomsData.$rooms.length) {
            roomsData.$rooms.each(function(index) {
                $currentRoom = $(this);
                isVisibleRoom = index < visibleRooms;
                $currentRoom.toggleClass("hidden", !isVisibleRoom);
                availableRoom = new Room(index);
                roomsData.roomsList.push(availableRoom);
                availableRoom.init($currentRoom);
                reservationOccupancy.addObserver(availableRoom);
                if (isVisibleRoom) {
                    roomsData.$visibleRooms.push($currentRoom);
                    roomsData.visibleRoomsList.push(availableRoom);
                }
            });
        }
        $($roomsAmmountCounter).on("click", _onAddRoom);
    }
    function update(roomIndex, paxType) {
        occupancyInfoData[paxType] = occupancyInfoData[paxType] - roomsData.roomsList[roomIndex].oldPax[paxType] + roomsData.roomsList[roomIndex].pax[paxType];
        this.notify();
    }
    function getRoomData() {
        return roomsData;
    }
    function getMaxRooms() {
        return roomsAllowed;
    }
    function _addRooms() {
        var index = roomsData.visibleRoomsList.length;
        if (index >= 12) {
            return false;
        }
        roomsData.$rooms.eq(index).removeClass("hidden").css("display", "flex");
        roomsData.$visibleRooms.push(roomsData.$rooms.eq(index));
        roomsData.visibleRoomsList.push(roomsData.roomsList[index]);
        roomsData.roomsList[index].setUpRoom();
    }
    function _onAddRoom(ev) {
        ev.preventDefault();
        var value = roomsData.visibleRoomsList.length;
        if (value < roomsAllowed.max) {
            console.log("habitaciones visibles: " + roomsData.visibleRoomsList);
            var summaryText = calculateOcuppancyText();
            $(".room-resume").html(summaryText.longSummary);
        }
        $roomMessage.toggle(value > roomsAllowed.max);
        $ocupancyRooms.toggle(value <= roomsAllowed.max);
    }
    function removeRoom(roomIndex) {
        var i = void 0;
        var hasRemovedRoom = roomsData.visibleRoomsList.some(function(element, index) {
            if (element.index === roomIndex) {
                i = index;
                return true;
            }
        });
        if (hasRemovedRoom) {
            for (var x = i + 1; x < roomsData.visibleRoomsList.length; x++) {
                roomsData.visibleRoomsList[x - 1].copyRoomPax(roomsData.visibleRoomsList[x]);
            }
            roomsData.visibleRoomsList[roomsData.visibleRoomsList.length - 1].resetRoom();
            roomsData.$visibleRooms[roomsData.$visibleRooms.length - 1].addClass("hidden");
            roomsData.$visibleRooms.pop();
            roomsData.visibleRoomsList.pop();
        }
    }
    function calculateOcuppancyText() {
        var roomsNumber = roomsData.visibleRoomsList.length;
        var occupancyText = null, occupancyTextShort;
        var occupancyLabels = {
            get rooms() {
                var tag = roomsNumber > 1 ? "rooms" : "room";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get adults() {
                var tag = occupancyInfoData.adults > 1 ? "adults" : "adult";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get children() {
                var tag = occupancyInfoData.children > 1 ? "children" : "child";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get babies() {
                var tag = occupancyInfoData.babies > 1 ? "babies" : "baby";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            }
        };
        occupancyText = roomsNumber + " " + occupancyLabels.rooms + ", " + occupancyInfoData.adults + " " + occupancyLabels.adults + ", " + occupancyInfoData.children + " " + occupancyLabels.children + ", " + occupancyInfoData.babies + " " + occupancyLabels.babies;
        occupancyTextShort = roomsNumber + " " + occupancyLabels.rooms + ", " + occupancyInfoData.adults + " " + occupancyLabels.adults + (occupancyInfoData.children > 0 ? ", " + occupancyInfoData.children + " " + occupancyLabels.children : "") + (occupancyInfoData.babies > 0 ? ", " + occupancyInfoData.babies + " " + occupancyLabels.babies : "");
        return {
            longSummary: occupancyText,
            shortSummary: occupancyTextShort
        };
    }
    function createInfoInput($currentInfoInput) {}
    return {
        init: init,
        update: update,
        getRoomData: getRoomData,
        getMaxRooms: getMaxRooms,
        removeRoom: removeRoom,
        calculateOcuppancyText: calculateOcuppancyText
    };
}();

var reservationOccupancyNew = function() {
    var $reservationOccupancyViews = null;
    var reservationOccupacies = [];
    var initialized = false;
    function init(parentModal) {
        var $currentOccupancy;
        var occupancy;
        $reservationOccupancyViews = $(".m-occupancy");
        if ($reservationOccupancyViews.length && !initialized) {
            $reservationOccupancyViews.each(function(index) {
                $currentOccupancy = $(this);
                occupancy = new Occupancy(index);
                reservationOccupacies.push(occupancy);
                occupancy.init($currentOccupancy, parentModal);
                initialized = true;
            });
        }
    }
    function getOccupancies() {
        return reservationOccupacies;
    }
    function getOccupancy(index) {
        return reservationOccupacies[index];
    }
    return {
        init: init,
        getOccupancies: getOccupancies,
        getOccupancy: getOccupancy
    };
}();

var Occupancy = function() {
    function Occupancy(ocupancyIndex) {
        _classCallCheck(this, Occupancy);
        this.index = ocupancyIndex;
        this.$element;
        this.$roomsAmmountCounter;
        this.$occupancyContainer;
        this.$roomMessage;
        this.$ocupancyRooms;
        this.$parentModal;
        this.$acceptOccupancyButton;
        this.$infoInput;
        this.$maxRoomsModal = null;
        this.occupancyInfoData = {
            adults: 0,
            children: 0,
            babies: 0
        };
        this.roomsData = {
            $container: null,
            $rooms: null,
            $visibleRooms: [],
            roomsList: [],
            visibleRoomsList: [],
            $roomsInfo: null
        };
        this.labelsData = {
            rooms: "rooms",
            room: "room",
            adults: "adults",
            adult: "adult",
            children: "children",
            child: "child",
            babies: "babies",
            baby: "baby"
        };
        this.$roomMessage;
        this.roomsAllowed = {};
        this.visibleRooms = 1;
    }
    _createClass(Occupancy, [ {
        key: "init",
        value: function init($element, parentModal) {
            var $currentRoom;
            var self = this;
            var isVisibleRoom;
            var availableRoom;
            this.$element = $element;
            this.$roomsAmmountCounter = this.$element.find(".add-room-link");
            this.$occupancyContainer = this.$element.find(".occupancy-content");
            this.$roomMessage = this.$element.find(".room-message");
            this.$ocupancyRooms = this.$element.find(".option-list");
            this.$acceptOccupancyButton = this.$element.find(".room-apply");
            this.$roomMessage = this.$element.find(".room-message");
            this.labelsData = this.$element.data("labels") || this.labelsData;
            this.$infoInput = this.$element.find("input.optionRooms");
            this.$infoInputLabel = this.$infoInput.siblings(".labelup-control");
            this.$maxRoomsModal = $("#modal-max-rooms");
            this.$parentModal = parentModal;
            this.roomsAllowed = {
                max: self.$roomsAmmountCounter.data("maxRooms") ? self.$roomsAmmountCounter.data("maxRooms") : 5,
                min: self.$roomsAmmountCounter.data("minRooms") ? self.$roomsAmmountCounter.data("minRooms") : 1
            };
            this.roomsData.$container = this.$ocupancyRooms;
            this.targetElement = $(this.$element)[0].querySelector(".option-list");
            extend(this, new Subject());
            this.roomsData.$rooms = this.roomsData.$container.find(".option");
            if (this.roomsData.$rooms.length) {
                this.roomsData.$rooms.each(function(index) {
                    $currentRoom = $(this);
                    isVisibleRoom = index < self.visibleRooms;
                    $currentRoom.toggleClass("hidden", !isVisibleRoom);
                    availableRoom = new Room(index);
                    self.roomsData.roomsList.push(availableRoom);
                    availableRoom.init($currentRoom, self);
                    self.addObserver(availableRoom);
                    if (isVisibleRoom) {
                        self.roomsData.$visibleRooms.push($currentRoom);
                        self.roomsData.visibleRoomsList.push(availableRoom);
                    }
                });
                this.hideCloseIconInFirstRoom({
                    remove: null
                });
            }
            self.$roomsAmmountCounter.on("click", {
                self: self
            }, this._onAddRoom);
            this.$element.data("occupancy-index", this.index);
            this.$infoInput.val(this.calculateOcuppancyText().shortSummary);
            this.$infoInputLabel.addClass("focus");
            this.$acceptOccupancyButton.on("click", function(ev) {
                var summaryText = self.calculateOcuppancyText();
                $(".room-resume").html(summaryText.longSummary);
                self.$infoInput.data("info", summaryText.shortSummary);
            });
            var $occupancyWrapper = $(self.roomsData.$container).parents(".m-occupancy-wrapper");
            $(this.roomsData.$container).parents(".m-occupancy").find(".room-close.nh-ic-close").click(function(e) {
                var $this = $(this);
                var parent = $this.parents(".room-close");
                if (!parent.hasClass("delete-room")) {
                    $occupancyWrapper.removeClass("is-open");
                    bodyScrollLock.enableBodyScroll(self.targetElement);
                }
            });
        }
    }, {
        key: "hideCloseIconInFirstRoom",
        value: function hideCloseIconInFirstRoom(action) {
            if (this.roomsData.$visibleRooms.length === 1 || this.roomsData.$visibleRooms.length + 1 < 2 && action.remove) {
                this.roomsData.$visibleRooms[0].find(".option-box.title button").prop("disabled", true).addClass("hidden");
            } else {
                this.roomsData.$visibleRooms[0].find(".option-box.title button").prop("disabled", false).removeClass("hidden");
            }
        }
    }, {
        key: "generateInputsFields",
        value: function generateInputsFields() {
            var htmlTemplate = "";
            this.roomsData.visibleRoomsList.forEach(function(element, index) {
                htmlTemplate += '<input type="hidden" name="nbabies' + (index + 1) + '" value="' + element.paxSelects[0].value + '">\n                      <input type="hidden" name="nchilds' + (index + 1) + '" value="' + element.paxSelects[1].value + '">\n                      <input type="hidden" name="nadults' + (index + 1) + '" value="' + element.paxSelects[2].value + '">';
            });
            return htmlTemplate;
        }
    }, {
        key: "generateOccupancyInfo",
        value: function generateOccupancyInfo() {
            var self = this;
            var info = {
                inputs: "",
                pax: this.occupancyInfoData,
                ages: "",
                rooms: this.roomsData.visibleRoomsList.length,
                get roomsField() {
                    return '<input type="hidden" name="rooms" value="' + this.rooms + '">';
                }
            };
            this.roomsData.visibleRoomsList.forEach(function(element, index) {
                info.inputs += '<input type="hidden" name="nbabies' + (index + 1) + '" value="' + element.paxSelects[0].value + '"><input type="hidden" name="nchilds' + (index + 1) + '" value="' + element.paxSelects[1].value + '"><input type="hidden" name="nadults' + (index + 1) + '" value="' + element.paxSelects[2].value + '">';
                info.ages += self.getPaxAges("children", element.pax.children) + self.getPaxAges("babies", element.pax.babies);
            });
            info.ages = info.ages.slice(0, -1);
            return info;
        }
    }, {
        key: "getPaxAges",
        value: function getPaxAges(type, paxNumber) {
            var age = type === "children" ? "7|" : "1|";
            var text = "";
            for (var x = 1; x <= paxNumber; x++) {
                text += age;
            }
            return text;
        }
    }, {
        key: "update",
        value: function update(roomIndex, paxType) {
            this.occupancyInfoData[paxType] = this.occupancyInfoData[paxType] - this.roomsData.roomsList[roomIndex].oldPax[paxType] + this.roomsData.roomsList[roomIndex].pax[paxType];
            this.notify();
        }
    }, {
        key: "getRoomData",
        value: function getRoomData() {
            return this.roomsData;
        }
    }, {
        key: "getMaxRooms",
        value: function getMaxRooms() {
            return this.roomsAllowed;
        }
    }, {
        key: "_scrollToElement",
        value: function _scrollToElement($el, $container) {
            $($el)[0].scrollIntoView();
        }
    }, {
        key: "_scrollToElementjQuery",
        value: function _scrollToElementjQuery($el, $container) {
            var moveToOffset = $el.position().top;
            $($container).animate({
                scrollTop: moveToOffset,
                useTranslate3d: true
            }, 200, "linear");
        }
    }, {
        key: "_isMobile",
        value: function _isMobile() {
            return window.matchMedia("(max-width: 767px)").matches;
        }
    }, {
        key: "_addRooms",
        value: function _addRooms() {
            var index = this.roomsData.visibleRoomsList.length;
            this.roomsData.$rooms.eq(index).removeClass("hidden").css("display", "flex");
            this.roomsData.$visibleRooms.push(this.roomsData.$rooms.eq(index));
            this.roomsData.visibleRoomsList.push(this.roomsData.roomsList[index]);
            this.roomsData.roomsList[index].setUpRoom();
        }
    }, {
        key: "_onAddRoom",
        value: function _onAddRoom(ev) {
            var _this = ev.data.self;
            var value = _this.roomsData.visibleRoomsList.length;
            var $container = _this.$occupancyContainer.find(".option-list");
            var summaryText = null;
            ev.preventDefault();
            $(_this.$ocupancyRooms).find(".option").eq(0).css({
                "pointer-events": "auto"
            });
            if (value >= _this.roomsAllowed.max) {
                _this.$maxRoomsModal.modal("show");
                return false;
            }
            if (value < _this.roomsAllowed.max) {
                _this._addRooms();
                if (_this._isMobile()) {
                    _this._scrollToElement(_this.roomsData.$visibleRooms[value], $container);
                } else {
                    _this._scrollToElementjQuery(_this.roomsData.$visibleRooms[value], $container);
                }
                _this.hideCloseIconInFirstRoom({
                    remove: false
                });
                summaryText = _this.calculateOcuppancyText();
                $(".room-resume").html(summaryText.longSummary);
                _this.$infoInput.data("info", summaryText.shortSummary);
            }
            _this.$roomMessage.toggle(value > _this.roomsAllowed.max);
            _this.$ocupancyRooms.toggle(value <= _this.roomsAllowed.max);
        }
    }, {
        key: "removeRoom",
        value: function removeRoom(roomIndex) {
            var i = void 0;
            var hasRemovedRoom = this.roomsData.visibleRoomsList.some(function(element, index) {
                if (element.index === roomIndex) {
                    i = index;
                    return true;
                }
            });
            if (hasRemovedRoom) {
                for (var x = i + 1; x < this.roomsData.visibleRoomsList.length; x++) {
                    this.roomsData.visibleRoomsList[x - 1].copyRoomPax(this.roomsData.visibleRoomsList[x]);
                }
                this.roomsData.visibleRoomsList[this.roomsData.visibleRoomsList.length - 1].resetRoom();
                this.roomsData.$visibleRooms[this.roomsData.$visibleRooms.length - 1].addClass("hidden");
                this.roomsData.$visibleRooms.pop();
                this.roomsData.visibleRoomsList.pop();
            }
        }
    }, {
        key: "calculateOcuppancyText",
        value: function calculateOcuppancyText() {
            var roomsNumber = this.roomsData.visibleRoomsList.length === 0 ? 1 : this.roomsData.visibleRoomsList.length;
            var occupancyText = null, occupancyTextShort;
            var self = this;
            var occupancyLabels = {
                get rooms() {
                    var tag = roomsNumber > 1 ? "rooms" : "room";
                    var label = self.labelsData[tag] ? self.labelsData[tag] : tag;
                    return label;
                },
                get adults() {
                    var tag = self.occupancyInfoData.adults > 1 ? "adults" : "adult";
                    var label = self.labelsData[tag] ? self.labelsData[tag] : tag;
                    return label;
                },
                get children() {
                    var tag = self.occupancyInfoData.children > 1 ? "children" : "child";
                    var label = self.labelsData[tag] ? self.labelsData[tag] : tag;
                    return label;
                },
                get babies() {
                    var tag = self.occupancyInfoData.babies > 1 ? "babies" : "baby";
                    var label = self.labelsData[tag] ? self.labelsData[tag] : tag;
                    return label;
                }
            };
            occupancyText = roomsNumber + " " + occupancyLabels.rooms + ", " + this.occupancyInfoData.adults + " " + occupancyLabels.adults + ", " + this.occupancyInfoData.children + " " + occupancyLabels.children + ", " + this.occupancyInfoData.babies + " " + occupancyLabels.babies;
            occupancyTextShort = roomsNumber + " " + occupancyLabels.rooms + ", " + this.occupancyInfoData.adults + " " + occupancyLabels.adults + (this.occupancyInfoData.children > 0 ? ", " + this.occupancyInfoData.children + " " + occupancyLabels.children : "") + (this.occupancyInfoData.babies > 0 ? ", " + this.occupancyInfoData.babies + " " + occupancyLabels.babies : "");
            return {
                longSummary: occupancyText,
                shortSummary: occupancyTextShort
            };
        }
    } ]);
    return Occupancy;
}();

var Room = function() {
    function Room(roomIndex) {
        _classCallCheck(this, Room);
        this.index = roomIndex;
        this.roomNumber = roomIndex + 1;
        this.id = "room" + this.roomNumber;
        this.occupancy;
        this.$roomSelectors = null;
        this.pax = {
            adults: 0,
            children: 0,
            babies: 0,
            totalAllowed: 12
        };
        this.oldPax = $.extend({}, this.pax);
        this.paxSelects = [];
        this.selectUpdated = null;
        this.$removeRoomIcon = null;
    }
    _createClass(Room, [ {
        key: "init",
        value: function init($room, occupancy) {
            var currentRoom = this;
            var $currentSelect;
            var paxSelect = null;
            this.occupancy = occupancy;
            this.$removeRoomIcon = $(".room-close[data-close = " + this.index + "]");
            $(this.$removeRoomIcon).on("click", {
                room: this
            }, this._removeRooms);
            this.roomSelectors = $room.find(".fields .controls[data-type]").get().reverse();
            this.$roomSelectors = $(this.roomSelectors);
            this.visible = this.index > 0 ? false : true;
            extend(this, new Subject());
            if (this.$roomSelectors.length) {
                this.$roomSelectors.each(function() {
                    $currentSelect = $(this);
                    paxSelect = new PaxSelect(currentRoom);
                    currentRoom.paxSelects.push(paxSelect);
                    currentRoom.addObserver(paxSelect);
                    paxSelect.init($currentSelect);
                });
            }
        }
    }, {
        key: "_removeRooms",
        value: function _removeRooms(ev) {
            var _this = ev.data.room.occupancy;
            var rooms = _this.getRoomData(), $container = _this.$occupancyContainer.find(".option-list");
            if (rooms.visibleRoomsList.length - 1 < 1) {
                return false;
            } else {
                var value = void 0;
                var summaryText = void 0;
                $(ev.target).parents(".option").addClass("removing");
                var $this = $(this);
                setTimeout(function() {
                    _this.removeRoom(ev.data.room.index);
                    value = _this.roomsData.visibleRoomsList.length;
                    summaryText = _this.calculateOcuppancyText();
                    $(".room-resume").html(summaryText.longSummary);
                    _this.$infoInput.data("info", summaryText.shortSummary);
                    if (_this._isMobile()) {
                        _this._scrollToElement(_this.roomsData.$visibleRooms[value - 1], $container);
                    } else {
                        _this._scrollToElementjQuery(_this.roomsData.$visibleRooms[value - 1], $container);
                    }
                    $(ev.target).parents(".option").removeClass("removing");
                    _this.hideCloseIconInFirstRoom({
                        remove: true
                    });
                    if (value > 1) {
                        $(_this.$ocupancyRooms).find(".option").eq(0).css({
                            "pointer-events": "auto"
                        });
                    }
                }, 500);
            }
        }
    }, {
        key: "setUpRoom",
        value: function setUpRoom() {
            var currentRoom = this;
            var $currentSelect;
            var $currentInfoInput = null;
            currentRoom.visible = true;
            this.$roomSelectors.each(function(index) {
                $currentSelect = $(this);
                currentRoom.paxSelects[index].setPax($currentSelect);
            });
        }
    }, {
        key: "resetRoom",
        value: function resetRoom() {
            var currentRoom = this;
            var $currentSelect;
            currentRoom.visible = false;
            this.$roomSelectors.each(function(index) {
                $currentSelect = $(this);
                currentRoom.paxSelects[index].resetPax($currentSelect);
            });
        }
    }, {
        key: "update",
        value: function update() {
            this.pax.total = 0;
            for (var x = 0; x < this.paxSelects.length; x++) {
                this.pax[this.paxSelects[x].type] = this.paxSelects[x].value;
                this.pax.total += this.paxSelects[x].value;
            }
            this.oldPax.totalAllowed = this.pax.totalAllowed;
            this.pax.totalAllowed = this.pax.babies > 1 ? 13 : 12;
        }
    }, {
        key: "updatePax",
        value: function updatePax(type, value) {
            this.oldPax[type] = this.pax[type];
            this.pax[type] = value;
            this.selectUpdated = type;
            this.occupancy.update(this.index, type);
            this.notify();
        }
    }, {
        key: "updateRoomPax",
        value: function updateRoomPax(ocuppancy) {
            var paxSelect = null;
            var paxValue = null;
            for (var x = 0; x < this.paxSelects.length; x++) {
                paxSelect = this.paxSelects[x];
                paxValue = ocuppancy[paxSelect.type];
                paxSelect.$select.val(paxValue).trigger("change");
                paxSelect.value = paxValue;
            }
        }
    }, {
        key: "copyRoomPax",
        value: function copyRoomPax(copyRoom) {
            $.each(this.paxSelects, function(index, paxSelect) {
                paxSelect.copyPax(copyRoom);
            });
        }
    } ]);
    return Room;
}();

var PaxSelect = function() {
    function PaxSelect(room) {
        _classCallCheck(this, PaxSelect);
        this.value = 0;
        this.type;
        this.room = room;
        this.maxValueAllowed = null;
    }
    _createClass(PaxSelect, [ {
        key: "init",
        value: function init($currentSelect) {
            var currentPaxSelect = this;
            var preselectedValue = null;
            var type;
            this.type = $currentSelect.data("type");
            this.$select = $currentSelect;
            type = this.type === "children" ? "childs" : this.type;
            preselectedValue = utils.getUrlParameters()["n" + type + this.room.roomNumber];
            $currentSelect.find(".minus, .plus").on("click", {
                currentPaxSelect: currentPaxSelect
            }, currentPaxSelect.updatePax);
            $(this.$select).data("max", $(this.$select).attr("data-max"));
            this.maxValueAllowed = this.$select.data("max");
            if (preselectedValue) {
                for (var x = 0; x < preselectedValue; x++) {
                    $currentSelect.find(".plus").trigger("click");
                }
            } else {
                if (this.type === "adults" && this.room.index === 0) {
                    this.value = 1;
                    $currentSelect.find(".ammount").val(this.value);
                    $currentSelect.find(".plus").trigger("click");
                }
            }
        }
    }, {
        key: "disableOptions",
        value: function disableOptions() {
            var isDisabled;
            var $option;
            var optionValue;
            var maxValue = this.maxValueAllowed;
            var selectType = this.type;
            $(this.$select).find(".ammount").val(this.value);
            $(this.$select).data("max", maxValue);
            var minValueAllowed = 0;
            if (selectType === "adults") minValueAllowed = 1;
            this.value === minValueAllowed ? $(this.$select).find(".minus").attr("disabled", true).prop("disabled", true) : $(this.$select).find(".minus").attr("disabled", false).prop("disabled", false);
            this.value === this.maxValueAllowed ? $(this.$select).find(".plus").attr("disabled", true).prop("disabled", true) : $(this.$select).find(".plus").attr("disabled", false).prop("disabled", false);
        }
    }, {
        key: "getMaxValueAllowed",
        value: function getMaxValueAllowed() {
            var babiesValue = this.room.pax.babies > 1 ? this.room.pax.babies : 0;
            var totalPaxSelected = this.room.pax.adults + this.room.pax.children + babiesValue;
            var totalPax = this.room.pax.totalAllowed - totalPaxSelected;
            if (this.type === "babies") {
                return this.room.pax.adults + this.room.pax.children >= 12 ? 1 : 2;
            } else {
                return totalPax + this.room.pax[this.type];
            }
        }
    }, {
        key: "resetPax",
        value: function resetPax($currentSelect) {
            this.value = 0;
            this.room.updatePax(this.type, this.value);
        }
    }, {
        key: "setPax",
        value: function setPax($currentSelect) {
            if (this.type === "adults") {
                this.value = 1;
                $currentSelect.find(".ammount").html(this.value);
                $currentSelect.find(".plus").trigger("click");
            } else {
                this.value = 0;
            }
        }
    }, {
        key: "update",
        value: function update() {
            this.maxValueAllowed = this.getMaxValueAllowed();
            this.disableOptions();
        }
    }, {
        key: "updatePax",
        value: function updatePax(ev) {
            ev.preventDefault();
            var valorActual = ev.data.currentPaxSelect.value;
            var value = void 0;
            var summaryText = void 0;
            var $data = $(ev.data.currentPaxSelect.$select);
            var maxAllowedValueInSelect = $data.data("max");
            var minAllowedValueInSelect = $data.data("min");
            if ($(ev.target).hasClass("plus")) {
                if (valorActual == maxAllowedValueInSelect) {
                    return false;
                } else {
                    ++valorActual;
                }
            }
            if ($(ev.target).hasClass("minus")) {
                if (valorActual == minAllowedValueInSelect) {
                    return false;
                } else {
                    --valorActual;
                }
            }
            value = ev.data.currentPaxSelect.room.visible ? valorActual : ev.data.currentPaxSelect.value;
            ev.data.currentPaxSelect.value = value;
            ev.data.currentPaxSelect.room.updatePax(ev.data.currentPaxSelect.type, value);
            summaryText = ev.data.currentPaxSelect.room.occupancy.calculateOcuppancyText();
            $(".room-resume").html(summaryText.longSummary);
            ev.data.currentPaxSelect.room.occupancy.$infoInput.data("info", summaryText.shortSummary);
        }
    }, {
        key: "copyPax",
        value: function copyPax(copyRoom) {
            this.value = copyRoom.pax[this.type];
            this.room.updatePax(this.type, this.value);
        }
    } ]);
    return PaxSelect;
}();

"use strict";

var _createClass = function() {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

var reservationOccupancyLanding = function() {
    var $reservationOccupancyView = $("#m-reservation-occupancy");
    var $optionsRoomsSelector = $reservationOccupancyView.find("#optionRooms");
    var $optionsRoomsSelectorFake = null;
    var $occupancyContainer = $reservationOccupancyView.find(".occupancy");
    var $roomSelector = $reservationOccupancyView.find("#habs");
    var $roomMessage = $reservationOccupancyView.find(".room-message");
    var $ocupancyRooms = $occupancyContainer.find(".occupancy-rooms");
    var $roomsInfoData = $reservationOccupancyView.find("#rooms-info-data");
    var $acceptOccupancyButton = $occupancyContainer.find("#acceptOccupancy");
    var $parentModal = null;
    var occupancyInfoData = {
        adults: 0,
        children: 0,
        babies: 0
    };
    var roomsData = {
        $container: $occupancyContainer.find(".occupancy-rooms"),
        $rooms: null,
        $visibleRooms: [],
        roomsList: [],
        visibleRoomsList: [],
        $roomsInfo: null
    };
    var $roomMessage = $reservationOccupancyView.find(".room-message");
    var roomsAllowed = {
        max: $reservationOccupancyView.data("max") ? $reservationOccupancyView.data("max") : 5,
        min: $reservationOccupancyView.data("min") ? $reservationOccupancyView.data("min") : 1
    };
    var visibleRooms = 1;
    var test = {};
    function init(parentModal) {
        var $currentRoom = null;
        var availableRoom = null;
        var $currentRoomInfo = null;
        var isVisibleRoom = true;
        $parentModal = parentModal;
        $optionsRoomsSelectorFake = $reservationOccupancyView.find("[data-id='optionRooms']");
        extend(this, new Subject());
        roomsData.$rooms = roomsData.$container.find(".occupancy-room");
        roomsData.$roomsInfo = $roomsInfoData.find(".room-info");
        if (roomsData.$rooms.length) {
            roomsData.$rooms.each(function(index) {
                $currentRoom = $(this);
                isVisibleRoom = index < visibleRooms;
                $currentRoom.toggle(isVisibleRoom);
                $currentRoomInfo = roomsData.$roomsInfo.eq(index);
                availableRoom = new RoomL(index);
                roomsData.roomsList.push(availableRoom);
                availableRoom.init($currentRoom, $currentRoomInfo);
                reservationOccupancyLanding.addObserver(availableRoom);
                if (isVisibleRoom) {
                    roomsData.$visibleRooms.push($currentRoom);
                    roomsData.visibleRoomsList.push(availableRoom);
                }
            });
        }
        $optionsRoomsSelector.on("change", _onChangeRoomsOptions);
        $roomSelector.on("change", _onChangeRoomsSelector);
        $acceptOccupancyButton.on("click", _onClickAcceptOcuppancy);
    }
    function update(roomIndex, paxType) {
        occupancyInfoData[paxType] = occupancyInfoData[paxType] - roomsData.roomsList[roomIndex].oldPax[paxType] + roomsData.roomsList[roomIndex].pax[paxType];
        this.notify();
    }
    function _addRooms(roomsNumberSelected) {
        var index;
        var visibleRooms = roomsData.visibleRoomsList.length;
        for (var x = visibleRooms; x < roomsNumberSelected; x++) {
            index = x + 1;
            roomsData.$rooms.eq(x).show();
            roomsData.$visibleRooms.push(roomsData.$rooms.eq(x));
            roomsData.visibleRoomsList.push(roomsData.roomsList[x]);
            if (index > roomsData.$roomsInfo.length) {
                _setupNewRoomData(index);
                roomsData.roomsList[x].setUpRoom(roomsData.$roomsInfo.eq(x));
            }
        }
    }
    function _onChangeRoomsOptions() {
        var $this = $(this);
        var optionData = {
            adults: $this.val(),
            children: 0,
            babies: 0
        };
        if ($this.val() === "more") {
            $occupancyContainer.show();
        } else if ($this.val()) {
            $occupancyContainer.hide();
            $roomSelector.val(1).trigger("change");
            roomsData.roomsList[0].updateRoomPax(optionData);
        }
        if ($parentModal.length) {
            $parentModal.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
        }
    }
    function _onChangeRoomsSelector() {
        var $this = $(this);
        var value = parseInt($this.val());
        if (value > roomsData.visibleRoomsList.length && value <= roomsAllowed.max) {
            _addRooms(value);
        } else if (value < roomsData.visibleRoomsList.length && value >= roomsAllowed.min) {
            _removeRooms(value);
        }
        $roomMessage.toggle(value > roomsAllowed.max);
        $ocupancyRooms.toggle(value <= roomsAllowed.max);
    }
    function _onClickAcceptOcuppancy() {
        var roomsNumber = roomsData.visibleRoomsList.length;
        var occupancyText = null;
        var labelsData = $(this).data("labels");
        var occupancyLabels = {
            get rooms() {
                var tag = roomsNumber > 1 ? "rooms" : "room";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get adults() {
                var tag = occupancyInfoData.adults > 1 ? "adults" : "adult";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get children() {
                var tag = occupancyInfoData.children > 1 ? "children" : "child";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            },
            get babies() {
                var tag = occupancyInfoData.babies > 1 ? "babies" : "baby";
                var label = labelsData[tag] ? labelsData[tag] : tag;
                return label;
            }
        };
        occupancyText = roomsNumber + " " + occupancyLabels.rooms + ", " + occupancyInfoData.adults + " " + occupancyLabels.adults + ", " + occupancyInfoData.children + " " + occupancyLabels.children + ", " + occupancyInfoData.babies + " " + occupancyLabels.babies;
        $occupancyContainer.hide();
        $optionsRoomsSelector.find("option:first").text(occupancyText).prop("selected", true);
        $optionsRoomsSelector.selectpicker("refresh").trigger("change");
        $optionsRoomsSelectorFake.find(".filter-option").text(occupancyText);
    }
    function _removeRoomData(roomsNumberSelected, numberOfRoomsToRemove) {
        var roomsInfoToRemove = roomsData.$roomsInfo.slice(roomsNumberSelected, roomsData.$roomsInfo.length);
        roomsData.$roomsInfo.splice(roomsNumberSelected, numberOfRoomsToRemove);
        roomsInfoToRemove.remove();
    }
    function _removeRooms(roomsNumberSelected) {
        var totalRooms = roomsData.$visibleRooms.length;
        var numberOfRoomsToRemove = roomsData.$visibleRooms.length - roomsNumberSelected;
        roomsData.$visibleRooms.splice(roomsNumberSelected, roomsData.$visibleRooms.length);
        roomsData.visibleRoomsList.splice(roomsNumberSelected, roomsData.visibleRoomsList.length);
        for (var x = roomsNumberSelected; x < totalRooms; x++) {
            roomsData.$rooms.eq(x).hide();
            roomsData.roomsList[x].resetRoom();
        }
        _removeRoomData(roomsNumberSelected, numberOfRoomsToRemove);
    }
    function _setupNewRoomData(index) {
        var roomInfo = '<div class="room-info">\n                      <input id="adults-info-room-' + index + '" type="hidden" class="adults-info" name="nadults' + index + '" value="2">\n                      <input id="children-info-room-' + index + '" type="hidden" class="children-info" name="nchilds' + index + '" value="0">\n                      <input id="babies-info-room-' + index + '" type="hidden" class="babies-info" name="babies' + index + '" value="0">\n                    </div>';
        $roomsInfoData.append(roomInfo);
        roomsData.$roomsInfo = $roomsInfoData.find(".room-info");
    }
    return {
        init: init,
        update: update
    };
}();

var RoomL = function() {
    function RoomL(roomIndex) {
        _classCallCheck(this, RoomL);
        this.index = roomIndex;
        this.roomNumber = roomIndex + 1;
        this.id = "room" + this.roomNumber;
        this.$roomSelectors = null;
        this.pax = {
            adults: 0,
            children: 0,
            babies: 0,
            totalAllowed: 12
        };
        this.oldPax = $.extend({}, this.pax);
        this.paxSelects = [];
        this.selectUpdated = null;
        this.$infoRoom = null;
    }
    _createClass(RoomL, [ {
        key: "init",
        value: function init($room, $roomInfo) {
            var currentRoom = this;
            var $currentSelect;
            var paxSelect = null;
            var $currentInfoInput = null;
            this.roomSelectors = $room.find("select").get().reverse();
            this.$roomSelectors = $(this.roomSelectors);
            this.$roomInfo = $roomInfo;
            this.visible = this.index > 0 ? false : true;
            extend(this, new Subject());
            if (this.$roomSelectors.length) {
                this.$roomSelectors.each(function() {
                    $currentSelect = $(this);
                    $currentInfoInput = currentRoom.$roomInfo.find("#" + $currentSelect.data("type") + "-info-room-" + currentRoom.roomNumber);
                    paxSelect = new PaxSelectL(currentRoom);
                    currentRoom.paxSelects.push(paxSelect);
                    currentRoom.addObserver(paxSelect);
                    paxSelect.init($currentSelect, $currentInfoInput);
                });
            }
        }
    }, {
        key: "setUpRoom",
        value: function setUpRoom($roomInfo) {
            var currentRoom = this;
            var $currentSelect;
            var $currentInfoInput = null;
            currentRoom.visible = true;
            this.$roomInfo = $roomInfo;
            this.$roomSelectors.each(function(index) {
                $currentSelect = $(this);
                $currentInfoInput = currentRoom.$roomInfo.find("#" + $currentSelect.data("type") + "-info-room-" + currentRoom.roomNumber);
                currentRoom.paxSelects[index].setPax($currentSelect);
                currentRoom.paxSelects[index].setInfoInput($currentInfoInput);
            });
        }
    }, {
        key: "resetRoom",
        value: function resetRoom() {
            var currentRoom = this;
            var $currentSelect;
            currentRoom.visible = false;
            this.$roomSelectors.each(function(index) {
                $currentSelect = $(this);
                currentRoom.paxSelects[index].resetPax($currentSelect);
            });
        }
    }, {
        key: "setRoomInfo",
        value: function setRoomInfo($roomInfo) {
            var currentRoom = this;
            var $currentInfoInput = null;
            var $currentSelect;
            this.$roomInfo = $roomInfo;
            this.$roomSelectors.each(function(index) {
                $currentSelect = $(this);
                $currentInfoInput = currentRoom.$roomInfo.find("#" + $currentSelect.data("type") + "-info-room-" + currentRoom.roomNumber);
                currentRoom.paxSelects[index].setInfoInput($currentInfoInput);
            });
        }
    }, {
        key: "update",
        value: function update() {
            this.pax.total = 0;
            for (var x = 0; x < this.paxSelects.length; x++) {
                this.pax[this.paxSelects[x].type] = this.paxSelects[x].value;
                this.pax.total += this.paxSelects[x].value;
            }
            this.oldPax.totalAllowed = this.pax.totalAllowed;
            this.pax.totalAllowed = this.pax.babies > 1 ? 13 : 12;
        }
    }, {
        key: "updatePax",
        value: function updatePax(type, value) {
            this.oldPax[type] = this.pax[type];
            this.pax[type] = value;
            this.selectUpdated = type;
            reservationOccupancyLanding.update(this.index, type);
            this.notify();
        }
    }, {
        key: "updateRoomPax",
        value: function updateRoomPax(ocuppancy) {
            var paxSelect = null;
            var paxValue = null;
            for (var x = 0; x < this.paxSelects.length; x++) {
                paxSelect = this.paxSelects[x];
                paxValue = ocuppancy[paxSelect.type];
                paxSelect.$select.val(paxValue).trigger("change");
                paxSelect.value = paxValue;
            }
        }
    } ]);
    return RoomL;
}();

var PaxSelectL = function() {
    function PaxSelectL(room) {
        _classCallCheck(this, PaxSelectL);
        this.value = 0;
        this.type;
        this.room = room;
        this.maxValueAllowed = null;
    }
    _createClass(PaxSelectL, [ {
        key: "init",
        value: function init($currentSelect, $currentInfoInput) {
            var currentPaxSelect = this;
            this.type = $currentSelect.data("type");
            this.$select = $currentSelect;
            this.$infoInput = $currentInfoInput;
            this.$selectPicker = $currentSelect.parents(".bootstrap-select");
            this.$options = $currentSelect.find("option");
            this.$fakeOptions = this.$selectPicker.find("li");
            $currentSelect.on("change", {
                currentPaxSelect: currentPaxSelect
            }, currentPaxSelect.updatePax);
            if (this.type === "adults" && this.room.index === 0) {
                this.value = 2;
                $currentSelect.val("2").trigger("change");
            }
        }
    }, {
        key: "disableOptions",
        value: function disableOptions() {
            var isDisabled;
            var $option;
            var optionValue;
            var maxValue = this.maxValueAllowed;
            var selectType = this.type;
            if (this.type !== this.room.selectUpdated) {
                this.$options.each(function() {
                    $option = $(this);
                    isDisabled = parseInt($option.val()) > maxValue;
                    $option.prop("disabled", isDisabled);
                });
                this.$fakeOptions.each(function() {
                    $option = $(this);
                    optionValue = selectType === "adults" ? parseInt($option.data("original-index")) + 1 : parseInt($option.data("original-index"));
                    isDisabled = optionValue > maxValue;
                    $option.toggle(!isDisabled).toggleClass("disabled", isDisabled);
                });
            }
        }
    }, {
        key: "getMaxValueAllowed",
        value: function getMaxValueAllowed() {
            var babiesValue = this.room.pax.babies > 1 ? this.room.pax.babies : 0;
            var totalPaxSelected = this.room.pax.adults + this.room.pax.children + babiesValue;
            var totalPax = this.room.pax.totalAllowed - totalPaxSelected;
            if (this.type === "babies") {
                return this.room.pax.adults + this.room.pax.children >= 12 ? 1 : 2;
            } else {
                return totalPax + this.room.pax[this.type];
            }
        }
    }, {
        key: "resetPax",
        value: function resetPax($currentInfoInput) {
            var value = this.type === "adults" ? "2" : "0";
            this.value = this.type === "adults" ? 0 : parseInt(value);
            $currentInfoInput.val(value).trigger("change");
        }
    }, {
        key: "setInfoInput",
        value: function setInfoInput($currentInfoInput) {
            this.$infoInput = $currentInfoInput;
        }
    }, {
        key: "setPax",
        value: function setPax($currentInfoInput) {
            var value = this.type === "adults" ? "2" : "0";
            this.value = parseInt(value);
            $currentInfoInput.val(value).trigger("change");
        }
    }, {
        key: "update",
        value: function update() {
            this.maxValueAllowed = this.getMaxValueAllowed();
            this.disableOptions();
        }
    }, {
        key: "updatePax",
        value: function updatePax(ev) {
            var value = ev.data.currentPaxSelect.room.visible ? parseInt(this.value) : ev.data.currentPaxSelect.value;
            ev.data.currentPaxSelect.value = value;
            ev.data.currentPaxSelect.$infoInput.val(value);
            ev.data.currentPaxSelect.room.updatePax(ev.data.currentPaxSelect.type, value);
        }
    } ]);
    return PaxSelectL;
}();

"use strict";

var modalBookingHotelNew = function(reservationOccupancyNew) {
    var $modalView = null;
    var $modalTrigger = null;
    var $modalSendReservationForm = null;
    var initialSearch = {};
    var initialTypeSearch = void 0;
    var fields = {
        ids: [ "code", "locality", "location2", "locationLcv", "locationTCM", "tipoBuscador", "type", "urlHotel", "virtualHotel", "pcode" ],
        elements: {}
    };
    var $datesTrigger = null;
    var $calendarBooking = null;
    var occupancy = null;
    var location = {
        $field: null,
        selected: null
    };
    var $occupancies = null;
    var modals = null;
    function init() {
        $modalView = $("#modal-hotel-booking");
        $modalTrigger = $('[data-target="#modal-hotel-booking"]');
        $modalSendReservationForm = $modalView.find("form");
        $datesTrigger = $modalSendReservationForm.find(".js-calendar-booking-input");
        $calendarBooking = $modalSendReservationForm.find(".m-calendar-booking");
        location.$field = $modalSendReservationForm.find("#location2");
        modals = {
            $loading: $("#loading-modal-results"),
            $matchError: $("#modal-search-no-result"),
            $geolocationError: $("#modal-geolocation-error")
        };
        reservationOccupancyNew.init($modalView);
        $occupancies = $modalSendReservationForm.find(".m-occupancy");
        occupancy = {
            obj: reservationOccupancyNew.getOccupancy($occupancies.data("occupancy-index")),
            $container: $modalSendReservationForm.find(".m-occupancy"),
            get $input() {
                return this.$container.find(".form-group");
            },
            get $dropdown() {
                return this.$container.find(".m-occupancy-wrapper");
            },
            isMobile: false
        };
        _getFields();
        $calendarBooking.each(function(index, calendar) {
            var triggerData = $modalTrigger.data();
            if (triggerData.checkinDate && triggerData.checkoutDate) {
                $(calendar).data("checkinDate", triggerData.checkinDate);
                $(calendar).data("checkoutDate", triggerData.checkoutDate);
            }
            $(calendar).calendarBooking({
                bookingModal: $modalView
            });
        });
        $modalSendReservationForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                validateBookingRange($form);
                toggleLoadingButton($form, false);
            } else {
                validForm = validateBookingRange($form);
                if (!$form.data("validate")) {
                    e.preventDefault();
                    if (!validForm) {
                        _handleSubmitForm(e);
                    }
                }
                toggleLoadingButton($form, false);
            }
        });
        occupancy.$input.on("click", function(e) {
            var isOpen = $(occupancy.$dropdown).hasClass("is-open");
            var alertLanguage = $(".m-language-edition");
            if (!isOpen) {
                $(occupancy.$dropdown).addClass("is-open");
                $modalView.trigger(mModals.MODAL_UPDATE_CONTENT_EVENT);
                if (alertLanguage.length) $(alertLanguage).hide();
            }
            $calendarBooking.calendarBooking("close");
        });
        $datesTrigger.on("click", function(e) {
            if (occupancy.$dropdown.hasClass("is-open")) {
                occupancy.$dropdown.removeClass("is-open");
            }
        });
        $(document).on("click", function(ev) {
            var $target = $(ev.target);
            var isOpen = occupancy.$dropdown.hasClass("is-open");
            var inDropdown = $target.closest(".m-occupancy-wrapper").length;
            var inTrigger = $target.closest(".form-group").length;
            var isCloseModal = $target.is(".modal-backdrop");
            var infoInput = occupancy.$input.find("input.optionRooms");
            if (isOpen && !inTrigger && !inDropdown || isOpen && isCloseModal) {
                $(occupancy.$dropdown).removeClass("is-open");
                infoInput.val(infoInput.data("info"));
                occupancy.$input.find("label").addClass("focus");
            }
        });
        $modalView.on("show.bs.modal", _onShowModal);
        $modalView.on("hide.bs.modal", _onHideModal);
    }
    function _onShowModal(ev) {
        $modalTrigger = $(ev.relatedTarget);
        _setInitialData($modalTrigger.data());
    }
    function _onHideModal() {
        if (initialTypeSearch) {
            fields.elements["code"].attr("name", initialTypeSearch);
        }
        if (!$.isEmptyObject(initialSearch)) {
            _fillFormFields(initialSearch);
        }
    }
    function _setInitialInputsValues(dataset) {
        var typesSearch = [ "hotel", "poi", "destination" ];
        var fieldsData = {
            urlHotel: dataset["locationUrl"] || "",
            virtualHotel: dataset["locationVh"] || "",
            locationTCM: dataset["locationTcm"] || "",
            tipoBuscador: dataset["tipoBuscador"] || "",
            code: dataset["locationCode"] || "",
            locality: dataset.locality || "",
            location2: dataset.value || "",
            pcode: dataset.pcode || "",
            type: dataset.typesearch,
            get locationLcv() {
                var value;
                if (dataset.typesearch === "destination") {
                    value = dataset["locationLcv"] || "";
                } else {
                    value = dataset["locationLcv"] ? "true" : "false";
                }
                return value;
            }
        };
        if (dataset.typesearch && typesSearch.indexOf(dataset.typesearch) >= 0) {
            fields.elements["code"].attr("name", dataset.typesearch + "Id");
        } else {
            fields.elements["code"].removeAttr("name");
        }
        _fillFormFields(fieldsData);
        fields.elements["location2"].trigger("change");
        if (!fields.elements["location2"].val()) {
            fields.elements["location2"].closest(".input-group").find(".labelup-control").removeClass("focus");
        }
    }
    function _setInitialSearchValues() {
        var initialSearchKeys = [ "code", "location2", "locationLcv", "locationTCM", "type", "urlHotel", "virtualHotel", "pcode" ];
        var key;
        for (var x = 0; x < initialSearchKeys.length; x++) {
            key = initialSearchKeys[x];
            initialSearch[key] = fields.elements[key].val();
        }
        initialTypeSearch = fields.elements.code.attr("name");
    }
    function _setInitialData(dataset) {
        _setInitialInputsValues(dataset);
        _setInitialSearchValues(dataset);
    }
    function _fillFormFields(fieldsData) {
        $.each(fieldsData, function(fieldId, value) {
            fields.elements[fieldId].val(value);
        });
        if ($modalTrigger.data("value") && !$modalTrigger.data("selected")) {
            _setPreselectedHotel();
        }
    }
    function _setPreselectedHotel() {
        _getPreselectedHotel().then(function(response) {
            $modalTrigger.data("selected", response);
            location.$field.data("selected", response);
        }, function(error) {
            alert(error.Message);
        });
    }
    function _getPreselectedHotel() {
        var autocompleteSubdomain = "";
        var promise = void 0;
        if (typeof subdomainLang !== "undefined") {
            autocompleteSubdomain = subdomainLang;
        }
        promise = $.ajax({
            type: "GET",
            url: "/rest/auto/autocomplete/" + $modalTrigger.data("name"),
            dataType: "json",
            cache: true
        });
        return promise.then(function(response) {
            return response[0][0];
        }, function(error) {
            return error;
        });
    }
    function _getFields() {
        var id;
        for (var x = 0; x < fields.ids.length; x++) {
            id = "[data-id='" + fields.ids[x] + "']";
            fields.elements[fields.ids[x]] = $modalSendReservationForm.find(id);
        }
    }
    function _handleSubmitForm() {
        location.selected = location.$field.data("selected") || JSON.parse(sessionStorage.getItem("listSearch"));
        modals.$loading.modal({
            show: true,
            backdrop: "static",
            keyboard: false
        });
        _onFormSubmit();
    }
    function _onFormSubmit(ev) {
        var occupancyInfo = occupancy.obj.generateOccupancyInfo();
        var formData = {};
        var dataUrl = null;
        var checkin = void 0;
        var checkout = void 0;
        $modalSendReservationForm.append(occupancyInfo.inputs).append(occupancyInfo.roomsField);
        if (location.selected) {
            $.each($modalSendReservationForm.serializeArray(), function(index, obj) {
                formData[obj.name] = obj.value;
            });
            formData.fini = formData.fini ? formData.fini : moment().format("DD/MM/YYYY");
            formData.fout = formData.fout ? formData.fout : moment().add(1, "day").format("DD/MM/YYYY");
            checkin = moment(formData.fini, location.selected.df);
            checkout = moment(formData.fout, location.selected.df);
            if (location.selected.ebp && location.selected.url) {
                ev.preventDefault();
                dataUrl = {
                    hotelID: formData.hotelId,
                    checkinDate: checkin.format(location.selected.df),
                    checkoutDate: checkout.format(location.selected.df),
                    get nights() {
                        return checkout.diff(checkin, "days");
                    },
                    adults: occupancyInfo.pax.adults,
                    children: occupancyInfo.pax.children + occupancyInfo.pax.babies,
                    roomsNumber: occupancyInfo.rooms,
                    childages: occupancyInfo.ages.length > 1 ? occupancyInfo.ages : ""
                };
                window.location.href = _getRedirectUrl(location.selected.url, dataUrl);
                return;
            } else {
                modifyPAramForm();
            }
        }
    }
    function modifyPAramForm() {
        $modalSendReservationForm.find("input[name='fini']").val(decodeURIComponent($modalSendReservationForm.find("input[name='fini']").val()));
        $modalSendReservationForm.find("input[name='fout']").val(decodeURIComponent($modalSendReservationForm.find("input[name='fout']").val()));
        $modalSendReservationForm.find("input[name='searchStringID']").attr("disabled", "disabled");
        $modalSendReservationForm.find("input[name='divisa']").attr("disabled", "disabled");
        $modalSendReservationForm.find("input[name='occupancy']").attr("disabled", "disabled");
        var dataArray = $modalSendReservationForm.serializeArray(), dataObj = {};
        $(dataArray).each(function(i, field) {
            dataObj[field.name] = field.value;
        });
        ruta = $modalSendReservationForm.attr("action") + "?" + serialize(dataObj);
        window.location.href = ruta;
        return;
    }
    function serialize(obj) {
        var str = [];
        for (var p in obj) {
            if (obj.hasOwnProperty(p)) {
                str.push(encodeURIComponent(p) + "=" + obj[p]);
            }
        }
        return str.join("&");
    }
    function _getRedirectUrl(tpl, data) {
        return tpl.replace(/\[(.*?)\]/gim, function(match, p1) {
            var prop = p1.trim();
            return data.hasOwnProperty(prop) ? data[prop] : "";
        });
    }
    return {
        init: init
    };
}(reservationOccupancyNew);

$(function() {
    if ($("[data-target = #modal-hotel-booking]").length) {
        modalBookingHotelNew.init();
    }
});

"use strict";

var modalBookingHotelLanding = function(reservationOccupancy) {
    var $modalReservation = $("#modal-hotel-booking-landing");
    var $modalSendReservationForm = $modalReservation.find("form");
    var initialSearch = {};
    var initialTypeSearch;
    var fields = {
        ids: [ "code", "locality", "location2", "locationLcv", "locationTCM", "tipoBuscador", "type", "urlHotel", "virtualHotel" ],
        elements: {}
    };
    var occupancyRange = {
        $rangeSelector: $modalSendReservationForm.find(".range-calendar"),
        get $initRangeWrapper() {
            return this.$rangeSelector.find(".init-range-calendar .js-input-wrapper");
        },
        get $endRangeWrapper() {
            return this.$rangeSelector.find(".end-range-calendar .js-input-wrapper");
        },
        get $initRangeInput() {
            return this.$initRangeWrapper.find("input.date-select");
        },
        get $endRangeInput() {
            return this.$endRangeWrapper.find("input.date-select");
        },
        get $initRangeErrorBlock() {
            return this.$initRangeWrapper.find(".help-block");
        },
        get $endRangeErrorBlock() {
            return this.$endRangeWrapper.find(".help-block");
        }
    };
    function init() {
        reservationOccupancy.init($modalReservation);
        _getFields();
        $modalSendReservationForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                _isValidRange();
                toggleLoadingButton($form, false);
            } else {
                validForm = _isValidRange();
                if (!validForm) {
                    e.preventDefault();
                }
                toggleLoadingButton($form, false);
            }
        });
        if (occupancyRange.$rangeSelector.data("range-required")) {
            _initValidateRange();
        }
        $modalReservation.on("show.bs.modal", _onShowModal);
        $modalReservation.on("hide.bs.modal", _onHideModal);
    }
    function _fillFormFields(fieldsData) {
        $.each(fieldsData, function(fieldId, value) {
            fields.elements[fieldId].val(value);
        });
    }
    function _getFields() {
        var id;
        for (var x = 0; x < fields.ids.length; x++) {
            id = "[data-id='" + fields.ids[x] + "']";
            fields.elements[fields.ids[x]] = $modalSendReservationForm.find(id);
        }
    }
    function _initValidateRange() {
        occupancyRange.$initRangeErrorBlock.append('<ul role="alert"><li>' + occupancyRange.$initRangeInput.data("error") + "</li></ul>");
        occupancyRange.$endRangeErrorBlock.append('<ul role="alert"><li>' + occupancyRange.$endRangeInput.data("error") + "</li></ul>");
        occupancyRange.$initRangeInput.add(occupancyRange.$endRangeInput).on("focusout", function(ev) {
            console.log("ev focusout range", ev);
            var $this = $(this);
            var $wrapper = this.id === "end-date" ? occupancyRange.$endRangeWrapper : occupancyRange.$initRangeWrapper;
            _validateRangeDate($this, $wrapper);
        });
        occupancyRange.$initRangeInput.on("change", function() {
            occupancyRange.$initRangeInput.trigger("focusout");
            occupancyRange.$endRangeInput.trigger("focusout");
        });
        occupancyRange.$endRangeInput.on("change", function() {
            occupancyRange.$endRangeInput.trigger("focusout");
        });
    }
    function _isValidDate($input) {
        var date = $input.val();
        var isValid = true;
        if (!date) {
            isValid = false;
        } else {
            isValid = moment(date, "DD/MM/YYYY").isValid();
        }
        return isValid;
    }
    function _isValidRange() {
        var isValidInitialDate = _isValidDate(occupancyRange.$initRangeInput);
        var isValidFinalDate = _isValidDate(occupancyRange.$endRangeInput);
        _toggleInvalidRangeError(occupancyRange.$initRangeWrapper, !isValidInitialDate);
        _toggleInvalidRangeError(occupancyRange.$endRangeWrapper, !isValidFinalDate);
        return isValidInitialDate && isValidFinalDate;
    }
    function _onShowModal(ev) {
        var $modalTrigger = $(ev.relatedTarget);
        var dataset = $modalTrigger.data();
        _setInitialData($modalTrigger.data());
    }
    function _onHideModal() {
        if (initialTypeSearch) {
            fields.elements["#code"].attr("name", initialTypeSearch);
        }
        if (!$.isEmptyObject(initialSearch)) {
            _fillFormFields(initialSearch);
        }
    }
    function _setInitialInputsValues(dataset) {
        var typesSearch = [ "hotel", "poi", "destination" ];
        var fieldsData = {
            urlHotel: dataset["locationUrl"] || "",
            virtualHotel: dataset["locationVh"] || "",
            locationTCM: dataset["locationTcm"] || "",
            tipoBuscador: dataset["tipoBuscador"] || "",
            code: dataset["locationCode"] || "",
            locality: dataset.locality || "",
            location2: dataset.value || "",
            type: dataset.typesearch,
            get locationLcv() {
                var value;
                if (dataset.typesearch === "destination") {
                    value = dataset["locationLcv"] || "";
                } else {
                    value = dataset["locationLcv"] ? "true" : "false";
                }
                return value;
            }
        };
        if (dataset.typesearch && typesSearch.indexOf(dataset.typesearch) >= 0) {
            fields.elements["code"].attr("name", dataset.typesearch + "Id");
        } else {
            fields.elements["code"].removeAttr("name");
        }
        _fillFormFields(fieldsData);
        fields.elements["location2"].trigger("change");
    }
    function _setInitialSearchValues() {
        var initialSearchKeys = [ "code", "location2", "locationLcv", "locationTCM", "type", "urlHotel", "virtualHotel" ];
        var key;
        for (var x = 0; x < initialSearchKeys.length; x++) {
            key = initialSearchKeys[x];
            initialSearch[key] = fields.elements[key].val();
        }
        initialTypeSearch = fields.elements["code"].attr("name");
    }
    function _setInitialData(dataset) {
        _setInitialInputsValues(dataset);
        _setInitialSearchValues(dataset);
    }
    function _toggleInvalidRangeError($wrapper, isError) {
        var $helpBlock = $wrapper.find(".help-block");
        if (isError) {
            $helpBlock.show();
            $wrapper.addClass("has-invalid-datepicker-error has-error").removeClass("has-success-datepicker");
        } else {
            $helpBlock.hide();
            $wrapper.removeClass("has-invalid-datepicker-error has-error").addClass("has-success-datepicker");
        }
    }
    function _validateRangeDate($input, $wrapper) {
        var isError = validateDate($input);
        _toggleInvalidRangeError($wrapper, isError);
        return isError;
    }
    return {
        init: init
    };
}(reservationOccupancyLanding);

$(function() {
    if ($("[data-target = #modal-hotel-booking-landing]").length) {
        modalBookingHotelLanding.init();
    }
});

"use strict";

var formBookingHotel = function(reservationOccupancy, commonBookingHotel) {
    var $formWrapper = $(".m-hotel-booking");
    var $reservationForm = $formWrapper.find("form");
    var initialSearch = void 0, initialTypeSearch = void 0, fields = void 0, constants = void 0, constantsWithHash = void 0, occupancyRange = void 0;
    function init() {
        commonBookingHotel.init($reservationForm);
        var _commonBookingHotel$g = commonBookingHotel.getSelectors().initialVars;
        initialSearch = _commonBookingHotel$g.initialSearch;
        initialTypeSearch = _commonBookingHotel$g.initialTypeSearch;
        fields = _commonBookingHotel$g.fields;
        constants = _commonBookingHotel$g.constants;
        constantsWithHash = _commonBookingHotel$g.constantsWithHash;
        var occupancyRange = commonBookingHotel.getSelectors().occupancyRange;
        reservationOccupancy.init($formWrapper);
        $reservationForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                commonBookingHotel.isValidRange();
                toggleLoadingButton($form, false);
            } else {
                validForm = commonBookingHotel.isValidRange();
                if (!validForm) {
                    e.preventDefault();
                }
                toggleLoadingButton($form, false);
            }
        });
        if (occupancyRange.$rangeSelector.data("range-required")) {
            commonBookingHotel.initValidateRange();
        }
    }
    return {
        init: init
    };
}(reservationOccupancy, commonBookingHotel);

$(function() {
    if ($(".m-hotel-booking").length) {
        formBookingHotel.init();
    }
});

"use strict";

var locationAndDateBookForm = function(reservationOccupancy) {
    var $reservation = $(".m-hotel-booking");
    var $sendReservationForm = $reservation.find("form");
}(reservationOccupancy);

"use strict";

var modalNewsletterSigup = function() {
    var modalNewsletterSigupView = $(".modal-newsletter-signup");
    var modalNewsletterSigupForm = modalNewsletterSigupView.find("form");
    var syncElements = null;
    var $errorMessage = modalNewsletterSigupView.find("#subscribe-error-message");
    var $modalTitle = modalNewsletterSigupView.find(".modal-title");
    var $successMessage = modalNewsletterSigupView.find("#subscribe-success-message");
    var $formSelects = modalNewsletterSigupForm.find("select.selectpicker");
    var $fakeFormSelects = null;
    function init() {
        $fakeFormSelects = modalNewsletterSigupForm.find(".dropdown-toggle");
        modalNewsletterSigupForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                e.preventDefault();
                _onSubmitForm();
            }
        });
        modalNewsletterSigupView.on("show.bs.modal", _onShowModal);
        modalNewsletterSigupView.on("hidden.bs.modal", _onHiddenModal);
    }
    function _clearForm() {
        modalNewsletterSigupForm.trigger("reset");
        $errorMessage.addClass("hidden");
        $.each($fakeFormSelects, function(index, element) {
            var $this = $(element);
            $this.find(".filter-option").text($formSelects.eq(index).find("option:first").text());
        });
    }
    function _newsletterSubscribeSuccess() {
        $modalTitle.addClass("hidden");
        modalNewsletterSigupForm.addClass("hidden");
        $successMessage.removeClass("hidden");
        _clearForm();
    }
    function _onShowModal(ev) {
        var $modalTriggerElement = $(ev.relatedTarget);
        var syncToElements;
        syncElements = $modalTriggerElement.data("sync-elements");
        if (syncElements && syncElements.length) {
            $.each(syncElements, function(index, elem) {
                var $this = $(elem);
                syncToElements = $this.data("sync-to-elements").join();
                $(syncToElements).val($this.val()).trigger("change");
            });
        }
    }
    function _onSubmitForm() {
        $errorMessage.addClass("hidden");
        $errorMessage.addClass("hidden");
        var promise = $.ajax({
            type: "POST",
            url: "/newsletter/subscribeAjax",
            data: modalNewsletterSigupForm.serialize(),
            cache: false,
            async: false
        });
        promise.then(function(response) {
            if (response === true) {
                _newsletterSubscribeSuccess();
            } else {
                _showErrorMessage();
            }
        }, function() {
            _showErrorMessage();
        }).always(function() {
            toggleLoadingButton(modalNewsletterSigupForm, false);
        });
    }
    function _onHiddenModal() {
        $modalTitle.removeClass("hidden");
        modalNewsletterSigupForm.removeClass("hidden");
        $successMessage.addClass("hidden");
        _clearForm();
    }
    function _showErrorMessage() {
        $errorMessage.removeClass("hidden");
        modalNewsletterSigupView.scrollTop($errorMessage.offset().top);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".modal-newsletter-signup").length) {
        modalNewsletterSigup.init();
    }
});

"use strict";

var mTotalPrice = function() {
    var $priceSummary = $("#price-summary");
    var $collapseTriggers = $priceSummary.find("[data-toggle='collapse']");
    var $collapsePanels = $priceSummary.find(".panel-collapse");
    function init() {
        $collapsePanels.on("show.bs.collapse", {
            state: "open"
        }, _togglePriceSummaryCollapseHeaderText).on("hide.bs.collapse", {
            state: "close"
        }, _togglePriceSummaryCollapseHeaderText);
    }
    function _togglePriceSummaryCollapseHeaderText(ev) {
        $collapseTriggers.html($(this).data("text-" + ev.data.state));
    }
    return {
        init: init
    };
}();

$(function() {
    mTotalPrice.init();
});

"use strict";

var trackData = function() {
    function sendUtagData() {
        (function(a, b, c, d) {
            a = "//tags.tiqcdn.com/utag/nh-hoteles/es-main-2014/prod/utag.js";
            b = document;
            c = "script";
            d = b.createElement(c);
            d.src = a;
            d.type = "text/java" + c;
            d.async = true;
            a = b.getElementsByTagName(c)[0];
            a.parentNode.insertBefore(d, a);
        })();
    }
    function trackMiceSearch(page, name, nrooms, nasistentes, nsalones, eventType) {
        try {
            utag.link({
                eventCategory: page,
                eventAction: "search a meeting",
                eventLabel: _createLabelMiceSearchData(name, nrooms, nasistentes, nsalones, eventType),
                event: "mice | search"
            });
        } catch (err) {
            utagError = err;
        }
    }
    function trackMiceSearchInResult(page, name, nrooms, nasistentes, nsalones, eventType) {
        try {
            utag.link({
                eventCategory: page,
                eventAction: "search  a meeting",
                eventLabel: _createLabelMiceSearchData(name, nrooms, nasistentes, nsalones, eventType),
                event: "mice | search results"
            });
        } catch (err) {
            utagError = err;
        }
    }
    function trackMiceSearchInDestiny(page, name, nrooms, nasistentes, nsalones, eventType) {
        try {
            utag.link({
                eventCategory: page,
                eventAction: "search a meeting",
                eventLabel: _createLabelMiceSearchData(name, nrooms, nasistentes, nsalones, eventType),
                event: "mice | search"
            });
        } catch (err) {
            utagError = err;
        }
    }
    function _createLabelMiceSearchData(name, nrooms, nasistentes, nsalones, eventType) {
        var eventLabelTrack = name + "|" + nrooms + "|" + nasistentes + "|" + nsalones + "|" + eventType;
        return eventLabelTrack;
    }
    return {
        sendUtagData: sendUtagData,
        trackMiceSearch: trackMiceSearch,
        trackMiceSearchInResult: trackMiceSearchInResult,
        trackMiceSearchInDestiny: trackMiceSearchInDestiny
    };
}();

"use strict";

var mHotelMapInline = function() {
    var hotelMapsView = $(".m-hotel-map");
    var $mapsView;
    var markersData;
    var hotelMaps = [];
    var hotelMapsMarkers = [];
    var config;
    var $autocompleteInputs;
    var mapsData = [];
    function init(maps) {
        var map;
        $mapsView = maps;
        config = hotelMapModule.getDefaultConfig();
        $mapsView.each(function(index, mapContainer) {
            var $this = $(mapContainer);
            var customZoom = $this.data("zoom") ? $this.data("zoom") : 13;
            var mapData = null;
            var center;
            $autocompleteInputs = $("." + $this.data("autocomplete"));
            markersData = MapsData.data[index].filter(Boolean);
            markersData.some(function(element, index) {
                if (element) {
                    center = {
                        lat: element.location[0],
                        lng: element.location[1]
                    };
                    return true;
                }
            });
            $this.data("initial-zoom", customZoom);
            $this.data("initial-position", center);
            $this.data("map-index", index);
            config.center = center;
            config.zoom = customZoom;
            map = new google.maps.Map(mapContainer, config);
            hotelMaps.push(map);
            mapData = {
                index: index,
                map: map,
                type: "inline",
                markersInfo: markersData,
                markers: [],
                originLocation: center
            };
            hotelMapModule.setMapMarkers(mapData);
            hotelMapModule.initAutocompletes($autocompleteInputs, mapData.map);
            mapsData.push(mapData);
            hotelMapsMarkers.push(mapData.markers);
        });
    }
    function getMap(index) {
        return mapsData[index].map;
    }
    function getMarkers(index) {
        return mapsData[index].markers;
    }
    function getMapInfo(index) {
        return mapsData[index];
    }
    function toggleMarkers(visibleHotels) {
        var info = mapsData[0];
        var markerInfo;
        var isVisible = true;
        for (var x = 0; x < info.markersInfo.length; x++) {
            markerInfo = info.markersInfo[x];
            if (markerInfo) {
                isVisible = visibleHotels.indexOf(markerInfo.hotelBackcode) >= 0;
                info.markers[x].setVisible(isVisible);
            }
        }
    }
    function _initAutocompetes(currentMap) {
        if ($autocompleteInputs.length) {
            $.each($autocompleteInputs, function(index, input) {
                var autocomplete = new google.maps.places.Autocomplete(input);
                autocomplete.bindTo("bounds", currentMap);
            });
        }
    }
    return {
        init: init,
        getMap: getMap,
        getMarkers: getMarkers,
        getMapInfo: getMapInfo,
        toggleMarkers: toggleMarkers
    };
}();

"use strict";

var mHotelMapModal = function() {
    var hotelMapsView = $(".modal-hotel-map");
    var $mapTriggers = $("[data-target='#modal-hotel-map']");
    var $mapView;
    var markersData;
    var config;
    var mapData;
    var $autocompleteInputs;
    var geocoder;
    var map;
    function init(map) {
        $mapView = map;
        config = hotelMapModule.getDefaultConfig();
        $autocompleteInputs = $("." + $mapView.data("autocomplete"));
        $mapTriggers.each(function(index, mapTrigger) {
            $(mapTrigger).data("map-index", index);
        });
        hotelMapsView.on("show.bs.modal", _initializeMap);
    }
    function _initializeMap(ev) {
        var $modalTrigger = $(ev.relatedTarget);
        var mapIndex = $modalTrigger.data("map-index") || 0;
        var customZoom = $modalTrigger.attr("zoom") ? $modalTrigger.data("zoom") : 13;
        var location = null;
        markersData = MapsModalData.data[mapIndex];
        if (markersData[0].location) {
            location = {
                lat: markersData[0].location[0],
                lng: markersData[0].location[1]
            };
        } else {
            location = {
                lat: 0,
                lng: 0
            };
        }
        $mapView.html();
        $mapView.data("initial-zoom", customZoom);
        $mapView.data("initial-position", location);
        $mapView.data("map-index", mapIndex);
        config.center = location;
        config.zoom = customZoom;
        map = new google.maps.Map($mapView[0], config);
        mapData = {
            index: mapIndex,
            map: map,
            markersInfo: markersData,
            markers: [],
            originLocation: location,
            type: "modal"
        };
        hotelMapModule.initAutocompletes($autocompleteInputs, mapData.map);
        hotelMapModule.setMapMarkers(mapData);
    }
    return {
        init: init
    };
}();

"use strict";

var hotelMapModule = function(mHotelMapInline, mHotelMapModal) {
    var hotelMapInlineView = $(".m-hotel-map.inline-map .hotel-map");
    var hotelMapModalView = $(".m-hotel-map.modal-map .hotel-map");
    var hotelMaps = [];
    var geocoder;
    function init() {
        _loadGoogleMap();
    }
    function getDefaultConfig() {
        var mapConfig = {
            center: {
                lat: 40.3233764,
                lng: -3.845045
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            minZoom: 1,
            maxZoom: 20,
            streetViewControl: false,
            zoom: 13
        };
        return mapConfig;
    }
    function _loadGoogleMap() {
        utils.loadGoogleMapScript().done(_onLoadGooglepMap);
    }
    function _onLoadGooglepMap(script, textStatus) {
        var map;
        var defaultConfig = getDefaultConfig();
        var markersData;
        if (hotelMapInlineView.length) {
            mHotelMapInline.init(hotelMapInlineView);
        }
        if (hotelMapModalView.length) {
            mHotelMapModal.init(hotelMapModalView);
        }
    }
    function setMapMarkers(mapInfo) {
        var infowindow;
        var markers = mapInfo.markersInfo;
        var regex = /{{([distance}]+)\}}/;
        var marker;
        var markerContent;
        geocoder = new google.maps.Geocoder();
        infowindow = new google.maps.InfoWindow();
        $.each(markers, function(index, data) {
            if (data) {
                marker = null;
                markerContent = $(data.info);
                if (regex.test(data.info)) {
                    data.distance = utils.getDistanceBetweenCoords(mapInfo.originLocation, {
                        lat: data.location[0],
                        lng: data.location[1]
                    }) + " km";
                    data.info = data.info.replace(regex, data.distance);
                }
                if (data.location) {
                    marker = new google.maps.Marker({
                        position: {
                            lat: data.location[0],
                            lng: data.location[1]
                        },
                        map: mapInfo.map,
                        icon: data.icon
                    });
                    marker.addListener("click", function(e) {
                        var content = data.info.replace(/data-src/g, "src");
                        infowindow.setContent(content);
                        infowindow.open(mapInfo.map, this);
                    });
                    mapInfo.markers.push(marker);
                } else {
                    codeAddress(mapInfo, index);
                }
            }
        });
    }
    function codeAddress(mapInfo, markerInfoIndex) {
        var address = mapInfo.markersInfo[markerInfoIndex].address + ", " + mapInfo.markersInfo[markerInfoIndex].city + (mapInfo.markersInfo[markerInfoIndex].country ? ", " + mapInfo.markersInfo[markerInfoIndex].country : "");
        geocoder.geocode({
            address: address
        }, function(results, status) {
            console.log(results);
            var latLng = {
                lat: results[0].geometry.location.lat(),
                lng: results[0].geometry.location.lng()
            };
            console.log(latLng);
            if (status === "OK") {
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: mapInfo.map,
                    icon: mapInfo.markersInfo[markerInfoIndex].icon,
                    info: mapInfo.markersInfo[markerInfoIndex].info
                });
                if (markerInfoIndex === 0) {
                    mapInfo.map.setCenter(latLng);
                }
                console.log(mapInfo.map);
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
    }
    function setMapMarkers2(mapInfo) {
        var infowindow;
        var mapsType = mapInfo.type === "inline" ? MapsData : MapsModalData;
        var mapData = mapsType.data[mapInfo.index];
        infowindow = new google.maps.InfoWindow();
        $.each(mapData, function(index, data) {
            var marker = new google.maps.Marker({
                position: {
                    lat: data.location[0],
                    lng: data.location[1]
                },
                map: mapInfo.map,
                icon: data.icon
            });
            marker.addListener("click", function() {
                var content = data.info.replace(/data-src/g, "src");
                infowindow.setContent(content);
                infowindow.open(mapInfo.map, marker);
            });
            mapInfo.markers.push(marker);
        });
    }
    function _setMapMarkers(map, index) {
        var infowindow;
        var mapData = MapsModalData.data[index];
        infowindow = new google.maps.InfoWindow();
        $.each(mapData, function(index, data) {
            var marker = new google.maps.Marker({
                position: {
                    lat: data.location[0],
                    lng: data.location[1]
                },
                map: map,
                icon: data.icon
            });
            marker.addListener("click", function() {
                var content = data.info.replace(/data-src/g, "src");
                infowindow.setContent(content);
                infowindow.open(map, marker);
            });
        });
    }
    function getMap(index) {
        return hotelMaps[index];
    }
    function initializeMap(map, data) {
        map.setZoom(data.zoom);
        map.setCenter(data.position);
    }
    function initAutocompletes($autocompleteInputs, currentMap) {
        if ($autocompleteInputs.length) {
            $.each($autocompleteInputs, function(index, input) {
                var autocomplete = new google.maps.places.Autocomplete(input);
                autocomplete.bindTo("bounds", currentMap);
            });
        }
    }
    return {
        init: init,
        getMap: getMap,
        getDefaultConfig: getDefaultConfig,
        setMapMarkers: setMapMarkers,
        initAutocompletes: initAutocompletes
    };
}(mHotelMapInline, mHotelMapModal);

$(function() {
    if ($(".m-hotel-map").length) hotelMapModule.init();
});

"use strict";

var yourRoomChoose = function() {
    var yourRoomChooseView = $(".m-room-card-choose");
    var yourRoomImage = yourRoomChooseView.find(".js-room-card-image");
    function init() {
        yourRoomImage.on("click", _onRoomImageClick);
        $("button:submit").on("click", function() {
            var btn = $(this);
            btn.prop("disabled", true);
            btn.closest("form").submit();
        });
    }
    function _onRoomImageClick(e) {
        var form = $(this).siblings("form");
        form.find("button:submit").prop("disabled", true);
        form.submit();
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-room-card-choose").length) {
        yourRoomChoose.init();
    }
});

"use strict";

var mGridLandings = function() {
    var gridView = $(".m-grid");
    var gridLanding = gridView.find(".grid");
    gridLanding.on("layoutComplete", function(event, laidOutItems) {
        console.log("Masonry layout completed on " + laidOutItems.length + " items");
    });
    function _initGridLandings() {
        gridLanding.masonry({
            itemSelector: ".grid-item",
            columnWidth: ".grid-sizer",
            percentPosition: true
        });
    }
    function _reloadGrid() {
        console.log("grid reload");
        gridLanding.masonry("reloadItems");
    }
    function init() {
        setTimeout(function() {
            _initGridLandings();
        }, 300);
    }
    return {
        init: init,
        reloadGrid: _reloadGrid
    };
}();

$(function() {
    if ($(".m-grid").length) {
        var countML = 0;
        $.doTimeout("cargaGrid", 100, function() {
            var elem = countML++;
            if ($("body > main").css("opacity") == 1 || elem == 90) {
                mGridLandings.init();
                console.log("lanza el grid");
                return false;
            }
            console.log("espera grid");
            return true;
        });
    }
});

"use strict";

var mGridGroupBlock = function() {
    var gridView = $(".m-group-block");
    var gridGroupBlock = gridView.find(".group-block");
    function _initGridLandings() {
        $.each(gridGroupBlock, function() {
            var $this = $(this);
            $this.masonry({
                itemSelector: ".grid-item",
                columnWidth: ".grid-sizer",
                gutter: ".gutter-sizer",
                percentPosition: true
            });
        });
    }
    function init() {
        setTimeout(function() {
            _initGridLandings();
        }, 300);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-group-block").length) {
        var countMG = 0;
        $.doTimeout("MG", 100, function() {
            var elem = countMG++;
            if ($("body > main").css("opacity") == 1 || elem == 90) {
                mGridGroupBlock.init();
                return false;
            }
            return true;
        });
    }
});

"use strict";

var mGroupQuotes = function() {
    var gridView = $(".m-group-quotes");
    var $linkSeeMore = gridView.find(".link-primary");
    function init() {
        _initTipAdvisorWidgets();
        $linkSeeMore.on("click", _toggleQuoteReview);
        $("[data-url-tripadvisor]").click(function() {
            var urlTripadvisor = $(this).attr("data-url-tripadvisor");
            $(".js-tripavisor-modal").find("iframe").attr("src", urlTripadvisor);
        });
    }
    function _getTripAdvisordData(tripId, $widget) {
        var addComments = "", $contentquotes = gridView.find(".group-quotes"), parsed = null;
        if (typeof $contentquotes.data("comments") !== "undefined") {
            parsed = parseInt($contentquotes.data("comments"), 10);
            addComments = isNaN(parsed) ? "" : "/" + parsed + "/3/true";
        }
        var promise = $.ajax({
            url: "https://www.nh-hotels.com/rest/trip/tripadvisorhotelrate/" + tripId + addComments,
            dataType: "json",
            cache: true,
            async: true
        });
        return promise.then(function(response) {
            if (response && response !== "null") {
                if (typeof globalHttpProtocol !== "undefined") {
                    response.ratingImageLink = response.ratingImageLink.replace("location.protocol", globalHttpProtocol);
                }
                if (addComments != "") _createReviews($contentquotes, parsed, response);
                $widget.find(".rating").html('<img src="' + response.ratingImageLink + '" alt="' + response.rate + '">');
                $widget.find(".comments span").text(response.numComents);
                $widget.parents(".hotel-card").attr("data-hotel-tripadvisor", Math.floor(response.rate));
                $widget.show();
                return response;
            } else {
                return Promise.reject(parsed, response);
            }
        }, function(error) {
            return $.when("error").then(function() {
                return {
                    rate: null
                };
            });
        });
    }
    function _createReviews(container, comments, dataReviews) {
        if (dataReviews.reviews.length) {
            var template = [ '<article class="m-quote">', "<h4>{{title}}</h4>", '<div class="stars">{{stairs}}</span>', "</div>", '<div class="review multiline-ellipsis">', "  <p>{{text}}</p>", "</div>", '<a class="link-primary is_collapsed" data-closed-header-text="{{llbShoinfo}}" data-open-header-text="{{lblHidehinfo}}">{{llbShoinfo}}</a>', '<div class="author">', '  <p class="not-highlighted">{{name}}. <span>{{location}}</span></p>', '  <p class="not-highlighted">{{date}}</p>', "</div>", "</article>" ].join("\n");
            $.each(dataReviews.reviews, function(index, review) {
                var data = {
                    title: review.title,
                    text: review.text,
                    name: review.user,
                    llbShoinfo: typeof container.data("showInfo") !== "undefined" ? container.data("showInfo") : "Show info",
                    lblHidehinfo: typeof container.data("hideInfo") !== "undefined" ? container.data("hideInfo") : "Hide info",
                    location: review.location != null ? review.location : "",
                    date: review.date,
                    stairs: '<span class="nh-ic-star"></span>'.repeat(Math.floor(review.userRate))
                };
                var output = templatesRoom.getTemplate(template, data);
                $(output).insertBefore(container.find(".wrapper-rates"));
            });
            container.find(".link-primary").on("click", _toggleQuoteReview);
        }
    }
    function _initTipAdvisorWidgets() {
        var $widgets = $(".js-widget-trip");
        $widgets.hide();
        var promises = [];
        $.each($widgets, function(i, widget) {
            var $widget = $(widget);
            var idtrip = $widget.data("idtrip");
            if (typeof idtrip != "undefined" && idtrip) {
                promises.push(_getTripAdvisordData(idtrip, $widget));
            }
        });
        return Promise.all(promises).then(function(response) {
            return response;
        }, function(error) {
            return error;
        });
    }
    function _toggleQuoteReview(ev) {
        var $this = $(this);
        var isCollapsed = $this.hasClass("is_collapsed");
        var $review = $this.siblings(".review ");
        var text = isCollapsed ? $this.data("open-header-text") : $this.data("closed-header-text");
        ev.preventDefault();
        $this.toggleClass("is_collapsed");
        $review.toggleClass("multiline-ellipsis");
        $this.text(text);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-group-quotes").length) {
        mGroupQuotes.init();
    }
});

"use strict";

var mGuesData = function() {
    var $mGuesDataView = $(".m-guest-data");
    var $frequentUser = $mGuesDataView.find("#frequent-user");
    var initialGuest = {};
    var $userFields = $mGuesDataView.find("input:not([type='checkbox']), select:not([id='frequent-user'])");
    var frequentUserCheckbox = {
        addFrequentUser: $mGuesDataView.find("#frequent-user-checkbox"),
        removeFrequentUser: $mGuesDataView.find("#remove-frequent-user-checkbox")
    };
    var $nationality = $("#nationality-checkout");
    function init() {
        _setInitialGuest();
        $frequentUser.on("change", _onFrequentUserChange);
        $userFields.on("change", _onGuestDataChange);
    }
    function _fillUserData(data) {
        var isFrequentUser = $frequentUser.val() && $frequentUser.val() !== "";
        $userFields.each(function() {
            var $this = $(this);
            var fieldId = $this.attr("id");
            var altId = fieldId.indexOf("-checkout") ? fieldId.substring(0, fieldId.indexOf("-checkout")) : fieldId;
            var value = data[fieldId] || data[altId];
            var selectedOption = null;
            var fakeSelect = null;
            if (fieldId === "nationality-checkout") {
                selectedOption = $this.find("option[value=" + value + "]");
                $this.val(value).change();
                fakeSelect = $("#" + fieldId + "-clone");
                fakeSelect.val(selectedOption.text()).prop("disabled", isFrequentUser && value);
            }
            $this.val(value).prop("disabled", isFrequentUser && value);
        });
    }
    function _getFrequentUser() {
        var promise = $.ajax({
            dataType: "json",
            url: urlGlobalConfig.domain + "mocks/frequent-user.json",
            cache: false
        });
        return promise.then(function(response) {
            if (response.email) {
                response["confirm-email"] = response.email;
            }
            return response;
        }, function(error) {
            return error;
        });
    }
    function _getInitialGuest() {
        var deferred = $.Deferred();
        return deferred.resolve(initialGuest);
    }
    function _onFrequentUserChange() {
        var $this = $(this);
        var isFrequentUser = $this.val() && $this.val() !== "";
        if (!isFrequentUser) {
            _getInitialGuest().then(function(response) {
                console.log("usuario anterior", response);
                _fillUserData(response);
                _toggleFrequentUserCheckbox(isFrequentUser);
            });
        } else {
            _getFrequentUser().then(function(response) {
                console.log("usuario frecuente", response);
                _fillUserData(response);
                _toggleFrequentUserCheckbox(isFrequentUser);
            }, function() {});
        }
    }
    function _onGuestDataChange() {
        var $this = $(this);
        var fieldId = $this.attr("id");
        if (!$frequentUser.val() || $frequentUser.val() === "") {
            initialGuest[fieldId] = $this.val();
        }
    }
    function _toggleFrequentUserCheckbox(isFrequentUser) {
        frequentUserCheckbox.addFrequentUser.parent(".checkbox").toggleClass("hide", isFrequentUser);
        frequentUserCheckbox.removeFrequentUser.parent(".checkbox").toggleClass("hide", !isFrequentUser);
        frequentUserCheckbox.addFrequentUser[0].checked = false;
        frequentUserCheckbox.removeFrequentUser[0].checked = false;
    }
    function _setInitialGuest() {
        $userFields.each(function() {
            var $this = $(this);
            var fieldId = $this.attr("id");
            initialGuest[fieldId] = $this.val();
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-guest-data").length) {
        mGuesData.init();
    }
});

"use strict";

var mGridResultHotels = function() {
    var mHotelSearch = $(".m-hotel-search");
    var gridView = $(".result-hotels");
    var gridLanding = gridView.find(".grid");
    var $panel = gridView.find(".hotel-card-footer a");
    var $showMoreResultsBtn = $("#see-more-results");
    var hotelCards = {
        cards: gridLanding.find(".grid-item"),
        visible: null,
        visibleNumber: 4,
        get leyend() {
            return mHotelSearch.find(".results-leyend");
        }
    };
    function init() {
        hotelCards.visibleNumber = gridView.data("cards-show");
        _initHotelResults();
        $panel.on("click", _toggleHotelInfo);
        $showMoreResultsBtn.on("click", _showMoreResults);
        $("[data-url-tripadvisor]").click(function() {
            var urlTripadvisor = $(this).attr("data-url-tripadvisor");
            $(".js-tripavisor-modal").find("iframe").attr("src", urlTripadvisor);
        });
    }
    function _initHotelResults() {
        hotelCards.cards.hide();
        hotelCards.visible = hotelCards.cards.slice(0, hotelCards.visibleNumber);
        hotelCards.visible.show();
        hotelCards.leyend.find(".visible-results").html(hotelCards.visible.length);
        hotelCards.leyend.find(".total-results").html(hotelCards.cards.length);
        var countIH = 0;
        $.doTimeout("IH", 100, function() {
            var elem = countIH++;
            if ($("body > main").css("opacity") == 1 || elem == 90) {
                _initGridHotelsCards();
                return false;
            }
            return true;
        });
    }
    function _showMoreResults() {
        hotelCards.visible = hotelCards.cards.slice(0, hotelCards.visibleNumber + hotelCards.visible.length);
        hotelCards.visible.show();
        hotelCards.leyend.find(".visible-results").html(hotelCards.visible.length);
        if (hotelCards.visible.length === hotelCards.cards.length) {
            $(this).hide();
        }
        gridLanding.masonry();
    }
    function _initGridHotelsCards() {
        _initTipAdvisorWidgets().then(function() {
            setTimeout(function() {
                gridLanding.masonry({
                    itemSelector: ".grid-item",
                    columnWidth: ".grid-sizer",
                    gutter: ".gutter-sizer",
                    percentPosition: true
                });
            }, 200);
        });
    }
    function _getTripAdvisordData(tripId, $widget) {
        var promise = $.ajax({
            url: "https://www.nh-hotels.com/rest/trip/tripadvisorhotelrate/" + tripId,
            dataType: "json",
            cache: true,
            async: true
        });
        return promise.then(function(response) {
            if (response && response !== "null") {
                if (typeof globalHttpProtocol !== "undefined") {
                    response.ratingImageLink = response.ratingImageLink.replace("location.protocol", globalHttpProtocol);
                }
                $widget.find(".rating").html('<img src="' + response.ratingImageLink + '" alt="' + response.rate + '">');
                $widget.find(".comments span").text(response.numComents);
                $widget.parents(".hotel-card").attr("data-hotel-tripadvisor", Math.floor(response.rate));
                $widget.show();
                return response;
            } else {
                return Promise.reject(response);
            }
        }, function(error) {
            return $.when("error").then(function() {
                return {
                    rate: null
                };
            });
        });
    }
    function _initTipAdvisorWidgets() {
        var $widgets = $(".js-widget-trip");
        var promises = [];
        $.each($widgets, function(i, widget) {
            var $widget = $(widget);
            var idtrip = $widget.data("idtrip");
            if (typeof idtrip != "undefined" && idtrip) {
                promises.push(_getTripAdvisordData(idtrip, $widget));
            }
        });
        return Promise.all(promises).then(function(response) {
            return response;
        }, function(error) {
            return error;
        });
    }
    function _toggleHotelInfo(ev) {
        var $this = $(this);
        var panel = $($this.attr("href"));
        var isClosed = panel.hasClass("is_closed");
        var $ellipsis = panel.parent().find(".hotel-info");
        var text = isClosed ? $this.data("open-header-text") : $this.data("closed-header-text");
        ev.preventDefault();
        $this.toggleClass("is_collapsed");
        panel.toggleClass("is_closed");
        $ellipsis.toggleClass("multiline-ellipsis");
        $this.text(text);
        gridLanding.masonry();
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".result-hotels").length) {
        mGridResultHotels.init();
    }
});

"use strict";

$("a[data-show]").click(function() {
    $(this).toggleClass("is_collapsed");
    $($(this).attr("data-show")).slideToggle("fast");
    if ($(this).hasClass("is_collapsed")) {
        $(this).html($(this).attr("data-closed-header-text"));
    } else {
        $(this).html($(this).attr("data-open-header-text"));
    }
});

"use strict";

var mHorizontalMenu = function() {
    var SETTINGS = {
        navBarTravelling: false,
        navBarTravelDirection: "",
        navBarTravelDistance: 150
    };
    var $menu = $(".m-submenu-h");
    var $menuContainer = $menu.find(".submenu-container");
    var $menuContent = $menuContainer.find(".submenu-content");
    var $menuItems = $menuContent.find(".submenu-item");
    var $menuContetWithGrid = [];
    var navButtons = {
        left: $menu.find(".btn-left"),
        right: $menu.find(".btn-right"),
        both: $menu.find(".btn-move")
    };
    var last_known_scroll_position = 0;
    var ticking = false;
    function init() {
        _setOverflowData();
        $menuItems.each(function(index, item) {
            var $this = $(item);
            var $tabContent = null;
            var hasGridElements = false;
            if ($this.is("[role='tab']")) {
                $tabContent = $($this.attr("href"));
                hasGridElements = $tabContent.find(".grid-item").length > 0;
                if (hasGridElements) {
                    $tabContent.data("loaded", false);
                    $menuContetWithGrid.push($tabContent);
                }
                $this.on("shown.bs.tab", {
                    $tabContent: $tabContent
                }, _onShowMenuTabContent);
            }
        });
        $menuItems.on("click", _onClickInMenuItem);
        $menuContainer.on("scroll", _onScrollMenuContainer);
        navButtons.both.on("click", _onClickInNavButtons);
        $menuContent.on("transitionend", _onTransitionEnd);
        $(window).on("resize", _onWindowResize);
    }
    function _determineOverflow(content, container) {
        var contentMetrics = _getElementMetrics(content);
        var containerMetrics = _getElementMetrics(container);
        if (containerMetrics.left > contentMetrics.left && Math.floor(containerMetrics.right) < Math.floor(contentMetrics.right)) {
            return "both";
        } else if (contentMetrics.left < containerMetrics.left) {
            return "left";
        } else if (contentMetrics.right > containerMetrics.right) {
            return "right";
        } else {
            return "none";
        }
    }
    function _getElementMetrics(element) {
        var metrics = {
            global: element[0].getBoundingClientRect(),
            get right() {
                return this.global.right;
            },
            get left() {
                return this.global.left;
            }
        };
        return metrics;
    }
    function _moveToLeft() {
        var availableScrollLeft = $menuContainer.scrollLeft;
        if (availableScrollLeft < SETTINGS.navBarTravelDistance * 2) {
            $menuContent.css("transform", "translateX(" + availableScrollLeft + "px)");
        } else {
            $menuContent.css("transform", "translateX(" + SETTINGS.navBarTravelDistance + "px)");
        }
    }
    function _moveToRight() {
        var navBarRightEdge = $menuContent[0].getBoundingClientRect().right;
        var navBarScrollerRightEdge = $menuContainer[0].getBoundingClientRect().right;
        var availableScrollRight = Math.floor(navBarRightEdge - navBarScrollerRightEdge);
        if (availableScrollRight < SETTINGS.navBarTravelDistance * 2) {
            $menuContent.css("transform", "translateX(-" + availableScrollRight + "px)");
        } else {
            $menuContent.css("transform", "translateX(-" + SETTINGS.navBarTravelDistance + "px)");
        }
    }
    function _onClickInNavButtons() {
        var overflowType = null;
        var direction = $(this).hasClass("btn-left") ? "left" : "right";
        var callback = direction === "left" ? _moveToLeft : _moveToRight;
        var availableDirections = [ "right", "left", "both" ];
        if (SETTINGS.navBarTravelling === true) {
            return;
        }
        overflowType = _determineOverflow($menuContent, $menuContainer);
        if (availableDirections.indexOf(overflowType) >= 0) {
            callback();
            $menuContent.removeClass("pn-ProductNav_Contents-no-transition");
            SETTINGS.navBarTravelDirection = direction;
            SETTINGS.navBarTravelling = true;
        }
        _setOverflowData();
    }
    function _onClickInMenuItem(ev) {
        var $this = $(this);
        if ($menuContainer.attr("data-scrolling") === "true") {
            ev.preventDefault();
            $menuContainer.attr("data-scrolling", "false");
        } else {
            if ($this.attr("role") === "tab") {
                ev.preventDefault();
                _triggerClickInMenuTabItem($this);
            }
        }
    }
    function _onScrollMenuContainer() {
        last_known_scroll_position = window.scrollY;
        if (!ticking) {
            window.requestAnimationFrame(function() {
                _setOverflowData(last_known_scroll_position);
                ticking = false;
            });
        }
        ticking = true;
    }
    function _onShowMenuTabContent(ev) {
        var $gridElements;
        if (!ev.data.$tabContent.data("loaded")) {
            $gridElements = ev.data.$tabContent.find(".group-block");
            $gridElements.masonry();
            ev.data.$tabContent.data("loaded", true);
        }
    }
    function _onTransitionEnd() {
        var styleOfTransform = window.getComputedStyle($menuContent[0], null);
        var tr = styleOfTransform.getPropertyValue("-webkit-transform") || styleOfTransform.getPropertyValue("transform");
        var amount = Math.abs(parseInt(tr.split(",")[4]) || 0);
        $menuContent[0].style.transform = "none";
        $menuContent[0].classList.add("pn-ProductNav_Contents-no-transition");
        if (SETTINGS.navBarTravelDirection === "left") {
            $menuContainer[0].scrollLeft = $menuContainer[0].scrollLeft - amount;
        } else {
            $menuContainer[0].scrollLeft = $menuContainer[0].scrollLeft + amount;
        }
        SETTINGS.navBarTravelling = false;
    }
    function _onWindowResize() {
        _setOverflowData();
        $.each($menuContetWithGrid, function(index, item) {
            var $this = $(item);
            $this.data("loaded", false);
        });
    }
    function _triggerClickInMenuTabItem($element) {
        var $previous = $menuContent.find("> .is_active");
        if ($element.hasClass("is_active")) {
            return;
        }
        $previous.removeClass("is_active");
        $element.addClass("is_active");
    }
    function _setOverflowData() {
        $menuContainer.attr("data-overflowing", _determineOverflow($menuContent, $menuContainer));
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-submenu-h").length) {
        mHorizontalMenu.init();
    }
});

"use strict";

var mFaq = function() {
    var $listFilters = $(".m-faqs").find("[data-type]");
    var $faqSections = $(".faq-accordion");
    function init() {
        $listFilters.on("click", _filterBy);
    }
    function _filterBy() {
        var filterSelected = $(this).data("type");
        $faqSections.filter(function() {
            var $faqSection = $(this);
            var isVisible = $faqSection.attr("data-type") === filterSelected || filterSelected === "all";
            $faqSection.toggle(isVisible);
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-faqs").length && $(".faq-accordion").length) {
        mFaq.init();
    }
});

"use strict";

var _createClass = function() {
    function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
            var descriptor = props[i];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor) descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
        }
    }
    return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
    };
}();

function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}

var FilterHotels = function() {
    function FilterHotels(page) {
        _classCallCheck(this, FilterHotels);
        this.page = page;
        this.containers = {
            mobile: null,
            desktop: null,
            result: null
        };
        this.cont = 0;
        this.sortedBy = null;
        this.groups = [];
        this.currency = {
            origin: "EUR",
            selected: "EUR",
            aux: null
        };
        this.currencyConversions = [];
        this.price = null;
        this.services = [];
        this.nearTo = {
            location: {
                value: null,
                text: null
            },
            distance: null
        };
        this.locationCenter = {
            value: null,
            text: null
        };
        this.ratings = [];
        this.geolocation = {
            latitude: null,
            longitude: null
        };
        this.showPois = [];
    }
    _createClass(FilterHotels, [ {
        key: "init",
        value: function init(filterContainerMobile, filterContainerDesktop, resultContainer) {
            var filter = this;
            this.containers.mobile = filterContainerMobile;
            this.containers.desktop = filterContainerDesktop;
            this.containers.result = resultContainer;
            $(this.containers.result).find(".m-hotel-list").each(function(index, list) {
                filter.groups.push($(list).data("hotels-group"));
            });
            this.getCurrencyData();
            var filterServices = document.querySelectorAll("[data-service]");
            filterServices.forEach(function(link) {
                link.addEventListener("click", function() {
                    $(link).toggleClass("is-active");
                });
            });
            var filterLocation = document.querySelectorAll(".js-filter-location");
            filterLocation.forEach(function(select) {
                select.addEventListener("change", function(e) {
                    var distance = $(e.target).closest(".filter-hotels-group").find(".filter-hotels-distance")[0];
                    e.target.value === "invalid" ? $(distance).addClass("is-hidden") : $(distance).removeClass("is-hidden");
                });
            });
            var filterSort = $(".js-filter-sort");
            $(filterSort).find("option[value^='poi-']").attr("disabled", "disabled");
            $(filterSort).selectpicker("render");
            var modalCurrency = $("#modal-filter-currency");
            $(modalCurrency).find(".btn-ico").click(function() {
                filter.setCurrency(false);
            });
            $(modalCurrency).find(".js-filter-currency-origin").click(function() {
                filter.setCurrency(false);
            });
            $(modalCurrency).find(".js-filter-currency-change").click(function() {
                filter.setCurrency(true);
                filter.loadingHotels(true);
                setTimeout(function() {
                    filter.loadingHotels(false);
                }, 1e3);
            });
            if (isMobile.any()) {
                $(this.containers.mobile).find("option[value='close-to-me']").removeAttr("disabled");
                $(this.containers.mobile).find(".js-filter-sort.selectpicker").selectpicker("render");
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        filter.geolocation.latitude = position.coords.latitude;
                        filter.geolocation.longitude = position.coords.longitude;
                    });
                }
            }
            this.initCurrencyMobile();
            this.listenerDesktop();
            this.listenerMobile();
        }
    }, {
        key: "maxRange",
        value: function maxRange(type, value) {
            var _this = this;
            if (type === "price") {
                var mobilePrice = $(this.containers.mobile).find(".js-filter-price")[0];
                var desktopPrice = $(this.containers.desktop).find(".js-filter-price")[0];
                $(mobilePrice).closest(".filter-hotels-group").removeClass("is-hidden");
                $(desktopPrice).closest(".filter-hotels-group").removeClass("is-hidden");
                var sortMobile = $(this.containers.mobile).find(".js-filter-sort.selectpicker");
                var sortDesktop = $(this.containers.desktop).find(".js-filter-sort.selectpicker");
                $(sortMobile).find("option[value^='price-']").removeAttr("disabled");
                $(sortDesktop).find("option[value^='price-']").removeAttr("disabled");
                $(sortMobile).selectpicker("render");
                $(sortDesktop).selectpicker("render");
            }
            var filterSelector = null;
            if (type === "price") filterSelector = document.querySelectorAll(".js-filter-price"); else if (type === "distance") filterSelector = document.querySelectorAll(".js-filter-distance");
            filterSelector.forEach(function(range) {
                return _this.initRange(range, value);
            });
        }
    }, {
        key: "initSelectLocation",
        value: function initSelectLocation(arrayPois) {
            var filter = this;
            var locationMobile = $(this.containers.mobile).find(".js-filter-location.selectpicker");
            var locationDesktop = $(this.containers.desktop).find(".js-filter-location.selectpicker");
            var sortMobile = $(this.containers.mobile).find(".js-filter-sort.selectpicker");
            var htmlOptions = '<option value="invalid">Choose an option</option>';
            arrayPois.forEach(function(option) {
                if (option.isCenter) {
                    filter.locationCenter.value = option.value;
                    filter.locationCenter.text = option.text;
                    htmlOptions += "<option value=" + option.value + " data-center>" + option.text + "</option>";
                } else {
                    htmlOptions += "<option value=" + option.value + ">" + option.text + "</option>";
                }
            });
            $(locationMobile).html(htmlOptions).selectpicker("refresh");
            $(locationDesktop).html(htmlOptions).selectpicker("refresh");
            $(locationMobile).change(function(e) {
                var value = e.target.value;
                value === filter.locationCenter.value || value === "invalid" ? $(sortMobile).find("option[value^='poi-']").attr("disabled", "disabled") : $(sortMobile).find("option[value^='poi-']").removeAttr("disabled");
                $(sortMobile).selectpicker("render");
            });
        }
    }, {
        key: "initCurrencyMobile",
        value: function initCurrencyMobile() {
            var filter = this;
            var currencyOptions = [ {
                value: "ARS",
                text: "Argentine Peso ($a)"
            }, {
                value: "AUD",
                text: "Australian Dollar ($)"
            }, {
                value: "BRL",
                text: "Brazilian Real (R$)"
            }, {
                value: "GBP",
                text: "British Pound (£)"
            }, {
                value: "CAD",
                text: "Canadian Dollar (C$)"
            }, {
                value: "CLP",
                text: "Chilean peso"
            }, {
                value: "COP",
                text: "Colombian Peso"
            }, {
                value: "DKK",
                text: "Danish Krone (kr)"
            }, {
                value: "EUR",
                text: "Euro (€)"
            }, {
                value: "HUF",
                text: "Hungarian Forint (Ft)"
            }, {
                value: "INR",
                text: "Indian Rupee (₹)"
            }, {
                value: "ILS",
                text: "Israeli New Shekel (₪)"
            }, {
                value: "MXN",
                text: "Mexican Peso ($)"
            }, {
                value: "NOK",
                text: "Norwegian Krone (kr)"
            }, {
                value: "PEN",
                text: "Peruvian Sol (S/)"
            }, {
                value: "PLN",
                text: "Polish Zloty (zł)"
            }, {
                value: "RON",
                text: "Romanian Leu (RON)"
            }, {
                value: "RUB",
                text: "Russian Ruble (₽)"
            }, {
                value: "SEK",
                text: "Swedish krona (kr)"
            }, {
                value: "CHF",
                text: "Swiss Franc (Fr)"
            }, {
                value: "USD",
                text: "US Dollar (US $)"
            }, {
                value: "UYU",
                text: "Uruguayan peso"
            } ];
            var mobileCurrency = $("#off-canvas-left-mob").find("#currency");
            var tabletCurrency = $("#off-canvas-menuLeft").find(".navMob .dropdown")[1];
            $(mobileCurrency).find("option").remove();
            $(tabletCurrency).find("li").remove();
            var htmlOptionsMobile = "";
            currencyOptions.forEach(function(option) {
                option.value === "EUR" ? htmlOptionsMobile += "<option value=" + option.value + " selected>" + option.text + "</option>" : htmlOptionsMobile += "<option value=" + option.value + ">" + option.text + "</option>";
            });
            $(mobileCurrency).append(htmlOptionsMobile);
            var htmlOptionsTablet = "";
            currencyOptions.forEach(function(option) {
                option.value === "EUR" ? htmlOptionsTablet += "<li class='is-selected' data-currency=" + option.value + ">" + option.text + "</li>" : htmlOptionsTablet += "<li data-currency=" + option.value + ">" + option.text + "</li>";
            });
            $(tabletCurrency).find(".dropdown-menu").append(htmlOptionsTablet);
            $(mobileCurrency).change(function(e) {
                $("#header-mob").find(".navbar-toggle.btn-ico-menu").trigger("click");
                filter.currencyModal(e.target.value);
            });
            $(tabletCurrency).find("li").click(function(e) {
                $(tabletCurrency).find("a").html(e.target.textContent + '<b class="caret"></b>');
                filter.currencyModal(e.target.dataset.currency);
            });
        }
    }, {
        key: "showRating",
        value: function showRating(arrayRating) {
            if (arrayRating.length > 0) {
                var containerMobile = $(this.containers.mobile).find(".filter-hotels-rating");
                var containerDesktop = $(this.containers.desktop).find(".filter-hotels-rating");
                $(containerMobile).closest(".filter-hotels-group").removeClass("is-hidden");
                $(containerDesktop).closest(".filter-hotels-group").removeClass("is-hidden");
                arrayRating.forEach(function(rating) {
                    $(containerMobile).find(".tripadvisor.rating-" + rating).closest(".trip").addClass("is-show");
                    $(containerDesktop).find(".tripadvisor.rating-" + rating).closest(".trip").addClass("is-show");
                });
            }
        }
    }, {
        key: "getCurrencyData",
        value: function getCurrencyData() {
            var euroConversions = [ {
                cur_dest: "ARS",
                rate: "48.64116"
            }, {
                cur_dest: "CHF",
                rate: "1.11090"
            }, {
                cur_dest: "CLP",
                rate: "778.50770"
            }, {
                cur_dest: "COP",
                rate: "3612.28402"
            }, {
                cur_dest: "EUR",
                rate: "1.00000"
            }, {
                cur_dest: "GBP",
                rate: "0.89291"
            }, {
                cur_dest: "MXN",
                rate: "21.74450"
            }, {
                cur_dest: "USD",
                rate: "1.13850"
            }, {
                cur_dest: "UYU",
                rate: "39.96246"
            }, {
                cur_dest: "SEK",
                rate: "10.63338"
            }, {
                cur_dest: "DKK",
                rate: "7.46621"
            }, {
                cur_dest: "PLN",
                rate: "4.25351"
            }, {
                cur_dest: "RUB",
                rate: "71.83058"
            }, {
                cur_dest: "ILS",
                rate: "4.12336"
            }, {
                cur_dest: "BRL",
                rate: "4.34218"
            }, {
                cur_dest: "CAD",
                rate: "1.50269"
            }, {
                cur_dest: "RON",
                rate: "4.73507"
            }, {
                cur_dest: "HUF",
                rate: "324.23065"
            }, {
                cur_dest: "AUD",
                rate: "1.63766"
            }, {
                cur_dest: "PEN",
                rate: "3.74583"
            }, {
                cur_dest: "NOK",
                rate: "9.66434"
            }, {
                cur_dest: "INR",
                rate: "79.21782"
            } ];
            this.currencyConversions = euroConversions;
        }
    }, {
        key: "initRange",
        value: function initRange(rangeElement, rangeValue) {
            var _this2 = this;
            var filterContainer = $(rangeElement).closest(".m-filter-hotels");
            var filter = this;
            var unit = null;
            if ($(rangeElement).hasClass("js-filter-price")) unit = this.currency.selected; else if ($(rangeElement).hasClass("js-filter-distance")) unit = "km";
            noUiSlider.create(rangeElement, {
                start: rangeValue,
                connect: [ true, false ],
                range: {
                    min: 0,
                    max: rangeValue
                },
                format: {
                    from: Number,
                    to: function to(value) {
                        return Math.round(parseInt(value)) + " " + unit;
                    }
                }
            });
            var spanValue = $(rangeElement).closest(".range").find(".js-filter-range-end")[0];
            rangeElement.noUiSlider.on("update", function(values, handle) {
                spanValue.innerHTML = values[handle];
            });
            if (!filterContainer.hasClass("is-mobile")) {
                rangeElement.noUiSlider.on("change", function(value) {
                    var formatValue = filter.formatRange(value);
                    $(rangeElement).hasClass("js-filter-price") ? filter.setRange(formatValue, "js-filter-price") : filter.setRange(formatValue, "js-filter-distance");
                    _this2.loadingHotels(true);
                });
            }
            if ($(rangeElement).hasClass("js-filter-distance")) {
                this.nearTo.distance = rangeValue;
            } else if ($(rangeElement).hasClass("js-filter-price")) {
                this.price = rangeValue;
            }
        }
    }, {
        key: "toggleCurrency",
        value: function toggleCurrency(visible) {
            var mobileCurrency = $("#off-canvas-left-mob").find("#currency");
            var tabletCurrency = $("#off-canvas-menuLeft").find(".navMob .dropdown").eq(1);
            var desktopCurrency = $(this.containers.desktop).find(".filter-currency-wrapper");
            mobileCurrency.parents(".language-select").toggle(visible);
            $(tabletCurrency).toggle(visible);
            desktopCurrency.toggle(visible);
        }
    }, {
        key: "listenerDesktop",
        value: function listenerDesktop() {
            var _this3 = this;
            var filterSort = this.containers.desktop.querySelector(".js-filter-sort.selectpicker");
            var filterCurrency = this.containers.desktop.querySelector(".js-filter-currency.selectpicker");
            var filterServices = this.containers.desktop.querySelectorAll("[data-service]");
            var filterLocation = this.containers.desktop.querySelector(".js-filter-location");
            var filterRatings = this.containers.desktop.querySelectorAll("[data-rating]");
            filterSort.addEventListener("change", function(e) {
                _this3.setSorted(e.target.value);
                _this3.loadingHotels(true);
            });
            filterCurrency.addEventListener("change", function(e) {
                _this3.currencyModal(e.target.value);
            });
            filterServices.forEach(function(link) {
                link.addEventListener("click", function(e) {
                    var parent = $(e.target).closest("[data-service]")[0];
                    _this3.setServiceDesktop(parent.dataset.service, $(link).hasClass("is-active"));
                    _this3.loadingHotels(true);
                });
            });
            filterLocation.addEventListener("change", function(e) {
                _this3.setLocation(e.target.value);
                _this3.loadingHotels(true);
            });
            filterRatings.forEach(function(check) {
                check.addEventListener("change", function(e) {
                    _this3.setRatingDesktop(e.target.dataset.rating, e.target.checked);
                    _this3.loadingHotels(true);
                });
            });
        }
    }, {
        key: "listenerMobile",
        value: function listenerMobile() {
            var mobileButton = $(this.containers.mobile).find(".js-filter-hotels-button");
            var $modalFilter = $(this.containers.mobile).find(".modal");
            var filter = this;
            $(mobileButton).click(function() {
                var mobileSorted = $(filter.containers.mobile).find(".js-filter-sort.selectpicker")[0];
                var mobilePrice = $(filter.containers.mobile).find(".js-filter-price")[0];
                var mobileServices = $(filter.containers.mobile).find(".is-active[data-service]");
                var mobileLocation = $(filter.containers.mobile).find(".js-filter-location.selectpicker")[0];
                var mobileDistance = $(filter.containers.mobile).find(".js-filter-distance")[0];
                var mobileRatings = $(filter.containers.mobile).find("[data-rating]:checked");
                var priceValue = null;
                if (!$(mobilePrice).closest(".filter-hotels-group").hasClass("is-hidden")) {
                    priceValue = mobilePrice.noUiSlider.get();
                    filter.setRange(filter.formatRange(priceValue, true), "js-filter-price");
                }
                var distanceValue = mobileDistance.noUiSlider.get();
                filter.setRange(filter.formatRange(distanceValue, true), "js-filter-distance", false, true);
                var arrayServices = [];
                $(mobileServices).each(function(index, element) {
                    arrayServices.push(element.dataset.service);
                });
                filter.setServiceMobile(arrayServices);
                var arrayRatings = [];
                $(mobileRatings).each(function(index, value) {
                    var ratingValue = $(value).data("rating");
                    arrayRatings.push(ratingValue.toString());
                });
                filter.setRatingMobile(arrayRatings);
                filter.setSorted($(mobileSorted).val());
                filter.setLocation($(mobileLocation).val());
                $modalFilter.modal("hide");
            });
        }
    }, {
        key: "setRange",
        value: function setRange(value, rangeClass, isRemoved, isMobile) {
            var containerTags = $(this.containers.mobile).find(".m-filter-tags");
            $(this.containers.mobile).find("." + rangeClass)[0].noUiSlider.set(value);
            $(this.containers.desktop).find("." + rangeClass)[0].noUiSlider.set(value);
            if (rangeClass === "js-filter-price") {
                this.price = value;
                if (!isRemoved) {
                    !$(containerTags).find("[data-price]").length ? this.createTag("price", value) : this.updateTag("price", value);
                }
            }
            if (rangeClass === "js-filter-distance") {
                this.nearTo.distance = value;
                var actualLocation = this.nearTo.location.value;
                isMobile ? actualLocation = $(this.containers.mobile).find(".js-filter-location.selectpicker").val() : actualLocation = this.nearTo.location.value;
                if (!isRemoved) {
                    !$(containerTags).find("[data-distance]").length && actualLocation && actualLocation !== "invalid" ? this.createTag("distance", value) : this.updateTag("distance", value);
                }
            }
            this.filterHotels();
        }
    }, {
        key: "setServiceMobile",
        value: function setServiceMobile(values) {
            var _this4 = this;
            var filter = this;
            this.services = values;
            $(this.containers.desktop).find("[data-service]").each(function(index, service) {
                var data = $(service).data("service");
                filter.services.includes(data) ? $(service).addClass("is-active") : $(service).removeClass("is-active");
            });
            var containerTags = $(this.containers.desktop).find(".m-filter-tags")[0];
            var serviceTags = $(containerTags).find("[data-service]");
            var allServices = $(this.containers.mobile).find(".filter-hotels-services [data-service]");
            if (!serviceTags.length) {
                this.services.forEach(function(value) {
                    return _this4.createTag("service", value);
                });
            } else {
                $(allServices).each(function(index, service) {
                    var isActive = $(service).hasClass("is-active");
                    var data = $(service).data("service");
                    var hasTag = $(containerTags).find("[data-service=" + data + "]");
                    if (isActive && hasTag.length === 0) filter.createTag("service", data); else if (!isActive && hasTag.length > 0) filter.removeTag("service", data, true);
                });
            }
            this.filterHotels();
        }
    }, {
        key: "setServiceDesktop",
        value: function setServiceDesktop(value, isActive) {
            var filter = this;
            if (isActive) {
                if (!this.services.includes(value)) this.services.push(value);
            } else {
                if (this.services.includes(value)) {
                    var index = this.services.indexOf(value);
                    this.services.splice(index, 1);
                }
            }
            $(this.containers.mobile).find("[data-service]").each(function(index, service) {
                var data = $(service).data("service");
                filter.services.includes(data) ? $(service).addClass("is-active") : $(service).removeClass("is-active");
            });
            var containerTags = $(this.containers.desktop).find(".m-filter-tags")[0];
            var serviceTags = $(containerTags).find("[data-service]");
            if (!serviceTags.length) {
                this.createTag("service", value);
            } else {
                isActive ? this.createTag("service", value) : this.removeTag("service", value, true);
            }
            this.filterHotels();
        }
    }, {
        key: "setRatingMobile",
        value: function setRatingMobile(values) {
            var _this5 = this;
            var filter = this;
            this.ratings = [];
            var simpleRatings = [];
            values.forEach(function(rating) {
                simpleRatings.push(rating);
                parseInt(rating) < 5 ? _this5.ratings.push(rating.concat(".0"), rating.concat(".5")) : _this5.ratings.push(rating);
            });
            $(this.containers.desktop).find("[data-rating]").each(function(index, rating) {
                var data = $(rating).data("rating");
                simpleRatings.includes(data.toString()) ? $(rating).prop("checked", true) : $(rating).prop("checked", false);
            });
            var containerTags = $(this.containers.desktop).find(".m-filter-tags")[0];
            var ratingTags = $(containerTags).find("[data-rating]");
            var allRatings = $(this.containers.mobile).find(".trip.is-show [data-rating]");
            if (!ratingTags.length) {
                simpleRatings.forEach(function(value) {
                    return _this5.createTag("rating", value);
                });
            } else {
                $(allRatings).each(function(index, rating) {
                    var isChecked = $(rating).prop("checked");
                    var data = $(rating).data("rating");
                    var hasTag = $(containerTags).find("[data-rating=" + data + "]");
                    if (isChecked && hasTag.length === 0) filter.createTag("rating", data); else if (!isChecked && hasTag.length > 0) filter.removeTag("rating", data, true);
                });
            }
            this.filterHotels();
        }
    }, {
        key: "setRatingDesktop",
        value: function setRatingDesktop(value, isChecked) {
            var _this6 = this;
            var ratingArray = value;
            if (value === "4") ratingArray = [ "4.0", "4.5" ]; else if (value === "3") ratingArray = [ "3.0", "3.5" ];
            var deleteIndex = function deleteIndex(val) {
                var index = _this6.ratings.indexOf(val);
                _this6.ratings.splice(index, 1);
            };
            if (isChecked) {
                if (!this.ratings.includes(ratingArray)) {
                    ratingArray.length > 1 ? ratingArray.forEach(function(rating) {
                        _this6.ratings.push(rating);
                    }) : this.ratings.push(ratingArray);
                }
            } else {
                if (ratingArray.length > 1) {
                    ratingArray.forEach(function(rating) {
                        if (_this6.ratings.includes(rating)) deleteIndex(rating);
                    });
                } else {
                    if (this.ratings.includes(ratingArray)) deleteIndex(ratingArray);
                }
            }
            var simpleRating = this.ratings.map(function(rating) {
                return parseInt(rating);
            });
            $(this.containers.mobile).find("[data-rating]").each(function(index, rating) {
                var data = $(rating).data("rating");
                simpleRating.includes(data) ? $(rating).prop("checked", true) : $(rating).prop("checked", false);
            });
            var containerTags = $(this.containers.desktop).find(".m-filter-tags")[0];
            var ratingTags = $(containerTags).find("[data-rating]");
            if (!ratingTags.length) {
                this.createTag("rating", value);
            } else {
                isChecked ? this.createTag("rating", value) : this.removeTag("rating", value, true);
            }
            this.filterHotels();
        }
    }, {
        key: "setSorted",
        value: function setSorted(value) {
            var mobileSorted = $(this.containers.mobile).find(".js-filter-sort.selectpicker")[0];
            var desktopSorted = $(this.containers.desktop).find(".js-filter-sort.selectpicker")[0];
            $(mobileSorted).val(value);
            $(mobileSorted).change();
            $(desktopSorted).val(value);
            $(desktopSorted).change();
            this.sortedBy = value;
            this.sortedGroups();
        }
    }, {
        key: "setCurrency",
        value: function setCurrency(isChange) {
            var mobileCurrency = $("#off-canvas-left-mob").find("#currency");
            var tabletCurrency = $("#off-canvas-menuLeft").find(".navMob .dropdown")[1];
            var desktopCurrency = $(this.containers.desktop).find(".js-filter-currency.selectpicker")[0];
            var value = null;
            isChange ? value = this.currency.aux : value = this.currency.selected;
            $(mobileCurrency).val(value);
            var optionValue = $(tabletCurrency).find("[data-currency=" + value + "]");
            $(tabletCurrency).find(".is-selected").removeClass("is-selected");
            $(optionValue).addClass("is-selected");
            $(tabletCurrency).find("a").html($(optionValue).text() + '<b class="caret"></b>');
            $(desktopCurrency).val(value);
            $(desktopCurrency).change();
            if (isChange) this.currency.origin = this.currency.selected;
            this.currency.selected = value;
            this.currency.aux = null;
            if (isChange) this.changeHotelsCurrency();
        }
    }, {
        key: "setLocation",
        value: function setLocation(value) {
            var mobileLocation = $(this.containers.mobile).find(".js-filter-location.selectpicker")[0];
            var desktopLocation = $(this.containers.desktop).find(".js-filter-location.selectpicker")[0];
            var mobileDistance = $(this.containers.mobile).find(".filter-hotels-distance")[0];
            var desktopDistance = $(this.containers.desktop).find(".filter-hotels-distance")[0];
            var filterSort = $(".js-filter-sort");
            $(mobileLocation).val(value);
            $(mobileLocation).change();
            $(desktopLocation).val(value);
            $(desktopLocation).change();
            if (value === "invalid") {
                var _filterSort = $(".js-filter-sort.selectpicker");
                $(mobileDistance).addClass("is-hidden");
                $(desktopDistance).addClass("is-hidden");
                $(_filterSort).find("option[value^='poi-']").attr("disabled", "disabled");
            } else {
                $(mobileDistance).removeClass("is-hidden");
                $(desktopDistance).removeClass("is-hidden");
                if (value === this.locationCenter.value) {
                    $(filterSort).find("option[value^='poi-']").attr("disabled", "disabled");
                } else {
                    $(filterSort).find("option[value^='poi-']").removeAttr("disabled");
                }
            }
            this.nearTo.location.value = value;
            this.nearTo.location.text = $(mobileLocation).find("option[value=" + value + "]").text();
            $(filterSort).selectpicker("render");
            var containerTags = $(this.containers.mobile).find(".m-filter-tags");
            if (!$(containerTags).find("[data-location]").length) {
                if (value !== "invalid") this.createTag("location", value, this.nearTo.location.text);
            } else {
                value === "invalid" ? this.removeTag("location", value, true) : this.updateTag("location", this.nearTo.location.text);
            }
            this.filterHotels();
        }
    }, {
        key: "filterHotels",
        value: function filterHotels() {
            var _this7 = this;
            var totalHotels = $(this.containers.result).find(".m-hotel-box").length;
            this.cont = 0;
            this.showPois = [];
            this.containers.result.querySelectorAll(".m-hotel-box").forEach(function(hotel, index) {
                var hotelData = {
                    price: hotel.dataset.price,
                    services: hotel.dataset.services,
                    pois: hotel.dataset.pois,
                    rating: hotel.dataset.rating
                };
                if (_this7.canShowHotel(hotelData)) {
                    $(hotel).removeClass("is-hidden");
                    _this7.cont++;
                    _this7.showPois.push(hotel.dataset.backcode);
                } else {
                    $(hotel).addClass("is-hidden");
                }
                var poiHotel = $(hotel).find(".js-contact-poi");
                var templatePoi = {
                    location: null,
                    distance: null
                };
                if (_this7.nearTo.location.value === "invalid" || _this7.nearTo.location.value === null) {
                    templatePoi.location = JSON.parse(hotelData.pois)[0].location;
                    templatePoi.distance = JSON.parse(hotelData.pois)[0].distance;
                    $(poiHotel).html("<strong>" + templatePoi.distance + " km</strong> " + templatePoi.location);
                } else if ($(poiHotel).val() !== _this7.nearTo.location.text) {
                    var poiValue = JSON.parse(hotelData.pois).find(function(x) {
                        return x.location === _this7.nearTo.location.text;
                    });
                    if (poiValue) {
                        templatePoi.location = poiValue.location;
                        templatePoi.distance = poiValue.distance;
                        $(poiHotel).html("<strong>" + templatePoi.distance + " km</strong> " + templatePoi.location);
                    } else {
                        _this7.cont = _this7.cont--;
                        $(hotel).addClass("is-hidden");
                    }
                }
                if (index === totalHotels - 1) {
                    $(_this7.containers.result).trigger("filterHotelsDone");
                }
            });
            document.querySelectorAll("." + this.page + " .js-filter-hotels-number").forEach(function(hotelCont) {
                return hotelCont.textContent = _this7.cont;
            });
            !this.cont ? $(this.containers.result).find(".m-alert").removeClass("is-hidden") : $(this.containers.result).find(".m-alert").addClass("is-hidden");
            this.canShowHotelsGroup();
        }
    }, {
        key: "canShowHotel",
        value: function canShowHotel(hotelData) {
            var _this8 = this;
            var isPrice = false;
            var isServices = false;
            var isNearTo = false;
            var isRating = false;
            var parsePrice = Math.round(parseFloat(hotelData.price));
            if (this.price >= parsePrice) isPrice = true;
            var communServices = this.services.filter(function(x) {
                return JSON.parse(hotelData.services).includes(x);
            });
            if (this.services.length === 0) isServices = true; else if (this.services.length === communServices.length) isServices = true;
            var parseDistance = null;
            var isLocation = JSON.parse(hotelData.pois).find(function(x) {
                return x.location === _this8.nearTo.location.text;
            });
            if (isLocation !== undefined) parseDistance = Math.round(parseFloat(isLocation.distance));
            if (this.nearTo.location.value === "invalid" || this.nearTo.location.value === null) isNearTo = true; else if (isLocation !== undefined && parseDistance <= this.nearTo.distance) isNearTo = true;
            if (this.ratings.length === 0) isRating = true; else if (this.ratings.includes(hotelData.rating)) isRating = true;
            if (isPrice && isServices && isNearTo && isRating) return true; else return false;
        }
    }, {
        key: "canShowHotelsGroup",
        value: function canShowHotelsGroup() {
            var _this9 = this;
            var filter = this;
            $(this.groups).each(function(index, hotelGroupData) {
                var groupContainer = $(filter.containers.result).find("[data-hotels-group=" + hotelGroupData + "]");
                var totalHotels = 0;
                var hiddenHotels = 0;
                $(groupContainer).find(".m-hotel-box").each(function(index, hotel) {
                    totalHotels++;
                    if ($(hotel).hasClass("is-hidden")) hiddenHotels++;
                });
                totalHotels === hiddenHotels ? $(groupContainer).addClass("is-hidden") : $(groupContainer).removeClass("is-hidden");
            });
            setTimeout(function() {
                _this9.loadingHotels(false);
            }, 1e3);
        }
    }, {
        key: "getShowPois",
        value: function getShowPois() {
            return this.showPois;
        }
    }, {
        key: "sortedGroups",
        value: function sortedGroups() {
            var _this10 = this;
            var sortedGroups = this.groups;
            if (this.sortedBy === "price-asc" || this.sortedBy === "price-desc") {
                sortedGroups = [ "promo", "promo-near", "stock", "stock-near" ];
            } else if (this.sortedBy === "center-asc" || this.sortedBy === "center-desc") {
                var mobileLocation = $(this.containers.mobile).find(".js-filter-location.selectpicker")[0];
                var desktopLocation = $(this.containers.desktop).find(".js-filter-location.selectpicker")[0];
                $(mobileLocation).val(this.locationCenter.value);
                $(mobileLocation).change();
                $(desktopLocation).val(this.locationCenter.value);
                $(desktopLocation).change();
                this.setLocation(this.locationCenter.value);
                this.loadingHotels(true);
                $(this.containers.mobile).find(".filter-hotels-distance").removeClass("is-hidden");
                $(this.containers.desktop).find(".filter-hotels-distance").removeClass("is-hidden");
            }
            sortedGroups.forEach(function(group) {
                return _this10.sortedHotels(group);
            });
        }
    }, {
        key: "sortedHotels",
        value: function sortedHotels(group) {
            var _this11 = this;
            var filter = this;
            var sortResult = null;
            var listsGroup = $(this.containers.result).find("[data-hotels-group=" + group + "]");
            var hotelsGroup = $(listsGroup).find(".m-hotel-box").detach();
            hotelsGroup = Array.prototype.slice.call(hotelsGroup, 0);
            var genericCompare = function genericCompare(filterValue, paramA, paramB) {
                filter.sortedBy === filterValue ? sortResult = paramA > paramB ? 1 : -1 : sortResult = paramA < paramB ? 1 : -1;
            };
            hotelsGroup.sort(function(hotelA, hotelB) {
                switch (filter.sortedBy) {
                  case "nh-recommends":
                    var recommendA = parseInt($(hotelA).data("recommend"));
                    var recommendB = parseInt($(hotelB).data("recommend"));
                    sortResult = recommendA > recommendB ? 1 : -1;
                    break;

                  case "price-asc":
                  case "price-desc":
                    var priceA = parseFloat($(hotelA).data("price"));
                    var priceB = parseFloat($(hotelB).data("price"));
                    genericCompare("price-asc", priceA, priceB);
                    break;

                  case "name-asc":
                  case "name-desc":
                    var titleA = $.trim($(hotelA).data("title"));
                    var titleB = $.trim($(hotelB).data("title"));
                    genericCompare("name-asc", titleA, titleB);
                    break;

                  case "rating-asc":
                  case "rating-desc":
                    var ratingA = parseFloat($(hotelA).data("rating"));
                    var ratingB = parseFloat($(hotelB).data("rating"));
                    genericCompare("rating-asc", ratingA, ratingB);
                    break;

                  case "poi-asc":
                  case "poi-desc":
                    var isHiddenA = $($(hotelA)[0]).hasClass("is-hidden");
                    var isHiddenB = $($(hotelB)[0]).hasClass("is-hidden");
                    if (!isHiddenA && !isHiddenB) {
                        var poiA = parseFloat($(hotelA).data("pois").filter(function(poi) {
                            return poi.location === filter.nearTo.location.text;
                        })[0].distance);
                        var poiB = parseFloat($(hotelB).data("pois").filter(function(poi) {
                            return poi.location === filter.nearTo.location.text;
                        })[0].distance);
                        genericCompare("poi-asc", poiA, poiB);
                    } else if (!isHiddenA || !isHiddenB) {
                        sortResult = -1;
                    }
                    break;

                  case "center-asc":
                  case "center-desc":
                    var centerA = parseFloat($(hotelA).data("pois").filter(function(poi) {
                        return poi.location === filter.locationCenter.text;
                    })[0].distance);
                    var centerB = parseFloat($(hotelB).data("pois").filter(function(poi) {
                        return poi.location === filter.locationCenter.text;
                    })[0].distance);
                    genericCompare("center-asc", centerA, centerB);
                    break;

                  case "close-to-me":
                    var origin = {
                        lat: filter.geolocation.latitude,
                        lng: filter.geolocation.longitude
                    };
                    var latitudeA = $(hotelA).data("coordinates").latitude;
                    var longitudeA = $(hotelA).data("coordinates").longitude;
                    var distanceA = utils.getDistanceBetweenCoords(origin, {
                        lat: latitudeA,
                        lng: longitudeA
                    });
                    var latitudeB = $(hotelB).data("coordinates").latitude;
                    var longitudeB = $(hotelB).data("coordinates").longitude;
                    var distanceB = utils.getDistanceBetweenCoords(origin, {
                        lat: latitudeB,
                        lng: longitudeB
                    });
                    sortResult = parseFloat(distanceA) > parseFloat(distanceB) ? 1 : -1;
                    break;
                }
                return sortResult;
            });
            for (var i = 0; i < hotelsGroup.length; i++) {
                $(listsGroup).append(hotelsGroup[i]);
            }
            setTimeout(function() {
                _this11.loadingHotels(false);
            }, 1e3);
        }
    }, {
        key: "currencyModal",
        value: function currencyModal(value) {
            var filter = this;
            if (value !== this.currency.selected) {
                $("#modal-filter-currency").modal("show");
                filter.currency.aux = value;
            }
        }
    }, {
        key: "changeHotelsCurrency",
        value: function changeHotelsCurrency() {
            var _this12 = this;
            var filter = this;
            var conversionDestination = this.currencyConversions.filter(function(currency) {
                return currency.cur_dest === _this12.currency.selected;
            });
            var conversionRate = parseFloat(conversionDestination[0].rate);
            var hotelGroupsPrices = [ "promo", "promo-near", "stock", "stock-near" ];
            $(hotelGroupsPrices).each(function(index, hotelGroupData) {
                var groupContainer = $(filter.containers.result).find("[data-hotels-group=" + hotelGroupData + "]");
                $(groupContainer).find(".m-hotel-box").each(function(index, hotel) {
                    var newCurrency = filter.currency.selected;
                    var newPrice = parseFloat($(hotel).data("euro")) * conversionRate;
                    newPrice = (Math.round(newPrice * 100) / 100).toFixed(2);
                    $(hotel).attr("data-price", newPrice);
                    $(hotel).attr("data-currency", newCurrency);
                    $(hotel).find(".js-price").text(newPrice);
                    $(hotel).find(".js-currency").text(newCurrency);
                });
            });
            var pricesPromo = [];
            var pricesPromoNear = [];
            var pricesStock = [];
            var pricesStockNear = [];
            $("[data-hotels-group=promo]").find(".totalPrice").each(function(index, price) {
                pricesPromo.push(parseFloat($(price).text()));
            });
            $("[data-hotels-group=promo-near]").find(".totalPrice").each(function(index, price) {
                pricesPromoNear.push(parseFloat($(price).text()));
            });
            $("[data-hotels-group=stock]").find(".totalPrice").each(function(index, price) {
                pricesStock.push(parseFloat($(price).text()));
            });
            $("[data-hotels-group=stock-near]").find(".totalPrice").each(function(index, price) {
                pricesStockNear.push(parseFloat($(price).text()));
            });
            var arrayPrices = [].concat(pricesPromo, pricesPromoNear, pricesStock, pricesStockNear);
            arrayPrices.sort(function(a, b) {
                return b - a;
            });
            var rangeMobile = $(this.containers.mobile).find(".js-filter-price")[0];
            var rangeDesktop = $(this.containers.desktop).find(".js-filter-price")[0];
            var finalPrice = Math.round(arrayPrices[0]) + 1;
            var rangeOptions = {
                range: {
                    min: 0,
                    max: finalPrice
                },
                format: {
                    from: Number,
                    to: function to(value) {
                        return Math.round(parseInt(value)) + " " + filter.currency.selected;
                    }
                }
            };
            rangeMobile.noUiSlider.updateOptions(rangeOptions);
            rangeMobile.noUiSlider.set(finalPrice);
            rangeDesktop.noUiSlider.updateOptions(rangeOptions);
            rangeDesktop.noUiSlider.set(finalPrice);
            var containerTags = $(this.containers.mobile).find(".m-filter-tags");
            if ($(containerTags).find("[data-price]").length) {
                this.updateTag("price", finalPrice);
            }
            setTimeout(function() {
                _this12.loadingHotels(false);
            }, 1e3);
        }
    }, {
        key: "createTag",
        value: function createTag(data, value, text) {
            var filter = this;
            var templateText = value;
            if (data === "price") templateText = value + " " + this.currency.selected;
            if (data === "rating") templateText = "<div class='tripadvisor rating-" + value + "'></div>";
            if (data === "location") templateText = text;
            if (data === "distance") templateText = "Menos de " + value + " km";
            var tagTemplate = "<div class='filter-tag' data-" + data + "=" + value + '>\n                        <span class="js-filter-tag-value">' + templateText + '</span>\n                        <button class="btn-ico js-filter-tag-remove" type="button" aria-label="Close">\n                          <span class="nh-ic-close" aria-hidden="true"></span>\n                        </button>\n                      </div>';
            $(this.containers.mobile).find(".m-filter-tags").append(tagTemplate);
            $(this.containers.desktop).find(".m-filter-tags").append(tagTemplate);
            $(".filter-tag[data-" + data + "=" + value + "]").find(".js-filter-tag-remove").each(function(index, element) {
                $(element).click(function(e) {
                    e.preventDefault();
                    filter.removeTag(data, value);
                });
            });
        }
    }, {
        key: "updateTag",
        value: function updateTag(data, text) {
            var tagText = text;
            if (data === "price") tagText = text + " " + this.currency.selected;
            if (data === "distance") tagText = "Menos de " + text + " km";
            $(this.containers.mobile).find(".m-filter-tags [data-" + data + "] .js-filter-tag-value").text(tagText);
            $(this.containers.desktop).find(".m-filter-tags [data-" + data + "] .js-filter-tag-value").text(tagText);
        }
    }, {
        key: "removeTag",
        value: function removeTag(data, value, controlTag) {
            var _this13 = this;
            var filter = this;
            var dataSelector = $(".filter-tag[data-" + data + "]");
            if (data === "service" || data === "rating") dataSelector = $(".filter-tag[data-" + data + "=" + value + "]");
            $(dataSelector).each(function(index, element) {
                $(element).find(".js-filter-tag-remove").off();
                $(element).remove();
                filter.loadingHotels(true);
            });
            switch (data) {
              case "price":
                var newValue = $(this.containers.desktop).find(".js-filter-price")[0].noUiSlider.options.range.max;
                this.setRange([ newValue ], "js-filter-price", true);
                break;

              case "service":
                if (!controlTag) {
                    this.services.splice(this.services.indexOf(value), 1);
                    $(this.containers.mobile).find("[data-service=" + value + "]").removeClass("is-active");
                    $(this.containers.desktop).find("[data-service=" + value + "]").removeClass("is-active");
                    this.filterHotels();
                }
                break;

              case "rating":
                if (!controlTag) {
                    var ratingArray = value;
                    if (value === "4") ratingArray = [ "4.0", "4.5" ]; else if (value === "3") ratingArray = [ "3.0", "3.5" ];
                    var deleteIndex = function deleteIndex(val) {
                        var index = _this13.ratings.indexOf(val);
                        _this13.ratings.splice(index, 1);
                    };
                    ratingArray.length > 1 ? ratingArray.forEach(function(rating) {
                        return deleteIndex(rating);
                    }) : deleteIndex(ratingArray);
                    $(this.containers.mobile).find("[data-rating=" + value + "]").prop("checked", false);
                    $(this.containers.desktop).find("[data-rating=" + value + "]").prop("checked", false);
                    this.filterHotels();
                }
                break;

              case "location":
                if (!controlTag) this.setLocation("invalid");
                var tagDistance = $(this.containers.desktop).find(".m-filter-tags [data-distance]");
                if (tagDistance) $(tagDistance).find(".js-filter-tag-remove").trigger("click");
                break;

              case "distance":
                var maxValue = $(this.containers.desktop).find(".js-filter-distance")[0].noUiSlider.options.range.max;
                this.setRange([ maxValue ], "js-filter-distance", true);
                break;

              default:
                break;
            }
        }
    }, {
        key: "formatRange",
        value: function formatRange(rangeValue, filter) {
            if (!filter) rangeValue = rangeValue[0];
            var splitRange = rangeValue.split(" ");
            return parseInt(splitRange[0]);
        }
    }, {
        key: "loadingHotels",
        value: function loadingHotels(isDisabled) {
            isDisabled ? $(this.containers.desktop).addClass("is-disabled") : $(this.containers.desktop).removeClass("is-disabled");
        }
    }, {
        key: "reset",
        value: function reset(page) {
            this.page = page;
            this.containers = {
                mobile: null,
                desktop: null,
                result: null
            };
            this.cont = 0;
            this.sortedBy = null;
            this.groups = [];
            this.currency = {
                origin: "EUR",
                selected: "EUR",
                aux: null
            };
            this.currencyConversions = [];
            this.price = null;
            this.services = [];
            this.nearTo = {
                location: {
                    value: null,
                    text: null
                },
                distance: null
            };
            this.locationCenter = {
                value: null,
                text: null
            };
            this.ratings = [];
            this.geolocation = {
                latitude: null,
                longitude: null
            };
            this.showPois = [];
        }
    } ]);
    return FilterHotels;
}();

"use strict";

var pHotelPage = function() {
    var pHotelView = null;
    var modalTimeout = null;
    var $bookingModalTrigger = null;
    function init(view) {
        pHotelView = view;
        $bookingModalTrigger = pHotelView.find(".m-book-now [data-target='#modal-hotel-booking']").eq(0);
        _getHotelSelectedData();
        $(document).on("click", function() {
            if (modalTimeout) {
                clearTimeout(modalTimeout);
            }
        });
    }
    function _getHotelSelectedData() {
        var autocompleteSubdomain = "";
        var promise = void 0;
        if (typeof subdomainLang !== "undefined") {
            autocompleteSubdomain = subdomainLang;
        }
        promise = $.ajax({
            type: "GET",
            url: "/rest/auto/autocomplete/" + $bookingModalTrigger.data("name"),
            dataType: "json",
            cache: true
        });
        promise.then(function(response) {
            var finalResponse = response[0][0];
            sessionStorage.setItem("listSearch", JSON.stringify(finalResponse));
            $bookingModalTrigger.data("selected", finalResponse);
            _initModalBookingCountDown();
        }, function(error) {
            consol.log(error.Message);
        });
    }
    function _initModalBookingCountDown() {
        modalTimeout = setTimeout(function() {
            $bookingModalTrigger.trigger("click");
        }, 9e3);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-hotel").length) {
        pHotelPage.init($(".p-hotel"));
    }
});

"use strict";

var myPoints = function() {
    function init() {
        $(".bar-graph").each(function() {
            var dataMax = $(this).attr("data-max-price");
            var barHeight = 150;
            var paddingTop = 30;
            var reScale = paddingTop / barHeight;
            $(this).find(".bar-container").each(function() {
                var dataHeight = $(this).attr("data-price");
                var barHeight = dataHeight * 100 / dataMax;
                barHeight = (1 - reScale) * barHeight;
                $(this).css({
                    height: barHeight + "%"
                });
            });
        });
        $(".bar-graph").parent().css({
            opacity: 1
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".bar-graph.upper").length) {
        myPoints.init();
    }
});

"use strict";

var mDestinations = function() {
    var $destinationsView = $(".mDestinations");
    var fields = null;
    var querys = {
        data: null,
        country: "$..CountryList[*].name",
        city: "",
        hotel: "",
        set queryCity(country) {
            this.city = "$..CountryList[?(@.name=='" + country + "')]..CityList[*].name";
        },
        set queryHotel(city) {
            this.hotel = "$..CityList[?(@.name=='" + city + "')].HotelList[*].name";
        }
    };
    function init(view) {
        $destinationsView = view;
        fields = {
            $country: $destinationsView.find("select.country"),
            $city: $destinationsView.find("select.city"),
            $hotel: $destinationsView.find("select.hotel")
        };
        fields = {
            country: {
                $field: $destinationsView.find("select.country"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            },
            city: {
                $field: $destinationsView.find("select.city"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            },
            hotel: {
                $field: $destinationsView.find("select.hotel"),
                get $wrapper() {
                    return this.$field.parents(".form-group");
                }
            }
        };
        if (fields.country.$field.length) {
            _initializeCountries();
        }
        fields.country.$field.on("change", function() {
            var value = $(this).val().replace(/_/g, " ");
            querys.queryCity = value;
            _initializeCities();
            fields.hotel.$field.find("option").remove();
            fields.hotel.$field.selectpicker("refresh");
        });
        fields.city.$field.on("change", function() {
            var value = $(this).val().replace(/_/g, " ");
            querys.queryHotel = value;
            if (value) {
                _initializeHotels();
            }
        });
    }
    function _initializeCountries() {
        var promise = $.getJSON("/resources/jsonDestinations.txt");
        var countryData = {
            $field: fields.country.$field,
            $wrapper: fields.country.$wrapper,
            query: querys.country,
            data: querys.data
        };
        promise.then(function(response) {
            querys.data = response;
            countryData.data = response;
            _generateSelect(countryData);
        });
    }
    function _initializeCities() {
        var cityData = {
            $field: fields.city.$field,
            $wrapper: fields.city.$wrapper,
            query: querys.city,
            data: querys.data
        };
        _generateSelect(cityData);
    }
    function _initializeHotels() {
        var hotelData = {
            $field: fields.hotel.$field,
            $wrapper: fields.hotel.$wrapper,
            query: querys.hotel,
            data: querys.data
        };
        _generateSelect(hotelData);
    }
    function _generateSelect(selectData) {
        var optionValue = null;
        var optionsValues = jsonPath(selectData.data, selectData.query).sort(function(a, b) {
            var aName = utils.removeDiacritics(a.toLowerCase());
            var bName = utils.removeDiacritics(b.toLowerCase());
            return aName < bName ? -1 : aName > bName ? 1 : 0;
        });
        selectData.$wrapper.removeClass("has-error has-success has-danger");
        selectData.$field.find("option").remove().append('<option value="">');
        $.each(optionsValues, function(index, value) {
            optionValue = value.replace(/\s+/g, "_");
            selectData.$field.append('<option value="' + optionValue + '">' + value + "</option>");
        });
        selectData.$field.prop("disabled", false).selectpicker("refresh");
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".mDestinations").length) {
        mDestinations.init($(".mDestinations"));
    }
});

"use strict";

var landingServices = function() {
    function callTrustYouReviews() {}
    function callTripAdvisorReviews() {}
    function getLastSearch() {
        var extendLastSearch = {
            voucherCode: globalConfig.urlParameters.voucherCode,
            selectedDivisa: globalConfig.urlParameters.divisa,
            groupon: globalConfig.urlParameters.gvoucher === "false" ? false : true,
            isPOI: globalConfig.urlParameters.poiId,
            pcode: globalConfig.urlParameters.pcode,
            b2b: globalConfig.urlParameters.b2b,
            b2bData: null,
            contracts: [ "NHWEB" ],
            rates: null,
            searchLandingExpress: null,
            isB2EEmployee: null,
            isB2EFamily: null,
            filterStars: null,
            filterServices: null,
            isPromo: false
        };
        var promise = $.ajax({
            type: "GET",
            url: "/booking/ajax/landing/getFlowInformation.html",
            headers: {
                Accept: "application/json",
                "Content-Type": "application/json"
            },
            dataType: "json",
            cache: false,
            async: false
        });
        $.extend(lastSearch, extendLastSearch);
        selectedDivisa = lastSearch.selectedDivisa ? lastSearch.selectedDivisa : "";
        if (lastSearch.b2b) {
            lastSearch.b2BData = {
                branch: globalConfig.urlParameters["b2bData.branch"],
                branchId: globalConfig.urlParameters["b2bData.branchId"],
                company: globalConfig.urlParameters["b2bData.company"],
                customer: globalConfig.urlParameters["b2bData.customer"],
                partyIdCompany: globalConfig.urlParameters["b2bData.partyIdCompany"],
                partyIdCustomer: globalConfig.urlParameters["b2bData.partyIdCustomer"],
                bpc: globalConfig.urlParameters["b2bData.bpc"],
                favouriteHotels: globalConfig.urlParameters["b2bData.favouriteHotels"],
                frequentHotels: globalConfig.urlParameters["b2bData.frequentHotels"],
                username: globalConfig.urlParameters["b2bData.username"],
                ccgType: globalConfig.urlParameters["b2bData.ccgType"],
                type: globalConfig.urlParameters["b2bData.type"]
            };
        }
        return promise.then(function(response) {
            if (typeof response !== "undefined" && response) {
                if (response.displayBean) {
                    lastSearch.contracts = response.displayBean.contracts ? response.displayBean.contracts : lastSearch.contracts;
                    lastSearch.searchLandingExpress = response.displayBean.isSearchLandingExpress !== "" ? response.displayBean.isSearchLandingExpress : lastSearch.searchLandingExpress;
                    lastSearch.isB2EEmployee = response.displayBean.isB2EEmployee !== "" ? $.parseJSON(response.displayBean.isB2EEmployee) : lastSearch.isB2EEmployee;
                    lastSearch.isB2EFamily = response.displayBean.isB2EFamily !== "" ? $.parseJSON(response.displayBean.isB2EFamily) : lastSearch.isB2EFamily;
                }
                if (response.backingBean) {
                    lastSearch.rates = response.backingBean.ratePlansPromo ? response.backingBean.ratePlansPromo : lastSearch.rates;
                }
            }
        }, function(error) {
            console.log("Fail call getFlowInformation: ", error.status, error.responseText);
        }).always(function() {
            LandingUtag.init();
            _fillLazyDataAndLastSearchData();
        });
    }
    function callLoading() {}
    function getNoPromoUrl() {
        var pcodeParam = window.location.search.match(/pcode\=([0-9]+)/i);
        var current = window.location.href;
        return pcodeParam ? current.replace(pcodeParam[0], "") : null;
    }
    function _fillLazyDataAndLastSearchData() {
        var deferred = $.Deferred();
        lazyDataSend.fini = lastSearch.fini || null;
        lazyDataSend.fout = lastSearch.fout || null;
        lazyDataSend.voucherCode = lastSearch.voucherCode || null;
        lazyDataSend.pCode = lastSearch.pcode || null;
        lazyDataSend.b2b = lastSearch.b2b || null;
        lazyDataSend.roomRequest = [];
        lazyDataSend.b2BData = lastSearch.b2BData || null;
        lazyDataSend.destinationtype = "destination";
        lazyDataSend.contracts = lastSearch.contracts;
        lazyDataSend.rates = lastSearch.rates;
        lazyDataSend.searchLandingExpress = lastSearch.searchLandingExpress;
        lazyDataSend.b2eEmployee = lastSearch.isB2EEmployee || null;
        lazyDataSend.b2eFriends = lastSearch.isB2EFamily || null;
        lastSearch.isPromo = lastSearch.pcode ? true : false;
        if (!$.isEmptyObject(lastSearch.occupancy)) {
            lastSearch.numTotalAdults = 0;
            lastSearch.numTotalChildren = 0;
            lastSearch.numTotalBabies = 0;
            $.each(lastSearch.occupancy, function(i, room) {
                var lazyRoomItem = {
                    numberOfAdults: room.adults,
                    numberOfChildren: room.children,
                    numberOfBabies: room.babies
                };
                lazyDataSend.roomRequest.push(lazyRoomItem);
                lastSearch.numTotalAdults += parseInt(room.adults);
                lastSearch.numTotalChildren += parseInt(room.children);
                lastSearch.numTotalBabies += parseInt(room.babies);
            });
        }
        return deferred.resolve();
    }
    return {
        callTrustYouReviews: callTrustYouReviews,
        callTripAdvisorReviews: callTripAdvisorReviews,
        getLastSearch: getLastSearch,
        callLoading: callLoading,
        getNoPromoUrl: getNoPromoUrl
    };
}();

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
    return typeof obj;
} : function(obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var mResultsHotelCards = function() {
    var $resultsView = null;
    var messageModals = null;
    var hotelLists = null;
    var $bookingModal = null;
    var $bookingModalTrigger = null;
    var availableHotels = null;
    var noPromoUrl = null;
    var $togglemapBtns = null;
    var $mapWrapper = null;
    var $hotelListWrapper = null;
    var Filter = null;
    var maxPrice = 0;
    var maxDistance = null;
    var hotelsData = null;
    function init(view, filter) {
        $resultsView = view;
        Filter = filter;
        $bookingModal = $resultsView.find("#modal-hotel-booking");
        $bookingModalTrigger = $resultsView.find(".single-banner [data-target='#modal-hotel-booking']");
        $togglemapBtns = $resultsView.find(".toggleMap");
        $mapWrapper = $resultsView.find(".m-hotel-map.inline-map");
        $hotelListWrapper = $resultsView.find(".m-hotel-list ");
        messageModals = {
            modals: {
                $error: $resultsView.find("#modal-error"),
                $success: $resultsView.find("#modal-success"),
                $loading: $resultsView.find("#loading-modal-results")
            },
            messages: {
                errorJava: "Ha ocurrido un error, consulte con su administrador"
            }
        };
        hotelsData = {
            $view: $resultsView.find(".m-hotel-search"),
            get $hotels() {
                return this.$view.find(".m-hotel-box");
            },
            get $availablePromoHotels() {
                return this.lists.$availablePromo.find(".m-hotel-box");
            },
            get $nearbyPromoHotels() {
                return this.lists.$nearbyPromo.find(".m-hotel-box");
            },
            get $availableHotels() {
                return this.lists.$available.find(".m-hotel-box");
            },
            get $nearbyHotels() {
                return this.lists.$nearby.find(".m-hotel-box");
            },
            get $notAvailableHotels() {
                return this.lists.$notAvailable.find(".m-hotel-box");
            },
            get $notAvailableNearbyHotels() {
                return this.lists.$notAvailableNearby.find(".m-hotel-box");
            },
            lists: {
                get $availablePromo() {
                    return hotelsData.$view.find('[data-hotels-group="promo"]');
                },
                get $nearbyPromo() {
                    return hotelsData.$view.find('[data-hotels-group="promo-near"]');
                },
                get $available() {
                    return hotelsData.$view.find('[data-hotels-group="stock"]');
                },
                get $nearby() {
                    return hotelsData.$view.find('[data-hotels-group="stock-near"]');
                },
                get $notAvailable() {
                    return hotelsData.$view.find('[data-hotels-group="no-stock"]');
                },
                get $notAvailableNearby() {
                    return hotelsData.$view.find('[data-hotels-group="no-stock-near"]');
                }
            }
        };
        if (typeof pageData.javaError !== "undefined" && pageData.javaError === "true") {
            _showJavaError();
            return;
        }
        $resultsView.on("setHotelsDone", function(ev, type) {
            $(this).addClass("loaded " + type);
        });
        hotelsData.$view.on("filterHotelsDone", function() {
            var visibleHotels = Filter.getShowPois();
            mHotelMapInline.toggleMarkers(visibleHotels);
        });
        if (utils.isValidDates()) {
            console.log("fechas validas");
            _initializePage();
        } else {
            _showError("bookingDatesError");
        }
        messageModals.modals.$error.on("hidden.bs.modal", function() {
            window.location.href = "/";
        });
        $togglemapBtns.on("click", _onClickToggleMap);
    }
    function _initializePoiFilter() {
        var data = {
            pois: [],
            poisData: [],
            hotelPois: null,
            maxRange: 0
        };
        $.each(hotelsData.$hotels, function(index, hotel) {
            var $hotel = $(hotel);
            data.hotelPois = $hotel.data("pois");
            _setAvailablePois(data);
        });
        Filter.initSelectLocation(data.poisData);
        Filter.maxRange("distance", data.maxRange);
    }
    function _setAvailablePois(data) {
        var distance;
        data.hotelPois.map(function(obj) {
            distance = Math.round(obj.distance) + 1;
            if (data.pois.indexOf(obj.value) < 0) {
                data.pois.push(obj.value);
                data.poisData.push({
                    text: obj.location,
                    value: obj.value,
                    isCenter: obj.isCityCenter
                });
            }
            if (distance > data.maxRange) {
                data.maxRange = distance;
            }
        });
    }
    function _onClickToggleMap() {
        var $this = $(this);
        var isActive = !$this.hasClass("collapsed");
        $mapWrapper.toggle(!isActive);
        _setToogleMapsText();
    }
    function _setToogleMapsText(data) {
        $.each($togglemapBtns, function(index, elem) {
            var $this = $(elem);
            $this.toggleClass("collapsed");
        });
    }
    function _initializePage() {
        if (typeof bookingUtag !== "undefined") {
            console.log("inicializamos booking utag ");
            bookingUtag.init();
        }
        landingServices.getLastSearch().then(function() {
            var availableRatings = [];
            _fillLastSearch();
            _getAvailableHotelsData();
            _initializePoiFilter();
            _setHotelsInfo();
            utils.initTipAdvisorWidgets().then(function(response) {
                availableRatings = _getAvailableRatings(response);
                Filter.showRating(availableRatings);
            }, function(error) {
                console.log("error trip", error);
                Filter.showRating(availableRatings);
            });
        }, function() {
            console.log("toma reject");
        });
    }
    function _setHotelsInfo() {
        $.each(hotelsData.lists, function(index, list) {
            list.on("setHotelDone", function() {
                var $this = $(this);
                $this.toggle($this.find(".m-hotel-box").length > 0);
            });
        });
        $.each(hotelsData.$hotels, function(index, hotel) {
            var $hotel = $(hotel);
            var $btn = $hotel.find(".check-availability");
            if (lastSearch.voucherCode) {
                $btn.data("voucherCode", lastSearch.voucherCode).attr("data-voucherCode", lastSearch.voucherCode);
            }
        });
    }
    function _getAvailableRatings(ratings) {
        var availableRatings = [];
        var rating;
        for (var x = 0; x < ratings.length; x++) {
            rating = Math.floor(ratings[x].rate);
            if (availableRatings.indexOf(rating) < 0) {
                availableRatings.push(rating);
            }
        }
        return availableRatings;
    }
    function _fillLastSearch() {
        var finiOutput = null;
        var foutOutput = null;
        if (!$.isEmptyObject(lastSearch)) {
            if (lastSearch.fini && lastSearch.fout) {
                finiOutput = lastSearch.fini;
                foutOutput = lastSearch.fout;
                if (typeof Dates != "undefined" && Dates.isChinese) {
                    finiOutput = moment(lastSearch.fini, Dates.pattern).format(Dates.patternCn);
                    foutOutput = moment(lastSearch.fout, Dates.pattern).format(Dates.patternCn);
                }
                lastSearch.finiParsed = finiOutput;
                lastSearch.foutParsed = foutOutput;
                pageData.filterStars = lastSearch.filterStars;
                pageData.filterServices = lastSearch.filterServices;
            }
        }
    }
    function _getAvailableHotelsData() {
        var url;
        var promise;
        if (lazyDataSend && !$.isEmptyObject(lazyDataSend.hotels) && pageData.destinoCode && JSON.stringify(lazyDataSend)) {
            promise = $.ajax({
                type: "POST",
                url: "/rest/landing/avail/" + pageData.destinoCode,
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json"
                },
                data: JSON.stringify(lazyDataSend),
                dataType: "json",
                cache: false
            });
            promise.then(function(response) {
                try {
                    if (!$.isEmptyObject(response)) {
                        availableHotels = response;
                        pageData.availData = true;
                        _setAvailableHotelsData();
                    } else {
                        pageData.availData = false;
                        _setHotelsAsNoAvailables();
                        console.log("resturn Ajax: No Availability page");
                    }
                } catch (error) {
                    console.log("Ajax done but error: ", error);
                    _showError("tcmInternalError");
                }
            }, function(error) {
                try {
                    var responseParsed = JSON.parse(error.responseText);
                    console.log("Fail call: ", error.status, error.responseText, _typeof(error.responseText));
                    if ((typeof responseParsed === "undefined" ? "undefined" : _typeof(responseParsed)) === "object" && responseParsed.message) {
                        _showError(null, responseParsed.message);
                    } else {
                        _showError("tcmInternalError");
                    }
                } catch (error) {
                    console.log("Ajax fail but error on the code: ", error);
                    _showError("tcmInternalError");
                }
            });
        } else {
            if (!pageData.withDates) {
                console.log("Landing without dates");
                _setPageAsNoDates();
            } else {
                console.log("Error: There is no hotels to send");
                _showError("tcmInternalError");
            }
        }
    }
    function _setPageAsNoDates() {
        $.each(hotelsData.$hotels, function(index, hotel) {
            var $hotel = $(hotel);
            _setupHotelMarker($hotel);
        });
        _pageInitActions();
    }
    function _setHotelsAsNoAvailables() {
        var hotelGroups = hotelsData.lists.$available.find(".m-hotel-box").add(hotelsData.lists.$nearby.find(".m-hotel-box"));
        $.each(hotelGroups, function(index, hotel) {
            var $hotel = $(hotel);
            var hotelElements = {
                $hotel: $hotel,
                $btn: $hotel.find(".btn-loader"),
                $availableData: $hotel.find(".availableData"),
                $noAvailableData: $hotel.find(".noAvailableData")
            };
            setNoAvailabilityHotel(hotelElements);
        });
        _pageInitActions();
    }
    function _setAvailableHotelsData() {
        var hotelGroups = null;
        if (availableHotels) {
            hotelGroups = hotelsData.lists.$available.find(".m-hotel-box").add(hotelsData.lists.$nearby.find(".m-hotel-box"));
            if (lastSearch.isPromo) {
                noPromoUrl = landingServices.getNoPromoUrl();
            }
            $.each(hotelGroups, function(index, hotel) {
                var $hotel = $(hotel);
                _setHotelData($hotel);
            });
            Filter.maxRange("price", maxPrice + 1);
            $.each(hotelsData.lists, function(index, list) {
                list.trigger("setHotelDone");
            });
            _pageInitActions();
            mHotelMapInline.init($(".m-hotel-map.inline-map .hotel-map"));
        }
    }
    function _pageInitActions() {
        var availClass = pageData.availData ? " avail" : "";
        var dateClass = pageData.withDates ? " withDates" : " withoutDates";
        var promoClass = "";
        var servarDayClass = lastSearch.numNights > 1 ? " severalDays" : "";
        if (lastSearch.isPromo) {
            promoClass = " promo";
            hotelsData.lists.$nearby.remove();
            hotelsData.lists.$notAvailableNearby.remove();
        }
        $.each(hotelsData.lists, function(index, hotelGroup) {
            var visibleHotels = hotelGroup.find(".m-hotel-box").not("is-hidden").length;
            visibleHotels > 0 ? hotelGroup.show() : hotelGroup.hide();
        });
        $resultsView.trigger("setHotelsDone", [ "" + availClass + dateClass + promoClass + servarDayClass, hotelsData ]);
        _setLazyAnalyticsData();
    }
    function _setLazyAnalyticsData() {
        var $hotel;
        var $hotelsWrapper;
        var availInfo;
        var noAvailableData = hotelsData.$availableHotels.length <= 0 && hotelsData.$nearbyHotels.length <= 0;
        console.log("hoteles disponibles", hotelsData.$availableHotels);
        if (typeof utag_data !== "undefined") {
            $.each(hotelsData.$hotels, function(index, hotel) {
                $hotel = $(hotel);
                $hotelsWrapper = $hotel.parents(".m-hotel-list ");
                availInfo = $hotelsWrapper.data("hotels-group").indexOf("no-stock") >= 0 ? "-no available" : "-available";
                utag_data.busqListado += "" + (utag_data.busqListado ? "," : "") + $hotel.data("backcode") + availInfo;
                utag_data.busqHSinDispo = hotelsData.$notAvailableHotels.length === 0 ? "" : hotelsData.$notAvailableHotels.length + "";
                utag_data.busqSinDispo = noAvailableData ? "No availability" : "";
                utag_data.search.hotelsList += "" + (utag_data.search.hotelsList ? "," : "") + $hotel.data("backcode") + availInfo;
                utag_data.search.results = pageData.totalHotels;
                utag_data.search.hWithoutAvailability = utag_data.busqHSinDispo;
                utag_data.search.withoutAvailability = utag_data.busqSinDispo;
                if ($hotel.find("[data-preciodia]").length > 0) {
                    var precioDia = $hotel.data("price-night");
                    if (parseFloat(precioDia)) {
                        utag_data.products_price.push(parseFloat(precioDia).toFixed(2));
                    } else {
                        utag_data.products_price.push("no-avail");
                    }
                }
            });
            trackData.sendUtagData();
        }
    }
    function _setHotelData($hotel) {
        var backcode = $hotel.data("backcode");
        var hotelData = null;
        var price = null;
        var hotelElements = {
            $hotel: $hotel,
            $priceNightWrapper: $hotel.find(".night"),
            $priceNight: $hotel.find(".night-amount"),
            $price: $hotel.find(".totalPrice"),
            $currency: $hotel.find(".currency"),
            $meanplan: $hotel.find(".meanplan"),
            $roomname: $hotel.find(".roomtype"),
            $capacity: $hotel.find(".roomcapacity"),
            $btn: $hotel.find(".btn"),
            $form: $hotel.find("form"),
            $availableData: $hotel.find(".availableData"),
            $noAvailableData: $hotel.find(".noAvailableData"),
            $loading: $hotel.find(".m-hotel-box-loading"),
            $info: $hotel.find(".m-hotel-box-info-actions"),
            $moreInfo: $hotel.find(".m-hotel-box-show"),
            $features: $hotel.find(".features"),
            get $priceCurrency() {
                return this.$price.siblings(".currency");
            }
        };
        if (availableHotels[backcode]) {
            hotelData = availableHotels[backcode];
            hotelData.available = true;
            hotelData.$hotel = $hotel;
            price = Math.round(hotelData.price.priceTotal);
            if (hotelData.price) {
                actualDivisa = hotelData.currency || "EUR";
            }
            hotelElements.$priceNight.html(hotelData.price.pricePerDay);
            hotelElements.$price.html(hotelData.price.priceTotal);
            hotelElements.$currency.html(hotelData.price.currency);
            hotelElements.$meanplan.html(hotelData.mealRatePlanTitle);
            hotelElements.$roomname.html(hotelData.roomTitle);
            hotelElements.$form.on("submit", {
                hotelData: hotelData
            }, function(ev) {
                messageModals.modals.$loading.modal({
                    show: true,
                    backdrop: "static",
                    keyboard: false
                });
            });
            if (hotelData.promo) {
                _setPromoHotel(hotelElements);
            } else {
                if (lastSearch.isPromo && noPromoUrl) {
                    hotelElements.$form.attr("action", noPromoUrl);
                }
            }
            hotelElements.$hotel.data("price", hotelData.price.priceTotal).attr("data-price", hotelData.price.priceTotal);
            hotelElements.$hotel.data("price-night", hotelData.price.pricePerDay).attr("price-night", hotelData.price.pricePerDay);
            hotelElements.$hotel.data("euro", hotelData.price.priceTotal).attr("data-euro", hotelData.price.priceTotal);
            hotelElements.$hotel.data("currency", hotelData.price.currency).attr("data-currency", hotelData.price.currency);
            maxPrice = price > maxPrice ? price : maxPrice;
            _setupHotelMarker($hotel, hotelData);
        } else {
            setNoAvailabilityHotel(hotelElements);
        }
        if (lastSearch.groupon) {
            hotelElements.$features.hide();
            hotelElements.$priceCurrency.hide();
            hotelElements.$price.hide();
        }
    }
    function _setupHotelMarker($hotel, hotelData) {
        var markerIndex = $hotel.data("recommend");
        var markers = MapsData.data[0];
        var marker = markers[markerIndex];
        var regex;
        var hotelIconsType = hotelData && hotelData.available ? Pines.hotel : Pines.hotelNoDispo;
        if (marker) {
            if (hotelData) {
                if (hotelData.price.priceTotal && !hotelData.price.pricePerDay) {
                    hotelData.price.pricePerDay = hotelData.price.priceTotal;
                } else if (!hotelData.price.priceTotal && hotelData.price.pricePerDay) {
                    hotelData.price.priceTotal = hotelData.price.pricePerDay;
                }
            }
            regex = /{{([priceTotal}]+)\}}/;
            if (hotelData && hotelData.price.priceTotal) {
                marker.info = marker.info.replace(regex, hotelData.price.priceTotal + " " + hotelData.price.currency);
            } else {
                marker.info = marker.info.replace(regex, "");
                marker.info = marker.info.replace(/class="price-total"/, 'class="price-total hidden"');
            }
            regex = /{{([priceDay}]+)\}}/;
            if (hotelData && hotelData.price.pricePerDay && hotelData.price.pricePerDay !== hotelData.price.priceTotal) {
                marker.info = marker.info.replace(regex, hotelData.price.pricePerDay + " " + hotelData.price.currency);
            } else {
                marker.info = marker.info.replace(regex, "");
                marker.info = marker.info.replace(/class="price-day"/, 'class="price-day hidden"');
            }
            if (lastSearch.groupon) {
                marker.info = marker.info.replace(/class="price-total"/, 'class="price-total hidden"');
            }
            if (lastSearch.numNights <= 1) {
                marker.info = marker.info.replace(/class="price-day"/, 'class="price-day hidden"');
            }
            marker.icon = hotelIconsType[marker.iconKey] ? hotelIconsType[marker.iconKey] : marker.icon;
        }
    }
    function _setPromoHotel(hotelElements) {
        var $hotelsGroup = hotelElements.$hotel.data("group") === "nearby" ? hotelsData.lists.$nearbyPromo : hotelsData.lists.$availablePromo;
        var $hotelDetached = hotelElements.$hotel.detach();
        $hotelsGroup.append($hotelDetached);
        if ($hotelsGroup.is(":hidden")) {
            $hotelsGroup.show();
        }
    }
    function setNoAvailabilityHotel(hotelElements) {
        var $hotelDetached;
        var $hotelsGroup = hotelElements.$hotel.data("group") === "nearby" ? hotelsData.lists.$notAvailableNearby : hotelsData.lists.$notAvailable;
        hotelElements.$noAvailableData.show();
        hotelElements.$availableData.hide();
        if (!hotelElements.$hotel.data("virtual")) {
            $hotelDetached = hotelElements.$hotel.detach();
            $hotelsGroup.append($hotelDetached);
        }
        _setupHotelMarker(hotelElements.$hotel);
    }
    function _showError(msgType, message) {
        if (msgType && Labels[msgType]) {
            messageModals.modals.$error.find(".symbol-text p").text(Labels[msgType]);
        } else if (message) {
            messageModals.modals.$error.find(".symbol-text p").text(message);
        }
        messageModals.modals.$error.modal("show");
    }
    function _showJavaError() {
        messageModals.modals.$error.find(".symbol-text p").text(Labels.javaError);
        if (pageData.urlError && typeof pageData.urlError !== "undefined") {
            messageModals.modals.$error.modal({
                backdrop: "static",
                keyboard: true,
                show: true
            });
        } else {
            messageModals.modals.$error.modal("show");
        }
    }
    return {
        init: init
    };
}();

"use strict";

var mMESearchBar = function() {
    var $mMESearchBarView = null;
    var $formData = null;
    var fieldSearchValueList = null;
    function init(view) {
        $mMESearchBarView = view;
        $formData = {
            $form: $mMESearchBarView.find("#form_datos"),
            get $fieldSearch() {
                return this.$form.find("#fieldSearch");
            },
            get $meetingsNumber() {
                return this.$form.find("#nsalones");
            },
            get $assistansNumber() {
                return this.$form.find("#nasistentes");
            },
            get $roomsNumber() {
                return this.$form.find("#nhabitaciones");
            },
            get $eventType() {
                return this.$form.find("#eventType");
            },
            get $locationCode() {
                return this.$form.find("#locationCode");
            },
            get $searchStringID() {
                return $("#searchStringID");
            }
        };
        $formData.$form.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                fieldSearchValueList = $formData.$fieldSearch.val().split(" ");
                $formData.searchStringID.val($formData.$fieldSearch.val());
                utils.callTrackForms("success", "miceHomeForm", "success");
                if ($formData.$locationCode.attr("name") === "") {
                    $formData.$locationCode.attr("name", fieldSearchValueList[fieldSearchValueList.length - 1] + "Id");
                }
                if (where === "home") {
                    trackData.trackMiceSearch(page_section, $formData.$fieldSearch.val(), $formData.$roomsNumber.val(), $formData.$assistansNumber.val(), $formData.$meetingsNumber.val(), eventType.val());
                } else if (where === "hotel") {
                    trackData.trackMiceSearchInResult(page_section, $formData.$fieldSearch.val(), $formData.$roomsNumber.val(), $formData.$assistansNumber.val(), $formData.$meetingsNumber.val(), eventType.val());
                } else if (where == "destiny") {
                    trackData.trackMiceSearchInDestiny(page_section, $formData.$fieldSearch.val(), $formData.$fieldSearch.val(), $formData.$roomsNumber.val(), $formData.$assistansNumber.val(), $formData.$meetingsNumber.val(), eventType.val());
                }
            }
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($("#me-search-bar").length) {
        mMESearchBar.init($("#me-search-bar"));
    }
});

"use strict";

var mSearchBar = function() {
    var $mSearchBarView = null;
    var $searchForm = null;
    var targetElement = null;
    var $summaryLink = null;
    var $summaryContainer = null;
    var $formContent = null;
    function init(view) {
        $mSearchBarView = view;
        $searchForm = $mSearchBarView.find("#searchBarModifyForm");
        targetElement = $($mSearchBarView)[0].querySelector(".option-list");
        $summaryLink = $mSearchBarView.find(".search-bar-content.summary").find(".summary-link");
        $summaryContainer = $mSearchBarView.find(".search-bar-content.summary");
        $formContent = $mSearchBarView.find('.search-bar-content:not(".summary")');
        _searchBarLocation();
        _searchBarCalendar();
        _searchBarOccupancy();
        if ($summaryContainer) {
            _fillSummaryData(function() {
                $($summaryContainer).find(".summary-content").addClass("is-show");
                $($summaryContainer).find(".spinner").hide();
            });
        }
        if ($mSearchBarView.length && $mSearchBarView.hasClass("sticky-top")) {
            _initAffix();
            $(window).on("resize", function() {
                _resetAffix();
            });
        }
        $($summaryLink).click(function(e) {
            var positionTop = null;
            $($formContent).toggleClass("is-open");
            if ($($formContent).hasClass("is-open")) {
                _summaryOpen(true);
                positionTop = $summaryLink.offset().top;
            } else {
                _summaryOpen(false);
                positionTop = $summaryContainer.offset().top - 10;
            }
            $("html, body").animate({
                scrollTop: positionTop
            }, 250);
        });
    }
    function _summaryOpen(state) {
        if (!state) {
            $($summaryLink).removeClass("is-open");
            $($formContent).removeClass("is-open");
        } else {
            $($summaryLink).addClass("is-open");
            $($formContent).addClass("is-open");
        }
    }
    function _fillSummaryData(_callback) {
        var data = {
            location: $($formContent).find(".location .ui-autocomplete-group").val(),
            checkin: $($formContent).find(".js-selected-checkin").val(),
            checkout: $($formContent).find(".js-selected-checkout").val(),
            occupancy: $($formContent).find(".m-occupancy .optionRooms").val(),
            promoCode: $($formContent).find(".voucher-code input").val()
        };
        var nigth = moment(data.checkout, "DD/MM/YYYY").diff(moment(data.checkin, "DD/MM/YYYY"), "days");
        if (data.checkin) {
            $($formContent).find(".js-selected-checkin").prev().addClass("focus");
            $($formContent).find(".js-selected-checkout").prev().addClass("focus");
        }
        $($summaryContainer).find(".summary-location").text(data.location);
        $($summaryContainer).find(".summary-checkin").text(data.checkin);
        $($summaryContainer).find(".summary-checkout").text(data.checkout);
        $($summaryContainer).find(".summary-night").text(nigth > 1 ? nigth + " noches" : nigth + " noche");
        $($summaryContainer).find(".summary-occupancy").text(data.occupancy);
        $($summaryContainer).find(".summary-promocode").text(data.promoCode);
        _callback();
    }
    function _initAffix() {
        var offsetTop = $mSearchBarView.offset().top;
        $mSearchBarView.affix({
            offset: {
                top: offsetTop
            }
        });
    }
    function _resetAffix() {
        $(window).off(".affix");
        $mSearchBarView.removeData("bs.affix").removeClass("affix affix-top affix-bottom");
        _initAffix();
    }
    function _searchBarLocation() {
        $($mSearchBarView).find(".location").each(function(index, element) {
            var location = {
                container: $(this),
                input: $(this).find(".input-group input"),
                dropdown: $(this).find(".autocomplete-results"),
                isMobile: false
            };
            setMobile();
            $(window).resize(function() {
                setMobile();
            });
            function setMobile() {
                window.matchMedia("(max-width: 767px)").matches ? location.isMobile = true : location.isMobile = false;
            }
            $(window).scroll(function() {
                locationPosition();
            });
            $(location.input).on("keyup", function() {
                setTimeout(function() {
                    locationPosition();
                }, 500);
            });
            function locationPosition() {
                !location.isMobile ? dropdownPosition(location.input, location.dropdown, 20) : $(location.dropdown).css("top", "auto");
            }
        });
    }
    function _searchBarCalendar() {
        $($mSearchBarView).find(".m-calendar-booking").each(function(index, calendar) {
            $(calendar).calendarBooking();
        });
        $(".js-calendar-booking-input, .js-calendar-booking-input input").on("click", function(e) {
            var dropdownOccupancy = $(this).closest(".m-search-bar").find(".m-occupancy-wrapper");
            if ($(dropdownOccupancy).hasClass("is-open")) {
                $(dropdownOccupancy).removeClass("is-open");
            }
        });
        $($mSearchBarView).find(".m-calendar-booking").each(function(index, element) {
            var calendar = {
                container: $(this),
                input: $(this).find(".js-calendar-booking-input"),
                dropdown: $(this).find(".js-calendar-booking-dropdown"),
                isMobile: false
            };
            setMobile();
            $(window).resize(function() {
                setMobile();
            });
            function setMobile() {
                window.matchMedia("(max-width: 767px)").matches ? calendar.isMobile = true : calendar.isMobile = false;
            }
            $(window).scroll(function() {
                calendarPosition();
            });
            function calendarPosition() {
                !calendar.isMobile ? dropdownPosition(calendar.input, calendar.dropdown, 20) : $(calendar.dropdown).removeAttr("style");
            }
        });
    }
    function _searchBarOccupancy() {
        var occupancy = $($mSearchBarView).find(".m-occupancy");
        if (occupancy.length) {
            reservationOccupancyNew.init();
        }
        $($mSearchBarView).find(".m-occupancy").each(function(index, element) {
            var occupancy = {
                container: $(this),
                input: $(this).find(".form-group"),
                dropdown: $(this).find(".m-occupancy-wrapper"),
                isMobile: false
            };
            var infoInput = occupancy.input.find("input.optionRooms");
            setMobile();
            $(window).resize(function() {
                setMobile();
            });
            function setMobile() {
                window.matchMedia("(max-width: 767px)").matches ? occupancy.isMobile = true : occupancy.isMobile = false;
            }
            function positionOccupancy() {
                !occupancy.isMobile ? dropdownPosition(occupancy.input, occupancy.dropdown, 20) : $(occupancy.dropdown).removeAttr("style");
            }
            $(occupancy.input).on("click", function(e) {
                var isOpen = $(occupancy.dropdown).hasClass("is-open");
                var alertLanguage = $(".m-language-edition");
                $(".m-occupancy-wrapper").removeClass("is-open");
                if (!isOpen) {
                    $(occupancy.dropdown).addClass("is-open");
                    if (occupancy.isMobile) {
                        this.blur();
                        var headerMobile = $mSearchBarView.find(".option-header").innerHeight();
                        var footerMobile = $mSearchBarView.find(".occupancy-footer").innerHeight();
                        var ammount = headerMobile + footerMobile + 60;
                        $mSearchBarView.find(".option-list").css({
                            height: "calc(100vh - " + ammount + "px"
                        });
                        bodyScrollLock.disableBodyScroll(targetElement);
                    }
                    if (alertLanguage.length) $(alertLanguage).hide();
                    positionOccupancy();
                } else {
                    infoInput.val(infoInput.data("info"));
                    occupancy.input.find("label").addClass("focus");
                }
                var dropdownCalendar = $(this).closest(".m-search-bar").find(".js-calendar-booking-dropdown");
                if ($(dropdownCalendar).hasClass("is-open")) {
                    $(dropdownCalendar).removeClass("is-open");
                }
            });
            $(window).scroll(function() {
                positionOccupancy();
            });
            $(document).on("click", function(e) {
                var isOpen = $(occupancy.dropdown).hasClass("is-open");
                var inDropdown = $(e.target).closest(".m-occupancy-wrapper").length;
                var inTrigger = $(e.target).closest(".m-occupancy").find(".form-group").length;
                var idModalError = [ "modal-max-rooms" ];
                var isErrorModal = idModalError.includes($(e.target).closest(".modal").attr("id"));
                if (isOpen && !inTrigger && !inDropdown && !isErrorModal) {
                    $(occupancy.dropdown).removeClass("is-open");
                    infoInput.val(infoInput.data("info"));
                    occupancy.input.find("label").addClass("focus");
                }
            });
            $(occupancy.dropdown).find(".room-apply").click(function(e) {
                e.preventDefault();
                if (occupancy.isMobile) {
                    bodyScrollLock.enableBodyScroll(targetElement);
                }
                $(occupancy.dropdown).removeClass("is-open");
                infoInput.val(infoInput.data("info"));
                occupancy.input.find("label").addClass("focus");
            });
            $(occupancy.dropdown).find(".add-room-link").click(function(e) {
                positionOccupancy();
            });
            $(occupancy.dropdown).find(".delete-room .nh-ic-close").click(function(e) {
                setTimeout(function() {
                    positionOccupancy();
                }, 505);
            });
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-search-bar").length) {
        mSearchBar.init($(".m-search-bar"));
    }
});

"use strict";

var v2OnloadCallback = function v2OnloadCallback() {
    var recaptchas = $(".g-recaptcha");
    if (recaptchas.length) {
        console.log("grecaptcha v2 is ready!");
        recaptchas.each(function(index, el) {
            var widgetId = grecaptcha.render(el, {
                sitekey: recaptchaV2Key
            });
            $(this).attr({
                "data-widget-id": "g-recaptcha-" + widgetId,
                "data-widget-index": widgetId
            });
        });
    }
};

var v3OnloadCallback = function v3OnloadCallback() {
    var recaptchaV3fields = $(".response-recaptcha");
    if (recaptchaV3fields.length) {
        console.log("grecaptcha v3 is ready!");
        $("body").addClass("show-grecaptcha-badge");
        recaptchaV3fields.each(function() {
            var $this = $(this);
            grecaptcha.ready(function() {
                grecaptcha.execute(recaptchaV3Key, {
                    action: "HomePage"
                }).then(function(token) {
                    $this.val(token);
                });
            });
        });
    }
};

"use strict";

var mGroupCardsNew = function() {
    var $mGroupCardView = null;
    var $groupCardsSlide = null;
    var $groupCards = null;
    var $groupCardsSlide = null;
    var $card = null;
    var $photoCard = null;
    var $photoCardSlide = null;
    var $moreInfo = null;
    var defaultSliderConfig = {
        dots: false,
        infinite: true,
        fade: false,
        draggable: false,
        prevArrow: '<span class="slick-arrow slick-prev nh-ic-chevron"></span>',
        nextArrow: '<span class="slick-arrow slick-next nh-ic-chevron"></span>',
        lazyLoad: "ondemand"
    };
    function init(view) {
        $mGroupCardView = view;
        $groupCards = $mGroupCardView.find(".group-cards");
        $groupCardsSlide = $mGroupCardView.find(".group-cards-slick");
        $card = $mGroupCardView.find(".card");
        $photoCard = $card.find(".card-header");
        $photoCardSlide = $card.find(".card-header-slide");
        $moreInfo = $card.find(".card-body .more-info");
        $moreInfo.on("click", _toggleMorelInfo);
        $.each($photoCard, function(index, header) {
            var $header = $(header);
            var sliderConfig = null;
            var isParentSlider = $header.parents(".group-cards-slick").length;
            if (isParentSlider) {
                sliderConfig = $.extend({}, defaultSliderConfig, {
                    touchMove: false
                });
            } else {
                sliderConfig = defaultSliderConfig;
            }
            $header.slick(sliderConfig);
        });
        if ($groupCardsSlide.length) {
            $groupCardsSlide.slick({
                centerMode: true,
                centerPadding: "20px",
                slidesToShow: 1,
                dots: true,
                infinite: false,
                fade: false,
                arrows: false,
                lazyLoad: "ondemand"
            });
        }
    }
    function _toggleMorelInfo(ev) {
        var $this = $(this);
        var panel = $($this.attr("href"));
        var isOpen = panel.is(".collapse.in");
        var text = isOpen ? $this.data("closed-header-text") : $this.data("open-header-text");
        ev.preventDefault();
        $this.text(text);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-group-cards").length) {
        mGroupCardsNew.init($(".m-group-cards"));
    }
});

"use strict";

var mHotelBox = function() {
    var $mHotelBoxView = null;
    var $card = null;
    var $photoCardSlide = null;
    var defaultSliderConfig = {
        dots: false,
        infinite: true,
        fade: false,
        draggable: true,
        touchMove: true,
        prevArrow: '<span class="slick-arrow slick-prev nh-ic-chevron"></span>',
        nextArrow: '<span class="slick-arrow slick-next nh-ic-chevron"></span>',
        lazyLoad: "ondemand"
    };
    function init(view) {
        $mHotelBoxView = view;
        $card = $mHotelBoxView.find(".card");
        $photoCardSlide = $card.find(".card-header-slide");
        $photoCardSlide.slick(defaultSliderConfig);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-hotel-box").length) {
        mHotelBox.init($(".m-hotel-box"));
    }
});

"use strict";

var mLoginFormHeader = function() {
    var $loginForms;
    function init() {
        var formsData = {
            loginFormV2: {
                $userInput: "#login-email",
                $passwordInput: "#login-password",
                $userBlockedContent: ".blocked-user",
                $userUnblockedContent: ".unblocked-user",
                $errorLogin: ".js-error-login"
            },
            loginFormMobv2: {
                $userInput: "#emailMob",
                $passwordInput: "#passwordMob",
                $userBlockedContent: ".blocked-user",
                $userUnblockedContent: ".unblocked-user",
                $errorLogin: ".js-error-login"
            }
        };
        $loginForms = $("#loginFormV2, #loginFormMobv2");
        $.each($loginForms, function() {
            var $this = $(this);
            var formId = this.id;
            var formData = {
                $form: $this,
                $userInput: $this.find(formsData[formId].$userInput),
                $passwordInput: $this.find(formsData[formId].$passwordInput),
                $userBlockedContent: $this.find(formsData[formId].$userBlockedContent),
                $userUnblockedContent: $this.find(formsData[formId].$userUnblockedContent),
                $errorMessage: $this.data("login-message-error") || "There was han error during login process",
                $errorLogin: $this.find(formsData[formId].$errorLogin)
            };
            $this.find(".js-recorverpass-modal-trigger").attr({
                "data-state": "recover",
                "data-toggle": "modal",
                "data-target": "#m-modal-login"
            });
            $this.validator({
                disable: false
            }).on("submit", {
                formData: formData
            }, _onLoginFormSubmit);
            formData.$userInput.on("change", {
                formData: formData
            }, _checkUserBlocked);
        });
    }
    function _checkUserBlocked(ev) {
        var $this = $(this);
        var $form = ev.data.formData.$form;
        var selectedUser = $form.data("selected-user");
        if (selectedUser) {
            if (selectedUser.isBlocked && selectedUser.value !== $this.val()) {
                ev.data.formData.$userBlockedContent.hide();
                ev.data.formData.$userUnblockedContent.show();
            } else if (selectedUser.isBlocked && selectedUser.value === $this.val()) {
                ev.data.formData.$userBlockedContent.show();
                ev.data.formData.$userUnblockedContent.hide();
            }
        }
    }
    function _onLoginFormSubmit(ev) {
        var $form = $(this);
        var formData = ev.data.formData;
        var loginData = {
            user: formData.$userInput.val(),
            password: formData.$passwordInput.val(),
            defaultErrorMsg: formData.$errorMessage
        };
        $form.data("selected-user", {
            isBlocked: false,
            value: loginData.user
        });
        toggleLoadingButton($form, true);
        if (ev.isDefaultPrevented()) {
            toggleLoadingButton($form, false);
        } else {
            ev.preventDefault();
            login.loginSSO(loginData).then(function(data) {
                return _onSubmitLoginSuccess(formData, data);
            }, function(data) {
                return _onSubmitLoginFailure(formData, data);
            });
            window.onbeforeunload = null;
        }
    }
    function _onSubmitLoginSuccess(formData, response) {
        formData.$form.data("selected-user", null);
        utils.callTrackForms("success", "loginRewardsForm", "success");
        window.location = response.targetUrl;
    }
    function _onSubmitLoginFailure(formData, error) {
        console.log("data", formData, error);
        toggleLoadingButton(formData.$form, false);
        formData.$userInput.closest(".form-group").addClass("has-error");
        formData.$passwordInput.closest(".form-group").addClass("has-error");
        formData.$userInput.closest(".form-group").removeClass("has-success");
        formData.$passwordInput.closest(".form-group").removeClass("has-success");
        if (error.type === "blocked") {
            formData.$userBlockedContent.show();
            formData.$userUnblockedContent.hide();
            formData.$errorLogin.hide();
            formData.$form.data("selected-user").isBlocked = true;
        } else {
            formData.$errorLogin.show();
            formData.$form.data("selected-user").isBlocked = false;
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($("#loginFormV2").length || $("#loginFormMobv2").length) {
        mLoginFormHeader.init();
    }
});

"use strict";

var checkout = function() {
    var checkoutView = $(".p-bp-checkout");
    var $checkoutForm = checkoutView.find("form.form-checkout");
    var $checkoutFormToSend = checkoutView.find("form.form-checkout-to-send");
    var $bottonSubmit = $checkoutForm.find("button[type=submit]");
    var $checkAccountRewards = $(".js-account-rewards");
    var needBillCheckbox = $checkoutForm.find("#need-bill");
    var $otherGuests = checkoutView.find("#other-guests");
    var $otherGuestsCheckbox = $otherGuests.find("#booking-other");
    var infoBillFieldset = $checkoutForm.find("#info-bill");
    var copyReservationInfoCheck = infoBillFieldset.find("#copy-info");
    var finalPrice = checkoutView.find(".js-final-price");
    var garanteeCheck = $checkoutForm.find(".js-garantee-modal");
    var modalGarantee = $("#modal-garantee");
    var needBillRequiredInputs;
    var billFormCountry = infoBillFieldset.find("#country-bill");
    var cifInput = infoBillFieldset.find("#pc-nif");
    var otherGuestsRequiredInputs = $checkoutForm.find("#other-guests :input[required]");
    var currentPage = null;
    var $garanteeReservationField = $("input#garantee-reservation");
    var personalizeRooms = $(".m-customize-room-detail").find(".panel .collapse");
    var $sessionExpireModal = $("#modal-session-expire");
    var $sessionExpireCounter = $sessionExpireModal.find(".js-time-counter");
    var $sessionExpireMessageModal = $("#modal-expired-message");
    var sessionExpired = false;
    var yourSearchSubmitButton = checkoutView.find("#your-search-submit-button");
    var customer = {
        hasCredit: false,
        isB2B: false,
        isAgency: false,
        isB2EFriends: false,
        isTravelAgent: false,
        isB2EEmployee: false
    };
    var timeIntervals = [];
    if (typeof pageData !== "undefined") {
        var userLoggedFields = {
            name: {
                class: ".js-logged-name",
                dataKey: "name",
                value: null
            },
            surname: {
                class: ".js-logged-surname",
                dataKey: "surname",
                value: null
            },
            mail: {
                class: ".js-logged-email",
                dataKey: pageData.isRewards === "true" ? "customerEmail" : "email",
                value: null
            },
            telephone: {
                class: ".js-logged-telephone",
                dataKey: "telephone",
                value: null
            },
            points: {
                class: ".js-logged-points",
                dataKey: "customerTotal",
                value: null
            },
            program: {
                class: ".js-logged-program",
                dataKey: "customerProgram",
                value: null
            },
            category: {
                class: ".js-logged-category",
                dataKey: "customerCategoryDescription",
                value: null
            },
            party: {
                class: "#inputPartyId",
                dataKey: "partyId",
                value: null
            }
        };
    }
    var guestFields;
    function init() {
        if (typeof pageData !== "undefined") {
            if (typeof pageData.javaError !== "undefined" && pageData.javaError === "true") {
                _showJavaError();
            }
            $.each(customer, function(key, value) {
                customer[key] = pageData[key] ? $.parseJSON(pageData[key]) : false;
            });
        }
        currentPage = _getCurrentPage();
        $checkoutForm.validator({
            disable: false,
            custom: {
                docNumber: _customDocumentNumberValidator
            }
        }).on("submit", _onFormSubmit);
        yourSearchSubmitButton.on("click", function(e) {
            $checkoutForm.submit();
        });
        needBillRequiredInputs = infoBillFieldset.find(":input[required]");
        $(".js-submit-form-checkout").on("click", function() {
            $checkoutForm.find('[type="submit"]').trigger("click");
        });
        _beforeUnloadSession();
        _setNationalityField();
        _initializeCounterClock();
        _handleSessionExpiredCountdownModal();
        timeIntervals.push(_initSessionExpiredCountdown());
        _setSessionExpiredCountdownModalTimeout();
        $checkAccountRewards.on("change", _toggleNationalityField);
        $garanteeReservationField.on("change", _guaranteeActions);
        $otherGuests.on("shown.bs.collapse hidden.bs.collapse", _onOtherGuestsChange);
        needBillCheckbox.on("change", _onNeedBillChange);
        infoBillFieldset.on("shown.bs.collapse hidden.bs.collapse", _onInfoBillToggles);
        copyReservationInfoCheck.on("change", _copyReservationData);
        $(".js-update-filter #payment-type").on("change", _toggleGuaranteeCheckbox);
        $checkoutForm.find("#agency-service").on("change", _setupAgencyService);
        billFormCountry.on("change", _onBillCountrySelectorChange);
        garanteeCheck.on("change", _onGaranteeChange);
        guestFields = {
            $otherGuestNameSurname: $checkoutForm.find("#name-surname-guest-checkout"),
            $guestNameSurname: $checkoutForm.find("#name-surname-checkout"),
            get guestNameSurnameFields() {
                var $guestNameSurnameFields = this.$otherGuestNameSurname.add(this.$guestNameSurname);
                return $guestNameSurnameFields;
            },
            $otherGuestName: $checkoutForm.find("#name-guest-checkout"),
            $guestName: $checkoutForm.find("#name-checkout"),
            get guestNameFields() {
                return this.$otherGuestName.add(this.$guestName);
            },
            $otherGuestSurname: $checkoutForm.find("#last-name-guest-checkout"),
            $guestSurname: $checkoutForm.find("#last-name-checkout"),
            get guestSurnameFields() {
                return this.$otherGuestSurname.add(this.$guestSurname);
            },
            $personalizeFirstRoomNameSurname: personalizeRooms.first().find("#room-01-name-surname-01"),
            $personalizeFirstRoomName: personalizeRooms.first().find("#room-01-name-01"),
            $personalizeFirstRoomSurname: personalizeRooms.first().find("#room-01-surname-01"),
            get $personalizeFirstRoomData() {
                return this.$personalizeFirstRoomNameSurname.add(this.$personalizeFirstRoomName).add(this.$personalizeFirstRoomSurname);
            }
        };
        _initIsCifRequired();
        _onNeedBillChange();
        _copyGuestDataInBillData();
        _toggleBillCompanyNameVisibility(false);
        _toggleBillUserNameVisiblity(true);
        _onGaranteeChange();
        _setGaranteeModal();
        guestFields.guestNameSurnameFields.on("focusout", {
            type: "NameSurname"
        }, _copyGuestData);
        guestFields.guestNameFields.on("focusout", {
            type: "Name"
        }, _copyGuestData);
        guestFields.guestSurnameFields.on("focusout", {
            type: "Surname"
        }, _copyGuestData);
    }
    function fillLoggedInfo(targetUrl) {
        var $input;
        var inputId;
        var $inputLabel;
        var $element;
        $.ajaxSetup({
            cache: false,
            async: false
        });
        $.ajax({
            method: "GET",
            url: urlGlobalConfig.host + targetUrl
        });
        return login.checkUserLogged().then(function(response) {
            $("body").addClass("logged");
            $.each(userLoggedFields, function(key, data) {
                $element = $(data.class).not(":input");
                $input = $checkoutForm.find("input" + data.class);
                inputId = $input.attr("id");
                $inputLabel = $checkoutForm.find('label[for="' + inputId + '"]');
                data.value = response.userData[data.dataKey];
                if ($input.length > 0 && data.value) {
                    $input.val(data.value).trigger("blur");
                    $inputLabel.addClass("focus");
                }
                if ($element.length > 0 && data.value) {
                    $element.text(data.value);
                }
            });
            if (response.userData.name && typeof pageData !== "undefined" && !$.parseJSON(pageData.isB2B) && !$.parseJSON(pageData.isB2EFriends)) {
                $("#name-checkout, #last-name-checkout").prop("disabled", true);
            }
            $(".join-rewards-logged-block").addClass("join-rewards-" + userLoggedFields.category.value.toLowerCase());
        }, function(error) {
            return error;
        });
    }
    function _beforeUnloadSession() {
        var fireEvent = true;
        var urlSend = currentPage === "flexible" ? "https://www.nh-hotels.com/booking/save-flexibleform-data" : "https://www.nh-hotels.com/booking/save-prepaidform-data";
        if (pageData.tcmFromErrorCode) {
            var splitt = pageData.tcmFromErrorCode.split("-");
            if (splitt[1] + "-" + splitt[2] === "82579-16") {
                fireEvent = false;
            }
        }
        if (fireEvent) {
            window.onbeforeunload = function() {
                if (typeof sessionDataSend !== "undefined") {
                    _getSessionData().then(function(response) {
                        sessionDataSend = response;
                        $.ajax({
                            type: "POST",
                            url: urlSend,
                            data: sessionDataSend,
                            cache: false,
                            async: false
                        }).done(function() {}).fail(function(data) {
                            if (data.responseText !== 200) {
                                return false;
                            }
                        });
                    });
                }
            };
        }
    }
    function _copyGuestDataInBillData() {
        _copyGuestData({
            data: {
                type: "NameSurname"
            }
        });
        _copyGuestData({
            data: {
                type: "Name"
            }
        });
        _copyGuestData({
            data: {
                type: "Surname"
            }
        });
    }
    function _copyGuestData(ev) {
        var dataType = ev.data.type;
        var value = "";
        var $billField = guestFields["$personalizeFirstRoom" + dataType];
        var isDisabled;
        if (guestFields["$otherGuest" + dataType].length && guestFields["$otherGuest" + dataType].is(":visible")) {
            value = guestFields["$otherGuest" + dataType].val();
        } else {
            value = guestFields["$guest" + dataType].val();
        }
        isDisabled = value && value.length > 0;
        $billField.prop("disabled", isDisabled).val(value);
    }
    function _copyReservationData() {
        var $this = $(this);
        var $nameSurnameBillInput = infoBillFieldset.find("#name-surname-bill");
        var $nameBillInput = infoBillFieldset.find("#name-bill");
        var $surnameBillInput = infoBillFieldset.find("#last-name-bill");
        var valueNameSurname = "";
        var valueName = "";
        var valueLastName = "";
        if ($this.is(":checked")) {
            valueNameSurname = $checkoutForm.find("#name-surname-checkout").val();
            valueName = $checkoutForm.find("#name-checkout").val();
            valueLastName = $checkoutForm.find("#last-name-checkout").val();
        }
        $nameSurnameBillInput.val(valueNameSurname).blur();
        $nameBillInput.val(valueName).blur();
        $surnameBillInput.val(valueLastName).blur();
    }
    function _customDocumentNumberValidator($el) {
        var isValid = commonFormSetup.validateNumberDocument("dni", $el.val());
        if (!isValid) {
            return "error";
        }
    }
    function _fillInputHidden() {
        var fields = $checkoutFormToSend.find("input[data-id]");
        var deferred = $.Deferred();
        $.each(fields, function(i, ele) {
            var $formInputHidden = $(ele);
            var valueInput = _getFieldToSendValue($formInputHidden);
            if (valueInput) {
                valueInput = $formInputHidden.attr("name") === "subscribeRewards" && valueInput === "S" ? true : valueInput;
                $formInputHidden.val(valueInput, $formInputHidden);
            }
        });
        _fillCustomPageInputHidden().then(function() {
            deferred.resolve(true);
        });
        return deferred.promise();
    }
    function _fillCustomPageInputHidden() {
        var fields = {};
        var $field;
        var deferred = $.Deferred();
        if (currentPage === "flexible" && customer.isB2B && customer.isAgency && customer.hasCredit) {
            if ($(".js-b2b-paymenttype").val() == "NOPAYMENT") {
                fields = {
                    paymentType: $checkoutForm.find("input.js-guarantee-paymenttype").val()
                };
            }
        }
        if (!$.isEmptyObject(fields)) {
            $.each(fields, function(ele, value) {
                $field = $checkoutFormToSend.find('input[name="' + ele + '"]');
                if (value && $field.length) {
                    $field.val(value);
                }
            });
        }
        deferred.resolve();
        return deferred.promise();
    }
    function _getCurrentPage() {
        var bodyclass = $("body").attr("class");
        if (/prepayment/g.test(bodyclass)) {
            return "prepayment";
        } else {
            return "flexible";
        }
    }
    function _getFieldToSendValue($field) {
        var dataId = $field.data("id");
        var $dataField = _getField(dataId);
        var valueInput = null;
        var fieldType = null;
        var isFieldVisible;
        var dataAltValue = $field.data("alt-value");
        var altValue;
        if ($dataField && $dataField.length > 0) {
            fieldType = _getFieldType($dataField);
            isFieldVisible = _isFieldVisible($dataField);
            if (isFieldVisible) {
                switch (fieldType) {
                  case "checkbox":
                    var isChecked = $dataField.is(":checked");
                    valueInput = isChecked ? "true" : "false";
                    if (dataId.indexOf("GDPR") >= 0) {
                        valueInput = isChecked ? "S" : "N";
                        if (dataId.indexOf("GDPR_flag_5") >= 0 && !isChecked) {
                            $checkoutFormToSend.find('[name="' + dataId + '"]').remove();
                            valueInput = null;
                        }
                    }
                    break;

                  case "input":
                  case "hidden":
                    valueInput = $dataField.val();
                    break;

                  case "radio":
                    valueInput = $dataField.val();
                    break;

                  case "select":
                    valueInput = $dataField.val();
                    if ($field.data("format-year")) {
                        var format = $field.data("format-year") || "20";
                        if (format) {
                            valueInput = format + "" + valueInput;
                        }
                    }
                    break;

                  default:
                    valueInput = $dataField.val();
                }
                if (dataAltValue) {
                    altValue = fieldType === "select" ? $dataField.find(":selected").data(dataAltValue) : $dataField.data(dataAltValue);
                    valueInput = altValue ? altValue.toString() : valueInput;
                    if (fieldType === "select" && typeof valueInput === "undefined") {
                        valueInput = "";
                    }
                }
            }
        }
        return valueInput;
    }
    function _getField(fieldId) {
        var $field = null;
        if (fieldId) {
            $field = $checkoutForm.find("#" + fieldId + ", [name='" + fieldId + "']:checked");
        }
        return $field;
    }
    function _getFieldType($field) {
        var fieldType = null;
        var type = $field.attr("type");
        if ([ "select", "radio", "checkbox" ].indexOf(type) >= 0) {
            fieldType = type;
        } else {
            fieldType = $field.prop("tagName").toLowerCase();
        }
        return fieldType;
    }
    function _getSessionData() {
        var deferred = $.Deferred();
        _fillInputHidden().then(function() {
            return deferred.resolve($checkoutFormToSend.serialize());
        });
        return deferred.promise();
    }
    function _guaranteeActions() {
        var inputToSend = $("input.js-guarantee-paymenttype");
        var data = inputToSend.data("value");
        var isChecked = $(this).is(":checked");
        if (isChecked) {
            inputToSend.val(data ? data.guarantee : inputToSend.val());
        } else {
            inputToSend.val(data ? data.noguarantee : inputToSend.val());
        }
    }
    function _handleSessionExpiredCountdownModal() {
        var urlSend = currentPage === "flexible" ? "/booking/hold-prereservation-flexible" : "/booking/hold-prereservation-prepaid";
        if (typeof pageData.reservationId !== "undefined") {
            $sessionExpireModal.on("hidden.bs.modal", function(ev) {
                if (!sessionExpired) {
                    $.ajax({
                        type: "POST",
                        url: "https://www.nh-hotels.com" + urlSend + "?merchantReturnData=" + pageData.reservationId,
                        headers: {
                            Accept: "application/json",
                            "Content-Type": "application/json"
                        },
                        dataType: "json",
                        cache: false
                    }).done(function(data) {
                        if (data) {
                            _initializeCounterClock();
                            timeIntervals.push(_initSessionExpiredCountdown());
                            _setSessionExpiredCountdownModalTimeout();
                        }
                    }).fail(function(data) {
                        console.log("fail", data);
                    });
                } else {
                    $sessionExpireMessageModal.modal({
                        backdrop: "static",
                        keyboard: true,
                        show: true
                    });
                }
            });
        }
    }
    function _initSessionExpiredCountdown() {
        var minutes;
        var seconds;
        var now;
        var endTime;
        var timeRemaining;
        var timeinterval;
        if ($sessionExpireCounter.length > 0) {
            minutes = parseInt($sessionExpireCounter.attr("data-mins"), 10);
            seconds = parseInt($sessionExpireCounter.attr("data-secs"), 10);
            now = new Date().getTime();
            endTime = new Date(now + minutes * 60 * 1e3 + seconds * 1e3);
            timeinterval = setInterval(function() {
                timeRemaining = utils.getTimeRemaining(endTime);
                if (timeRemaining.total <= 0) {
                    clearInterval(timeinterval);
                    sessionExpired = true;
                    if (!$sessionExpireModal.is(":visible") || !$sessionExpireModal.hasClass("in")) {
                        $sessionExpireMessageModal.modal({
                            backdrop: "static",
                            keyboard: true,
                            show: true
                        });
                    } else {
                        $sessionExpireModal.modal("hide");
                    }
                }
            }, 1e3);
        }
        return timeinterval;
    }
    function _isFieldVisible($field) {
        var $elementToCheck = $field;
        var fieldId = $field.attr("id");
        if ($field.hasClass("selectpicker")) {
            $elementToCheck = $('.selectpicker[data-id="' + fieldId + '"]');
        } else if ($field.hasClass("ui-autocomplete-input")) {
            $elementToCheck = $("#" + fieldId + "-clone");
        }
        return $elementToCheck.is(":visible") || $elementToCheck.hasClass("force-send");
    }
    function _onFormSubmit(e) {
        var $form = $(this);
        var moveToOffset;
        toggleLoadingButton($form, true);
        if (e.isDefaultPrevented()) {
            utils.callTrackForms("errors", "prepaymentForm", "errors");
            toggleLoadingButton($form, false);
        } else {
            e.preventDefault();
            var validateGuests = _validateGuestsName();
            if (validateGuests) {
                utils.clearAllIntervals();
                if ($bottonSubmit.hasClass("show-loading")) {
                    _setupAndShowLoadingModal();
                }
                _fillInputHidden().then(function() {
                    if (currentPage == "prepayment") {
                        utils.callTrackForms("success", "prepaymentForm", "success");
                    }
                    $checkoutFormToSend.submit();
                });
            } else {
                moveToOffset = personalizeRooms.first().eq(0).offset().top - 90;
                $("html, body").animate({
                    scrollTop: moveToOffset,
                    useTranslate3d: true
                }, 700);
            }
        }
    }
    function _onNeedBillChange() {
        if (needBillCheckbox.is(":checked")) {
            needBillRequiredInputs.attr("data-validate", true);
        } else {
            needBillRequiredInputs.attr("data-validate", false);
        }
        $checkoutForm.validator("update");
    }
    function _onInfoBillToggles() {
        _initIsCifRequired();
        $checkoutForm.validator("update");
    }
    function _onOtherGuestsChange() {
        if ($otherGuestsCheckbox.is(":checked")) {
            otherGuestsRequiredInputs.attr("data-validate", true);
            personalizeRooms.first().collapse("show");
        } else {
            otherGuestsRequiredInputs.attr("data-validate", false);
            guestFields.$personalizeFirstRoomData.prop("disabled", false);
        }
        _copyGuestDataInBillData();
        $checkoutForm.validator("update");
    }
    function _showJavaError() {
        var $modal = $("#modal-java-error");
        if (pageData.urlError && typeof pageData.urlError !== "undefined") {
            $modal.modal({
                backdrop: "static",
                keyboard: true,
                show: true
            });
            utils.clearAllIntervals();
        } else {
            modal.modal("show");
        }
    }
    function _setNationalityField() {
        utils.getGeoIpData().then(function(response) {
            var selectedOption;
            if (response && response.country) {
                selectedOption = $("select.js-country-geoip").find("option[value=" + response.country + "]");
                $("select.js-country-geoip").val(response.country).change();
                $("input.js-country-geoip").val(selectedOption.text());
            }
        });
    }
    function _setupAgencyService() {
        var $this = $(this);
        var valor;
        if ($this.is(":checked")) {
            valor = $this.attr("data-no-text");
            $this.removeAttr("data-no-text");
            $this.attr("data-text", valor);
        } else {
            valor = $this.attr("data-text");
            $this.removeAttr("data-text");
            $this.attr("data-no-text", valor);
        }
    }
    function _toggleBillCompanyNameVisibility(visible) {
        var companyName = infoBillFieldset.find("#company-name");
        companyName.closest(".js-company-name-wrapper").toggle(visible);
        companyName.attr("data-validation", visible);
        companyName.val("");
    }
    function _toggleBillUserNameVisiblity(visible) {
        var nameSurnameInput = infoBillFieldset.find("#name-surname-bill");
        var nameInput = infoBillFieldset.find("#name-bill");
        var surnameInput = infoBillFieldset.find("#last-name-bill");
        nameSurnameInput.closest(".js-bill-user").toggle(visible);
        nameSurnameInput.attr("data-validation", visible);
        nameSurnameInput.val("");
        nameInput.closest(".js-bill-user").toggle(visible);
        nameInput.attr("data-validation", visible);
        nameInput.val("");
        surnameInput.closest(".js-bill-user").toggle(visible);
        surnameInput.attr("data-validation", visible);
        surnameInput.val("");
    }
    function _toggleGuaranteeCheckbox() {
        var value = $(this).val();
        var $wrapGuarantee = $(".js-wrap-guarantee");
        var showGuarantee = [ "BONOPAYMENT", "COMPANYCREDIT", "FACTURAPROFORMA", "BONOPAYMENT_" ].indexOf(value) < 0;
        $wrapGuarantee.toggle(showGuarantee);
    }
    function _setSessionExpiredCountdownModalTimeout() {
        var time = $sessionExpireModal.data("timeout") || 3e5;
        setTimeout(function() {
            $sessionExpireModal.modal("show");
        }, parseInt(time));
    }
    function _setupAndShowLoadingModal() {
        var $modal = $("#loading-modal-checkout");
        var $paymentMethod = $checkoutFormToSend.find("#paymentMethod");
        var $externalMethodsWrapper = $modal.find(".method-external");
        var $cardMethodsWrapper = $modal.find(".method-card");
        var paymentMethod = _getFieldToSendValue($paymentMethod);
        var $methodOption = $externalMethodsWrapper.find(".lbl-" + paymentMethod.toLowerCase());
        if (paymentMethod && $methodOption.length) {
            $methodOption.show();
            $externalMethodsWrapper.show();
        } else {
            $cardMethodsWrapper.show();
        }
        $("#loading-modal-checkout").modal({
            backdrop: "static",
            keyboard: true,
            show: true
        });
    }
    function _toggleNationalityField() {
        var $this = $(this);
        var $nationality = $("#group-nationality-checkout");
        var $nationatilyInput = $nationality.find("input");
        if ($this.is(":checked")) {
            $nationality.show().removeClass("hide");
            $nationatilyInput.attr("data-validate", true);
        } else {
            $nationality.hide().addClass("hide");
            $nationatilyInput.attr("data-validate", false);
        }
        $checkoutForm.validator("update");
    }
    function _validateGuestsName() {
        var $guestName = $("#room-01-name-01");
        var $formGroup = $guestName.parents(".form-group");
        var labelRequired = $guestName.data("required-error");
        var isValid = true;
        if ($otherGuestsCheckbox.is(":checked")) {
            personalizeRooms.first().collapse("show");
            if ($guestName.val() !== "") {
                $formGroup.removeClass("has-error").find(".help-block").html("");
                isValid = true;
            } else {
                $formGroup.addClass("has-error").find(".help-block").html('<ul role="alert"><li>' + labelRequired + "</li></ul>");
                isValid = false;
            }
        }
        return isValid;
    }
    function _initializeCounterClock() {
        _clearClockIntervals();
        timeIntervals.push(utils.initializeClock($sessionExpireCounter));
    }
    function _clearClockIntervals() {
        utils.clearIntervals(timeIntervals);
        timeIntervals = [];
    }
    function _onBillCountrySelectorChange(e) {
        var $selectedOption = $(e.target.options[e.target.selectedIndex]);
        _setBillCIFRequired($selectedOption);
    }
    function _setBillCIFRequired($selectedOption) {
        var isCIFRequiredByCountry = false;
        var isCIFRequiredByPrice = _checkCIFRequiredTotalPrice();
        var isCIFRequired = false;
        if ($selectedOption && cifInput.is(":visible")) {
            isCIFRequiredByCountry = $selectedOption.data("required-cif");
        }
        if (cifInput.is(":visible") && (isCIFRequiredByCountry === true || isCIFRequiredByPrice)) {
            isCIFRequired = true;
        }
        _setCifValidationAttr(isCIFRequired);
    }
    function _initIsCifRequired() {
        var billFormCountryElement = billFormCountry[0];
        if (!billFormCountryElement) {
            return;
        }
        var $selectedOption = $(billFormCountryElement[billFormCountryElement.selectedIndex]);
        _setBillCIFRequired($selectedOption);
    }
    function _checkCIFRequiredTotalPrice() {
        var cifRequired = false;
        var finalPriceValue = finalPrice.data("final-price");
        var finalPriceMaxPriceCif = finalPrice.data("max-price-cif");
        if (!finalPriceValue || !finalPriceMaxPriceCif) {
            return cifRequired;
        }
        if (finalPriceValue >= finalPriceMaxPriceCif) {
            cifRequired = true;
        }
        return cifRequired;
    }
    function _setCifValidationAttr(validate) {
        if (validate === undefined || validate && validate.length === 0) {
            validate = false;
        }
        cifInput.attr({
            "data-validate": validate,
            required: validate
        });
        _setRequiredSymbol(cifInput, validate);
        $checkoutForm.validator("update");
    }
    function _setRequiredSymbol(input, validate) {
        var label = input.siblings("label");
        var labelText = label.html();
        var requiredSymbol = "*";
        if (validate === true && labelText.indexOf(requiredSymbol) === -1) {
            label.html(label.html() + requiredSymbol);
        } else if (validate === false && labelText.indexOf(requiredSymbol) > -1) {
            labelText = labelText.slice(0, labelText.indexOf(requiredSymbol));
            label.html(labelText);
        }
    }
    function _onGaranteeChange() {
        var infoTarget = $(garanteeCheck.data("target"));
        if (garanteeCheck.is(":checked")) {
            infoTarget.collapse("show");
        } else if (!garanteeCheck.is(":checked") && infoTarget.is(":visible")) {
            infoTarget.collapse("hide");
        }
    }
    function _setGaranteeModal() {
        if (garanteeCheck.is(":disabled") && garanteeCheck.is(":checked")) {
            var $wrapGuarantee = $(".js-wrap-guarantee");
            $wrapGuarantee.on("click", function() {
                modalGarantee.modal("show");
            });
        }
    }
    return {
        init: init,
        fillLoggedInfo: fillLoggedInfo
    };
}();

$(function() {
    if ($(".p-bp-checkout").length) {
        checkout.init();
    }
});

"use strict";

var b2bSignup = function() {
    var b2bSignupView = $(".p-b2b-signup").add(".p-b2b-signup-agency");
    var signupForm = b2bSignupView.find("form.js-form-steps");
    var intermediaryInput = signupForm.find('[name="input_intermediario"]');
    var affirmativeIntermediaryInput = signupForm.find("#input_intermediario_si");
    var intermediaryTextInput = signupForm.find("#intermediary_text_input");
    function init() {
        b2bSignupView.formSteps({
            initStep: 0
        });
        signupForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
        intermediaryInput.on("change", _onIntermediaryInputChange);
        _onIntermediaryInputChange();
    }
    function _onIntermediaryInputChange(e) {
        var intermediaryInputTextFormGroup = intermediaryTextInput.closest(".form-group");
        if (affirmativeIntermediaryInput.is(":checked")) {
            intermediaryInputTextFormGroup.closest(".form-group").removeClass("hide");
            intermediaryTextInput.attr("data-validate", true);
        } else {
            intermediaryInputTextFormGroup.addClass("hide");
            intermediaryTextInput.attr("data-validate", false);
        }
        signupForm.validator("update");
    }
    return {
        init: init
    };
}();

$(function() {
    b2bSignup.init();
});

"use strict";

var bridge = function() {
    var styleGuideView = $(".style-guide");
    var bridgeHeader = $(".bridge-sidebar-header");
    var bridgeSideBarMenu = $(".bridge-sidebar-menu");
    var btnMenu = bridgeHeader.find(".hamburguer");
    var navigationLinks = bridgeSideBarMenu.find(".js-navigation-link");
    var DEFAULT_HASH = "#brand";
    var STICKY = styleGuideView.offset() ? styleGuideView.offset().top : "0";
    function init() {
        navigationLinks.on("click", _handlerClickNavigationLink);
        btnMenu.on("click", _handlerHamburguerButtonClick);
        if (styleGuideView.length > 0) {
            _initNavigation();
        }
        _initForms();
    }
    function _handlerHamburguerButtonClick(e) {
        $(this).toggleClass("close-hamburguer");
        bridgeSideBarMenu.toggleClass("is_active");
    }
    function _initNavigation() {
        var hashUrl = window.location.hash.length > 0 ? window.location.hash : DEFAULT_HASH;
        navigate(hashUrl);
    }
    function navigate(hashUrl) {
        $('.js-navigation-link a[href="' + hashUrl + '"]').closest("li").addClass("active");
        $(".accordion-section" + hashUrl + "-view").removeClass("hide").addClass("open");
        window.location.hash = hashUrl;
        $("html, body").animate({
            scrollTop: 0
        }, 200);
    }
    function _handlerClickNavigationLink(e) {
        var currentAttrValue = $(this).find("a").attr("href");
        if ($(e.target).is(".active")) {
            _close_accordion_section();
            _close_menu_mobile();
        } else {
            _close_accordion_section();
            _close_menu_mobile();
            navigate(currentAttrValue);
        }
        e.preventDefault();
    }
    function _close_accordion_section() {
        navigationLinks.removeClass("active");
        $(".accordion-section").addClass("hide").removeClass("open");
    }
    function _close_menu_mobile() {
        $(this).removeClass("close-hamburguer");
        sideBar.removeClass("is_active");
    }
    function _handlerStickySideBar() {
        var scrollTop = $(this).scrollTop();
        console.log("window-scrollTop", scrollTop);
        console.log("STICKY", STICKY);
        if (scrollTop >= STICKY) {
            styleGuideView.addClass("sg-sticky");
        } else {
            styleGuideView.removeClass("sg-sticky");
        }
    }
    function _initForms() {
        var form = styleGuideView.find("form.js-form-steps");
        var formStepsView = styleGuideView.find(".form-steps");
        formStepsView.formSteps({
            initStep: 0
        });
        form.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
    }
    return {
        init: init
    };
}();

$(function() {
    bridge.init();
});

"use strict";

var pCGWLogin = function() {
    var $pCGWLoginView = null;
    var $modalError = null;
    var $modalResetPassword = null;
    var $userBlockedResetPassTrigger = null;
    var $loginForm = null;
    var $backButton = void 0;
    function init(view) {
        $pCGWLoginView = view;
        $modalError = $pCGWLoginView.find("#modal-login-error");
        mModals.attachModalEventsBehaviour($modalError);
        $modalResetPassword = $pCGWLoginView.find("#m-modal-login");
        $loginForm = $pCGWLoginView.find("#loginForm");
        $userBlockedResetPassTrigger = $loginForm.find(".blocked-user .js-forgotten-password");
        $(window).on("load", _checkLoginError);
        $modalError.on("hide.bs.modal", _updateURL);
        $userBlockedResetPassTrigger.on("click", _handleResetPassForm);
    }
    function _checkLoginError() {
        if (error !== -1) {
            $modalError.modal("show");
        }
    }
    function _handleResetPassForm() {
        setTimeout(function() {
            console.log("$modalResetPassword", $modalResetPassword.html());
        }, 500);
    }
    function _updateURL() {
        var url = "/event-tool/admin/login";
        window.location.replace(url);
    }
    return {
        init: init
    };
}();

$(function() {
    var $pCGWLoginView = $(".p-cgw-login");
    if ($pCGWLoginView.length) {
        pCGWLogin.init($pCGWLoginView);
    }
});

"use strict";

var pRewardsCorporateSignup = function() {
    var pRewardsCorporateSignupView = null;
    var signupRewardsCorporateForm = null;
    var formError = void 0;
    var $modalError = void 0;
    var $datepickerSelector = void 0;
    function init(view) {
        pRewardsCorporateSignupView = view;
        signupRewardsCorporateForm = pRewardsCorporateSignupView.find("#signup-corporate");
        $datepickerSelector = signupRewardsCorporateForm.find("#birth-date-selector");
        formError = typeof pageData != "undefined" ? typeof pageData.javaError != "undefined" ? pageData.javaError : false : false;
        $modalError = $("#modal-error");
        var nationalitySelects = {
            $nationality: signupRewardsCorporateForm.find("#nacionalidad"),
            $dniContainer: signupRewardsCorporateForm.find("#cDni"),
            get $dniContent() {
                return this.$dniContainer.find(".form-group");
            },
            $dni: signupRewardsCorporateForm.find("#dni")
        };
        signupRewardsCorporateForm.validator({
            disable: false,
            custom: {
                "birth-date": customBirthDateValidator.bind(this),
                "forbiden-under-age": commonFormSetup.customCheckUnderAge($datepickerSelector)
            }
        }).on("submit", function(e) {
            toggleLoadingButton(signupRewardsCorporateForm, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton(signupRewardsCorporateForm, false);
            } else {
                console.log("Eviando form");
            }
        });
        nationalitySelects.$nationality.on("change", _onChangeNationality);
        function _onChangeNationality() {
            var nationality = $(this).val();
            if (nationality !== "ES" && nationality !== "IT") {
                nationalitySelects.$dni.val("").attr("data-validate", "false").prop("required", false);
                nationalitySelects.$dniContent.removeClass("has-feedback has-success has-error");
                nationalitySelects.$dniContainer.addClass("hide");
            } else {
                nationalitySelects.$dniContainer.removeClass("hide");
                nationalitySelects.$dniContent.addClass("has-feedback");
                nationalitySelects.$dni.attr("data-validate", "true").prop("required", true);
            }
        }
        if (formError) {
            $modalError.modal("show");
        }
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "Fecha erronea";
            }
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".rewards-signup-form").length) {
        pRewardsCorporateSignup.init($(".rewards-signup-form"));
    }
});

"use strict";

var nhRewardsCorporate = function() {
    var $rewardsCorporateView = null;
    var $mCorporateRegister = null;
    function init() {
        $rewardsCorporateView = $(".p-rewards-corporate");
        $mCorporateRegister = $rewardsCorporateView.find(".m-corporate-register");
        _initAffix();
        $(window).on("resize", _resetAffix);
    }
    function _initAffix() {
        var offsetTop = $mCorporateRegister.offset().top;
        $mCorporateRegister.affix({
            offset: {
                top: offsetTop
            }
        });
    }
    function _resetAffix() {
        $(window).off(".affix");
        $mCorporateRegister.removeData("bs.affix").removeClass("affix affix-top affix-bottom");
        _initAffix();
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-rewards-corporate .m-corporate-register").length) {
        nhRewardsCorporate.init();
    }
});

"use strict";

var mBestPrice = function() {
    var $bestPriceForm = $("#form-best-price");
    var files = {
        container: $bestPriceForm.find(".files-content"),
        get button() {
            return this.container.find(".btn-file");
        },
        get input() {
            return this.container.find("#next");
        },
        get inputList() {
            return this.container.find(".fileInput");
        },
        get list() {
            return this.container.find(".files-list");
        },
        listInputs: [],
        items: 0
    };
    var $errorFileModal = $("#modal-file-error");
    var $gdprChecks = $bestPriceForm.find("input[id*='GDPR_flag']");
    function init() {
        $bestPriceForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                toggleLoadingButton($form, false);
            }
        });
        files.button.on("click", _onClickAttachFileBtn);
        files.input.on("change", _onChangeFilesAttachedInput);
        files.list.on("click", ".nh-ic-close", _onClickRemoveFileBtn);
        $gdprChecks.on("change", _onClickGDPRchecbox);
    }
    function _addFile() {
        var inputFile = files.input.clone().appendTo(files.container);
        files.listInputs.push(inputFile);
        _setUpFileAttached();
        files.input.val("");
    }
    function _deleteFile(index) {
        var inputToDelete = files.listInputs[index];
        var filesAttached = files.list.find("li");
        var fileToDelete = filesAttached.eq(index);
        files.listInputs.splice(index, 1);
        filesAttached.splice(index, 1);
        fileToDelete.remove();
        inputToDelete.remove();
        $.each(files.listInputs, function(ind) {
            var inputFile = $(this);
            var file = filesAttached.eq(ind);
            var removeBtn = file.find(".nh-ic-close");
            inputFile.attr({
                id: "files[" + ind + "]",
                name: "files[" + ind + "]"
            });
            removeBtn.data("index", ind).attr("data-index", ind);
        });
    }
    function _onChangeFilesAttachedInput() {
        if (/\.(pdf|doc|docx|png|jpg|tiff|tif|gif)$/i.test($(this).val())) {
            _addFile();
        } else {
            $errorFileModal.modal();
        }
    }
    function _setUpFileAttached() {
        var index = files.listInputs.length - 1;
        var fileInput = files.listInputs[index];
        fileInput.attr({
            id: "files[" + index + "]",
            name: "files[" + index + "]"
        });
        files.list.append('<li>\n        <span class="file-name">' + fileInput[0].files[0].name + '</span>\n        <span class="nh-ic-close" data-index="' + index + '"></span>\n      </li>');
    }
    function _onClickGDPRchecbox() {
        var $this = $(this);
        var value = $this.prop("checked") ? "S" : "N";
        $this.val(value);
    }
    function _onClickAttachFileBtn() {
        files.input.trigger("click");
    }
    function _onClickRemoveFileBtn() {
        var index = $(this).data("index");
        _deleteFile(index);
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-best-price-form").length) {
        mBestPrice.init();
    }
});

"use strict";

var pCustomerCare = function() {
    var $view = $(".p-customer-care");
    var $formCustomerCare = $($view).find("#form-customer-care");
    var $formConsulta = $formCustomerCare.find("#formConsulta");
    var $gdprChecks = $formCustomerCare.find("input[id*='GDPR_flag']");
    var occupancy = null;
    var $occupancies = null;
    var infoClient = null;
    var calendarRange = null;
    function init() {
        $view.find(".mDestinations").each(function(index, destination) {
            $(destination).selectDestinations();
        });
        initOccupancy();
        _moreOccupancy($formCustomerCare.find("#occupancy-more").is(":checked"));
        inputsClient();
        $($formConsulta).change(function() {
            showOptionFieldset($(this).val());
        });
        $gdprChecks.on("change", _onClickGDPRchecbox);
        $formCustomerCare.find(".range-calendar .help-block").text("Required field");
        $formCustomerCare.find("#occupancy-more").change(function() {
            _moreOccupancy($(this).is(":checked"));
        });
        $.fn.validator.Constructor.INPUT_SELECTOR = ':input:not([type="hidden"], [type="submit"], [type="reset"], button)';
        $formCustomerCare.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            var validForm = true;
            var errors = $formCustomerCare.find(".has-error");
            var isValidateRange = $(".range-calendar").is(":visible");
            toggleLoadingButton($form, true);
            isValidateRange ? _initRangeSelectors() : calendarRange = null;
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
                _isValidRange();
                if (errors.length) $(document).scrollTop(errors.offset().top);
            } else {
                validForm = isValidateRange ? _isValidRange() : true;
                if (!validForm) {
                    e.preventDefault();
                } else {
                    _onSubmitCustomerCare();
                }
                toggleLoadingButton($form, false);
            }
        });
    }
    function _initRangeSelectors() {
        calendarRange = {
            $rangeSelector: $(".range-calendar:visible"),
            get $initRangeWrapper() {
                return this.$rangeSelector.find(".init-range-calendar .js-input-wrapper");
            },
            get $endRangeWrapper() {
                return this.$rangeSelector.find(".end-range-calendar .js-input-wrapper");
            },
            get $initRangeInput() {
                return this.$initRangeWrapper.find("input.date-select");
            },
            get $endRangeInput() {
                return this.$endRangeWrapper.find("input.date-select");
            },
            get $initRangeErrorBlock() {
                return this.$initRangeWrapper.find(".help-block");
            },
            get $endRangeErrorBlock() {
                return this.$endRangeWrapper.find(".help-block");
            }
        };
    }
    function _isValidRange() {
        var isValidInitialDate = _isValidDate(calendarRange.$initRangeInput);
        var isValidFinalDate = _isValidDate(calendarRange.$endRangeInput);
        _toggleInvalidRangeError(calendarRange.$initRangeWrapper, !isValidInitialDate);
        _toggleInvalidRangeError(calendarRange.$endRangeWrapper, !isValidFinalDate);
        return isValidInitialDate && isValidFinalDate;
    }
    function _isValidDate($input) {
        var date = $input.val();
        var isValid = true;
        if (!date) {
            isValid = false;
        } else {
            isValid = moment(date, "DD/MM/YYYY").isValid();
        }
        return isValid;
    }
    function _toggleInvalidRangeError($wrapper, isError) {
        var $helpBlock = $wrapper.find(".help-block");
        if (isError) {
            $helpBlock.show();
            $wrapper.addClass("has-invalid-datepicker-error has-error").removeClass("has-success-datepicker");
        } else {
            $helpBlock.hide();
            $wrapper.removeClass("has-invalid-datepicker-error has-error").addClass("has-success-datepicker");
        }
    }
    function initOccupancy() {
        reservationOccupancyNew.init($view);
        $occupancies = $formCustomerCare.find(".m-occupancy");
        occupancy = {
            obj: reservationOccupancyNew.getOccupancy($occupancies.data("occupancy-index")),
            $container: $formCustomerCare.find(".m-occupancy"),
            get $input() {
                return this.$container.find(".form-group");
            },
            get $dropdown() {
                return this.$container.find(".m-occupancy-wrapper");
            },
            get $list() {
                return this.$container.find(".option-list")[0];
            },
            isMobile: false
        };
        setMobile();
        $(window).resize(function() {
            setMobile();
        });
        function setMobile() {
            window.matchMedia("(max-width: 767px)").matches ? occupancy.isMobile = true : occupancy.isMobile = false;
        }
        occupancy.$input.on("click", function(e) {
            var isOpen = $(occupancy.$dropdown).hasClass("is-open");
            if (!isOpen) {
                $(occupancy.$dropdown).addClass("is-open");
                if (occupancy.isMobile) {
                    this.blur();
                    var headerMobile = occupancy.$container.find(".option-header").innerHeight();
                    var footerMobile = occupancy.$container.find(".occupancy-footer").innerHeight();
                    var ammount = headerMobile + footerMobile + 60;
                    occupancy.$container.find(".option-list").css({
                        height: "calc(100vh - " + ammount + "px"
                    });
                    bodyScrollLock.disableBodyScroll(occupancy.$list);
                }
            }
        });
        $(document).on("click", function(ev) {
            var $target = $(ev.target);
            var isOpen = occupancy.$dropdown.hasClass("is-open");
            var inDropdown = $target.closest(".m-occupancy-wrapper").length;
            var inTrigger = $target.closest(".form-group").length;
            var infoInput = occupancy.$input.find("input.optionRooms");
            if (isOpen && !inTrigger && !inDropdown) {
                $(occupancy.$dropdown).removeClass("is-open");
                infoInput.val(infoInput.data("info"));
                occupancy.$input.find("label").addClass("focus");
            }
        });
        $(occupancy.$dropdown).find(".room-apply").click(function(e) {
            var infoInput = occupancy.$input.find("input.optionRooms");
            e.preventDefault();
            if (occupancy.isMobile) {
                bodyScrollLock.enableBodyScroll(occupancy.$list);
            }
            $(occupancy.$dropdown).removeClass("is-open");
            infoInput.val(infoInput.data("info"));
            occupancy.$input.find("label").addClass("focus");
        });
        var contRooms = 0;
        $(occupancy.$dropdown).find(".add-room button").click(function(e) {
            if ($(".option.option-5").is(":visible")) contRooms++;
            if (occupancy.obj.roomsData.visibleRoomsList.length === 5 && contRooms > 1) {
                $(occupancy.$dropdown).removeClass("is-open");
                $formCustomerCare.find("input[name='occupancy-more']").prop("checked", true).trigger("change");
            }
        });
        $(occupancy.$dropdown).find(".delete-room .nh-ic-close").click(function(e) {
            if (contRooms > 0) contRooms = 0;
        });
    }
    function _moreOccupancy(isChecked) {
        var occupancyInput = $formCustomerCare.find("input[name='occupancy']");
        $(occupancyInput).prop("disabled", isChecked);
    }
    function inputsClient() {
        infoClient = clientDetection();
        $formCustomerCare.find("input[name=so]").val(infoClient.os).prev("label").addClass("focus");
        $formCustomerCare.find("input[name=navegador]").val(infoClient.browser).prev("label").addClass("focus");
        $formCustomerCare.find("input[name=version]").val(infoClient.browserMajorVersion).prev("label").addClass("focus");
    }
    function showOptionFieldset(fieldsetID) {
        $formCustomerCare.find("fieldset[id*='info']").addClass("hide");
        $formCustomerCare.find("fieldset[id=" + fieldsetID + "]").removeClass("hide");
        $formCustomerCare.find("fieldset[id*='info']").each(function(index, fieldset) {
            $(fieldset).find("input,textarea,select").filter("[data-validate]").attr("data-validate", false);
        });
        $formCustomerCare.find("fieldset[id=" + fieldsetID + "]").find("input,textarea,select").filter("[data-validate]").attr("data-validate", true);
        $formCustomerCare.validator("update");
    }
    function _onClickGDPRchecbox() {
        var $this = $(this);
        var value = $this.prop("checked") ? "S" : "N";
        $this.val(value);
    }
    function _onSubmitCustomerCare() {
        var mailData = JSON.parse('{"topicList":[{"ccList":[],"bccList":[],"name":"infoReservas","subject":"Customer Service: Information about reservations","to":"bookings@nh-hotels.com","fromName":"bookings"},{"ccList":[],"bccList":[],"name":"infoHoteles","subject":"Customer Service: Information about the hotels","to":"bookings@nh-hotels.com","fromName":"bookings"},{"ccList":[],"bccList":[],"name":"infoSugerencias","subject":"Customer Service: Suggestions and opinions about your stay","to":"customercare@nh-hotels.com","fromName":"CustomerCare"},{"ccList":[],"bccList":[],"name":"infoWeb","subject":"Customer Service: Suggestions and opinions about the website","to":"customercare@nh-hotels.com","fromName":"CustomerCare"},{"ccList":[],"bccList":[],"name":"infoTecnicos","subject":"Customer Service: Technical issues","to":"customercare@nh-hotels.com","fromName":"CustomerCare"},{"ccList":[],"bccList":[],"name":"infoNHRewards","subject":"Customer Service: NH Rewards","to":"nhrewards@nh-hotels.com","fromName":"nhworld.app"}]}');
        var to = jsonPath(mailData, "$..topicList[?(@.name=='" + $formConsulta.val() + "')].to");
        var subject = jsonPath(mailData, "$..topicList[?(@.name=='" + $formConsulta.val() + "')].subject");
        var fromName = jsonPath(mailData, "$..topicList[?(@.name=='" + $formConsulta.val() + "')].fromName");
        $formCustomerCare.find("#emailTo").val(to);
        $formCustomerCare.find("#subject").val(subject);
        $formCustomerCare.find("#fromName").val(fromName);
        var valueHabitaciones = null;
        if (!$formCustomerCare.find("#occupancy-more").is(":checked")) {
            var occupancyInputs = occupancy.obj.generateInputsFields();
            $formCustomerCare.prepend(occupancyInputs);
            valueHabitaciones = occupancy.obj.roomsData.visibleRoomsList.length;
        } else {
            valueHabitaciones = "6+";
        }
        $formCustomerCare.find("[name='habitaciones']").val(valueHabitaciones);
    }
    return {
        init: init
    };
}(reservationOccupancyNew);

$(function() {
    if ($(".p-customer-care").length) {
        pCustomerCare.init($(".p-customer-care"));
    }
});

"use strict";

var pDonate = function() {
    var $pDonateView = null;
    var config = {
        lowerLimitDonate: "10",
        maxLimitDonate: "0",
        messages: {
            error_donate_fields: "The amount of points transferred cannot be less than 30",
            error_min_max: "The maximum number of points to donate is less than the minimum number of points required.",
            error_donate_exception: "An error has occured, please contact the Customer Care team.",
            success_message: "The operation was completed correctly"
        }
    };
    var donateInterval = null;
    var modals = null;
    var donate = null;
    var remaining = null;
    function init(view) {
        $pDonateView = view;
        _setConfig();
        _setElements();
        _validatePoints();
        donate.$increaseBtn.on("mousedown touchstart", _addPoints).on("mouseup touchend", function() {
            clearInterval(donateInterval);
        }).on("click", function() {
            _validatePoints(true);
        });
        donate.$decreaseBtn.on("mousedown touchstart", _removePoints).on("mouseup touchend", function() {
            clearInterval(donateInterval);
        }).on("click", function() {
            _validatePoints(true);
        });
        donate.$saveDonateBtn.on("click", _onClickSaveBtn);
    }
    function _actualizeData(data) {
        config.maxLimitDonate = data.limitDonate;
        config.minLimitDonate = data.minLimitDonate;
        remaining.$userPoints.text(formatPoints(data.points));
        remaining.$userValue.text(formatPoints(data.value));
        remaining.$points.text(formatPoints(data.limitDonate));
        remaining.$lowerLimitInfo.text(formatPoints(data.minLimitDonate));
        remaining.$limitDonateInfo.text(formatPoints(data.limitDonate));
        remaining.$totalPointsInfo.text(formatPoints(data.points));
        donate.data.points = 0;
        donate.$points.text(0).data({
            "min-points": formatPoints(data.minLimitDonate),
            "max-points": formatPoints(data.limitDonate)
        });
    }
    function _addPoints() {
        var incremental = donate.data.points === 0 ? 30 : 1;
        clearInterval(donateInterval);
        if (remaining.data.points > 0) {
            donate.data.points += incremental;
            remaining.data.points -= incremental;
            donate.$points.html(utils.addThousandsSeparator(donate.data.points));
            remaining.$points.html(utils.addThousandsSeparator(remaining.data.points));
            donateInterval = setInterval(_addPoints, 100);
        } else {
            donate.$increaseBtn.trigger("click");
        }
        donate.$increaseBtn.prop("disabled", remaining.data.points === 0);
        donate.$decreaseBtn.prop("disabled", donate.data.points === 0);
    }
    function _checkResult(errorCode) {
        var $modal;
        var isSucces = errorCode === "00000" || !errorCode;
        var errors = {
            "00000": config.messages["success_message"],
            99999: config.messages["error_donate_exception"],
            "00010": config.messages["error_donate_fields"]
        };
        if (errorCode) {
            $modal = errorCode === "00000" ? modals.success : modals.error;
            $modal.find(".modal-body p").text(errors[errorCode]);
            $modal.modal("show");
        }
        return isSucces;
    }
    function formatPoints(value) {
        return value != null && value != "undefined" && !isNaN(value) ? value.formatMoney(0, "", ".", ",") : 0;
    }
    function _onClickSaveBtn() {
        var $this = $(this);
        var ongId = $(this).data("ong-id");
        $this.prop("disabled", true);
        if (!_validate(ongId)) {
            $this.prop("disabled", false);
            return;
        }
        _saveDonatePoints(ongId);
    }
    function _removePoints() {
        var incremental = donate.data.points === 30 ? 30 : 1;
        clearInterval(donateInterval);
        if (donate.data.points > 0) {
            donate.data.points -= incremental;
            remaining.data.points += incremental;
            donate.$points.html(utils.addThousandsSeparator(donate.data.points));
            remaining.$points.html(utils.addThousandsSeparator(remaining.data.points));
            donateInterval = setInterval(_removePoints, 100);
        } else {
            donate.$decreaseBtn.trigger("click");
        }
        donate.$increaseBtn.prop("disabled", remaining.data.points === 0);
        donate.$decreaseBtn.prop("disabled", donate.data.points === 0);
    }
    function _saveDonatePoints(ongId) {
        var data = {
            ongId: ongId,
            points: donate.data.points
        };
        var url = "/rewards/savedonate";
        var promise = $.ajax({
            url: url,
            type: "POST",
            data: JSON.stringify(data),
            contentType: "application/json"
        });
        donate.$saveDonateBtn.prop("disabled", true);
        promise.then(function(response) {
            if (!_checkResult(response.errorCode)) {
                return;
            }
            _actualizeData(response);
            _validatePoints();
        }, function() {
            modals.error.find(".modal-body p").text(config.messages["error_donate_exception"]);
            modals.error.modal("show");
        }).always(function() {
            donate.$saveDonateBtn.prop("disabled", false);
        });
    }
    function _setConfig() {
        if (typeof donateConfig !== "undefined" && donateConfig) {
            $.extend(config, donateConfig);
        }
        config.lowerLimitDonate = config.lowerLimitDonate !== "" ? parseInt(config.lowerLimitDonate) : 0;
        config.maxLimitDonate = config.maxLimitDonate !== "" ? parseInt(config.maxLimitDonate) : 0;
    }
    function _setElements() {
        modals = {
            error: $("#modal-error"),
            success: $("#modal-success")
        };
        donate = {
            $container: $pDonateView.find(".send-your-points"),
            get errorMessage() {
                return this.$container.find("#error-message");
            },
            get $increaseBtn() {
                return this.$container.find("#maxiMum");
            },
            get $decreaseBtn() {
                return this.$container.find("#miniMum");
            },
            get $saveDonateBtn() {
                return this.$container.find("#saveDonate");
            },
            get $points() {
                return this.$container.find("#pointsId");
            },
            data: {
                get points() {
                    return donate.$points.data("points") || 0;
                },
                set points(value) {
                    donate.$points.data("points", value);
                }
            }
        };
        remaining = {
            $container: $pDonateView.find(".your-points"),
            get $userPoints() {
                return $("#nhUser-points");
            },
            get $userValue() {
                return $("#nhUser-value");
            },
            get $points() {
                return this.$container.find("#pointsLeft");
            },
            get $lowerLimitInfo() {
                return this.$container.find("#lowerLimitDonate");
            },
            get $limitDonateInfo() {
                return this.$container.find("#limitDonate");
            },
            get $totalPointsInfo() {
                return this.$container.find("#totalPoints");
            },
            get value() {
                return this.$container.data("points") || 0;
            },
            data: {
                get points() {
                    return remaining.$points.data("points") || 0;
                },
                set points(value) {
                    remaining.$points.data("points", value);
                }
            }
        };
    }
    function _validate(ongId) {
        if (!ongId) {
            modals.error.find(".modal-body p").text(config.messages["error_donate_fields"]);
            modals.error.modal("show");
            return false;
        }
        return _validatePoints(true);
    }
    function _validatePoints(showMessage) {
        var isValidPoints = donate.data.points >= config.lowerLimitDonate;
        var showError = !isValidPoints && showMessage;
        if (config.maxLimitDonate < config.lowerLimitDonate) {
            donate.errorMessage.text(config.messages.error_min_max);
            donate.$saveDonateBtn.prop("disabled", true);
            return false;
        }
        donate.errorMessage.toggle(showError);
        donate.$saveDonateBtn.prop("disabled", !isValidPoints);
        return isValidPoints;
    }
    Number.prototype.formatMoney = function(places, symbol, thousand, decimal) {
        places = !isNaN(places = Math.abs(places)) ? places : 2;
        symbol = symbol !== undefined ? symbol : "$";
        thousand = thousand || ",";
        decimal = decimal || ".";
        var number = this, negative = number < 0 ? "-" : "", i = parseInt(number = Math.abs(+number || 0).toFixed(places), 10) + "", j = (j = i.length) > 3 ? j % 3 : 0;
        return symbol + negative + (j ? i.substr(0, j) + thousand : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousand) + (places ? decimal + Math.abs(number - i).toFixed(places).slice(2) : "");
    };
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-rewards-donate").length) {
        pDonate.init($(".p-rewards-donate"));
    }
});

"use strict";

var nhFaqCustomerCare = function() {
    var $customerCareForm = $("#form-customer-care");
    function init() {
        $customerCareForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                toggleLoadingButton($form, false);
            }
        });
    }
    return {
        init: init
    };
}();

$(function() {
    nhFaqCustomerCare.init();
});

"use strict";

var pHotelMap = function() {
    var $pHotelMapView = $(".p-hotel-map");
    var map = null;
    var locationData = {
        $mapContainer: $(".m-hotel-map"),
        map: null,
        markers: null,
        $elements: $pHotelMapView.find(".m-how-to-arrive"),
        objects: {},
        $modal: $("#modal-how-to-arrive"),
        $poisContent: $pHotelMapView.find(".m-points-interest"),
        $directionPanel: $pHotelMapView.find(".m-result-maps"),
        get $map() {
            return this.$mapContainer.find(".hotel-map");
        },
        get $goToGoogleMapsBtns() {
            return this.$elements.find(".goto-googlemaps");
        },
        get $showPoiOnMapLinks() {
            return this.$poisContent.find("a");
        },
        get hotelLatLng() {
            return {
                lat: this.$map.data("hotel-latlng")[0],
                lng: this.$map.data("hotel-latlng")[1]
            };
        }
    };
    var mPois = {
        $poisContanier: $pHotelMapView.find(".m-points-interest"),
        get $pois() {
            return this.$poisContanier.find(".item");
        }
    };
    function init() {
        $.each(locationData.$elements, function(index, element) {
            var $this = $(element);
            locationData.objects[index] = _getLocationObject($this);
            locationData.objects[index].$showDirectionBtn.on("click", {
                index: index
            }, _getRoute);
            locationData.objects[index].$goToGoogleMapsBtn.on("click", {
                index: index
            }, _goToGoogleMaps);
        });
        _setPoisDistance();
        locationData.$modal.on("show.bs.modal", function() {
            $(".pac-container").addClass("inModal");
        }).on("hide.bs.modal", function() {
            $(".pac-container").removeClass("inModal");
        });
        locationData.$showPoiOnMapLinks.on("click", _showPoiOnMap);
    }
    function _setPoisDistance() {
        var distance;
        var origin = {
            lat: markersArray[0].location[0],
            lng: markersArray[0].location[1]
        };
        var pois = markersArray.slice(1);
        $.each(pois, function(index, poiInfo) {
            distance = utils.getDistanceBetweenCoords(origin, {
                lat: poiInfo.location[0],
                lng: poiInfo.location[1]
            }) + " km";
            if (mPois.$pois[index]) {
                mPois.$pois.eq(index).find("span").text(distance);
            }
        });
    }
    function _getLocationObject($element) {
        return {
            $searchInput: $element.find(".inputGoDestiny"),
            $type: $element.find("input:radio"),
            $showDirectionBtn: $element.find(".showdirections"),
            $goToGoogleMapsBtn: $element.find(".goto-googlemaps")
        };
    }
    function _getRoute(ev) {
        var $formClicked = locationData.objects[ev.data.index];
        var directionsDisplay = new google.maps.DirectionsRenderer();
        var directionsService = new google.maps.DirectionsService();
        var request = {
            origin: $formClicked.$searchInput.val(),
            destination: new google.maps.LatLng(locationData.hotelLatLng.lat, locationData.hotelLatLng.lng),
            travelMode: google.maps.TravelMode[$formClicked.$type.filter(":checked").val()]
        };
        locationData.map = mHotelMapInline.getMap(0);
        directionsDisplay.setMap(locationData.map);
        directionsDisplay.setPanel(locationData.$directionPanel[0]);
        if (_isValidRequest(request)) {
            directionsService.route(request, function(response, status) {
                locationData.$directionPanel.empty();
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                    locationData.$modal.modal("hide");
                } else {
                    locationData.$directionPanel.append("<section class='m-alert' role='alert'><div class='alert alert-warning'><p>No results available</p></div></section>");
                }
            });
        }
    }
    function _goToGoogleMaps(ev) {
        var $formClicked = locationData.objects[ev.data.index];
        var data = {
            origin: $formClicked.$searchInput.val().replace(/ /g, "+"),
            destination: new google.maps.LatLng(locationData.hotelLatLng.lat, locationData.hotelLatLng.lng),
            get googleUrl() {
                return "https://maps.google.com?saddr=" + this.origin + "&daddr=" + this.destination.toUrlValue();
            }
        };
        window.open(data.googleUrl, "_blank");
    }
    function _isValidRequest(request) {
        var isValid = true;
        if (!request.origin || !request.destination) {
            isValid = false;
        }
        return isValid;
    }
    function _showPoiOnMap(ev) {
        var $this = $(this);
        var markerIndex = $this.data("index");
        var markers = mHotelMapInline.getMarkers(0);
        ev.preventDefault();
        locationData.map = !locationData.map ? mHotelMapInline.getMap(0) : locationData.map;
        if (locationData.$map.length) {
            locationData.map.panTo(markers[markerIndex].getPosition());
            google.maps.event.trigger(markers[markerIndex], "click");
            $("html, body").animate({
                scrollTop: 90
            }, "slow");
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-hotel-map").length) {
        pHotelMap.init();
    }
});

"use strict";

var nhHowToArrive = function() {
    var directionsDisplay;
    function init() {}
    function _calcRoute() {
        if (directionsDisplay != null) {
            directionsDisplay.setMap(null);
            directionsDisplay.setPanel(null);
            directionsDisplay = null;
        }
        directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directionsPanel"));
        var start = document.getElementById("mapOrigin").value;
        var end = new google.maps.LatLng(40.427538, -3.685109);
        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.TravelMode[typeOfTravel]
        };
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                $("#directionsPanel").text("");
                $("#directionsPanel").attr("class", "dir-mrgnr");
                directionsDisplay.setDirections(response);
            } else {
                $("#directionsPanel").text("");
                $("#directionsPanel").attr("class", "dir-mrgnr alert-danger");
                $("#directionsPanel").append("No results available");
            }
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".how-to-arrive").length) nhHowToArrive.init();
});

"use strict";

var nhReWardsSignUp = function() {
    var $nhRewardsSignUpForm = $("#form-rewards-account");
    var $gdprChecks = $nhRewardsSignUpForm.find("input[id*='GDPR_flag']");
    var nationalitySelects = {
        $nationality: $nhRewardsSignUpForm.find("#nacionalidad"),
        $dniContainer: $nhRewardsSignUpForm.find("#cDni"),
        get $dniContent() {
            return this.$dniContainer.find(".form-group");
        },
        $dni: $nhRewardsSignUpForm.find("#dni")
    };
    function init() {
        $nhRewardsSignUpForm.validator({
            disable: false,
            custom: {
                docNumber: customDocumentNumberValidator,
                "birth-date": customBirthDateValidator.bind(this)
            }
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                toggleLoadingButton($form, false);
            }
        });
        nationalitySelects.$nationality.on("change", _onChangeNationality);
        $gdprChecks.on("change", _onClickGDPRchecbox);
    }
    function _onChangeNationality() {
        var nationality = $(this).val();
        if (nationality !== "ES" && nationality !== "IT") {
            nationalitySelects.$dni.val("").attr("data-validate", "false").prop("required", false);
            nationalitySelects.$dniContent.removeClass("has-feedback has-success has-error");
            nationalitySelects.$dniContainer.addClass("hide");
        } else {
            nationalitySelects.$dniContainer.removeClass("hide");
            nationalitySelects.$dniContent.addClass("has-feedback");
            nationalitySelects.$dni.attr("data-validate", "true").prop("required", true);
        }
    }
    function _onClickGDPRchecbox() {
        var $this = $(this);
        var value = $this.prop("checked") ? "S" : "N";
        $this.val(value);
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "error";
            }
        }
    }
    function customDocumentNumberValidator($el) {
        var whichCountryIsSelected = $(nationalitySelects.$nationality).find("option:selected").attr("value");
        if (!$el.val()) {
            return;
        }
        var isValid = commonFormSetup.validateNumberDocument("dni", $el.val());
        if (!isValid && whichCountryIsSelected === "ES") {
            return "error";
        }
    }
    return {
        init: init
    };
}();

$(function() {
    nhReWardsSignUp.init();
});

"use strict";

var organizeEvent = function() {
    var organizeEventView = $(".p-organize-event");
    var organizeEventForm = $("#organizeEventForm");
    var hotelsList = "";
    var longitud;
    var firstError;
    var moveToOffset;
    var jsonData = JSON.parse('{"emails":[{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-693-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-685-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-703-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-700-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-698-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-695-1024"},{"email":"nh.groupdesk@nh-hotels.com","country":"tcm:41-690-1024"},{"email":"gruposnh@nh-hotels.com","country":"tcm:41-654-1024"},{"email":"gruposnh@nh-hotels.com","country":"tcm:41-699-1024"},{"email":"groups.it@nh-hotels.com","country":"tcm:41-682-1024"},{"email":"nhmeetingsales.nl@nh-hotels.com","country":"tcm:41-686-1024"},{"email":"nhmeetingsales.nl@nh-hotels.com","country":"tcm:41-696-1024"},{"email":"nhmeetingsales.nl@nh-hotels.com","country":"tcm:41-704-1024"},{"email":"group.mx@nh-hotels.com","country":"tcm:41-697-1024"},{"email":"groups.mercosur@nh-hotels.com","country":"tcm:41-684-1024"},{"email":"groups.mercosur@nh-hotels.com","country":"tcm:41-687-1024"},{"email":"groups.mercosur@nh-hotels.com","country":"tcm:41-707-1024"},{"email":"groups.mercosur@nh-hotels.com","country":"tcm:41-709-1024"}],"emailDefault":"nhinternationalgroupsales@nh-hotels.com","subject":"Your meeting request is being processed"}');
    function init() {
        organizeEventForm.validator({
            disable: false,
            custom: {}
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                e.preventDefault();
                _onSubmitForm();
            }
        });
    }
    function _onSubmitForm() {
        fillHiddenInputsOrganize(true);
        if (validateMiceOrganiza()) {
            $("#organizeEventForm").submit();
        }
    }
    function fillHiddenInputsOrganize(personalize) {
        $('input[name="nAssistants"]').val($('input[id="asistentes"]').val());
        $('input[name="eventType"]').val($('[id="evento"]').val());
        $('input[name="fini"]').val($('input[id="ida"]').val());
        $('input[name="fout"]').val($('input[id="fin"]').val());
        $('input[name="comments"]').val($('[id="commentarios"]').val());
        $('input[name="contactName"]').val($('input[id="nombre"]').val());
        $('input[name="contactSurname"]').val($('input[id="apellidos"]').val());
        $('input[name="contactEmail"]').val($('input[id="email"]').val());
        $('input[name="contactPhone"]').val($('input[id="telefono"]').val());
        $('input[name="company"]').val($('input[id="empresa"]').val());
        $('input[name="contactCountry"]').val($('[id="pais"]').val());
        $('input[name="contactCity"]').val($('[id="ciudad"]').val());
        $('input[name="receiveEventsOffers"]').val($('[id="receiveOffers"]').is(":checked"));
        $('input[name="acceptTermsAndConditions"]').val($('[id="acepto"]').is(":checked"));
        $('input[name="personalize"]').val(personalize);
        $('input[name="helpPhone"]').val($("#helpTelephone").text());
        var emailTo = "";
        for (var i = 0; i < jsonData.emails.length; i++) {
            if (jsonData.emails[i].country == $("#pais").val()) {
                emailTo = jsonData.emails[i].email;
                break;
            }
        }
        if (!emailTo.length) {
            emailTo = jsonData.emailDefault;
        }
        $("#emailTo").val(emailTo);
        $("#subject").val(jsonData.subject);
    }
    hotelsList += "202";
    function validateMiceOrganiza() {
        var noerror = true;
        $("#easistentes").hide();
        $("#eevento").hide();
        $("#enombre").hide();
        $("#eapellidos").hide();
        $("#eemail").hide();
        $("#etelefono").hide();
        $("#eempresa").hide();
        $("#epais").hide();
        $("#eciudad").hide();
        $("#eacepto").hide();
        var asistentes = $("#asistentes").val();
        if (!validateNumber(asistentes)) {
            $("#easistentes").show();
            $("#asistentes").attr("class", "form-control error");
            noerror = false;
        } else {
            $("#asistentes").attr("class", "form-control");
        }
        if (!$("#acepto").is(":checked")) {
            $("#eacepto").show();
        }
        if (validateRequiredGDPR()) {
            noerror = false;
        }
    }
    $(document).ready(function() {
        $(".form-control").keyup(function() {
            var dataId = $(this).attr("id");
            $("[data-value=" + dataId + "]").html($(this).val());
        });
        $(".selectpicker").on("change", function() {
            var dataId = $(this).attr("id");
            $("[data-value=" + dataId + "]").html($(this).val());
        });
    });
    function validateNumber(a) {
        return longitud = a.length, isNaN(a) || 1 > longitud ? !1 : !0;
    }
    function validateRequiredGDPR() {
        var isValid = true;
        var requiredCheckboxes = organizeEventForm.find('input[type="checkbox"][required]');
        requiredCheckboxes.siblings(".alert").hide();
        requiredCheckboxes.each(function(index, checkbox) {
            var $checkbox = $(checkbox);
            if (!$checkbox.is(":checked")) {
                $checkbox.siblings(".alert").show();
                isValid = false;
            }
        });
        return isValid;
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "error";
            }
        }
    }
    return {
        init: init
    };
}();

$(function() {
    organizeEvent.init();
});

"use strict";

var nhPersonalizeEvent = function() {
    var nhPersonalizeEventForm = $("#form-rewards-account");
    var $gdprChecks = nhPersonalizeEventForm.find("input[id*='GDPR_flag']");
    var nationalitySelects = {
        $nationality: nhPersonalizeEventForm.find("#nacionalidad"),
        $dniContainer: nhPersonalizeEventForm.find("#cDni"),
        get $dniContent() {
            return this.$dniContainer.find(".form-group");
        },
        $dni: nhPersonalizeEventForm.find("#dni")
    };
    function init() {
        nhPersonalizeEventForm.validator({
            disable: false,
            custom: {
                "birth-date": customBirthDateValidator.bind(this)
            }
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                toggleLoadingButton($form, false);
            }
        });
        nationalitySelects.$nationality.on("change", _onChangeNationality);
        $gdprChecks.on("change", _onClickGDPRchecbox);
    }
    function _onChangeNationality() {
        var nationality = $(this).val();
        if (nationality !== "ES" && nationality !== "IT") {
            nationalitySelects.$dni.val("").attr("data-validate", "false").prop("required", false);
            nationalitySelects.$dniContent.removeClass("has-feedback has-success has-error");
            nationalitySelects.$dniContainer.addClass("hide");
        } else {
            nationalitySelects.$dniContainer.removeClass("hide");
            nationalitySelects.$dniContent.addClass("has-feedback");
            nationalitySelects.$dni.attr("data-validate", "true").prop("required", true);
        }
    }
    function _onClickGDPRchecbox() {
        var $this = $(this);
        var value = $this.prop("checked") ? "S" : "N";
        $this.val(value);
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "error";
            }
        }
    }
    return {
        init: init
    };
}();

$(function() {
    nhPersonalizeEvent.init();
});

"use strict";

var pResultsPageCity = function() {
    var filterPage = "p-results-page-city";
    var Filter = new FilterHotels(filterPage);
    var $pResultsPageCityView = null;
    var $title = void 0;
    var $searchBar = null;
    var $searchBarForm = null;
    var occupancy = null;
    var $occupancies = null;
    var location = {
        $field: null,
        selected: null
    };
    var modals = null;
    var hiddenInputs = void 0;
    function init(view) {
        $pResultsPageCityView = view;
        $title = $pResultsPageCityView.find(".m-filter-hotels .js-filter-hotels-number");
        $searchBar = $pResultsPageCityView.find(".m-search-bar");
        $searchBarForm = $searchBar.find("form");
        $occupancies = $searchBarForm.find("#m-occupancy-sb");
        modals = {
            $loading: $pResultsPageCityView.find("#loading-modal-results"),
            $matchError: $pResultsPageCityView.find("#modal-search-no-result"),
            $geolocationError: $pResultsPageCityView.find("#modal-geolocation-error")
        };
        occupancy = reservationOccupancyNew.getOccupancy($occupancies.data("occupancy-index"));
        location.$field = $searchBarForm.find("#location2-sb");
        hiddenInputs = {
            $inputs: $searchBarForm.find('input[type="hidden"]'),
            get locationCode() {
                return this.$inputs.filter("[data-id='locationCode']");
            },
            get locationTCM() {
                return this.$inputs.filter("[data-id='locationTCM']");
            },
            get virtualHotel() {
                return this.$inputs.filter("[data-id='virtualHotel']");
            },
            get urlHotel() {
                return this.$inputs.filter("[data-id='urlHotel']");
            },
            get url() {
                return $("#url");
            }
        };
        $pResultsPageCityView.on("setHotelsDone", function(ev, type, hotelsData) {
            $title.html(hotelsData.$hotels.length);
            Filter.toggleCurrency(!lastSearch.groupon);
        });
        Filter.init(document.querySelector("." + filterPage + " .m-filter-hotels.is-mobile"), document.querySelector("." + filterPage + " .m-filter-hotels.is-desktop"), document.querySelector("." + filterPage + " .m-hotel-search"));
        mResultsHotelCards.init($pResultsPageCityView, Filter);
        $("[data-url-tripadvisor]").click(function() {
            var urlTripadvisor = $(this).attr("data-url-tripadvisor");
            $(".js-tripavisor-modal").find("iframe").attr("src", urlTripadvisor);
        });
        $searchBarForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var rangeInvalid = true;
            var locationInvalid = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                validateBookingRange($form);
                toggleLoadingButton($form, false);
            } else {
                rangeInvalid = validateBookingRange($form);
                locationInvalid = validateLocation(location.$field);
                validForm = !rangeInvalid && !locationInvalid;
                if (!$form.data("validate")) {
                    e.preventDefault();
                    if (validForm) {
                        _handleSubmitForm(e);
                    }
                }
                toggleLoadingButton($form, false);
            }
        });
    }
    function _handleSubmitForm(ev) {
        var occupancyInfo = occupancy.generateOccupancyInfo();
        location.selected = location.$field.data("selected") || JSON.parse(sessionStorage.getItem("listSearch"));
        modals.$loading.modal({
            show: true,
            backdrop: "static",
            keyboard: false
        });
        if (hiddenInputs.locationCode.val() === "") {
            hiddenInputs.locationCode.attr("name", "");
        }
        if (location.$field.attr("name") === "searchStringID") {
            hiddenInputs.locationTCM.attr("name", "locationTCM");
        } else {
            hiddenInputs.locationTCM.attr("name", "searchStringID");
        }
        hiddenInputs.locationTCM.val(location.$field.val());
        if (hiddenInputs.virtualHotel.val() !== "" && hiddenInputs.url.val() !== "" && $searchBarForm.find("input[name*='hotelId']").length > 0) {
            hiddenInputs.urlHotel.val(hiddenInputs.url.val());
        }
        _onFormSubmit(ev);
    }
    function _onFormSubmit(ev) {
        var occupancyInfo = occupancy.generateOccupancyInfo();
        var formData = {};
        var dataUrl = null;
        var checkin = void 0;
        var checkout = void 0;
        $searchBarForm.append(occupancyInfo.inputs);
        if (location.selected) {
            $.each($searchBarForm.serializeArray(), function(index, obj) {
                formData[obj.name] = obj.value;
            });
            formData.fini = formData.fini ? formData.fini : moment().format("DD/MM/YYYY");
            formData.fout = formData.fout ? formData.fout : moment().add(1, "day").format("DD/MM/YYYY");
            checkin = moment(formData.fini, location.selected.df);
            checkout = moment(formData.fout, location.selected.df);
            if (location.selected.ebp && location.selected.url) {
                ev.preventDefault();
                dataUrl = {
                    hotelID: formData.hotelId,
                    checkinDate: checkin.format(location.selected.df),
                    checkoutDate: checkout.format(location.selected.df),
                    get nights() {
                        return checkout.diff(checkin, "days");
                    },
                    adults: occupancyInfo.pax.adults,
                    children: occupancyInfo.pax.children + occupancyInfo.pax.babies,
                    roomsNumber: occupancyInfo.rooms,
                    childages: occupancyInfo.ages.length > 1 ? occupancyInfo.ages : ""
                };
                window.location.href = _getRedirectUrl(location.selected.url, dataUrl);
                return;
            } else {
                $searchBarForm.data("validate", true).trigger("submit");
            }
        }
        $searchBarForm.data("validate", true).trigger("submit");
    }
    function _getRedirectUrl(tpl, data) {
        return tpl.replace(/\[(.*?)\]/gim, function(match, p1) {
            var prop = p1.trim();
            return data.hasOwnProperty(prop) ? data[prop] : "";
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-results-page-city").length) {
        pResultsPageCity.init($(".p-results-page-city"));
    }
});

"use strict";

var pRewardsMovements = function() {
    var $pRewardsMovementsView;
    var $movementsFormData;
    var messageModals = null;
    var $claimMovementsModal = null;
    var $paginateElements = null;
    var paginationOptions = {
        itemsPerPage: 10,
        prevLinkText: Labels && Labels.paginatePrevText ? Labels.paginatePrevText : null,
        nextLinkText: Labels && Labels.paginateNextText ? Labels.paginateNextText : null
    };
    function init(view) {
        $pRewardsMovementsView = view;
        $($pRewardsMovementsView).find(".mDestinations").selectDestinations();
        $movementsFormData = {
            $form: $pRewardsMovementsView.find("#form-modal-claim-points"),
            get fields() {
                return this.$form.find("select, input, textarea");
            },
            messages: {
                get errorClaimFields() {
                    return $movementsFormData.$form.data("error-claim-fields");
                },
                get errorClaimException() {
                    return $movementsFormData.$form.data("error-claim-exception");
                },
                get success() {
                    return $movementsFormData.$form.data("success-claim");
                }
            },
            range: {
                get $rangeSelector() {
                    return $movementsFormData.$form.find(".range-calendar");
                },
                get $initRangeWrapper() {
                    return this.$rangeSelector.find(".init-range-calendar .js-input-wrapper");
                },
                get $endRangeWrapper() {
                    return this.$rangeSelector.find(".end-range-calendar .js-input-wrapper");
                },
                get $initRangeInput() {
                    return this.$initRangeWrapper.find("input.date-select");
                },
                get $endRangeInput() {
                    return this.$endRangeWrapper.find("input.date-select");
                },
                get $initRangeErrorBlock() {
                    return this.$initRangeWrapper.find(".help-block");
                },
                get $endRangeErrorBlock() {
                    return this.$endRangeWrapper.find(".help-block");
                }
            }
        };
        messageModals = {
            error: $pRewardsMovementsView.find("#modal-error"),
            success: $pRewardsMovementsView.find("#modal-success")
        };
        $claimMovementsModal = $pRewardsMovementsView.find("#modal-movements");
        $("#form-modal-claim-points").validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                _isValidRange();
                toggleLoadingButton($form, false);
            } else {
                e.preventDefault();
                validForm = _isValidRange();
                if (validForm) {
                    _submitForm();
                }
            }
        });
        if ($movementsFormData.range.$rangeSelector.data("range-required")) {
            _initValidateRange();
        }
        messageModals.success.on("hidden.bs.modal", function() {
            $claimMovementsModal.modal("hide");
        });
        $paginateElements = $pRewardsMovementsView.find(".paginateMe");
        if ($paginateElements.length) {
            paginationOptions = {
                itemsPerPage: 10,
                prevLinkText: Labels && Labels.paginatePrevText ? Labels.paginatePrevText : null,
                nextLinkText: Labels && Labels.paginateNextText ? Labels.paginateNextText : null
            };
            for (var prop in paginationOptions) {
                if (!paginationOptions[prop]) {
                    delete paginationOptions[prop];
                }
            }
        }
        $paginateElements.paginateMe(paginationOptions);
    }
    function _showFormMessage(errorCode) {
        var errorCodes = {
            99999: {
                message: "errorClaimFields",
                modal: "error"
            },
            "00010": {
                message: "errorClaimException",
                modal: "error"
            },
            "00000": {
                message: "success",
                modal: "success"
            }
        };
        var message = $movementsFormData.messages[errorCodes[errorCode].message];
        var $modal = messageModals[errorCodes[errorCode].modal];
        $modal.find(".symbol-text p").text(message);
        $modal.modal("show");
    }
    function _submitForm() {
        var data = {};
        var promise;
        $.each($movementsFormData.fields, function(index, element) {
            var $element = $(element);
            if (element.id.indexOf("GDPR_flag") >= 0) {
                data[element.id] = $element.prop("checked") ? "S" : "N";
            } else {
                data[element.id] = element.value;
            }
        });
        promise = $.ajax({
            url: "/rewards/claim",
            type: "POST",
            data: JSON.stringify(data),
            contentType: "application/json"
        });
        promise.then(function(response) {
            _showFormMessage("99999");
            if (response.errorCode === "00000") {
                _resetClaimPointsForm();
            }
        }, function() {
            _showFormMessage("99999");
        }).always(function() {
            toggleLoadingButton($movementsFormData.$form, false);
        });
    }
    function _resetClaimPointsForm() {
        var selects = $movementsFormData.fields.filter("select");
        $movementsFormData.$form[0].reset();
        $movementsFormData.range.$initRangeWrapper.removeClass("has-success-datepicker has-invalid-datepicker-error");
        $movementsFormData.range.$endRangeWrapper.removeClass("has-success-datepicker has-invalid-datepicker-error");
        $.each(selects, function(index, select) {
            var $this = $(select);
            if (select.id !== "country") {
                $this.empty();
            }
        });
        selects.selectpicker("refresh");
    }
    function _initValidateRange() {
        $movementsFormData.range.$initRangeErrorBlock.append('<ul role="alert"><li>' + $movementsFormData.range.$initRangeInput.data("error") + "</li></ul>");
        $movementsFormData.range.$endRangeErrorBlock.append('<ul role="alert"><li>' + $movementsFormData.range.$endRangeInput.data("error") + "</li></ul>");
        $movementsFormData.range.$initRangeInput.add($movementsFormData.range.$endRangeInput).on("focusout", function(ev) {
            var $this = $(this);
            var $wrapper = this.id === "end-date" ? $movementsFormData.range.$endRangeWrapper : $movementsFormData.range.$initRangeWrapper;
            _validateRangeDate($this, $wrapper);
        });
        $movementsFormData.range.$initRangeInput.on("change", function() {
            $movementsFormData.range.$initRangeInput.trigger("focusout");
            $movementsFormData.range.$endRangeInput.trigger("focusout");
        });
        $movementsFormData.range.$endRangeInput.on("change", function() {
            $movementsFormData.range.$endRangeInput.trigger("focusout");
        });
    }
    function _validateRangeDate($input, $wrapper) {
        var isError = validateDate($input);
        _toggleInvalidRangeError($wrapper, isError);
        return isError;
    }
    function _isValidDate($input) {
        var date = $input.val();
        var isValid = true;
        if (!date) {
            isValid = false;
        } else {
            isValid = moment(date, "DD/MM/YYYY").isValid();
        }
        return isValid;
    }
    function _isValidRange() {
        var isValidInitialDate = _isValidDate($movementsFormData.range.$initRangeInput);
        var isValidFinalDate = _isValidDate($movementsFormData.range.$endRangeInput);
        _toggleInvalidRangeError($movementsFormData.range.$initRangeWrapper, !isValidInitialDate);
        _toggleInvalidRangeError($movementsFormData.range.$endRangeWrapper, !isValidFinalDate);
        return isValidInitialDate && isValidFinalDate;
    }
    function _toggleInvalidRangeError($wrapper, isError) {
        var $helpBlock = $wrapper.find(".help-block");
        if (isError) {
            $helpBlock.show();
            $wrapper.addClass("has-invalid-datepicker-error has-error").removeClass("has-success-datepicker");
        } else {
            $helpBlock.hide();
            $wrapper.removeClass("has-invalid-datepicker-error has-error").addClass("has-success-datepicker");
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-rewards-movements").length) {
        pRewardsMovements.init($(".p-rewards-movements"));
    }
});

"use strict";

var nhReWardsProfile = function() {
    var nhRewardsProfileForm = $("#personal-information");
    var nhPasswordForm = $("#change-password");
    var nationality = null;
    var datepickerSelector;
    function init() {
        nationality = {
            $field: nhRewardsProfileForm.find("#nationality"),
            $label: nhRewardsProfileForm.find("label[for='national-id']"),
            $idField: nhRewardsProfileForm.find("#national-id")
        };
        datepickerSelector = nhRewardsProfileForm.find("#birth-date-selector");
        nhRewardsProfileForm.validator({
            disable: false,
            custom: {
                "birth-date": customBirthDateValidator.bind(this)
            }
        }).on("submit", function(e) {
            var $form = $(this);
            var validForm = true;
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                validForm = false;
                datepickerSelector.selectorDatepicker("validateOnSubmit");
                toggleLoadingButton($form, false);
            } else {
                validForm = datepickerSelector.selectorDatepicker("validateOnSubmit");
                if (!validForm) {
                    e.preventDefault();
                }
                toggleLoadingButton($form, false);
            }
        });
        nhPasswordForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                e.preventDefault();
                _onSubmitPassForm();
                toggleLoadingButton($form, false);
            }
        });
        _checkNationality();
        nationality.$field.on("change", function() {
            _checkNationality();
        });
    }
    function _checkNationality() {
        var label = $.trim(nationality.$label.html());
        if (nationality.$field.val() === "ES") {
            label = label + " *";
            nationality.$idField.prop("required", true);
            nationality.$label.html(label);
        } else {
            label = label.replace(/\*/g, "");
            nationality.$idField.prop("required", false);
            nationality.$label.html(label);
        }
        nhRewardsProfileForm.validator("update");
        nationality.$idField.trigger("blur");
    }
    function _onSubmitPassForm() {
        $.post("/rewards/updatepass", {
            currentPass: $("#current-pass").val(),
            newPass: $("#new-pass").val()
        }, function(data, status) {
            if (data) {
                $("#modal-success").modal("show");
            } else {
                $("#modal-error").modal("show");
            }
        });
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "error";
            }
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-reward-my-profile").length) {
        nhReWardsProfile.init();
    }
});

"use strict";

var rewardsSignupForm = function() {
    function init() {
        var urlEmail = decodeURIComponent(utils.getUrlParameters().e);
        if (urlEmail !== "undefined") $("#signup-corporate #email").val(urlEmail).focus();
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-rewards-signup.rewards-signup-form").length) {
        rewardsSignupForm.init();
    }
});

"use strict";

var nhSignUpBusinessTravel = function() {
    var nhSignupBusinessTravelForm = $("#form-signup-business-travel");
    var jsonData = JSON.parse('{"emails":[{"email":"bpc@nh-hotels.com","country":"tcm:41-683-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-699-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-654-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-682-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-686-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-696-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-704-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-693-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-695-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-698-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-700-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-701-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-690-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-685-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-703-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-684-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-687-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-707-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-709-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-101425-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-102565-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-102479-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-72875-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-697-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-688-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-688-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-708-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-706-1024"},{"email":"bpc@nh-hotels.com","country":"tcm:41-692-1024"}],"emailDefault":"bpc@nh-hotels.com","subject":"Application for registration in NH Hotel Group Benefit Program for Companies"}');
    function init() {
        nhSignupBusinessTravelForm.validator({
            disable: false,
            custom: {}
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                e.preventDefault();
                _onSubmitForm();
            }
        });
    }
    function _onSubmitForm() {
        b2bSubmit();
    }
    function b2bSubmit() {
        var emailTo = "";
        for (var i = 0; i < jsonData.emails.length; i++) {
            if (jsonData.emails[i].country == $("#pais").val()) {
                emailTo = jsonData.emails[i].email;
                break;
            }
        }
        if (!emailTo.length) {
            emailTo = jsonData.emailDefault;
        }
        $("#emailTo").val(emailTo);
        $("#subject").val(jsonData.subject);
        $(".m-gdpr-optional").find(".js-gdpr-check").each(function() {
            if ($(this).find("input").is(":checked") == false) {
                $(this).append('<input type="hidden" value="N" name="' + $(this).find("input").attr("name") + '" />');
            }
        });
    }
    return {
        init: init
    };
}();

$(function() {
    nhSignUpBusinessTravel.init();
});

"use strict";

var pCancelReservation = function() {
    var cancelReservationView = $(".p-eservicing-cancel");
    var additionalComments = cancelReservationView.find("form #additional-comments");
    var reasonSelector = cancelReservationView.find("form #reason");
    var cancelRoomsSet = cancelReservationView.find('fieldset[name="cancel-rooms"]');
    var totalCostWell = cancelReservationView.find(".js-total-cancel-price");
    var CURRENCY = cancelRoomsSet.data("currency");
    var CANCELATION_DECIMALS = 2;
    function init() {
        cancelReservationView.find("form").validator({
            disable: false,
            custom: {
                mincheckbox: validateMinCheckbox
            }
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
        reasonSelector.on("change", _onReasonChange);
        cancelRoomsSet.find('input[type="checkbox"]').on("change", _handlerCancelRoomChange);
        _checkSelectedReason(reasonSelector);
        _renderRoomCancelPrices();
        _handlerCancelRoomChange();
    }
    function _onReasonChange(e) {
        var $this = $(this);
        _checkSelectedReason($this);
    }
    function _checkSelectedReason($selector) {
        var selectedOption = $selector.find(":selected");
        if (selectedOption.data("reason-comment-required")) {
            _toggleRequireAdditionalComment(true);
        } else {
            _toggleRequireAdditionalComment(false);
        }
    }
    function _toggleRequireAdditionalComment(toggle) {
        additionalComments.attr("required", toggle);
        cancelReservationView.find("form").validator("update");
        if (!toggle) {
            additionalComments.closest(".form-group").removeClass("has-error", "has-danger");
        }
    }
    function _handlerCancelRoomChange() {
        var roomPrices = _getRoomCancelPrices();
        var totalPrice = _calcCancellationCost(roomPrices);
        var errorMessage = cancelRoomsSet.find(".room-cancel-alert");
        if (cancelRoomsSet.find('input[type="checkbox"]:checked').length > 0) errorMessage.hide(); else errorMessage.show();
        _renderCancellationTotalCost(totalPrice);
    }
    function _renderRoomCancelPrices() {
        var checkboxes = cancelRoomsSet.find('input[type="checkbox"]');
        checkboxes.each(function(index, checkbox) {
            var $checkbox = $(checkbox);
            var associatedPrice = $checkbox.data("associated-price");
            if (!isNaN(associatedPrice)) {
                var name = $checkbox.attr("id");
                var priceNode = cancelRoomsSet.find('.price[name="' + name + '"]');
                var aPrice = parseFloat(associatedPrice).toFixed(CANCELATION_DECIMALS);
                var formattedPrice = aPrice + " " + CURRENCY;
                priceNode.html(formattedPrice);
            }
        });
    }
    function _getRoomCancelPrices() {
        var prices = [];
        var checkedRooms = cancelRoomsSet.find('input[type="checkbox"]:checked');
        checkedRooms.each(function(index, roomCheckbox) {
            var $roomCheckbox = $(roomCheckbox);
            var associatedPrice = $roomCheckbox.data("associated-price");
            if (!isNaN(associatedPrice)) {
                prices.push(associatedPrice);
            }
        });
        return prices;
    }
    function _calcCancellationCost(costArray) {
        var totalPrice = 0;
        costArray.forEach(function(price) {
            totalPrice += price;
        });
        return totalPrice;
    }
    function _renderCancellationTotalCost(totalCost) {
        if (isNaN(totalCost)) {
            return;
        }
        var formattedTotalCost = parseFloat(totalCost).toFixed(CANCELATION_DECIMALS) + " " + CURRENCY;
        totalCostWell.find(".price").html(formattedTotalCost);
        if (typeof searchData !== "undefined") {
            searchData.bookingTotalValue = parseFloat(totalCost).toFixed(CANCELATION_DECIMALS);
        }
    }
    return {
        init: init
    };
}();

$(function() {
    pCancelReservation.init();
});

"use strict";

var eServicing = function() {
    var eServicingPage = $(".p-eservicing-access");
    var $hotelSelector = $("#hotel-selector");
    function init() {
        setMinArrivalDate();
        _getHotels().then(function(response) {
            var options = '<option role="option" value=""></option>';
            $.each(response, function(index, hotelData) {
                options += '<option role="option" value="' + hotelData.code + '">' + hotelData.name + "</option>";
            });
            $hotelSelector.append(options).selectToAutocomplete();
            _setupForm();
        });
    }
    function setMinArrivalDate() {
        var inputDate = eServicingPage.find("#arrival-date");
        var today = moment().format("YYYY-MM-DD");
        inputDate.attr("min", today);
    }
    function _getHotels() {
        var promise = $.ajax({
            type: "GET",
            dataType: "json",
            url: "/rest/auto/autocompleteEservicing",
            cache: false
        });
        return promise.then(function(response) {
            return response[0];
        }, function(error) {
            return error;
        });
    }
    function _setupForm() {
        eServicingPage.find("form").validator({
            disable: false,
            custom: {
                entrydate: validateDate
            }
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (isMobile.any()) {
                $dateInput = $("#arrival-date");
                $dateInput.attr("name", "");
                var selectedDate = $dateInput.val();
                var selectedYear = selectedDate.split("-")[0];
                var selectedMonth = selectedDate.split("-")[1];
                var selectedDay = selectedDate.split("-")[2];
                var selectedDateFormatted = selectedDay + "/" + selectedMonth + "/" + selectedYear;
                $dateInput.parent().append('<input type="hidden" name="fecha" value="' + selectedDateFormatted + '"/>');
            }
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-eservicing-access").length) {
        eServicing.init();
    }
});

"use strict";

var eServicingManagement = function() {
    function init() {
        urlPassbook();
        $(document).on("click", ".js-form-button", function(e) {
            e.preventDefault();
            $(".js-form-button").attr("disabled", true);
            var formId = "#" + $(this).data("form");
            $(formId).submit();
        });
    }
    function submitForm(formId) {
        $(formId).submit();
    }
    var urlPassbook = function urlPassbook() {
        if (typeof pageData !== "undefined") {
            if (typeof pageData.urlPassbook != "undefined") {
                var fecha = pageData.urlPassbook.split("/");
                var fullPassbook = pageData.fullDomain + "/getPassBook/" + pageData.idReservation + "/" + pageData.emailTitular + "/" + fecha[2] + "-" + fecha[1] + "-" + fecha[0] + "/index3.html";
                $(".js-passbook").on("click", function(e) {
                    e.preventDefault();
                    location.href = fullPassbook;
                });
            }
        }
    };
    return {
        init: init
    };
}();

$(function() {
    eServicingManagement.init();
});

"use strict";

var eServicingModify = function() {
    var eServicingPage = $(".p-eservicing-modify");
    var $saveBookingForm = eServicingPage.find("#form_modify");
    var $backToBookingForm = eServicingPage.find("#form_back_to_booking");
    var $backToBookingButton = $saveBookingForm.find("#backToBooking");
    function init() {
        $saveBookingForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
        $backToBookingButton.on("click", _sendBackToBookingForm);
    }
    function _sendBackToBookingForm() {
        $backToBookingButton.prop("disabled", true);
        $backToBookingForm.submit();
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".p-eservicing-modify").length) eServicingModify.init();
});

"use strict";

var landings = function() {
    var $landingCountdowns;
    function init() {
        _initCountdowns();
    }
    function _initCountdowns() {
        $landingCountdowns = $(".js-time-counter");
        if ($landingCountdowns.length) {
            $landingCountdowns.each(function() {
                utils.initializeClock($(this));
            });
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($("body").hasClass("page-landings") || $("body").data("page") === "LandingsPage" || $(".p-landings").length) {
        landings.init();
    }
});

"use strict";

var mGallery = function() {
    var isMobileDevice = isMobile.any();
    var slidersConfig = {
        dots: false,
        infinite: true,
        fade: true,
        prevArrow: '<span class="slick-arrow slick-prev nh-ic-chevron"></span>',
        nextArrow: '<span class="slick-arrow slick-next nh-ic-chevron"></span>',
        lazyLoad: "ondemand"
    };
    var galleryConfig = {
        loop: true,
        touch: true,
        backFocus: false,
        buttons: [ "zoom", "fullScreen", "thumbs", "close" ],
        thumbs: {
            autoStart: !isMobileDevice,
            hideOnClose: true,
            parentEl: ".fancybox-container",
            axis: "x"
        },
        btnTpl: {
            arrowLeft: '<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}">' + '<div><span data-fancybox-prev class="fancybox-btn-prev nh-ic-chevron"></span></div>' + "</button>",
            arrowRight: '<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}">' + '<div><span data-fancybox-nex class="fancybox-btn-next nh-ic-chevron"></span></div>' + "</button>"
        }
    };
    var galleriesData = {
        $galleries: $(".m-gallery"),
        galleriesObj: {},
        get $slidersContent() {
            return this.$galleries.find(".gallery-content");
        },
        get $thumbsContainer() {
            return this.$galleries.find(".gallery-thumbs-container");
        },
        get $thumbsGalleries() {
            return this.$thumbsContainer.find(".gallery-thumbs");
        },
        thumbsVisibles: 8,
        responsive: [ {
            breakpoint: 468,
            settings: {
                thumbsVisibles: 3
            }
        }, {
            breakpoint: 768,
            settings: {
                thumbsVisibles: 4
            }
        }, {
            breakpoint: 813,
            settings: {
                thumbsVisibles: 6
            }
        } ]
    };
    function init() {
        $.each(galleriesData.$galleries, _setupGalleries);
        $(window).on("resize", _onWindowResize);
    }
    function _beforeCloseZoomGallery(instance, current) {
        var $link = this.$thumbsLinks.eq(current.index);
        this.currentImg = current.index;
        $link.trigger("click");
    }
    function _onBeforeSlideChange(event, slick, currentSlide, nextSlide) {
        var $nextImg = this.$thumbsImg.eq(nextSlide);
        var $nextThumb = this.$thumbsLinks.eq(nextSlide);
        this.$thumbsLinks.eq(currentSlide).removeClass("selected");
        $nextThumb.addClass("selected");
        this.currentImg = nextSlide;
        this.$photoLabel.find(".photo-title").html($nextImg.data("photo-title"));
        this.$photoLabel.find(".photo-description").html($nextImg.data("photo-description"));
    }
    function _getGalleryData(index, $gallery) {
        var galleryData = {
            $gallery: $gallery,
            $slider: galleriesData.$slidersContent.eq(index),
            $thumbsContainer: galleriesData.$thumbsContainer.eq(index),
            $thumbsContent: galleriesData.$thumbsGalleries.eq(index),
            get $loading() {
                return this.$gallery.find(".spinner");
            },
            get $sliderImg() {
                return this.$slider.find(".gallery-image");
            },
            get $sliderVideos() {
                return this.$slider.find(".video-content");
            },
            get $thumbsLinks() {
                return this.$thumbsContent.find("a");
            },
            get $thumbsImg() {
                return this.$thumbsContent.find("img");
            },
            get $thumbsTriggers() {
                return this.$thumbsContent.find(".gallery-trigger");
            },
            get $zoomBtn() {
                return this.$gallery.find(".zoom-btn");
            },
            get $showMoreBtn() {
                return this.$thumbsContainer.find(".show-more-btn");
            },
            get $photoLabel() {
                return this.$thumbsContainer.find(".photo-label");
            },
            currentImg: 0,
            get totalThumbs() {
                return this.$thumbsImg.length;
            },
            get visibleThumbs() {
                var visibles = galleriesData.thumbsVisibles;
                galleriesData.responsive.some(function(item) {
                    if (globalConfig.windowWidth < item.breakpoint) {
                        visibles = item.settings.thumbsVisibles;
                        return true;
                    }
                });
                return visibles;
            },
            get hiddenThumbs() {
                var hiddenThumbs = this.$thumbsImg.length - this.visibleThumbs;
                return hiddenThumbs >= 0 ? hiddenThumbs : 0;
            }
        };
        return galleryData;
    }
    function _initializeSlider() {
        var $initImage = this.$thumbsImg.eq(0);
        this.$gallery.addClass("loaded");
        this.$showMoreBtn.find("i").html(this.$thumbsImg.length);
        this.$photoLabel.find(".photo-title").html($initImage.data("photo-title"));
        this.$photoLabel.find(".photo-description").html($initImage.data("photo-description"));
        _setVideoAspectRadio(this);
    }
    function _initZoomGallery(ev) {
        var galleryData = ev.data.galleryData;
        var config = {
            caption: _setGalleryCaption,
            onInit: _onInitZoomGallery.bind(galleryData),
            beforeClose: _beforeCloseZoomGallery.bind(galleryData)
        };
        $.extend(config, galleryConfig);
        $.fancybox.open(galleryData.$thumbsLinks, config);
    }
    function _onClickshowMoreBtn(ev) {
        var hasHiddenThumbs = ev.data.galleryData.$thumbsLinks.length >= ev.data.galleryData.visibleThumbs;
        if (hasHiddenThumbs && !ev.data.galleryData.$thumbsContainer.hasClass("opened")) {
            ev.data.galleryData.$thumbsContainer.addClass("opened");
        } else if (ev.data.galleryData.$thumbsContainer.hasClass("opened")) {
            ev.data.galleryData.$thumbsContainer.removeClass("opened");
        }
    }
    function _onClickthumbsLinks(ev) {
        var $this = $(ev.currentTarget);
        var imgSelected = $this.data("index");
        ev.preventDefault();
        ev.data.galleryData.$slider.slick("slickGoTo", imgSelected);
    }
    function _onInitZoomGallery(instance) {
        instance.jumpTo(this.currentImg);
    }
    function _setGalleryCaption() {
        var $img = $(this).find("img").eq(0);
        var title = "";
        var desc = "";
        var caption;
        if ($img.length) {
            title = $img.data("photo-title") || "";
            desc = $img.data("photo-description") || "";
            caption = title + " " + desc;
        }
        return caption;
    }
    function _setupGalleries(index, gallery) {
        var $gallery = $(gallery);
        var galleryData = galleriesData.galleriesObj["g" + index] = _getGalleryData(index, $gallery);
        galleryData.$slider.on("init", _initializeSlider.bind(galleryData)).slick(slidersConfig).on("beforeChange", _onBeforeSlideChange.bind(galleryData));
        _toggleShowMoreButton(galleryData);
        galleryData.$zoomBtn.on("click", {
            galleryData: galleryData
        }, _initZoomGallery);
        galleryData.$showMoreBtn.on("click", {
            galleryData: galleryData
        }, _onClickshowMoreBtn);
        galleryData.$thumbsLinks.on("click", {
            galleryData: galleryData
        }, _onClickthumbsLinks);
    }
    function _setVideoAspectRadio(galleryData) {
        var img;
        var videoData = {
            aspectRadio: null,
            $ele: null,
            height: null,
            width: null
        };
        if (galleryData.$sliderVideos.length) {
            img = galleryData.$sliderImg.eq(0).find("img");
            videoData = {
                height: img.data("height"),
                width: img.data("width"),
                get aspectRadio() {
                    return this.height / this.width * 100;
                }
            };
            $.each(galleryData.$sliderVideos, function(index, video) {
                var $video = $(video);
                var $embed = $video.find(".embed-container");
                $video.css({
                    "max-height": videoData.height,
                    "max-width": videoData.width
                });
                $embed.css("padding-bottom", videoData.aspectRadio + "%");
            });
        }
    }
    function _onWindowResize() {
        galleryConfig.thumbs.autoStart = !isMobile.any();
        $.each(galleriesData.galleriesObj, function(index, galleryData) {
            _toggleShowMoreButton(galleryData);
        });
    }
    function _toggleShowMoreButton(galleryData) {
        if (galleryData.$thumbsLinks.length >= galleryData.visibleThumbs) {
            galleryData.$thumbsContainer.addClass("hiddenItems");
        } else {
            galleryData.$thumbsContainer.removeClass("hiddenItems");
        }
    }
    return {
        init: init
    };
}();

$(function() {
    if ($(".m-gallery").length) {
        mGallery.init();
    }
});

"use strict";

var _slicedToArray = function() {
    function sliceIterator(arr, i) {
        var _arr = [];
        var _n = true;
        var _d = false;
        var _e = undefined;
        try {
            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
                _arr.push(_s.value);
                if (i && _arr.length === i) break;
            }
        } catch (err) {
            _d = true;
            _e = err;
        } finally {
            try {
                if (!_n && _i["return"]) _i["return"]();
            } finally {
                if (_d) throw _e;
            }
        }
        return _arr;
    }
    return function(arr, i) {
        if (Array.isArray(arr)) {
            return arr;
        } else if (Symbol.iterator in Object(arr)) {
            return sliceIterator(arr, i);
        } else {
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
    };
}();

var guestData = function() {
    var guestDataView = $(".p-cio-guest-data");
    var guestDataForm = guestDataView.find("form#guestDataForm");
    var nationalityInput = guestDataView.find("#country");
    var datepickerSelector = guestDataView.find("#birth-date-selector");
    var boxConfirmDate = guestDataView.find(".box-confirm-age");
    var restOfForm = guestDataView.find(".js-hide-confirm-age");
    var childConfirmModal = guestDataView.find("#modal-child-confirm");
    var documentTypeSelect = guestDataView.find("#documentType");
    var region = guestDataView.find("#region");
    var regionFields = guestDataView.find("select.region-autocomplete");
    var cityFields = guestDataView.find("select.city-autocomplete");
    var cityselect = guestDataView.find("#cityselect");
    var expedition_place = guestDataView.find("#expedition_place");
    var birthplace = guestDataView.find("#birthplace");
    var region = guestDataView.find("#region");
    var isUnderAgeInput = guestDataForm.find("#isUnderAge");
    var MIN_ADULT_AGE = 18;
    var optionTimeAjax = 800;
    var regionInitActive = false;
    var hotelCountry = null;
    var userLoggedFields = {
        name: {
            class: ".js-logged-name",
            dataKey: "name",
            value: null,
            blocked: true
        },
        surname: {
            class: ".js-logged-surname",
            dataKey: "surname",
            value: null,
            blocked: true
        },
        gender: {
            class: ".js-logged-gender",
            dataKey: "gender",
            value: null
        },
        mail: {
            class: ".js-logged-email",
            dataKey: typeof pageData !== "undefined" ? pageData.isRewards === "true" ? "customerEmail" : "email" : "email",
            value: null,
            blocked: true
        },
        street: {
            class: ".js-logged-street",
            dataKey: "street",
            value: null
        },
        city: {
            class: ".js-logged-city",
            dataKey: "city",
            value: null
        },
        cityinput: {
            class: ".js-logged-cityinput",
            dataKey: "city",
            value: null
        },
        cityselect: {
            class: ".js-logged-cityselect",
            dataKey: "city",
            value: null
        },
        postalCode: {
            class: ".js-logged-zip-code",
            dataKey: "postalCode",
            value: null
        },
        nationality: {
            class: ".js-logged-nationality",
            dataKey: "nationality",
            value: null
        },
        country: {
            class: ".js-logged-country",
            dataKey: "country",
            value: null
        },
        language: {
            class: ".js-logged-language",
            dataKey: "language",
            value: null
        },
        taxNumber: {
            class: ".js-logged-tax-number",
            dataKey: "documentNumber",
            value: null,
            blocked: true
        },
        documentType: {
            class: ".js-logged-document-type",
            dataKey: "documentType",
            value: null,
            blocked: true
        },
        birthDate: {
            class: ".js-logged-birth-date",
            dataKey: "birthDate",
            value: null
        },
        get birthYear() {
            if (this.birthDate.value != null) return {
                class: ".js-logged-birth-year",
                dataKey: "birthYear",
                value: typeof this.birthDate.value != null ? this.birthDate.value.split("/")[2] : ""
            };
        },
        get birthMonth() {
            if (this.birthDate.value != null) return {
                class: ".js-logged-birth-month",
                dataKey: "birthMonth",
                value: typeof this.birthDate.value != null ? parseInt(this.birthDate.value.split("/")[1]) - 1 : ""
            };
        },
        get birthDay() {
            if (this.birthDate.value != null) return {
                class: ".js-logged-birth-day",
                dataKey: "birthDay",
                value: typeof this.birthDate.value != null ? parseInt(this.birthDate.value.split("/")[0]) : ""
            };
        }
    };
    var NATIONALITIES = {
        0: {
            hotelNationality: "",
            debug: false,
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            othterItaly: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "birth_province" ],
            validations: {
                acceptsnovat: true
            },
            validationsItaly: {},
            activeItaly: true,
            resetValidations: function resetValidations() {
                $("#postalCode, #nationalIdNumber").removeAttr("pattern");
                $("#nationalIdNumber").removeData("docNumber");
                $("#nationalIdExpeditionDate").removeData("validateExpeditionDate");
                $("#name, #surname").attr({
                    maxlength: "100"
                });
                $("#street").attr("maxlength", "150");
                $("#cityinput, #email, #city").attr("maxlength", "50");
                $("#nationalIdNumber").attr("maxlength", "25");
                $("#postalCode").attr("maxlength", "15");
                $("#documentType option[value=passport]").show();
                $("#documentType option:first").prop("selected", true);
                $("#documentType").selectpicker("refresh");
                $("#documentType").attr("data-validate", false);
                $("#nationalIdNumber").attr("data-validate", false);
                guestDataForm.validator({
                    disable: false,
                    custom: NATIONALITIES[0].boostrapValidators
                }).validator("update");
            },
            boostrapValidators: {
                docNumber: customDocumentNumberValidator,
                validateExpeditionDate: customValidateExpeditionDate.bind(this)
            },
            addValidations: function addValidations(otherValidations) {
                Object.entries(otherValidations).forEach(function(_ref) {
                    var _ref2 = _slicedToArray(_ref, 2), key = _ref2[0], value = _ref2[1];
                    if (key == "postalCode") {
                        $("#" + key).attr("pattern", value);
                    }
                    if (key == "nationalIdNumber") {
                        $("#" + key).attr("pattern", value);
                    }
                    if (key == "data") {
                        Object.entries(value).forEach(function(_ref3) {
                            var _ref4 = _slicedToArray(_ref3, 2), k = _ref4[0], v = _ref4[1];
                            $("#" + v.field).attr("data-" + v.rule, "true");
                        });
                    }
                    if (key == "acceptsnovat") {
                        $("#documentType").attr("data-validate", value);
                        $("#nationalIdNumber").attr("data-validate", value);
                    }
                    if (key == "passport") {
                        if (value == true) {
                            $("#documentType option[value=" + key + "]").show();
                        } else {
                            $("#documentType option:first").prop("selected", true);
                            $("#documentType option[value=" + key + "]").hide();
                        }
                        $("#documentType").selectpicker("refresh");
                    }
                });
                guestDataForm.validator({
                    disable: false,
                    custom: NATIONALITIES[0].boostrapValidators
                }).validator("update");
            }
        },
        1: {
            nationalities: [ "AD", "AT", "CO", "CZ", "DO", "FR", "GB", "HT", "HU", "LU", "RO", "SK", "UY" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: true
            }
        },
        2: {
            nationalities: [ "AR", "BE", "CH", "CL", "MX", "PL", "VE" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: true
            }
        },
        3: {
            nationalities: [ "CN" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                postalCode: "^[0-9]{6,6}$",
                acceptsnovat: true
            }
        },
        4: {
            nationalities: [ "DE" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "documentType", "nationalIdNumber", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            others: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: false
            },
            validationsOthers: {
                acceptsnovat: true
            }
        },
        5: {
            nationalities: [ "ES" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "expedition_place", "birth_province", "birthplace" ],
            others: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                postalCode: "((0[1-9]|5[0-2])|[1-4][0-9])[0-9]{3}",
                data: {
                    0: {
                        field: "nationalIdNumber",
                        rule: "docNumber"
                    },
                    1: {
                        field: "nationalIdExpeditionDate",
                        rule: "validateExpeditionDate"
                    }
                },
                passport: true,
                acceptsnovat: true
            },
            validationsOthers: {
                postalCode: "((0[1-9]|5[0-2])|[1-4][0-9])[0-9]{3}",
                data: {
                    0: {
                        field: "nationalIdNumber",
                        rule: "docNumber"
                    },
                    1: {
                        field: "nationalIdExpeditionDate",
                        rule: "validateExpeditionDate"
                    }
                },
                passport: true,
                acceptsnovat: true
            }
        },
        6: {
            nationalities: [ "IT" ],
            fields: [ "cityinput", "nationalIdExpeditionDate" ],
            others: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: true
            },
            validationsOthers: {
                acceptsnovat: true
            }
        },
        7: {
            nationalities: [ "NL" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            others: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: false
            },
            validationsOthers: {
                acceptsnovat: true
            }
        },
        8: {
            nationalities: [ "PT" ],
            fields: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            others: [ "region", "region_expedition_place", "region_birthplace", "cityselect", "nationalIdExpeditionDate", "expedition_place", "birth_province", "birthplace" ],
            validations: {
                acceptsnovat: true
            },
            validationsOthers: {
                acceptsnovat: true
            }
        }
    };
    function init() {
        if (NATIONALITIES[0].debug) console.clear("");
        createFields();
        nationalityInput.on("change", onNationalityInputChange);
        onNationalityInputChange();
        documentTypeSelect.on("change", ondocumentTypeSelectChange);
        datepickerSelector.on("change", onDateBirthChange);
        mModals.attachModalEventsBehaviour(childConfirmModal);
        childConfirmModal.on("hide.bs.modal", onChildModalClose);
        childConfirmModal.find("button:submit").on("click", function() {
            guestDataForm.validator("destroy");
            guestDataForm[0].submit();
        });
        guestDataForm.on("blur", "input[type=text]", function(e) {
            $(this).val($.trim($(this).val()));
        });
        guestDataForm.on("blur", "#nationalIdNumber", function(e) {
            $(this).val($(this).val().replace(/ /g, ""));
        });
        boxConfirmDate.hide();
        restOfForm.show();
        if (sessionStorage.getItem("prevFormGuest")) {
            if (sessionStorage.getItem("prevFormGuest") == "true") _controlForward();
        } else sessionStorage.setItem("prevFormGuest", false);
        guestDataForm.validator({
            disable: false,
            custom: NATIONALITIES[0].boostrapValidators
        }).on("submit", submitForm.bind(this));
    }
    var regionInit = function regionInit() {
        $("#cityselect").on("change", function() {
            $("#postalCode").val($("option:selected", this).attr("data-postalcode")).focus().blur();
        });
        $(".bs-searchbox").css({
            padding: "1%"
        });
        $(".bs-searchbox").find(".form-control").removeClass("form-control").css("cssText", "border-color: #000000 !important;");
        var urlRegions = apiUrlPath + "/OCI/regions/IT";
        var promise = $.ajax({
            data: {
                origin: isMobile.any() ? "" : "desktop"
            },
            method: "GET",
            url: urlRegions,
            async: true,
            dataType: "json",
            contentType: "application/json"
        });
        return promise.then(function(result) {
            var toAppend = "";
            result.forEach(function(val, index) {
                return toAppend += '<option value="' + val.regionCode + '">' + val.regionName + "</option>";
            });
            regionFields.each(function() {
                $(this).append(toAppend).selectpicker("refresh").on("change", onRegionInputChange);
            });
        }, function(err) {
            regionFields.each(function() {
                toggleInputVisibility($(this).attr("id"), false);
            });
            cityFields.each(function() {
                toggleInputVisibility($(this).attr("id"), false);
            });
            console.log("Ruta no encontrada");
        });
    };
    var onRegionInputChange = function onRegionInputChange() {
        cityFields.selectpicker("refresh");
        var selectid = $(this);
        var selectRegion = $(this).is("select") ? $(this).val().toUpperCase() : "";
        var dataAutocomplete = selectid.data("autocomplete");
        var select = $("#" + dataAutocomplete);
        if (selectRegion != "") {
            var urlCities = apiUrlPath + "/OCI/city/" + selectRegion;
            var promise = $.ajax({
                data: {
                    origin: isMobile.any() ? "" : "desktop"
                },
                method: "GET",
                url: urlCities,
                async: true,
                dataType: "json",
                contentType: "application/json"
            });
            return promise.then(function(result) {
                var toAppend = '<option value=""></option>';
                filterCities = result.filter(function(el) {
                    return el.regionCode === selectRegion;
                });
                filterCities.forEach(function(val, index) {
                    return toAppend += '<option data-postalcode="' + val.zipCode + '" value="' + val.cityCode + '">' + val.cityDescription + "</option>";
                });
                select.empty().append(toAppend);
                setTimeout(function() {
                    select.selectpicker("refresh");
                }, 160);
            }, function(err) {});
        } else {
            select.empty();
            setTimeout(function() {
                select.selectpicker("refresh");
            }, 160);
            return true;
        }
    };
    var changeComboNationality = function changeComboNationality(selectedNationality, hotelNationality) {
        if (hotelNationality == "IT" && selectedNationality != "IT") {
            var toAppend = "";
            cityFields.empty();
            $("#country > option").each(function() {
                toAppend += "<option value='" + $(this).val() + "'>" + $(this).text() + "</option>\n";
            });
            expedition_place.empty().append(toAppend);
            birthplace.empty().append(toAppend);
            setTimeout(function() {
                expedition_place.selectpicker("refresh");
                birthplace.selectpicker("refresh");
            }, 300);
        }
    };
    function createFields() {
        if (!$("#birthdate").length) {
            $("<input>").attr({
                type: "hidden",
                id: "birthdate",
                value: "",
                name: "birthDate"
            }).addClass("js-logged-birth-date").appendTo(guestDataForm);
        }
        if (!$("#city").length) {
            $("<input>").attr({
                type: "hidden",
                id: "city",
                value: "",
                name: "city"
            }).appendTo(guestDataForm);
        }
        if (!$("#loginRewards").length) {
            $("<input>").attr({
                type: "hidden",
                id: "loginRewards",
                value: "",
                name: "loginRewards"
            }).appendTo(guestDataForm);
        }
        if (!$("#taxExpeditorPlace").length) {
            $("<input>").attr({
                type: "hidden",
                id: "taxExpeditorPlace",
                value: "",
                name: "taxExpeditorPlace"
            }).appendTo(guestDataForm);
        }
        if (!$("#taxIssueDate").length) {
            $("<input>").attr({
                type: "hidden",
                id: "taxIssueDate",
                value: "",
                name: "taxIssueDate"
            }).appendTo(guestDataForm);
        }
    }
    function requestHidden(selectedNationality, hotelNationality) {
        if (NATIONALITIES[0].debug) console.log("PAIS RESIDENCIA:", selectedNationality, "\nHOTEL NACIONALIDAD:", hotelNationality);
        var found = {
            inputHidden: hotelNationality == "IT" && !NATIONALITIES[0].activeItaly ? NATIONALITIES[0].othterItaly : NATIONALITIES[0].fields,
            validations: hotelNationality == "IT" && !NATIONALITIES[0].activeItaly ? NATIONALITIES[0].validationsItaly : NATIONALITIES[0].validations
        };
        Object.entries(NATIONALITIES).forEach(function(_ref5) {
            var _ref6 = _slicedToArray(_ref5, 2), key = _ref6[0], value = _ref6[1];
            if (typeof value.nationalities !== "undefined") {
                value.nationalities.find(function(element) {
                    if (element == selectedNationality) {
                        if (hotelNationality == selectedNationality) {
                            if (!NATIONALITIES[0].activeItaly && hotelNationality == "IT" && selectedNationality == "IT") {
                                if (NATIONALITIES[0].debug) console.log("EXCEPCION ACTIVAR ITALIA.");
                                found.inputHidden = NATIONALITIES[0].fields;
                                found.validations = NATIONALITIES[0].validations;
                            } else {
                                found.inputHidden = value.fields;
                                if (typeof value.validations !== "undefined") found.validations = value.validations;
                            }
                        } else {
                            if (hotelNationality == "IT") {
                                found.inputHidden = NATIONALITIES[0].othterItaly;
                                found.validations = NATIONALITIES[0].validationsItaly;
                            } else {
                                found.inputHidden = typeof value.others !== "undefined" ? value.others : value.fields;
                                found.validations = typeof value.validationsOthers !== "undefined" ? value.validationsOthers : value.validations;
                            }
                        }
                    }
                });
            }
        });
        if (NATIONALITIES[0].debug) console.log("COFIGURACIÓN FINAL.", found);
        return found;
    }
    var localData = function localData(create, data) {
        if (create) {
            sessionStorage.setItem("dataFormGuest", JSON.stringify(data));
            sessionStorage.setItem("prevFormGuest", false);
        } else {
            if (sessionStorage.getItem("dataFormGuest")) {
                return sessionStorage.getItem("dataFormGuest");
            } else return "";
        }
    };
    function onNationalityInputChange() {
        var hotelNationality = "";
        if (NATIONALITIES[0].hotelNationality !== false && NATIONALITIES[0].hotelNationality !== "") {
            hotelNationality = NATIONALITIES[0].hotelNationality;
        } else {
            if (typeof pageData.hotelCountryKey !== "undefined") {
                if (pageData.hotelCountryKey != "") {
                    hotelNationality = pageData.hotelCountryKey;
                    hotelCountry = pageData.hotelCountryKey;
                } else $("form#guestDataForm")[0].reset();
            } else $("form#guestDataForm")[0].reset();
        }
        var selectedNationality = $(this).is("select") ? $(this).val().toUpperCase() : "";
        if (hotelNationality == "IT") {
            if (!regionInitActive) regionInit();
            $("#postalCode").val("");
            cityFields.empty();
            regionFields.each(function() {
                $(this).find("option:eq(0)").prop("selected", true);
            });
            setTimeout(function() {
                regionFields.selectpicker("refresh");
                cityFields.selectpicker("refresh");
            }, 100);
            changeComboNationality(selectedNationality, hotelNationality);
            if (selectedNationality != "") {
                var $moveTo = selectedNationality == "IT" ? $("#region_birthplace") : $("#birthplace");
                setTimeout(function() {
                    if ($moveTo.closest(".form-group").is(":visible")) {
                        $("HTML, BODY").animate({
                            scrollTop: $moveTo.closest(".form-group").offset().top - 50
                        }, 1e3);
                    }
                }, 1e3);
            }
        }
        var requestNacionality = requestHidden(selectedNationality, hotelNationality);
        var inputsToHide = requestNacionality.inputHidden;
        showInputs();
        if (typeof NATIONALITIES[0].resetValidations !== "undefined") NATIONALITIES[0].resetValidations();
        hideInputs(requestNacionality.inputHidden);
        if (typeof requestNacionality.validations !== "undefined") NATIONALITIES[0].addValidations(requestNacionality.validations);
    }
    function ondocumentTypeSelectChange() {
        var type = $(this).is("select") ? $(this).val().toUpperCase() : "";
        if (type == "PASSPORT") {
            toggleInputVisibility("nationalIdExpeditionDate", false);
        } else if (type == "ID") {
            if (nationalityInput.val() == "ES") {
                toggleInputVisibility("nationalIdExpeditionDate", true);
            } else {
                toggleInputVisibility("nationalIdExpeditionDate", false);
            }
        }
    }
    function hideInputs(inputIds) {
        inputIds.forEach(function(inputId) {
            if (typeof inputId != "undefined") toggleInputVisibility(inputId, false);
        });
    }
    function showInputs() {
        var allInputs = guestDataView.find(".form-group");
        allInputs.each(function(index, inputFormGroup) {
            if ($(inputFormGroup).find("select").length) {
                inputId = $(inputFormGroup).find("select").attr("id");
            } else {
                inputId = $(inputFormGroup).find("input, textarea").attr("id");
            }
            if (typeof inputId != "undefined") toggleInputVisibility(inputId, true);
        });
    }
    function toggleInputVisibility(inputId, visible) {
        if (typeof inputId == "undefined") return false;
        var input = guestDataView.find("#" + inputId);
        var inputFormGroup = input.closest(".form-group");
        inputFormGroup.each(function() {
            if (visible) {
                inputFormGroup.show();
                input.attr("data-validate", "true");
                input.removeAttr("disabled");
                if (inputId == "nationalIdExpeditionDate") inputFormGroup.closest(".row").children("div").show();
            } else {
                inputFormGroup.hide();
                input.attr("data-validate", "false");
                input.prop("disabled", true);
                if (inputId == "nationalIdExpeditionDate") inputFormGroup.closest(".row").children("div").hide();
            }
        });
        guestDataForm.validator({
            disable: false,
            custom: NATIONALITIES[0].boostrapValidators
        }).validator("update");
    }
    function onDateBirthChange() {
        $("#birthdate").val($(this).selectorDatepicker("getDate"));
        if (!$(this).selectorDatepicker("hasValue") || !$(this).selectorDatepicker("checkIsValidDate")) {
            boxConfirmDate.hide();
            restOfForm.show();
            return;
        }
        var selectedDateMoment = $(this).selectorDatepicker("getMomentDate");
        checkMinorGuest(selectedDateMoment);
    }
    function checkMinorGuest(birthDateMoment) {
        if (birthDateMoment.isValid() === true) {
            var age = moment().diff(birthDateMoment, "years");
            var isUnderAge = age < MIN_ADULT_AGE;
            if (isUnderAge) {
                onMinorGuestSelected();
            } else {
                boxConfirmDate.hide();
                restOfForm.show();
            }
            isUnderAgeInput.val(isUnderAge);
        }
    }
    function onMinorGuestSelected() {
        if (isMobile.any()) {
            childConfirmModal.modal("show");
        } else {
            boxConfirmDate.show();
        }
        restOfForm.hide();
    }
    function submitForm(e) {
        var isDisabled = $("#cityinput").prop("disabled");
        $("#city").val(isDisabled ? $("#cityselect").val() : $("#cityinput").val());
        $("#taxExpeditorPlace").val($("#expedition_place").val());
        var datetaxIssueDate = moment($("#nationalIdExpeditionDate").val(), "DDMMYY").format("DD/MM/YYYY");
        datetaxIssueDate = moment(datetaxIssueDate).isValid() ? datetaxIssueDate : "";
        $("#taxIssueDate").val(datetaxIssueDate);
        var validForm = true;
        var isUnderAge = isUnderAgeInput.val() === "true";
        var nacionalidad = document.querySelector("#nationality-clone");
        if (e.isDefaultPrevented()) {
            if (isUnderAge) {
                trackOCIMinorCheck();
                this.guestDataForm.validator("destroy");
                this.guestDataForm[0].submit();
            } else {
                validForm = false;
            }
            this.datepickerSelector.selectorDatepicker("validateOnSubmit");
        } else {
            validForm = this.datepickerSelector.selectorDatepicker("validateOnSubmit");
        }
        if (validForm === true) {
            $(".m-GDPR-group").find(":checkbox").each(function() {
                $(this).is(":checked") == false && $(this).attr("name") != "GDPR_flag_5" && $(this).parent().append('<input type="hidden" value="N" name="' + $(this).attr("name") + '" />');
            });
            var datosForm = guestDataForm.serializeArray();
            localData(true, datosForm);
            if (NATIONALITIES[0].debug) console.log(datosForm);
            trackOCISuccess(Globals.page_section, nacionalidad.value);
            toggleLoadingButton(this.guestDataForm, true);
        } else {
            trackOCIError(Globals.page_section, nacionalidad.value);
            e.preventDefault();
        }
    }
    function onChildModalClose() {
        datepickerSelector.selectorDatepicker("setDate", "");
        datepickerSelector.find("select.js-day-selector").trigger("input");
        restOfForm.show();
    }
    function customDocumentNumberValidator($el) {
        value = $el.val();
        if ($("#country").val() != "ES") {
            return "";
        }
        if ($("#documentType").val() != "id") {
            return "";
        }
        var docTypeInput = this.$element.find("select#tipo-doc");
        if (!value) {
            return;
        }
        if (value.length == 8) {
            var newDni = "0" + value;
            $el.val(newDni);
            value = newDni;
        }
        var validChars = "trwagmyfpdxbnjzsqvhlcket";
        var dniRexp = /^[0-9]{8}[trwagmyfpdxbnjzsqvhlcket]{1}$/i;
        var nieRexp = /^[XY]{1}[0-9]{7}[trwagmyfpdxbnjzsqvhlcket]{1}$/i;
        var string = (value == null ? "" : value).toString().toLowerCase();
        if (!dniRexp.test(string) && !nieRexp.test(string)) return "error";
        var nie = string.replace(/^[x]/, "0").replace(/^[y]/, "1");
        var letter = string.substr(-1);
        var charIndex = parseInt(nie.slice(0, -1)) % 23;
        return validChars.charAt(charIndex) === letter ? "" : "error";
    }
    function customBirthDateValidator() {
        if (this.datepickerSelector.selectorDatepicker("checkIsValidDate", true) === true) {
            if (this.datepickerSelector.selectorDatepicker("checkTimelineDate") === 1) {
                return "error";
            }
        }
    }
    function customValidateExpeditionDate($el) {
        f = $el.val();
        var dia = f.substr(0, 2), mes = f.substr(2, 2), year = f.substr(4, 2);
        var dd = parseInt(dia), m = parseInt(mes), y = parseInt(year);
        j = m == 1 ? 1 : m - 1;
        if (f.length < 6 || f.length > 6 || dd > 31 || m > 12 || dd == 0 || m == 0 || y == 0) return "error";
        var t = new Date(), yy = t.getFullYear(), mesactual = t.getMonth() + 1, diaactual = t.getDate();
        ya = yy.toString().substr(-2);
        y = y > ya && y > 50 ? y + 1900 : y + 2e3;
        var dt = y + "-" + mes + "-" + dia;
        var date = moment(dt);
        var today = moment(new Date());
        if (!date.isValid()) return "error";
        if (today.diff(date) < 0) return "error";
    }
    function fillLoggedInfo(response) {
        var inputId;
        var $inputLabel;
        var $selectedInput;
        var $element;
        var $select;
        var promise = new Promise(function(resolve, reject) {
            var ajaxResponse = response;
            $.each(userLoggedFields, function(key, data) {
                if (typeof data != "undefined") {
                    $element = guestDataForm.find(data.class);
                    if ($element.length > 0) {
                        inputId = $element.attr("id");
                        $inputLabel = guestDataForm.find('label[for="' + inputId + '"]');
                        if (response[data.dataKey]) {
                            data.value = response[data.dataKey];
                        }
                        if (data.value != null) {
                            $select = $element.filter("select");
                            if ($select.length) {
                                _fillSelectElement($element, data.value);
                                if (inputId == "country" && pageData.hotelCountryKey == "IT") {
                                    _promiseFilledRegions(ajaxResponse, false);
                                }
                            } else if ([ "radio", "checkbox" ].indexOf($element.attr("type")) >= 0) {
                                var defaulGender = data.value.toLowerCase();
                                var genderValue = defaulGender == "male" || defaulGender == "female" ? defaulGender == "male" ? 1 : 2 : defaulGender;
                                $selectedInput = $element.filter("[value=" + genderValue + "]");
                                $selectedInput.trigger("click");
                            } else {
                                $element.val(data.value).focus();
                                $inputLabel.addClass("focus");
                            }
                        }
                    }
                }
                $element.prop("disabled", data.blocked).toggleClass("disabled", data.blocked ? data.blocked : false);
            });
            resolve();
        });
        return promise.then(function(result) {
            _hideRewards();
        }, function(err) {
            if (NATIONALITIES[0].debug) console.log(err);
        }).catch(function(reason) {
            if (NATIONALITIES[0].debug) console.log("Manejar promesa rechazada (" + reason + ") aquí.");
        });
    }
    var _hideRewards = function _hideRewards() {
        $("#loginRewards").val("1");
        $(".box.m-rewards").remove();
        $("#GDPR_flag_5").closest(".m-GDPR").remove();
    };
    var _controlForward = function _controlForward() {
        if ($("#name").val() != "") {
            var datosform = JSON.parse(localData());
            Object.entries(datosform).forEach(function(_ref7) {
                var _ref8 = _slicedToArray(_ref7, 2), key = _ref8[0], field = _ref8[1];
                var $element = $('[name="' + field.name + '"]');
                $select = $element.filter("select");
                if ($select.length) {
                    _fillSelectElement($element, field.value);
                    if (field.name == "country" && pageData.hotelCountryKey == "IT") {
                        _promiseFilledRegions(datosform, true);
                    }
                }
                if (field.name == "birthDate") {
                    var birthDate = field.value;
                    if (birthDate != null) {
                        _fillSelectElement($("#dia"), parseInt(birthDate.split("/")[0]));
                        _fillSelectElement($("#mes"), parseInt(birthDate.split("/")[1]));
                        _fillSelectElement($("#year"), birthDate.split("/")[2]);
                    }
                }
                if (field.name == "GDPR_flag_5" && field.value == "S") $("#subscribeRewards").val("true");
                if (field.name == "loginRewards" && field.value == "1") _hideRewards();
            });
        }
    };
    function _fillSelectItaly(datosform) {
        var request = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
        if (request) {
            var result = [];
            $.each(datosform, function(key, data) {
                result[data["name"]] = data["value"];
            });
            datosform = result;
        }
        var selectCombo = {
            region_birthplace: {
                name: "region_birthplace",
                dataKey: "region_birthplace",
                depending: "country"
            },
            region: {
                name: "region",
                dataKey: "region",
                depending: "country"
            },
            region_expedition_place: {
                name: "region_expedition_place",
                dataKey: "region_expedition_place",
                depending: "country"
            },
            birthplace: {
                name: "birthplace",
                dataKey: request ? "birthplace" : "placeBirth",
                depending: "region_birthplace"
            },
            cityselect: {
                name: "cityselect",
                dataKey: request ? "cityselect" : "city",
                depending: "region"
            },
            expedition_place: {
                name: "expedition_place",
                dataKey: request ? "expedition_place" : "expeditorPlace",
                depending: "region_expedition_place"
            }
        };
        $.each(selectCombo, function(key, data) {
            $element = $("#" + key);
            $isvisible = $element.closest(".form-group").is(":visible");
            $dependingCount = _checkSelect($('[name="' + data["depending"] + '"]'));
            $itemCount = _checkSelect($('[name="' + data["name"] + '"]'));
            $value = datosform[data["dataKey"]];
            if ($isvisible && $dependingCount && $value) {
                var $element2 = $('[name="' + data["name"], +'"]');
                if ($itemCount) _fillSelectElement($element2, datosform[data["dataKey"]]); else setTimeout(function() {
                    _fillSelectElement($element2, datosform[data["dataKey"]]);
                }, optionTimeAjax);
            }
        });
    }
    function _promiseFilledRegions(datosform, request) {
        setTimeout(function() {
            _fillSelectItaly(datosform, request);
        }, optionTimeAjax);
    }
    function _checkSelect($element) {
        var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
        var $select = $element.filter("select");
        var selectedOption = $select.find("option");
        return type ? selectedOption.length > 0 ? true : false : selectedOption.length;
    }
    function _fillSelectElement($element, value) {
        var $select = $element.filter("select");
        var selectedOption = $select.find("option[value=" + value + "]");
        if (selectedOption.val() == undefined) {
            var testCampos = [ "expedition_place", "cityselect", "birthplace" ];
            var txtId = $select.attr("id");
            if (testCampos.includes(txtId)) {
                $("select#" + txtId + " > option").each(function() {
                    if (this.text == value.toUpperCase()) {
                        selectedOption = $select.find("option[value=" + this.value + "]");
                    }
                });
            }
        }
        var $input = $element.filter("input");
        if ($select.hasClass("ui-autocomplete-input")) {
            $input.val(selectedOption.text());
        }
        $select.val(selectedOption.val()).trigger("change");
    }
    return {
        init: init,
        hideInputs: hideInputs,
        showInputs: showInputs,
        toggleInputVisibility: toggleInputVisibility,
        guestDataView: guestDataView,
        guestDataForm: guestDataForm,
        nationalityInput: nationalityInput,
        datepickerSelector: datepickerSelector,
        fillLoggedInfo: fillLoggedInfo
    };
}();

$(function() {
    if ($(".p-cio-guest-data").length) {
        guestData.init();
    }
    if ($(".p-cio-your-room").length) {
        if (typeof pageData != "undefined") {
            if (typeof pageData.javaError != "undefined" && pageData.javaError == "true") {
                $("#modal-java-error").modal("show");
            }
            hotelIdPage = typeof pageData.hotelId != "undefined" ? pageData.hotelId : "";
        }
        window.onbeforeunload = function(e) {
            sessionStorage.setItem("prevFormGuest", false);
        };
    }
    if ($(".m-arrival").length) {
        window.onbeforeunload = function(e) {
            sessionStorage.setItem("prevFormGuest", true);
        };
    }
    if ($(".m-guests-view").length) {
        sessionStorage.setItem("prevFormGuest", false);
    }
});

"use strict";

var guestPage = function() {
    function init(selector) {
        var view = $(".guests-view-guests");
        $(".guests-view-guests").on("click", "button:submit", _clickButton);
    }
    _clickButton = function _clickButton() {
        $(this).prop("disabled", true);
        $(this).closest("form").submit();
    };
    return {
        init: init
    };
}();

$(function() {
    if ($(".guests-view-guests").length) {
        guestPage.init(".guests-view-guests");
    }
});

"use strict";

var pHomeDesktop = function() {
    var $homeView = null;
    var $searchBar = null;
    var $searchForm = null;
    var occupancy = null;
    var $occupancies = null;
    var location = {
        $field: null,
        selected: null
    };
    var modals = null;
    function init(view) {
        $homeView = view;
        $searchBar = $homeView.find(".m-search-bar");
        $searchForm = $searchBar.find("form");
        $occupancies = $searchForm.find("#m-occupancy-sb");
        modals = {
            $loading: $homeView.find("#loading-modal-results"),
            $matchError: $homeView.find("#modal-search-no-result"),
            $geolocationError: $homeView.find("#modal-geolocation-error")
        };
        occupancy = reservationOccupancyNew.getOccupancy($occupancies.data("occupancy-index"));
        location.$field = $searchForm.find("#location2-sb");
        $searchForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var rangeInvalid = true;
            var locationInvalid = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                validateBookingRange($form);
                toggleLoadingButton($form, false);
            } else {
                rangeInvalid = validateBookingRange($form);
                locationInvalid = validateLocation(location.$field);
                validForm = !rangeInvalid && !locationInvalid;
                if (validForm) {
                    modals.$loading.modal({
                        show: true,
                        backdrop: "static",
                        keyboard: false
                    });
                    _onFormSubmit(e);
                } else {
                    e.preventDefault();
                }
                toggleLoadingButton($form, false);
            }
        });
    }
    function _onFormSubmit(ev) {
        var occupancyInfo = occupancy.generateOccupancyInfo();
        var formData = {};
        var dataUrl = null;
        var checkin = void 0;
        var checkout = void 0;
        location.selected = location.$field.data("selected");
        $searchForm.append(occupancyInfo.inputs);
        if (location.selected) {
            $.each($searchForm.serializeArray(), function(index, obj) {
                formData[obj.name] = obj.value;
            });
            formData.fini = formData.fini ? formData.fini : moment().format("DD/MM/YYYY");
            formData.fout = formData.fout ? formData.fout : moment().add(1, "day").format("DD/MM/YYYY");
            checkin = moment(formData.fini, location.selected.df);
            checkout = moment(formData.fout, location.selected.df);
            if (location.selected.ebp && location.selected.url) {
                ev.preventDefault();
                dataUrl = {
                    hotelID: formData.hotelId,
                    checkinDate: checkin.format(location.selected.df),
                    checkoutDate: checkout.format(location.selected.df),
                    get nights() {
                        return checkout.diff(checkin, "days");
                    },
                    adults: occupancyInfo.pax.adults,
                    children: occupancyInfo.pax.children + occupancyInfo.pax.babies,
                    roomsNumber: occupancyInfo.rooms,
                    childages: occupancyInfo.ages.length > 1 ? occupancyInfo.ages : ""
                };
                window.location.href = _getRedirectUrl(location.selected.url, dataUrl);
                return;
            }
        }
    }
    function _getRedirectUrl(tpl, data) {
        return tpl.replace(/\[(.*?)\]/gim, function(match, p1) {
            var prop = p1.trim();
            return data.hasOwnProperty(prop) ? data[prop] : "";
        });
    }
    function detectIp(layer) {
        var $layer = $(".p-home");
        var template = [ '<div class="m-language-edition full-width">', '<div class="language-edition alert alert-dismissible" role="alert">', '<div class="language-edition-inner"><span>{{text}} {{text2}}<a class="link" href="{{url}}" title="{{textLink}}"><img class="flag" src="{{static}}v3/html/img/banderas/{{country}}.png" alt="{{textLink}}">{{textLink}}</a></span>', '<button class="btn-ico" type="button" data-dismiss="alert" aria-label="Close"><span class="nh-ic-close" aria-hidden="true"></span></button>', "</div>", "</div>", "</div>" ].join("\n");
        $.ajaxSetup({
            cache: false
        });
        promise = $.ajax({
            url: "/getUserDataGEOIP",
            type: "GET",
            contentType: "application/json"
        });
        promise.then(function(datos) {
            if (typeof datos != "undefined") {
                if (_check(datos.text) && _check(datos.textLink) && _check(Globals.staticDomain) && _check(datos.domainHost) && _check(datos.countryMetaData)) {
                    var data = {
                        text: datos.text,
                        text2: datos.text2,
                        textLink: datos.textLink,
                        url: "https://" + datos.domainHost,
                        country: datos.countryMetaData.toLowerCase(),
                        static: Globals.staticDomain
                    };
                    var output = templatesRoom.getTemplate(template, data);
                    $(output).prependTo($layer);
                    trackShowDetectIPOrigin(Globals.page_section);
                }
            }
        }, function() {}).always(function() {});
    }
    function _check(value) {
        return value != "" && value != "null" && value != null && typeof value !== "undefined" ? true : false;
    }
    function _modalOnload() {
        console.log("modalOnload");
        var labelModal = $("#labelModalError").val();
        $("#modal-error p").text(labelModal);
        $("#modal-error").modal("show");
    }
    return {
        init: init,
        detectIp: detectIp,
        modalOnload: _modalOnload
    };
}();

"use strict";

var pHomeMobile = function() {
    var $homeView = null;
    var $searchBar = null;
    var $searchForm = null;
    var occupancy = null;
    var $occupancies = null;
    var modals = null;
    var location = {
        $field: null,
        selected: null
    };
    var geolocation = null;
    function init(view) {
        $homeView = view;
        $searchBar = $homeView.find(".m-search-bar");
        $searchForm = $searchBar.find("form");
        $occupancies = $searchForm.find("#m-occupancy-sb");
        modals = {
            $loading: $homeView.find("#loading-modal-results"),
            $matchError: $homeView.find("#modal-search-no-result"),
            $geolocationError: $homeView.find("#modal-geolocation-error")
        };
        occupancy = reservationOccupancyNew.getOccupancy($occupancies.data("occupancy-index"));
        geolocation = {
            $fields: $searchForm.find(".js-geolocation"),
            get $lat() {
                return this.$fields.filter(".geo-lat");
            },
            get $lon() {
                return this.$fields.filter(".geo-lon");
            },
            get $acc() {
                return this.$fields.filter(".geo-acc");
            }
        };
        location.$field = $searchForm.find("#location2-sb");
        $searchForm.validator({
            disable: false
        }).on("submit", function(e) {
            var validForm = true;
            var rangeInvalid = true;
            var locationInvalid = true;
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                validateBookingRange($form);
                toggleLoadingButton($form, false);
            } else {
                rangeInvalid = validateBookingRange($form);
                locationInvalid = validateLocation(location.$field);
                validForm = !rangeInvalid && !locationInvalid;
                if (!$form.data("validate")) {
                    e.preventDefault();
                    if (validForm) {
                        _handleSubmitForm(e);
                    }
                } else {
                    if (!location.selected.Type) {
                        location.$field.val("");
                    }
                }
                toggleLoadingButton($form, false);
            }
        });
    }
    function _handleSubmitForm(ev) {
        location.selected = location.$field.data("selected");
        if (location.selected.Type) _onFormSubmit(ev); else _onClickCloseMe(ev);
    }
    function _onClickCloseMe(ev) {
        if (window.location.hostname.indexOf("anantara") < 0 && geolocation) {
            geolocateMe().then(function(response) {
                if (response.coords.latitude && response.coords.longitude) {
                    geolocation.$lat.val(response.coords.latitude);
                    geolocation.$lon.val(response.coords.longitude);
                    geolocation.$acc.val(response.coords.accuracy);
                    _onFormSubmit();
                } else {
                    modals.$geolocationError.modal("show");
                }
            }, function() {
                modals.$geolocationError.modal("show");
            });
        } else {
            ev.preventDefault();
            modals.$matchError.modal("show");
        }
    }
    function geolocateMe() {
        var deferred = $.Deferred();
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                return deferred.resolve(position);
            }, function(error) {
                return deferred.reject(error);
            }, {
                enableHighAccuracy: true,
                maximumAge: 5e3,
                timeout: 1e4
            });
        } else {
            return deferred.reject("error");
        }
        return deferred.promise();
    }
    function _onFormSubmit(ev) {
        var occupancyInfo = occupancy.generateOccupancyInfo();
        var formData = {};
        var dataUrl = null;
        var checkin = void 0;
        var checkout = void 0;
        modals.$loading.modal({
            show: true,
            backdrop: "static",
            keyboard: false
        });
        $searchForm.append(occupancyInfo.inputs);
        if (location.selected) {
            $.each($searchForm.serializeArray(), function(index, obj) {
                formData[obj.name] = obj.value;
            });
            formData.fini = formData.fini ? formData.fini : moment().format("DD/MM/YYYY");
            formData.fout = formData.fout ? formData.fout : moment().add(1, "day").format("DD/MM/YYYY");
            checkin = moment(formData.fini, location.selected.df);
            checkout = moment(formData.fout, location.selected.df);
            if (location.selected.ebp && location.selected.url) {
                ev.preventDefault();
                dataUrl = {
                    hotelID: formData.hotelId,
                    checkinDate: checkin.format(location.selected.df),
                    checkoutDate: checkout.format(location.selected.df),
                    get nights() {
                        return checkout.diff(checkin, "days");
                    },
                    adults: occupancyInfo.pax.adults,
                    children: occupancyInfo.pax.children + occupancyInfo.pax.babies,
                    roomsNumber: occupancyInfo.rooms,
                    childages: occupancyInfo.ages.length > 1 ? occupancyInfo.ages : ""
                };
                window.location.href = _getRedirectUrl(location.selected.url, dataUrl);
                return;
            } else {
                $searchForm.data("validate", true).trigger("submit");
            }
        }
    }
    function detectIp(layer) {
        var $layer = $(".p-home");
        var template = [ '<div class="m-language-edition full-width">', '<div class="language-edition alert alert-dismissible" role="alert">', '<div class="language-edition-inner"><span>{{text}} {{text2}}<a class="link" href="{{url}}" title="{{textLink}}"><img class="flag" src="{{static}}v3/html/img/banderas/{{country}}.png" alt="{{textLink}}">{{textLink}}</a></span>', '<button class="btn-ico" type="button" data-dismiss="alert" aria-label="Close"><span class="nh-ic-close" aria-hidden="true"></span></button>', "</div>", "</div>", "</div>" ].join("\n");
        $.ajaxSetup({
            cache: false
        });
        var urlSec = "/getUserDataGEOIP";
        if (typeof Globals != "undefined") {
            if (typeof Globals.subdomain != "undefined") {
                if (Globals.subdomain != "") urlSec = Globals.subdomain + urlSec;
            }
        }
        promise = $.ajax({
            url: urlSec,
            type: "GET",
            contentType: "application/json"
        });
        promise.then(function(datos) {
            if (typeof datos != "undefined") {
                if (_check(datos.text) && _check(datos.textLink) && _check(Globals.staticDomain) && _check(datos.domainHost) && _check(datos.countryMetaData)) {
                    var data = {
                        text: datos.text,
                        text2: datos.text2,
                        textLink: datos.textLink,
                        url: "https://" + datos.domainHost,
                        country: datos.countryMetaData.toLowerCase(),
                        static: Globals.staticDomain
                    };
                    var output = templatesRoom.getTemplate(template, data);
                    $(output).prependTo($layer);
                    trackShowDetectIPOrigin(Globals.page_section);
                }
            }
        }, function() {}).always(function() {});
    }
    function _check(value) {
        return value != "" && value != "null" && value != null && typeof value !== "undefined" ? true : false;
    }
    function _modalOnload() {
        console.log("modalOnload");
        var labelModal = $("#labelModalError").val();
        $("#modal-error p").text(labelModal);
        $("#modal-error").modal("show");
    }
    function _getRedirectUrl(tpl, data) {
        return tpl.replace(/\[(.*?)\]/gim, function(match, p1) {
            var prop = p1.trim();
            return data.hasOwnProperty(prop) ? data[prop] : "";
        });
    }
    return {
        init: init,
        detectIp: detectIp,
        modalOnload: _modalOnload
    };
}();

$(function() {
    if ($(".p-home.is-mobile").length) pHomeMobile.init($(".p-home.is-mobile"));
    if ($(".p-home.is-desktop").length) pHomeMobile.init($(".p-home.is-desktop"));
    if ($(".p-home").length) {
        pHomeMobile.detectIp();
    }
});

$(window).load(function() {
    if (pageData.showModal != "undefined" && ($(".p-home.is-desktop").length || $(".p-home.is-mobile").length)) {
        if (pageData.showModal) pHomeMobile.modalOnload();
    }
});

"use strict";

var hotelMap = function(window, undefined) {
    var $mapsContainer;
    var $mapsContent;
    var $mapCanvas;
    var streetsSize = 140;
    var ratio = 8;
    var $floorsButtons;
    var $map;
    var data;
    function init(floorNumber) {
        $mapsContainer = $(".maps-container");
        $mapsContainer.css({
            width: "700px",
            height: "800px"
        });
        $mapsContent = $mapsContainer.find(".map-content");
        $map = $mapsContent.find(".map");
        $mapCanvas = $map.find(".maps-canvas");
        $floorsButtons = $(".floor-button");
        $floorsButtons.on("click", function() {
            data = $(this).data("floor");
            getFloor(data);
        });
        getFloor(1);
    }
    function getFloor(floorNumber) {
        var domain = window.location.host;
        var url;
        var promise = null;
        if (window.location.host.indexOf("localhost") >= 0 || window.location.host.indexOf("172.18.65.107") >= 0) {
            url = "http://" + domain + "/src/mocks/floor" + floorNumber + ".json";
        } else {
            if (window.location.pathname.indexOf("/dev/nh-v3/") >= 0) {
                url = "http://" + domain + "/dev/nh-v3/mocks/floor" + floorNumber + ".json";
            } else {
                url = "http://" + domain + "/html/nh-v3/mocks/floor" + floorNumber + ".json";
            }
        }
        promise = $.getJSON(url);
        $mapCanvas.html("").hide();
        $map.html("").append($mapCanvas);
        $.when(promise).then(function(response) {
            _buildMap(response);
        }, function(error) {}).always(function() {});
    }
    function getFloorByUrl(floorUrl) {
        var promise = $.getJSON(floorUrl);
        $mapCanvas.html("").hide();
        $map.html("").append($mapCanvas);
        $.when(promise).then(function(response) {
            _buildMap(response);
        }, function(error) {}).always(function() {});
    }
    function getFloorByString(jsonString) {
        _buildMap(JSON.parse(jsonString));
    }
    function _buildMap(floorData) {
        var structure = $(document.createElementNS("http://www.w3.org/2000/svg", "polyline")).attr({
            points: _getStructureCoordinates(floorData.floor.structure),
            fill: "#fff",
            stroke: "#fff",
            "stroke-width": 1
        });
        var hiddenMap;
        $mapCanvas.append(structure);
        $map.css({
            height: $mapCanvas.height()
        });
        $mapsContent.css({
            width: $mapCanvas.width() + streetsSize * 2,
            height: $mapCanvas.height() + streetsSize * 2
        });
        _drawStreets(floorData.streets);
        _drawRooms(floorData.rooms);
        hiddenMap = getVisibleMapAvailable();
        $mapsContent.css(centerMap(hiddenMap)).pep({
            constrainTo: [ -hiddenMap.hSize, 0, 0, -hiddenMap.wSize ],
            useCSSTranslation: false,
            shouldEase: false,
            debug: false
        });
    }
    function getVisibleMapAvailable() {
        var wDiff = $mapsContent.outerWidth(true) - $mapsContainer.width(), hDiff = $mapsContent.outerHeight(true) - $mapsContainer.height();
        return {
            hSize: hDiff,
            wSize: wDiff
        };
    }
    function centerMap(data) {
        var centerCoor = {
            left: data.wSize / 2 * -1,
            top: data.hSize / 2 * -1
        };
        return centerCoor;
    }
    function _drawStreets(streetsData) {
        var streetInfo;
        var streetInfoValue;
        var $streets;
        $.each(streetsData, function(key, value) {
            var info = "";
            var $currentStreet;
            streetInfo = $("<div class='street-info'></div>");
            streetInfoValue = $("<span class='street-orientation'></span>");
            $streets = $mapsContent.find("div.street");
            streetInfoValue.addClass(value.type.toLowerCase());
            $currentStreet = $streets.filter(".street-" + key);
            $currentStreet.html("");
            if (value.name && value.name.length > 0) {
                info += "<p class='street-name'><span>" + value.name + "</span></p>";
            }
            if (value.type === "city" && value.name) {
                streetInfo.addClass("info-poi");
                info += "<span class='street-orientation poi' ></span>";
            } else if (value.type !== "city") {
                streetInfo.addClass("info-" + value.type);
                info += "<span class='street-orientation " + value.type + "' ></span>";
            }
            streetInfo.html(info);
            $currentStreet.append(streetInfo);
        });
    }
    function _drawRooms(roomsData) {
        var roomData;
        var roomContainer;
        var roomContent;
        var roomClass;
        var selectableRoomsList = [ "none", "room", "upselling", "duplex", "duplex-upsell", "duplex-upselling" ];
        for (var x = 0; x < roomsData.length; x++) {
            roomContainer = $("<div></div>");
            roomContent = null;
            roomClass = "room ";
            roomData = roomsData[x];
            _setUpRoomContainer(roomData, roomContainer);
            if (selectableRoomsList.indexOf(roomData.special) >= 0) {
                roomClass += roomData.available ? "room-available" : "room-noavailable";
                roomClass += roomData.preferences ? "-preferences" : "";
                roomClass += roomData.special.indexOf("upselling") >= 0 ? "-upselling" : "";
                roomClass += roomData.special.indexOf("duplex") >= 0 ? " room-duplex" : "";
                roomClass += roomData.door ? " door door-" + roomData.door : "";
                roomContent = "<div class='room-content'><span>" + (roomData.id || "") + "</span><i></i></div>";
            } else {
                roomClass += "room-" + roomData.special.toLowerCase();
                roomContent = "<div class='room-content'><span>" + (roomData.description || "") + "</span></div>";
            }
            roomContainer.html(roomContent).addClass(roomClass);
            $map.append(roomContainer);
        }
    }
    function _setUpRoomContainer(roomData, roomContainer) {
        roomContainer.css({
            width: roomData.hsize * ratio,
            height: roomData.vsize * ratio,
            position: "absolute",
            top: roomData.y * ratio,
            left: roomData.x * ratio
        });
    }
    function _getStructureCoordinates(structureData) {
        var canvasWidth = 0;
        var canvasHeight = 0;
        var coor = "";
        for (var x = 0; x < structureData.length; x++) {
            data = structureData[x];
            canvasWidth = data.xend * ratio > canvasWidth ? data.xend * ratio : canvasWidth;
            canvasHeight = data.yend * ratio > canvasHeight ? data.yend * ratio : canvasHeight;
            coor += data.xst * ratio + "," + data.yst * ratio + " " + data.xend * ratio + "," + data.yend * ratio + " ";
        }
        $mapCanvas.attr({
            width: canvasWidth,
            height: canvasHeight
        }).show();
        return coor;
    }
    return {
        init: init,
        getFloor: getFloor
    };
}(window, undefined);

$(function() {
    var hasMap = $("#floor-map-guide").length;
    if (hasMap) {
        hotelMap.init();
    }
});

"use strict";

var styleGuide = function() {
    var styleGuideView = $(".style-guide");
    var sgHeader = $(".sg-header");
    var navigationLinks = styleGuideView.find(".js-navigation-link");
    var btnMenu = sgHeader.find(".hamburguer");
    var sideBar = styleGuideView.find(".sg-sidebar");
    var DEFAULT_HASH = "#brand";
    var STICKY = styleGuideView.offset() ? styleGuideView.offset().top : "0";
    function init() {
        navigationLinks.on("click", _handlerClickNavigationLink);
        btnMenu.on("click", _handlerHamburguerButtonClick);
        if (styleGuideView.length > 0) {
            _initNavigation();
        }
        _initForms();
    }
    function _handlerHamburguerButtonClick(e) {
        $(this).toggleClass("close-hamburguer");
        sideBar.toggleClass("is_active");
    }
    function _initNavigation() {
        var hashUrl = window.location.hash.length > 0 ? window.location.hash : DEFAULT_HASH;
        navigate(hashUrl);
    }
    function navigate(hashUrl) {
        $('.js-navigation-link a[href="' + hashUrl + '"]').closest("li").addClass("active");
        $(".accordion-section" + hashUrl + "-view").removeClass("hide").addClass("open");
        window.location.hash = hashUrl;
        $("html, body").animate({
            scrollTop: 0
        }, 200);
    }
    function _handlerClickNavigationLink(e) {
        var currentAttrValue = $(this).find("a").attr("href");
        if ($(e.target).is(".active")) {
            _close_accordion_section();
            _close_menu_mobile();
        } else {
            _close_accordion_section();
            _close_menu_mobile();
            navigate(currentAttrValue);
        }
        e.preventDefault();
    }
    function _close_accordion_section() {
        navigationLinks.removeClass("active");
        $(".accordion-section").addClass("hide").removeClass("open");
    }
    function _close_menu_mobile() {
        $(this).removeClass("close-hamburguer");
        sideBar.removeClass("is_active");
    }
    function _handlerStickySideBar() {
        var scrollTop = $(this).scrollTop();
        console.log("window-scrollTop", scrollTop);
        console.log("STICKY", STICKY);
        if (scrollTop >= STICKY) {
            styleGuideView.addClass("sg-sticky");
        } else {
            styleGuideView.removeClass("sg-sticky");
        }
    }
    function _initForms() {
        var form = styleGuideView.find("form.js-form-steps");
        var formStepsView = styleGuideView.find(".form-steps");
        formStepsView.formSteps({
            initStep: 0
        });
        form.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {}
        });
    }
    return {
        init: init
    };
}();

$(function() {
    styleGuide.init();
});

"use strict";

var travelAgentsSignUp = function() {
    var travelAgentsSignUpView = $(".p-travel-agents-signup");
    var signupForm = travelAgentsSignUpView.find(".form-travel-agents-signup");
    var intermediaryInput = signupForm.find('[name="consortia"]');
    var affirmativeIntermediaryInput = signupForm.find("#is_agency_associated");
    var intermediaryTextInput = signupForm.find("#which_association");
    var $modalError = void 0;
    var formError = void 0;
    function init() {
        formError = typeof pageData != "undefined" ? typeof pageData.javaError != "undefined" ? pageData.javaError : false : false;
        $modalError = $("#modal-error");
        if (formError) {
            $modalError.modal("show");
        }
        signupForm.validator({
            disable: false
        }).on("submit", function(e) {
            var $form = $(this);
            toggleLoadingButton($form, true);
            if (e.isDefaultPrevented()) {
                toggleLoadingButton($form, false);
            } else {
                if ($form.find("[name='consortia']").val() == "No") {
                    $form.find("[name='consortiaOption']").remove();
                    $form.append('<input type="hidden" name="consortiaOption" value="none" />');
                }
                var mailtTo = jsonCountries[$form.find("[name='country']").val()] != "undefined" ? jsonCountries[$form.find("[name='country']").val()] : pageData.mailToDefault;
                $form.find("[name='emailTo']").val(mailtTo);
                $form.append('<input type="hidden" name="_frequentDestinations" value="1" />');
                $form.append('<input type="hidden" name="_agencySegment" value="1" />');
                $form.find(":checkbox").each(function() {
                    $(this).is(":checked") == false && $(this).attr("name") == "GDPR_flag_3" && $form.append('<input type="hidden" value="N" name="GDPR_flag_3" />');
                    $(this).is(":checked") == false && $(this).attr("name") == "GDPR_flag_4" && $form.append('<input type="hidden" value="N" name="GDPR_flag_4" />');
                });
            }
        });
        intermediaryInput.on("change", _onIntermediaryInputChange);
        _onIntermediaryInputChange();
    }
    function _onIntermediaryInputChange(e) {
        var intermediaryInputTextFormGroup = intermediaryTextInput.closest(".form-group");
        if (affirmativeIntermediaryInput.is(":checked")) {
            intermediaryInputTextFormGroup.closest(".form-group").removeClass("hide");
            intermediaryTextInput.attr("data-validate", true);
        } else {
            intermediaryInputTextFormGroup.addClass("hide");
            intermediaryTextInput.attr("data-validate", false);
        }
        signupForm.validator("update");
    }
    return {
        init: init
    };
}();

$(function() {
    travelAgentsSignUp.init();
});

"use strict";

function setCurrentDate() {
    var fecha = new Date();
    var curMonth = fecha.getMonth() + 1;
    var curYear = fecha.getFullYear();
    if (curMonth < 10) curMonth = "0" + curMonth;
    curYear = curYear.toString().substr(2, 2);
    $("[data-id='mesValidate']").val(curMonth);
    $("[data-id='mesValidate']").selectpicker("refresh");
    $("[data-id='anioValidate']").val(curYear);
    $("[data-id='anioValidate']").selectpicker("refresh");
    $(".custom-card .expired-date-card .month").text(curMonth);
    $(".custom-card .expired-date-card .year").text(curYear);
}

function setMonthsFromToday() {
    var d = new Date();
    var month = d.getMonth() + 1;
    var options = "";
    var vi = 0;
    for (var i = month; i < 13; i++) {
        vi = i;
        if (i < 10) vi = "0" + i;
        options += "<option value='" + vi + "'>" + vi + "</option>";
    }
    $("[data-id='mesValidate']").html(options);
}

function setFullMonths() {
    var options = "";
    for (var i = 1; i < 13; i++) {
        options += "<option value='" + i + "'>" + i + "</option>";
    }
    $("[data-id='mesValidate']").html(options);
}

function isDateValid(month, year) {
    var fecha = new Date();
    var curYear = fecha.getFullYear();
    var curMonth = fecha.getMonth() + 1;
    if (year >= curYear) {
        if (year == curYear) {
            if (month >= curMonth) {
                return true;
            } else {
                return false;
            }
        } else {
            return true;
        }
    } else {
        return false;
    }
}

$(function() {
    $(".inputClear").click(function() {
        $(this).prev("input").val("");
        $(this).nextAll(".icon").removeClass("ok").removeClass("ko");
    });
    $(".mesValidate, .anioValidate").change(function() {
        var objYear = $(this).closest(".js-validate-card, .js-validate-card-2").find("select.anioValidate");
        var objMonth = $(this).closest(".js-validate-card, .js-validate-card-2").find("select.mesValidate");
        var selYear = "20" + objYear.val();
        var selMonth = objMonth.val();
        var objHidden = $(this).closest(".form-group").find(".callback_date");
        objHidden.val(selMonth + "-" + selYear);
        objHidden.trigger("change");
    });
    $('input[data-validation-callback-callback="callback_cvv"]').on("focus", function() {
        var maxMin = $(this).attr("data-callback-num");
        $(this).attr("maxlength", maxMin);
    });
});

function callback_date($el, value, callback) {
    var selMonth = parseInt(value.split("-")[0], 10);
    var selYear = parseInt(value.split("-")[1], 10);
    var isValid;
    if (!isNaN(selMonth) && selYear.toString().length > 2) {
        isValid = isDateValid(selMonth, selYear);
    } else {
        isValid = false;
    }
    callback({
        value: value,
        valid: isValid,
        message: ""
    });
}

function callback_card($el, value, callback) {
    var isValid = false;
    var errorMessage = $el.attr("data-validation-callback-message");
    var realValue = value.replace(/ /g, "").replace(/_/g, "");
    var valueLength = realValue.length;
    var checkedCard = checkCard(value);
    if ($el.attr("maxlength") == "34") {
        var lengthValid = valueLength == 15;
    } else if ($el.attr("maxlength") == "38") {
        var lengthValid = valueLength == 16;
    } else if ($el.attr("maxlength") == "32") {
        var lengthValid = valueLength == 14;
    }
    if (lengthValid || globalConfig.windowWidth <= globalConfig.smBreak) {
        if (checkedCard) {
            if (!$el.hasClass("invalidType")) {
                isValid = true;
            } else {
                errorMessage = $el.attr("data-validation-callback-valid-message");
            }
        } else {
            errorMessage = $el.attr("data-validation-callback-valid-message");
        }
    } else {
        errorMessage = $el.attr("data-validation-callback-length-message");
    }
    callback({
        value: value,
        valid: isValid,
        message: errorMessage
    });
}

function callback_cvv($el, value, callback) {
    var maxMin = parseInt($el.attr("data-callback-num"), 10);
    var valueLength = value.length;
    var callbackMessage = $el.attr("data-validation-callback-message");
    var isValid = valueLength == maxMin;
    var max = 3;
    if ($el.attr("maxlength") == "34") {
        var lengthValid = valueLength == 15;
        var max = 4;
    } else if ($el.attr("maxlength") == "38") {
        var lengthValid = valueLength == 16;
    } else if ($el.attr("maxlength") == "32") {
        var lengthValid = valueLength == 14;
    }
    if (lengthValid || globalConfig.windowWidth <= globalConfig.smBreak) {
        if ($(".js-cvv").val().length > max) {
            $(".js-cvv").val($(".js-cvv").val().substr(0, max));
        }
    }
    if ($(".js-cvv").val().length == max) {
        isValid = true;
    }
    callback({
        value: value,
        valid: isValid,
        message: callbackMessage
    });
}

var checkCard = function checkCard(cardValue) {
    var c = cardValue;
    c = c.replace(/\s/g, "");
    var cl = parseInt(c.substr(c.length - 1));
    var c = c.slice(0, -1);
    var c = c.split("").reverse().join("");
    var c = c.split("");
    var a = 2;
    var cm = [];
    for (var i = 0; i < c.length; i++) {
        if (a % 2 == 0) {
            var t = c[i] * 2;
            if (t > 9) {
                var t = t - 9;
            }
            cm.push(t);
        } else {
            cm.push(parseInt(c[i]));
        }
        a++;
    }
    var f = 0;
    for (var i = 0; i < cm.length; i++) {
        f += cm[i];
    }
    f = f + cl;
    if (f % 10 == 0) {
        return true;
    } else {
        return false;
    }
};

"use strict";

var Login = function() {
    var lblDefaultErrorMsg = "";
    var cookieName = "userLoggedData";
    var cookieRememberMe = "rememberme";
    var init = function init() {
        validations();
        showLoggedMenu();
        resetPassword();
        forgotPassword();
    };
    var validations = function validations() {
        $("#loginFormV2").find("input,textarea,select,button").not("[type=submit]").jqBootstrapValidation({
            bindEvents: [ "blur", "change" ],
            preventSubmit: true,
            submitError: function submitError($form, event, errors) {
                console.log("Errors: ", errors);
                callSeguimientoForms("error", "loginRewardsForm", "userName/pass");
            },
            submitSuccess: function submitSuccess($form, event) {
                event.preventDefault();
                console.log("OK validations");
                var button = $form.find('[type="submit"]');
                var user = $form.find("#login-email").val();
                var psw = $form.find("#login-password").val();
                lblDefaultErrorMsg = $form.data("login-message-error") || "There was han error during login process";
                button.prop("disabled", true);
                doLoginSSO(user, psw, $form, function(data, targetUrl) {
                    callSeguimientoForms("success", "loginRewardsForm", "success");
                    window.location = targetUrl;
                });
                window.onbeforeunload = null;
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).hasClass("force-validation") || $(this).not("no-validation");
            }
        });
        $("#loginFormMobv2").find("input,textarea,select,button").not("[type=submit]").jqBootstrapValidation({
            bindEvents: [ "blur", "change" ],
            preventSubmit: true,
            submitError: function submitError($form, event, errors) {
                console.log("Errors: ", errors);
                callSeguimientoForms("error", "loginRewardsFormMob", "userName/pass");
            },
            submitSuccess: function submitSuccess($form, event) {
                event.preventDefault();
                console.log("OK validations");
                var button = $form.find('[type="submit"]');
                var user = $form.find("#emailMob").val();
                var psw = $form.find("#passwordMob").val();
                lblDefaultErrorMsg = $form.data("login-message-error") || "";
                button.prop("disabled", true);
                doLoginSSO(user, psw, $form, function(data, targetUrl) {
                    callSeguimientoForms("success", "loginRewardsFormMob", "success");
                    window.location = targetUrl;
                });
                window.onbeforeunload = null;
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).hasClass("force-validation") || $(this).not("no-validation");
            }
        });
        $("#loginFormV2-modal").find("input,textarea,select,button").not("[type=submit]").jqBootstrapValidation({
            bindEvents: [ "blur", "change" ],
            preventSubmit: true,
            submitError: function submitError($form, event, errors) {
                console.log("Errors: ", errors);
                callSeguimientoForms("error", "loginRewardsForm", "userName/pass");
            },
            submitSuccess: function submitSuccess($form, event) {
                event.preventDefault();
                console.log("OK validations");
                var button = $form.find('[type="submit"]');
                var user = $form.find("#login-modal-email").val();
                var psw = $form.find("#login-modal-password").val();
                lblDefaultErrorMsg = $form.data("login-message-error") || "";
                button.prop("disabled", true);
                doLoginSSO(user, psw, $form, function(data, targetUrl) {
                    callSeguimientoForms("success", "loginRewardsForm", "success");
                    if ($form.data("callback") && typeof eval($form.data("callback")) === "function") {
                        var fn = eval($form.data("callback"));
                        fn(targetUrl);
                    } else {
                        window.location = targetUrl;
                    }
                });
                window.onbeforeunload = null;
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).hasClass("force-validation") || $(this).not("no-validation");
            }
        });
    };
    var doLoginSSO = function doLoginSSO(user, pass, formulary, callback_fn) {
        var ssoUrl = typeof Globals.ssoUrl != "undefined" ? Globals.ssoUrl : null;
        var ssoService = typeof Globals.ssoService != "undefined" ? Globals.ssoService : null;
        var ssoAuth = typeof Globals.ssoAuth != "undefined" ? Globals.ssoAuth : null;
        var cta_button = $(formulary).find('[type="submit"]');
        var error_container = $(formulary).find(".js-error-login");
        if (user && pass && ssoService && ssoUrl) {
            var ssoData = {
                service: ssoService,
                username: user,
                password: pass
            };
            jQuery.ajax({
                method: "POST",
                contentType: "application/json",
                data: JSON.stringify(ssoData),
                url: ssoUrl,
                async: false,
                dataType: "json",
                success: function success(data) {
                    if (data.data != null && data.data.ticketGrantingTicket != null) {
                        var result = $.ajax({
                            method: "POST",
                            url: ssoUrl + "validate/?ticketGrantingTicket=" + data.data.ticketGrantingTicket + "&service=" + ssoService,
                            dataType: "jsonp",
                            async: false
                        });
                        $.post("/j_spring_cas_security_check?ticket=" + data.data.ticketGrantingTicket).done(function(data) {
                            if (typeof data != "undefined") {
                                if (typeof data.user != "undefined" && data.user) {
                                    if (typeof callback_fn != "undefined") {
                                        var targetUrl = typeof data.targetUrl != "undefined" && data.targetUrl ? data.targetUrl : location.href;
                                        var n = targetUrl.search("roldispacher");
                                        if (n != -1) {
                                            var d = new Date();
                                            targetUrl = targetUrl + "&_=" + d.getTime();
                                        }
                                        callback_fn(data, targetUrl);
                                    }
                                } else if (typeof data.response != "undefined" && data.response.resultCode == "KO") {
                                    console.log("Result: ", data.response.result);
                                    handleMessages(error_container, cta_button, lblDefaultErrorMsg);
                                }
                            } else {
                                handleMessages(error_container, cta_button, lblDefaultErrorMsg);
                            }
                        }).fail(function(data) {
                            if (data.responseText == "") {
                                handleMessages(error_container, cta_button, lblDefaultErrorMsg);
                            } else {
                                var response = JSON.parse(data.responseText);
                                var messageError = response["errorCode"] || lblDefaultErrorMsg;
                                handleMessages(error_container, cta_button, messageError);
                            }
                        });
                    } else {
                        if (data.response.resultCode) {
                            jQuery.ajax({
                                method: "GET",
                                url: "/auth/loginErrorMessage.do?resultCode=" + data.response.resultCode,
                                success: function success(errordata) {
                                    handleMessages(error_container, cta_button, errordata);
                                },
                                error: function error() {
                                    handleMessages(error_container, cta_button, "Login Error");
                                }
                            });
                        }
                    }
                },
                error: function error(jqXHR, exception) {
                    var msg = "";
                    if (jqXHR.status === 0) {
                        msg = "Not connect.\n Verify Network.";
                    } else if (jqXHR.status == 404) {
                        msg = "Requested page not found. [404]";
                    } else if (jqXHR.status == 500) {
                        msg = "Internal Server Error [500].";
                    } else if (exception === "parsererror") {
                        msg = "Requested JSON parse failed.";
                    } else if (exception === "timeout") {
                        msg = "Time out error.";
                    } else if (exception === "abort") {
                        msg = "Ajax request aborted.";
                    } else {
                        msg = "Login Error";
                    }
                    handleMessages(error_container, cta_button, msg);
                }
            });
        } else {
            console.log("One of this params are empty: user, password, Globals.ssoService or Globals.ssoUrl");
        }
    };
    var handleMessages = function handleMessages(container, cta_button, msg) {
        $(container).html(msg).show();
        $(cta_button).prop("disabled", false);
    };
    var checkUserLogged = function checkUserLogged(callback) {
        var accion = "/auth/consultarUsuarioLogado.do";
        var message = {};
        $.ajax({
            dataType: "json",
            url: accion,
            cache: false,
            success: function success(data) {
                var isLogged = typeof data["username"] != "undefined" && data["username"] != "anonymous" ? true : false;
                if (isLogged) {
                    message = {
                        isLogged: true,
                        userData: data,
                        message: null
                    };
                } else {
                    message = {
                        isLogged: false,
                        userData: null,
                        message: "Username is anonymous /auth/consultarUsuarioLogado.do"
                    };
                    sessionStorage.removeItem(cookieName);
                    $.cookie(cookieRememberMe, null, {
                        path: "/"
                    });
                }
                if (typeof callback == "function") {
                    callback(message);
                }
            },
            error: function error(request, status, _error) {
                message = {
                    isLogged: false,
                    userData: null,
                    message: _error
                };
                sessionStorage.removeItem(cookieName);
                $.cookie(cookieRememberMe, null, {
                    path: "/"
                });
                if (typeof callback == "function") {
                    callback(message);
                }
            }
        });
    };
    var showLoggedMenu = function showLoggedMenu() {
        checkUserLogged(function(data) {
            if (data.isLogged) {
                $("body").addClass("logged");
                $("header .goMenuRight").unbind("click").removeAttr("data-toggle");
                $("#undefined-holder").show();
                $(".js-rewards-submenu").attr("style", "display: block");
                $("header").removeClass("not-logged");
                $(".boxLoginMob.row").hide();
                $(".boxLogado.Mob.row").show();
                $(".logged-mode").show();
                $(".hide-logged").hide();
                $(".show-logged").show().removeClass("hide");
            }
        });
    };
    var resetPassword = function resetPassword() {
        $("#js-reset-password").on("click", function(e) {
            e.preventDefault();
            var defaultProtocol = location.host.search("webint") != -1 ? "http://" : "https://";
            var _secureDomain = defaultProtocol + location.host;
            var url = _secureDomain + "/nhrewards/reset-password-user";
            $.ajax({
                type: "POST",
                url: url,
                data: "email=" + $("#email").val(),
                async: true,
                dataType: "json"
            }).done(function(data) {
                if (typeof data != "undefined" && data.success == "true") {
                    $("#change-password-success").modal("show");
                } else {
                    $("#change-password-failed").modal("show");
                }
            }).fail(function(jqXHR, textStatus) {
                console.log("FAIL: ", jqXHR, textStatus);
                $("#change-password-failed").modal("show");
            });
        });
    };
    var forgotPassword = function forgotPassword() {
        $("#recoverPasswordForm").find("input,select,textarea").not("[type=submit]").jqBootstrapValidation({
            preventSubmit: true,
            bindEvents: [ "blur", "change" ],
            submitSuccess: function submitSuccess($form, event) {
                event.preventDefault();
                console.log("OK validations");
                var defaultProtocol = location.host.search("webint") != -1 ? "http://" : "https://";
                var _secureDomain = defaultProtocol + location.host;
                var url = _secureDomain;
                var URL = _secureDomain + "/nhrewards/reset-password";
                var email = $($form).find("#emailRecover").val();
                var cmp = $($form).find("#cmp").val();
                var cmpView = $($form).find("#cmpView").val();
                var $button = $($form).find('[type="submit"]');
                $button.prop("disabled", true);
                $("#recover-password").find(".js-error-message").empty();
                $.ajax({
                    type: "POST",
                    url: URL,
                    data: "email=" + email + "&cmp=" + cmp + "&cmpView=" + cmpView,
                    async: true,
                    dataType: "json"
                }).done(function(data) {
                    if (data && data.success == "true") {
                        $("#recover-content").hide();
                        $("#recover-password").find("#confirmation-msg").removeClass("hide");
                    } else {
                        $(".js-error-message").text(data.response);
                        $button.prop("disabled", false);
                    }
                }).fail(function(data) {
                    $(".js-error-message").text(data.response);
                    $button.prop("disabled", false);
                });
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).hasClass("force-validation") || $(this).not("no-validation");
            }
        });
        $("#recover-password").on("hidden.bs.modal", function(event) {
            var button = $(event.relatedTarget);
            var modal = $(this);
            $("#recover-content").show();
            modal.find("#emailRecover").val("");
            modal.find("#confirmation-msg").addClass("hide");
            modal.find(".form-group").removeClass("has-error");
            modal.find(".help-block").empty();
            modal.find(".js-error-message").empty();
            modal.find('[type="submit"]').prop("disabled", false);
        });
    };
    var handleLoginAnalytics = function handleLoginAnalytics(rol, user, action) {
        var eventCategory = getLoginForm(user);
        var eventLabel = getUserType(rol, user);
        trackLogin(eventCategory, eventLabel, action);
    };
    var handleLoginErrorAnalytics = function handleLoginErrorAnalytics(page, action) {
        var eventCategory = getLoginPage(page);
        var eventLabel = "userName/pass";
        trackLogin(eventCategory, eventLabel, "form analysys error");
    };
    var getUserType = function getUserType(rol, user) {
        var userType = "";
        switch (rol) {
          case "B2B_HOME":
            userType = getB2bClientType(user.b2bType);
            break;

          case "B2B_ADMIN":
            userType = "b2bAdmin";
            break;

          case "B2E_EMPLEADO":
          case "B2E_FRIENDS":
            userType = "employee";
            break;

          case "REWARDS_HOME":
          case "CORPORATE":
          case "NH_MEDIA":
          case "TRAVEL_PARTNER":
          case "PLATINUM_VIP":
            userType = "rewards";
            break;

          default:
            break;
        }
        return userType;
    };
    var getLoginForm = function getLoginForm(user) {
        var loginForm = "loginRewardsForm";
        if (user.b2bAgentAgencyLogin == true || user.b2bAgentBusinessLogin == true) {
            loginForm = "loginb2bForm";
        }
        return loginForm;
    };
    var getLoginPage = function getLoginPage(page) {
        var loginPage = "";
        var thatPage = page != null ? page.toLowerCase() : "";
        switch (thatPage) {
          case "home":
            loginPage = "loginRewardsForm";
            break;

          case "travel guides":
          case "agencies":
          case "business":
            loginPage = "loginb2bForm";
            break;

          default:
            break;
        }
        return loginPage;
    };
    var getB2bClientType = function getB2bClientType(b2bType) {
        if (!b2bType) {
            return "agency|business";
        }
        return b2bType == "AG" ? "agency" : "business";
    };
    function callSeguimientoForms(t, e, i) {
        try {
            seguimientoForms(t, e, i), -1 != formsAnalysys.indexOf(e) && ("success" == t ? (formSuccess(e), 
            window.onbeforeunload = null) : formError(e, i));
        } catch (s) {}
    }
    return {
        init: init,
        checkUserLogged: checkUserLogged,
        handleLoginAnalytics: handleLoginAnalytics,
        handleLoginErrorAnalytics: handleLoginErrorAnalytics
    };
}();

var SignUp = function() {
    var init = function init() {
        validations();
    };
    var validations = function validations() {
        $("#signupRewardsForm").find("input,select,textarea").not("[type=submit]").jqBootstrapValidation({
            preventSubmit: true,
            bindEvents: [ "blur", "change" ],
            submitSuccess: function submitSuccess($form, event) {
                console.log("OK validations");
                trackSignupRewardsHome(Globals.page_section);
                callSeguimientoForms("success", "signupRewardsForm", "success");
            },
            filter: function filter() {
                return $(this).is(":visible") || $(this).hasClass("force-validation") || $(this).not("no-validation");
            }
        });
    };
    return {
        init: init
    };
}();

$(document).ready(function() {
    Login.init();
    SignUp.init();
});

"use strict";

var dynamicTelephones = function() {
    var _campId = typeof campId != "undefined" ? campId : "";
    var _country = typeof country != "undefined" ? country : "";
    var _countryName = typeof countryName != "undefined" ? countryName : "";
    var _continent = typeof continent != "undefined" ? continent : "";
    var _webSection = typeof page_section != "undefined" ? page_section : "";
    var channelIndex = "-1";
    var countryFound = false;
    var telephoneJSON = "/resources/telephoneJSON.txt";
    var telephone = "";
    var countryUser = "";
    var lblGlobalAccess = typeof Labels.globalAccess != "undefined" ? Labels.globalAccess : "Global Access";
    var result = {
        countryTel: "",
        globalTel: "+34 91 398 46 61",
        countryName: "",
        countryText: "",
        telephoneWebSection: ""
    };
    var init = function init() {
        if (typeof Agent != "undefined") {
            _country = Agent.country;
            _campId = Agent.campId;
            _countryName = Agent.countryName;
            _continent = Agent.continent;
        }
        if ($("body").hasClass("page-roomdisplay")) {
            _campId = Utils.getURLParameter("campid");
        }
        _continent = $.cookie("USER_CT_CONTINENT") != "" && $.cookie("USER_CT_CONTINENT") != null ? $.cookie("USER_CT_CONTINENT") : _continent;
        _country = $.cookie("USER_CT_COUNTRYCODE") != "" && $.cookie("USER_CT_COUNTRYCODE") != null ? $.cookie("USER_CT_COUNTRYCODE") : _country;
        _countryName = $.cookie("USER_CT_COUNTRYCODE") != "" && $.cookie("USER_CT_COUNTRYCODE") != null ? $.cookie("USER_CT_COUNTRYCODE") : _countryName;
        result.countryText = _country;
        result.countryName = _countryName;
        countryUser = _country;
        $.ajax({
            url: telephoneJSON,
            dataType: "json",
            cache: true
        }).done(function(data) {
            if (data) {
                if (_campId) {
                    for (var i = 0; i < data.channels.length; i++) {
                        for (var j = 0; j < data.channels[i].agent.length; j++) {
                            if (data.channels[i].agent[j].campId == _campId) {
                                channelIndex = i;
                            }
                        }
                    }
                    if (channelIndex != "-1") {
                        for (var k = 0; k < data.channels[channelIndex].telephones.length; k++) {
                            if (data.channels[channelIndex].telephones[k].country == countryUser) {
                                result.countryTel = data.channels[channelIndex].telephones[k].telephone;
                                result.countryName = data.channels[channelIndex].telephones[k].countryName;
                                countryFound = true;
                            } else {
                                $(".telephoneList").append('<li><a href="tel:' + data.channels[channelIndex].telephones[k].telephone + '">' + data.channels[channelIndex].telephones[k].telephone + " (" + data.channels[channelIndex].telephones[k].country + ")" + "</a></li>");
                            }
                        }
                        if (data.channels[channelIndex].globalChannel != "") {
                            if (countryFound) {
                                $(".telephoneList").html($(".telephoneList").html() + '<li><a href="tel:' + data.channels[channelIndex].globalChannel + '">' + data.channels[channelIndex].globalChannel + " (" + lblGlobalAccess + ")" + "</a></li>");
                                result.globalTel = data.channels[channelIndex].globalChannel;
                            } else {
                                result.countryTel = data.channels[channelIndex].globalChannel;
                                result.globalTel = data.channels[channelIndex].globalChannel;
                                result.countryText = lblGlobalAccess;
                            }
                        }
                    }
                }
                if (Globals.responsive == "responsive") {
                    for (var i = 0; i < data.channels.length; i++) {
                        if (data.channels[i].name == "MOBILE TELEPHONES") {
                            channelIndex = i;
                            for (var k = 0; k < data.channels[channelIndex].telephones.length; k++) {
                                if (data.channels[channelIndex].telephones[k].country == countryUser) {
                                    result.countryTel = data.channels[channelIndex].telephones[k].telephone;
                                    result.countryName = data.channels[channelIndex].telephones[k].countryName;
                                    countryFound = true;
                                } else {
                                    result.countryText = lblGlobalAccess;
                                }
                            }
                            result.globalTel = data.channels[channelIndex].globalChannel;
                        }
                    }
                }
                if (channelIndex == "-1") {
                    for (var i = 0; i < data.channels.length; i++) {
                        if (data.channels[i].defaultChannel == "Yes") {
                            for (var k = 0; k < data.channels[i].telephones.length; k++) {
                                if (data.channels[i].telephones[k].country == _country) {
                                    result.countryTel = data.channels[i].telephones[k].telephone;
                                    result.countryName = data.channels[i].telephones[k].countryName;
                                    countryFound = true;
                                } else {
                                    $(".telephoneList").html($(".telephoneList").html() + '<li><a href="tel:' + data.channels[i].telephones[k].telephone + '">' + data.channels[i].telephones[k].telephone + " (" + data.channels[i].telephones[k].country + ")" + "</a></li>");
                                }
                            }
                            if (data.channels[i].globalChannel != "") {
                                if (countryFound) {
                                    $(".telephoneList").html($(".telephoneList").html() + '<li><a href="tel:' + data.channels[i].globalChannel + '">' + data.channels[i].globalChannel + " (" + lblGlobalAccess + ")" + "</a></li>");
                                    result.globalTel = data.channels[i].globalChannel;
                                } else {
                                    result.globalTel = data.channels[i].globalChannel;
                                    result.countryText = lblGlobalAccess;
                                }
                            }
                        }
                        if (data.channels[i].webSection != null && data.channels[i].webSection == _webSection) {
                            for (var k = 0; k < data.channels[i].telephones.length; k++) {
                                if (data.channels[i].telephones[k].country == _country) {
                                    result.telephoneWebSection = data.channels[i].telephones[k].telephone;
                                    break;
                                } else {
                                    result.telephoneWebSection = data.channels[i].globalChannel;
                                }
                            }
                        }
                    }
                }
                changeHTML(result);
                changeHTMLMobile(result);
            }
        }).fail(function(data) {
            console.log("Error al recuperar los telefonos dynamicos");
            changeHTMLFailAjax(result);
            changeHTMLMobile(result);
        });
    };
    function changeHTML(result) {
        telephone = result.countryTel ? result.countryTel : result.globalTel;
        if (telephone) {
            addTelephone(".phoneHeader", telephone, result.countryText, "header");
        } else {
            $(".phoneHeader,.phoneHeaderMob").parents("li").hide();
        }
        $(".dynamicTelephone").each(function(indice, elemento) {
            $(elemento).is("input:hidden") ? $(elemento).val(telephone) : $(elemento).text($(elemento).text() + telephone);
        });
        addTelephone("a.dynamicTelephone", telephone, "", "a");
        addTelephone("a.dynamicTelephoneHref", telephone, "", "a");
        addTelephone(".phoneGlobal", result.globalTel, "", "appendParam");
        addTelephone(".phoneCountry", result.countryName, "", "appendParam");
        if (telephone != result.globalTel) {
            addTelephone(".phoneContact", telephone, "", "appendParam");
        } else {
            $(".phoneContact").hide();
        }
    }
    function changeHTMLFailAjax(result) {
        $(".phoneHeader").html(result.globalTel + " (" + lblGlobalAccess + ") <b class='caret'></b>");
        $(".phoneHeaderMob").html(result.globalTel + " (" + lblGlobalAccess + ") <b class='caret'></b>");
        $().html("<li><a href='tel:+43 0820 40 11 56 08'>+43 0820 40 11 56 08 (AT)</a></li><li><a href='tel:+32 070 35 47 72'>+32 070 35 47 72 (BE)</a></li><li><a href='tel:+33 (0)821 77 42 96'>+33 (0)821 77 42 96 (FR)</a></li><li><a href='tel:+49 30 22388599'>+49 30 22388599 (DE)</a></li><li><a href='tel:(+39) 848 390 227'>(+39) 848 390 227 (IT)</a></li><li><a href='tel:+351 707 500 302'>+351 707 500 302 (PT)</a></li><li><a href='tel:902 570 368'>902 570 368 (ES)</a></li><li><a href='tel:+41 (0)848 20 74 16'>+41 (0)848 20 74 16 (CH)</a></li><li><a href='tel:+31 (0)20 79 56 088'>+31 (0)20 79 56 088 (NL)</a></li><li><a href='tel:+44 (0)870 80 71 359'>+44 (0)870 80 71 359 (GB)</a></li><li><a href='tel:+1 646 568 4725'>+1 646 568 4725 (US)</a></li><li><a href='tel:+54 (0)11 5776 6464'>+54 (0)11 5776 6464 (AR)</a></li><li><a href='tel:+56 (0)2 341 7575'>+56 (0)2 341 7575 (CL)</a></li><li><a href='tel:+57 1 589 7744'>+57 1 589 7744 (CO)</a></li><li><a href='tel:+52 (0)55 52291500'>+52 (0)55 52291500 (MX)</a></li><li><a href='tel:+598 (0)2 9160001'>+598 (0)2 9160001 (UY)</a></li><li><a href='tel:+58 295 400 7111'>+58 295 400 7111 (VE)</a></li>");
        $(".phoneGlobal").html(result.globalTel + "");
        $(".dynamicTelephone").attr("href", "tel:" + result.globalTel).html(result.globalTel);
        $(".dynamicTelephoneHref").attr("href", "tel:" + result.globalTel);
        $(".phoneCountry").html("Spain");
        $("#telephoneContact").hide();
    }
    function changeHTMLMobile(result) {
        countryName = result.countryName != "" ? result.countryName : result.countryText;
        telephone = result.countryTel != "" ? result.countryTel : result.globalTel;
        addTelephone("a.mobileDynamicTelephone", telephone, "result.countryText", "aMobile");
        addTelephone("a.mobileDynamicTelephone", telephone, "result.countryText", "aHrefMobile");
        addTelephone(".mobileDynamicTelephoneTxt", telephone, "", "appendParam");
        addTelephone("a.mobileDynamicPhoneGlobal", result.globalTel, "result.countryText", "aMobile");
        addTelephone("a.mobileDynamicPhoneGlobalHref", result.globalTel, "result.countryText", "aHrefMobile");
        addTelephone(".mobileDynamicPhoneGlobalTxt", result.globalTel, "", "appendParam");
        addTelephone("#mobileContactTel .mobileDynamicTelephone", telephone, countryName, "mobileContactTel");
    }
    function addTelephone(selector, telephone, text, type) {
        switch (type) {
          case "header":
            $(selector).html(telephone + " (" + text + ")" + $(selector).html());
            break;

          case "appendParam":
            $(selector).html(telephone);
            break;

          case "a":
            $(selector).attr("href", "tel:" + telephone).css("white-space", "nowrap");
            break;

          case "aMobile":
            $(selector).attr("href", "tel:" + telephone.replace(/ /g, "")).html(telephone).css("white-space", "nowrap");
            break;

          case "aHrefMobile":
            $(selector).attr("href", "tel:" + telephone.replace(/ /g, "")).css("white-space", "nowrap");
            break;

          case "mobileContactTel":
            $(selector).html(text + "</br> " + '<span style="white-space: nowrap;">' + telephone + "</span>");
            break;

          default:
        }
    }
    return {
        init: init
    };
}();

$(document).ready(function() {
    dynamicTelephones.init();
});

"use strict";

var TrackEServicing = function() {
    var trackList = null;
    trackList = {
        ".js-track-cancel-desktop": [ {
            eventCategory: Globals.page_section,
            eventAction: "cancel booking",
            event: "mybookings"
        } ],
        ".js-track-eservicing-search-mobile": [ {
            eventCategory: Globals.page_section,
            eventAction: "search booking",
            event: "eservicing | search"
        } ],
        ".js-track-eservicing-personalize-mobile": [ {
            eventCategory: Globals.page_section,
            eventAction: "personalize booking",
            event: "eservicing | personalize"
        } ],
        ".js-track-eservicing-personalize-desktop": [ {
            eventCategory: Globals.page_section,
            eventAction: "modify booking",
            event: "mybookings"
        } ],
        ".js-track-cancel-mobile": [ {
            eventCategory: Globals.page_section,
            eventAction: "cancel booking",
            eventLabel: _searchData("hotelId") + " | " + _reveseDate(_searchData("fini")) + " - " + _reveseDate(_searchData("fout")) + " | " + _searchData("roomsNumber") + " | " + _searchData("numberOfAdults") + " | " + _searchData("numberOfChildren") + " | " + _searchData("numberOfBabies"),
            eventValue: _searchData("bookingTotalValue"),
            event: "eservicing | cancel"
        } ]
    };
    function _reveseDate(date) {
        var formatDefault = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "DD/MM/YYYY";
        var formatNew = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "YYYY/MM/DD";
        return moment(date, formatDefault).isValid() ? moment(date, formatDefault).format(formatNew) : "";
    }
    function _searchData(key) {
        if (typeof searchData !== "undefined") {
            return searchData[key] ? searchData[key] : "";
        }
        return "";
    }
    var events = trackList;
    return {
        events: events
    };
}();

"use strict";

var TrackHomePage = function() {
    var trackList = null;
    if (typeof pageData !== "undefined" && typeof pageData.destino !== "undefined") {}
    var events = trackList;
    return {
        events: events
    };
}();

function trackShowDetectIPOrigin(page) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "impression availability pop up",
        event: "availability | impression"
    });
}

"use strict";

var TrackOci = function() {
    var trackList = null;
    if (typeof reservationIdOci !== "undefined") {
        trackList = {
            ".js-track-checking-now": [ {
                eventCategory: Globals.page_section,
                eventAction: "Cheking Now",
                eventLabel: reservationIdOci,
                event: "OCI|Checking"
            } ],
            ".js-trackPreselectedRoom": [ {
                eventCategory: Globals.page_section,
                eventAction: "Start Checking",
                eventLabel: reservationIdOci,
                event: "OCI|YourRoom"
            } ],
            ".js-trackChooseRoom": [ {
                eventCategory: Globals.page_section,
                eventAction: "Select Another Room",
                eventLabel: reservationIdOci,
                event: "OCI|YourRoom"
            } ],
            ".js-trackCheckInTime": [ {
                eventCategory: Globals.page_section,
                eventAction: "Arrival Info",
                eventLabel: function eventLabel() {
                    var $arrivalTime = document.querySelector("#arrival_time");
                    return $arrivalTime.value;
                },
                event: "OCI|Arrival"
            } ],
            ".js-trackMoreInfPreselectedRoom": [ {
                eventCategory: Globals.page_section,
                eventAction: "Arrival Info Preselect",
                eventLabel: reservationIdOci,
                event: "OCI|Arrival"
            } ],
            "#submitminor": [ {
                eventCategory: "Checkingformanalysis",
                eventAction: "Minor Check",
                eventLabel: "Success",
                event: "OCI|Checkingformanalysis"
            } ],
            "#cancelminor": [ {
                eventCategory: "Checkingformanalysis",
                eventAction: "Minor Check",
                eventLabel: "Cancel",
                event: "OCI|Checkingformanalysis"
            } ]
        };
    }
    var events = trackList;
    return {
        events: events
    };
}();

function trackOCILogin(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Login Rewards",
        eventLabel: idreserva,
        event: "OCI|Checkingformanalysis"
    });
}

function trackOCIError(page, nacionaliti) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Error",
        eventLabel: nacionaliti,
        event: "OCI|Checkingformanalysis"
    });
}

function trackOCISuccess(page, nacionaliti) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Success",
        eventLabel: nacionaliti,
        event: "OCI|Checkingformanalysis"
    });
}

function trackOCIMinorCheck() {
    trackAnalitics.tracking({
        eventCategory: "Checkingformanalysis",
        eventAction: "Minor Check",
        eventLabel: "Cancel",
        event: "OCI|Checkingformanalysis"
    });
}

function trackOCIPreferences(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Save Preferences",
        eventLabel: idreserva,
        event: "OCI|Preferences"
    });
}

function trackOCIChangeFloor(page, Hotelid, floor) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Change Floor",
        eventLabel: Hotelid + "|" + floor,
        event: "OCI|YourRoom"
    });
}

function trackOCIModifyPreferences(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Modify Preferences",
        eventLabel: idreserva,
        event: "OCI|YourRoomp"
    });
}

function trackOCIZoomInRoom(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Zoom In Room",
        eventLabel: idreserva,
        event: "OCI|YourRoom"
    });
}

function trackOCIZoomOutRoom(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Zoom out Room",
        eventLabel: idreserva,
        event: "OCI|map"
    });
}

function trackOCIZoomMoreAbout(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "More About",
        eventLabel: idreserva,
        event: "OCI|YourRoom"
    });
}

function trackOCIProcessToChecking(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Process to Checking",
        eventLabel: idreserva,
        event: "OCI|YourRoom"
    });
}

function trackOCICheckingAnotherGuest(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Checking Another Guest",
        eventLabel: idreserva,
        event: "OCI|Confirmation"
    });
}

function trackOCISendCheckingByMail(page, idreserva) {
    trackAnalitics.tracking({
        eventCategory: page,
        eventAction: "Send checking by mail",
        eventLabel: idreserva,
        event: "OCI|Confirmation"
    });
}

function trackLogin(eventCategory, eventLabel, eventAction) {
    trackAnalitics.tracking({
        eventCategory: eventCategory,
        eventAction: eventAction,
        eventLabel: eventLabel,
        event: "event"
    });
}

"use strict";

var TrackTravelGuides = function() {
    var trackList = null;
    if (typeof pageData !== "undefined" && typeof pageData.destino !== "undefined") {
        trackList = {
            ".js-track-travel-guide-accede": [ {
                eventCategory: Globals.page_section,
                eventAction: "accede to guides",
                eventLabel: pageData.destino
            } ]
        };
    }
    var events = trackList;
    return {
        events: events
    };
}();

"use strict";

var Landings = function() {
    var pageData;
    var showNoAccessModal = false;
    var showLoginModal = false;
    var isExpiredLanding = false;
    var init = function init() {
        pageData = typeof formData != "undefined" ? formData : null;
        if (pageData && typeof pageData.isExpiredLanding != "undefined") {
            showNoAccessModal = pageData.showNoAccessModal;
            showLoginModal = pageData.showLoginModal;
            isExpiredLanding = pageData.isExpiredLanding == "true" ? true : false;
        }
        handleJavaErrors();
        handleLandingAccess();
        headerLoginMobile();
        if (window.location.href.indexOf("/mobile-app") > -1) {
            launchApptore();
        }
    };
    var headerLoginMobile = function headerLoginMobile() {
        if (!$("body").hasClass("logged")) {
            $("#header-mob-holder .btn-ico-user-nav").on("click", function(e) {
                e.preventDefault();
                $("#m-modal-login").modal("show");
            });
        } else {
            $("#header-mob-holder .btn-ico-user-nav").attr("href", "/rewards/home");
        }
    };
    var handleLandingAccess = function handleLandingAccess() {
        if (showLoginModal) {
            $("#m-modal-login").modal("show");
        } else if (showNoAccessModal && !showLoginModal) {
            $("#modal-access-denied").modal({
                backdrop: "static",
                keyboard: true,
                show: true
            });
        } else if (isExpiredLanding && !showLoginModal) {
            $("#expired-modal").modal("show");
        }
    };
    var handleJavaErrors = function handleJavaErrors() {
        var $modal = $("#modal-java-error");
        if (getURLParameter("error")) {
            $.ajax({
                url: "/booking/ajax/landing-promo/getFlowInformation.html",
                cache: false,
                async: false
            }).done(function(data) {
                if (data && data.errorMessage) {
                    console.log("result", data);
                    $modal.find(".modal-title").html(data.errorMessage);
                    $modal.modal("show");
                }
            }).fail(function(data) {
                console.log("fail get landing-promo/getFlowInformation.html", data);
            });
        }
    };
    var getURLParameter = function getURLParameter(name, url) {
        var urlT = url ? url : window.location.href;
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(urlT);
        if (results == null) {
            return null;
        } else {
            try {
                return decodeURIComponent(results[1].replace(/\+/g, " "));
            } catch (error1) {
                try {
                    return unescape(results[1].replace(/\+/g, " "));
                } catch (error2) {
                    return null;
                }
            }
        }
    };
    var launchApptore = function launchApptore() {
        var links = $(".m-group-articles").find("a");
        if (isMobile.Android() || isMobile.iOS()) {
            var selectLink = null;
            links.each(function(index, link) {
                var hostName = link.hostname;
                if (isMobile.Android() != null && hostName.indexOf("google") > 0) selectLink = link;
                if (isMobile.iOS() != null && hostName.indexOf("apple") > 0) selectLink = link;
            });
            if (selectLink) {
                $(".m-signup").hide();
                selectLink.click();
            }
        }
    };
    return {
        init: init
    };
}();

$(window).load(function() {
    if ($("body").hasClass("page-landings") || $("body").data("page") === "LandingsPage" || $(".p-landings").length) {
        Landings.init();
    }
});

"use strict";

var _slicedToArray = function() {
    function sliceIterator(arr, i) {
        var _arr = [];
        var _n = true;
        var _d = false;
        var _e = undefined;
        try {
            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
                _arr.push(_s.value);
                if (i && _arr.length === i) break;
            }
        } catch (err) {
            _d = true;
            _e = err;
        } finally {
            try {
                if (!_n && _i["return"]) _i["return"]();
            } finally {
                if (_d) throw _e;
            }
        }
        return _arr;
    }
    return function(arr, i) {
        if (Array.isArray(arr)) {
            return arr;
        } else if (Symbol.iterator in Object(arr)) {
            return sliceIterator(arr, i);
        } else {
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
    };
}();

var trackAnalitics = function() {
    var debutTraking = false;
    var init = function init(trackList) {
        return events(trackList);
    };
    var events = function events(trackList) {
        if (trackList !== null) {
            if (debutTraking) {
                console.log(trackList);
            }
            Object.entries(trackList).forEach(function(_ref) {
                var _ref2 = _slicedToArray(_ref, 2), key = _ref2[0], value = _ref2[1];
                if ($(key).length && value.length) {
                    $(document).on("click", key, function() {
                        $btn = $(this);
                        setTimeout(function() {
                            if (_testForm($btn)) parseTrack(key, trackList[key]);
                        }, 300);
                    });
                }
            });
        }
    };
    function _testForm(btn) {
        if (btn.attr("type") == "submit") {
            var $form = typeof btn.data("form") !== "undefined" ? $("#" + btn.data("form")) : btn.closest("form");
            if ($form.length) {
                if ($form.find(".has-error").length) return false;
            }
        }
        return true;
    }
    function parseTrack(selector, data) {
        return data.forEach(function(element) {
            var elemnTrack = {};
            Object.entries(element).forEach(function(_ref3) {
                var _ref4 = _slicedToArray(_ref3, 2), key = _ref4[0], value = _ref4[1];
                elemnTrack[key] = typeof value === "function" ? value() : value;
            });
            track(elemnTrack);
        });
    }
    function track(data) {
        try {
            if (debutTraking) {
                console.log("---- TRACKING ----");
                console.log(data);
                console.log("---- FIN TRACK ----");
            }
            utag.link(data);
        } catch (err) {
            utagError = err;
        }
    }
    return {
        init: init,
        tracking: track
    };
}();

$(document).ready(function() {
    if (typeof TrackOci !== "undefined") trackAnalitics.init(TrackOci.events);
    if (typeof TrackEServicing !== "undefined") trackAnalitics.init(TrackEServicing.events);
    if (typeof TrackTravelGuides !== "undefined") trackAnalitics.init(TrackTravelGuides.events);
    if (typeof TrackHomePage !== "undefined") trackAnalitics.init(TrackHomePage.events);
});